/**
 * Created by Danny on 12/15/16.
 */
angular.module('freqCultureApp', [
    'ngAnimate',
    'ngCookies',
    'ngResource',
    'ui.router',
    'ngSanitize',
    'ngTouch',
    'ng-fastclick',
    'slickCarousel',
    'plangular'
]);

/**
 * Created by Danny on 11/6/16.
 */
angular.module('freqCultureApp')
  .service('ContentService', function($http, $q) {
    var _siteContent,
      _selectedContent;


    var setContent = function(content, callback) {
      _siteContent = content;
      if(callback) {
        callback(content);
      }
    }

    var getContent = function(content) {
      var deferred = $q.defer();
      if(!_siteContent) {
        initContent(function(content) {
          console.log('content: ', content);
          deferred.resolve(content);
        })
      } else {
        deferred.resolve(_siteContent);
      }

      return deferred.promise;
    }

    var initContent = function(callback) {
      $http.get('api/siteContent/allContent')
        .then(function(results){
          setContent(results.data, callback);
        })
    }

    function formatContent(content, callback) {
      var formattedContent = [];
        console.log('content: ', content);
      //for(var key in content) {
      //  angular.forEach(content[key], function (item) {
      //    item.stateName = (item.stateName || item.url).toLowerCase();
      //    item.urlPrefix = '/' + key + '/' + item.url;
      //    item.href = item.url;
      //    if(key == 'articles') {
      //      item.src = 'views/view.article.html';
      //    } else if(key == 'creator-series') {
      //      item.src = "views/view.creator-series.html";
      //    }
      //    formattedContent.push(item);
      //  });
      //}
      setContent(formattedContent, callback);
    }

    var setSelected = function(content) {
      _selectedContent = content;
    }

    var getSelected = function() {
      return _selectedContent;
    }

    var findContent = function(selectedHref) {
      var deferred = $q.defer();
      if(!_selectedContent) {
        initContent(function(content) {
          for(var c=0;c<content.length;c++) {
            if(content[c].href == selectedHref) {
              return deferred.resolve(content[c]);
            }
          }
        })
      } else {
        return deferred.resolve(_selectedContent);
      }
      return deferred.promise;
    }



      var newContent = function(newContent) {
          return $http({
              method : 'POST',
              url : 'api/siteContent/',
              data : newContent
          })
      }

      var updateContent = function(content) {
          return $http({
              method : 'PUT',
              url : 'api/siteContent/' + content._id,
              data : content
          })
      }

      var deleteContent = function(content) {
          return $http({
              method : 'DELETE',
              url : 'api/siteContent/' + content._id
          })
      }

    return {
      setContent : setContent,
      getContent : getContent,
      initContent : initContent,
      setSelected : setSelected,
      getSelected : getSelected,
      findContent : findContent,
      newContent : newContent,
      updateContent : updateContent,
      deleteContent : deleteContent
    }
  })

/**
 * Created by Danny on 11/27/16.
 */
angular.module('freqCultureApp')
  .controller('ViewContentCtrl', function($scope, ContentService, $stateParams, $window) {


    $scope.selectedContent = ContentService.getSelected();

    if(!$scope.selectedContent) {
      ContentService.findContent($stateParams.contentHref)
        .then(function(selected) {
          $scope.selectedContent = selected;
          $scope.selectedContent.publishDate = new Date($scope.selectedContent.date);
        })
    } else {
      $scope.selectedContent.publishDate = new Date($scope.selectedContent.date);
    }
  })

/**
 * Created by Danny on 12/19/16.
 */
angular.module('freqCultureApp')
    .controller('MainSectionCtrl', function($scope, sectionTitle, sectionSubTitle, contentType) {
        console.log('main section');
        $scope.sectionTitle = sectionTitle;
        $scope.sectionSubTitle = sectionSubTitle;
        $scope.contentType = contentType;
    })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/view.content.html',
    '<section class="section-with-top-nav container"><content-header selected-content="selectedContent"></content-header><div class="content-section" ng-repeat="contentSection in selectedContent.contentSections"><img class="content-image" ng-if="contentSection.headerImage " ng-src="{{contentSection.headerImage}}"><p class="site-body-text center-block" ng-class="{\'indent-paragraph\' : $first, \'sub-paragraph\' : !$first}">{{contentSection.content}}</p><img class="content-image" ng-if="contentSection.footerImage " ng-src="{{contentSection.footerImage}}"></div></section>');
}]);

/**
 * Created by Danny on 11/7/16.
 */
angular.module('freqCultureApp')
  .controller('HomeCtrl', function($scope, ContentService, $state) {

    $scope.goTo = function(state, stateParams) {
      $state.go(state, stateParams);
    }
  })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/view.admin.html',
    '<section class="section-with-top-nav fluid-container"><h1 class="display-2">Admin Panel</h1><div class="fluid-container admin-view" ng-class="{\'right-side\' : selectedView != \'menu\'}"><div class="admin-section"><h1 class="site-body-title">Admin Menu</h1><button class="site-button" ng-click="newContent()"><h1 class="button">Create Content</h1><div class="button-cover"></div></button><ul class="admin-content-list"><li ng-repeat="content in siteContent" class="content-item"><h1 class="site-body-title">Title: {{content.title}}</h1><h2 class="body-2">Published : {{content.publishedDate | date : \'EEEE, MMMM d, y\'}}</h2><div class="{{content.contentType}}-content contentType">{{content.contentType}}</div><ul class="content-buttons" ng-if="!showConfirm"><li ng-click="editContent(content)"><i class="fa fa-pencil"></i><h1 class="label">Edit</h1></li><li ng-click="confirm(true)"><i class="fa fa-trash-o"></i><h1 class="label">Delete</h1></li></ul><ul class="content-buttons" ng-if="showConfirm"><li ng-click="confirmDelete(content, $index)"><h1 class="label">Delete</h1></li><li ng-click="confirm(false)"><h1 class="label">Cancel</h1></li></ul></li></ul></div><div class="admin-section"><h1 class="site-body-title text-uppercase">{{selectedView}} Content</h1><div class="admin-buttons"><div ng-click="cancel()" class="red-button"><h1 class="site-body-title">Cancel</h1></div><div ng-click="save()"><h1 class="site-body-title">Save</h1></div></div><form><div class="form-group col-xs-12 col-sm-4"><label for="contentTitle">Title</label><input type="text" class="form-control" id="contentTitle" placeholder="Title" ng-model="selectedContent.title" ng-blur="formatUrl()"></div><div class="form-group col-xs-12 col-sm-4"><label for="contentSubTitle">Sub Title</label><input type="text" class="form-control" id="contentSubTitle" placeholder="Sub-title" ng-model="selectedContent.subTitle"></div><div class="form-group col-xs-12 col-sm-4"><label for="contentAuthor">Author</label><input type="text" class="form-control" id="contentAuthor" placeholder="Author" ng-model="selectedContent.author"></div><div class="form-group col-xs-10 col-sm-8"><label>Type of Content</label><ul class="admin-list"><li ng-class="{\'selected-type\' : selectedContent.contentType == \'news\'}" ng-click="selectedContent.contentType = \'news\'"><h1 class="site-list-item">News</h1></li><li ng-class="{\'selected-type\' : selectedContent.contentType == \'features\'}" ng-click="selectedContent.contentType = \'features\'"><h1 class="site-list-item">Features</h1></li><li ng-class="{\'selected-type\' : selectedContent.contentType == \'commentary\'}" ng-click="selectedContent.contentType = \'commentary\'"><h1 class="site-list-item">Commentary</h1></li><li ng-class="{\'selected-type\' : selectedContent.contentType == \'sound\'}" ng-click="selectedContent.contentType = \'sound\'"><h1 class="site-list-item">Sound</h1></li><li ng-class="{\'selected-type\' : selectedContent.contentType == \'film\'}" ng-click="selectedContent.contentType = \'film\'"><h1 class="site-list-item">Film</h1></li></ul></div><div class="form-group col-xs-12 col-sm-4"><label class="sr-only" for="contentUrl">Content URL</label><div class="input-group"><div class="input-group-addon">/{{selectedContent.contentType}}/</div><input type="text" class="form-control" id="contentUrl" placeholder="URL" ng-disabled="true" ng-model="selectedContent.url"></div></div><div class="form-group col-xs-12 col-sm-4"><label for="contentHeaderImage">Header Image</label><input type="text" class="form-control" id="contentHeaderImage" placeholder="URL for HeaderImage" ng-model="selectedContent.headerImage"></div><div class="form-group col-xs-12 col-sm-2"><label for="contentPublishedDate">Published Date</label><input type="text" class="form-control" id="contentPublishedDate" placeholder="MM/DD/YYYY" ng-model="selectedContent.publishedDate"></div><div class="form-group col-xs-12 col-sm-6"><label>Tags</label><ul class="input-list"><li ng-repeat="tag in selectedContent.tags track by $index"><div class="input-group col-xs-6"><input type="text" class="form-control" placeholder="Tag" ng-model="selectedContent[\'tags\'][$index]"> <span class="input-group-addon delete" ng-click="removeItem(\'tags\', $index)"><i class="fa fa-trash"></i></span></div></li></ul><button class="site-button small" ng-click="addItem(\'tag\', \'tags\')"><h1 class="button">Add Tag</h1><div class="button-cover"></div></button></div><div class="form-group col-xs-12 col-sm-6"><label>Quotes</label><ul class="input-list"><li ng-repeat="quote in selectedContent.quotes track by $index"><div class="input-group col-xs-10"><input type="text" class="form-control" placeholder="Quote" ng-model="selectedContent[\'quotes\'][$index]"> <span class="input-group-addon delete" ng-click="removeItem(\'quotes\', $index)"><i class="fa fa-trash"></i></span></div></li></ul><button class="site-button small" ng-click="addItem(\'quote\', \'quotes\')"><h1 class="button">Add Quote</h1><div class="button-cover"></div></button></div><div class="form-group col-xs-12 col-sm-6"><label>Audio Links</label><ul class="input-list"><li ng-repeat="audio in selectedContent.audioUrls track by $index"><div class="input-group col-xs-10"><input type="text" class="form-control" placeholder="Audio URL" ng-model="selectedContent[\'audioUrls\'][$index]"> <span class="input-group-addon delete" ng-click="removeItem(\'audioUrls\', $index)"><i class="fa fa-trash"></i></span></div></li></ul><button class="site-button small" ng-click="addItem(\'audio\', \'audioUrls\')"><h1 class="button">Add URL</h1><div class="button-cover"></div></button></div><div class="form-group col-xs-12"><div class="form-group col-xs-6 col-sm-5"><label>Facebook</label><input type="text" class="form-control" placeholder="Facebook" ng-model="selectedContent.socialMedia.facebook"></div><div class="form-group col-xs-6 col-sm-5"><label>Twitter</label><input type="text" class="form-control" placeholder="Twitter" ng-model="selectedContent.socialMedia.twitter"></div><div class="form-group col-xs-6 col-sm-5"><label>Instagram</label><input type="text" class="form-control" placeholder="Instagram" ng-model="selectedContent.socialMedia.instagram"></div><div class="form-group col-xs-6 col-sm-5"><label>Soundcloud</label><input type="text" class="form-control" placeholder="Soundcloud" ng-model="selectedContent.socialMedia.soundcloud"></div></div><div class="form-group col-xs-12"><div class="col-xs-12 col-sm-4"><label>Description</label><textarea rows="2" class="form-control" placeholder="Description (Keep it short. i.e, 130 characters)" ng-model="selectedContent.description"></textarea></div></div><div class="form-group col-xs-12"><div class="col-xs-12"><label>Sections</label><button class="site-button small" ng-click="addItem(\'section\', \'contentSections\')"><h1 class="button">Add Section</h1><div class="button-cover"></div></button></div><div class="col-xs-12 col-sm-10 col-sm-offset-1 site-section" ng-repeat="section in selectedContent.contentSections track by $index"><div class="col-xs-12 col-sm-4"><div class="input-group col-xs-10"><input type="text" class="form-control" placeholder="Header Image" ng-model="selectedContent.contentSections[$index].headerImage"> <span class="input-group-addon delete"><i class="fa fa-trash"></i></span></div><div class="input-group col-xs-10"><input type="text" class="form-control" placeholder="Footer Image" ng-model="selectedContent.contentSections[$index].footerImage"> <span class="input-group-addon delete"><i class="fa fa-trash"></i></span></div></div><div class="col-xs-12 col-sm-8"><textarea class="form-control" rows="4" placeholder="Content (separate by paragraph)" ng-model="selectedContent.contentSections[$index].content"></textarea></div><i class="fa fa-trash" id="deleteBtn" ng-click="removeItem(\'contentSections\', $index)"></i></div></div></form></div></div></section>');
}]);

/**
 * Created by Danny on 12/18/16.
 */
angular.module('freqCultureApp')
    .controller('AdminCtrl', function($scope, $timeout, ContentService) {
        console.log('scope: ', $scope);

        $scope.selectedView = 'menu';
        $scope.loading = false;

        var contentFields = [
            'author',
            'title',
            'contentType',
            'subTitle',
            'url',
            'headerImage',
            'tags',
            'publishedDate',
            'description',
            'contentSections',
            'quotes',
            'audioUrls',
            'socialMedia',
            'shareUrl'
        ]

        ContentService.getContent()
            .then(function(content) {
                $scope.siteContent = content;
            })

        //$timeout(function() {
        //    $scope.selectedView = 'edit';
        //}, 2000)

        $scope.changeView = function() {
            if($scope.selectedView == 'edit') $scope.selectedView = 'menu';
            else $scope.selectedView = 'edit';
        }

        $scope.selectedContent = {};

        $scope.newContent = function() {
            $scope.selectedView = 'create';
            initNewContent()
        }

        $scope.editContent = function(content) {
            $scope.selectedContent = content;
            $scope.selectedView = 'edit';
        }

        $scope.cancel = function() {
            $scope.selectedView = 'menu';
        }

        function initNewContent() {
            contentFields.map(function(field) {
                $scope.selectedContent[field] = null;
            })
        }

        var newItems = {
            'tag' : '',
            'quote' : '',
            'audio' : '',
            'section' : null

        }

        $scope.addItem = function(itemType, key) {
            var newItem = newItems[itemType];
            if(!$scope.selectedContent[key]){
                $scope.selectedContent[key] = [];
            }
            $scope.selectedContent[key].push(newItem);
            console.log('new item: ', newItem);
        }

        $scope.removeItem = function(key, index) {
            $scope.selectedContent[key].splice(index, 1);
        }

        $scope.showConfirm = false;

        $scope.confirm = function(confirm) {
            $scope.showConfirm = confirm;
        }

        $scope.confirmDelete = function(content, index) {

            if(!$scope.loading) {
                $scope.loading = true;
                ContentService.deleteContent(content)
                    .then(function(res){
                        $scope.selectedView = 'menu';
                        $scope.siteContent.splice(index, 1);
                    })
                    .finally(function() {
                        $scope.loading = false;
                    })
            }
        }


        $scope.save = function() {
            if(!$scope.loading) {
                $scope.loading = true;
                console.log('selected', $scope.selectedContent);
                $scope.loading = false;
                if(!$scope.selectedContent._id) {
                    ContentService.newContent($scope.selectedContent)
                        .then(function(res) {
                            console.log('res: ', res);
                        })
                        .catch(function(err) {
                            console.log('err: ', err);
                        })
                        .finally(function() {
                            $scope.loading = false;
                            $scope.selectedView = 'menu';
                        })
                } else {
                    ContentService.updateContent($scope.selectedContent)
                        .then(function(res) {
                            console.log('res: ', res);
                        })
                        .catch(function(err) {
                            console.log('err: ', err);
                        })
                        .finally(function() {
                            $scope.loading = false;
                            $scope.selectedView = 'menu';
                        })
                }
            }

        }

        $scope.formatUrl = function() {
            if($scope.selectedContent.title) {
                $scope.selectedContent.url = $scope.selectedContent.title.toLowerCase().replace(/\s/g, "_");
            }
        }

    })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/site-footer.html',
    '<footer class="footer"><div class="footer-container"><nav class="footer-links"><div class="links-container"><h1 class="site-list-title">Site</h1><ul><li><a ui-sref="home" class="site-list-item">Home</a></li><li><a ui-sref="news" class="site-list-item">News</a></li><li><a ui-sref="features" class="site-list-item">Features</a></li><li><a ui-sref="commentary" class="site-list-item">Commentary</a></li><li><a ui-sref="Sound" class="site-list-item">Sound</a></li><li><a ui-sref="film" class="site-list-item">Film</a></li></ul></div><div class="links-container"><h1 class="site-list-title">About</h1><ul><li ui-sref="about" class="site-list-item"><a>About</a></li><li><a href="mailto:Danny@FrequencyCulture.com, Ben@FrequencyCulture" class="site-list-item">Contact</a></li><li><a href="mailto:Danny@FrequencyCulture.com, Ben@FrequencyCulture" class="site-list-item">Submissions</a></li><li><a href="mailto:Danny@FrequencyCulture.com, Ben@FrequencyCulture" class="site-list-item">Advertise</a></li></ul></div><div class="social-footer"><ul><li><i class="fa fa-facebook"></i></li><li><i class="fa fa-twitter"></i></li><li><i class="fa fa-soundcloud"></i></li></ul></div></nav><div class="bottom-footer"><h2 class="label">&copy; 2016 Frequency Culture</h2></div></div></footer>');
}]);

/**
 * Created by Danny on 11/6/16.
 */
angular.module('freqCultureApp')
  .directive('siteFooter', function() {
    return {
      restrict : 'E',
      templateUrl : 'partials/site-footer.html'
    }
  })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/site-audio.html',
    '<div class="site-audio"><div class="navbar navbar-default navbar-fixed-bottom" role="navigation"><div class="container-fluid" plangular="{{trackUrl}}" ng-if="trackUrl"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed button-default" data-toggle="collapse" data-target="#audio-player"><i class="fa fa-music"></i></button></div><div class="full-controls container hidden-xs"><ul class="audio-controls"><li><i class="fa fa-backward"></i></li><li ng-click="playPause()"><i class="fa fa-play" ng-if="player.playing !== track.src"></i> <i class="fa fa-pause" ng-if="player.playing == track.src"></i></li><li><i class="fa fa-forward"></i></li></ul><img ng-src="{{track.artwork_url}}" class="image-shadow audio-image" image-shadow><ul class="audio-info-full"><li><h1 class="label">Artist : <span>{{track.user.username}}</span></h1></li><li><h1 class="label">Track : <span>{{track.title}}</span></h1></li></ul></div><div class="hidden-sm hidden-md hidden-lg mini-controls container-fluid"><ul class="audio-controls"><li><i class="fa fa-backward"></i></li><li ng-click="playPause()"><i class="fa fa-play" ng-if="player.playing !== track.src"></i> <i class="fa fa-pause" ng-if="player.playing == track.src"></i></li><li><i class="fa fa-forward"></i></li></ul></div><div class="collapse navbar-collapse" id="audio-player"><ul class="nav navbar-nav container hidden-md hidden-lg hidden-sm mini-audio"><div class="audio-info"><img ng-src="{{track.artwork_url}}" class="image-shadow audio-image" image-shadow><ul><li><h1 class="label">Artist : <span>{{track.user.username}}</span></h1></li><li><h1 class="label">Title : <span>{{track.title}}</span></h1></li></ul></div></ul></div></div></div></div>');
}]);

/**
 * Created by Danny on 11/6/16.
 */

angular.module('freqCultureApp')
  .directive('siteAudio', function() {
    return {
      restrict : 'E',
      templateUrl : 'partials/site-audio.html',
      link : function(scope, elem, attrs) {

        var clientId = 'oerXf6nBcDu5CoNdaOrIGutVCKXPYvSB';
        scope.trackUrl = 'https://soundcloud.com/itzaia/mix-machine-297-16-nov-2016-with-itzaia';

        SC.initialize({
          client_id: clientId
        });
        SC.resolve('https://soundcloud.com/itzaia/mix-machine-297-16-nov-2016-with-itzaia')
          .then(function(track) {
            console.log('track: ', track);
          })
      }
    }
  })


angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/sidemenu.html',
    '<nav class="mobile-menu" ng-class="{\'show-menu\' : showMenu}"><div class="nav-container"><ul><h1 class="site-list-title">Site</h1><li><a ui-sref="news" class="site-list-item">News</a></li><li><a ui-sref="features" class="site-list-item">Features</a></li><li><a ui-sref="commentary" class="site-list-item">Commentary</a></li><li><a ui-sref="Sound" class="site-list-item">Sound</a></li><li><a ui-sref="film" class="site-list-item">Film</a></li></ul><ul><h1 class="site-list-title">About</h1><li><a href="" class="site-list-item">About</a></li><li><a href="mailto:Danny@FrequencyCulture.com, Ben@FrequencyCulture" class="site-list-item">Contact</a></li><li><a href="mailto:Danny@FrequencyCulture.com, Ben@FrequencyCulture" class="site-list-item">Submissions</a></li><li><a href="mailto:Danny@FrequencyCulture.com, Ben@FrequencyCulture" class="site-list-item">Advertise</a></li></ul></div><div class="social-container"><ul><li><i class="fa fa-facebook"></i></li><li><i class="fa fa-twitter"></i></li><li><i class="fa fa-soundcloud"></i></li></ul></div></nav>');
}]);

/**
 * Created by Danny on 11/5/16.
 */
angular.module('freqCultureApp')
  .directive('sidemenu', function($rootScope) {
    return {
      scope: 'E',
      templateUrl : 'partials/sidemenu.html',
      link : function(scope, elem, attrs) {

        scope.showMenu = false;
        scope.toggleLinks = function() {
          var link = document.querySelector('.mobile-menu').querySelectorAll('li');
          for (var i = 0; i < link.length; i++) {
            link[i].classList.toggle('active');
          }
        }
        $rootScope.$on("$stateChangeSuccess", function(event, toState) {
          if(scope.showMenu) {
            scope.toggleLinks()
            scope.showMenu = false;
          }
        });
      }
    }
  })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/section-header.html',
    '<header class="section-header" id="sectionHeader"><img src="../images/frequency_culture_logo.svg" class="logo"><ul class="header-menu"><li ng-click="goTo(\'news\')" ng-class="{\'active-link\' : isActive(\'news\')}"><h1 class="title">News</h1></li><li ng-click="goTo(\'features\')" ng-class="{\'active-link\' : isActive(\'features\')}"><h1 class="title">Features</h1></li><li ng-click="goTo(\'commentary\')" ng-class="{\'active-link\' : isActive(\'commentary\')}"><h1 class="title">Commentary</h1></li><li ng-click="goTo(\'film\')" ng-class="{\'active-link\' : isActive(\'film\')}"><h1 class="title">Film</h1></li><li ng-click="goTo(\'sound\')" ng-class="{\'active-link\' : isActive(\'sound\')}"><h1 class="title">Sound</h1></li></ul></header>');
}]);

/**
 * Created by Danny on 11/8/16.
 */
angular.module('freqCultureApp')
  .directive('sectionHeader', function($state, $window, $rootScope) {
    return {
      restrict : 'E',
      templateUrl : 'partials/section-header.html',
      link : function(scope, elem, attrs) {
        //scope.headerStyle = {
        //  'background-repeat' : 'no-repeat',
        //  'background-position' : 'center',
        //  'background-size' : 'cover'
        //
        //};
        //scope.state = $state;
        //var windowWidth = $window.innerWidth,
        //  stateName;
        //
        //// In case of screen resizes, make sure we use correct background image
        //angular.element($window).bind('resize', function () {
        //  windowWidth = $window.innerWidth;
        //  if(stateName != 'home') getHeaderImage();
        //});
        //
        //$rootScope.$on("$stateChangeSuccess", function(event, toState) {
        //  stateName = toState.name;
        //  if(stateName != 'home') getHeaderImage();
        //});
        //function getHeaderImage() {
        //  var imageLocation = stateName + '-header.png';
        //  if(windowWidth < 768) imageLocation = 'mobile-' + imageLocation;
        //  imageLocation = 'url(../images/' + imageLocation + ')';
        //  scope.headerStyle['background-image'] = imageLocation;
        //}
        scope.isActive = function(state) {
          return $state.current.name == state;
        }
        scope.goTo = function(state) {
          $state.go(state);
        }
      }
    }
  })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/navbar.html',
    '<div class="header"><nav class="navbar navbar-default navbar-inverse navbar-fixed-top main-navbar" role="navigation" ng-class="{\'visible-nav\' : showNavbar}"><div class="container"><div class="menu-logo hidden-xs" ng-click="goTo(\'home\')"><img src="../images/frequency_culture_title.svg"></div><ul class="full-nav hidden-xs"><li ng-click="goTo(\'news\')" ng-class="{\'active-link\' : isActive(\'news\')}" class="navbar-link"><h1>News</h1></li><li ng-click="goTo(\'features\')" class="navbar-link" ng-class="{\'active-link\' : isActive(\'features\')}"><h1>Features</h1></li><li ng-click="goTo(\'commentary\')" class="navbar-link" ng-class="{\'active-link\' : isActive(\'commentary\')}"><h1>Commentary</h1></li><li ng-click="goTo(\'sound\')" class="navbar-link" ng-class="{\'active-link\' : isActive(\'sound\')}"><h1>Sound</h1></li><li ng-click="goTo(\'film\')" class="navbar-link" ng-class="{\'active-link\' : isActive(\'film\')}"><h1>Film</h1></li></ul><div class="visible-xs mobile-navbar"><img src="../images/frequency_culture_title.svg" ng-click="goTo(\'home\')"><hamburger-menu state="showMenu" ng-click="toggleLinks()"></hamburger-menu></div></div></nav></div>');
}]);

/**
 * Created by Danny on 10/10/16.
 */
angular.module('freqCultureApp')
  .directive('navbar', function($window, $rootScope, $state, $timeout) {
    return {
      scope: 'E',
      templateUrl : 'partials/navbar.html',
      link : function(scope, elem, attrs) {

        /*
         Always Show Navbar on mobile screens

         Monitor Width in case of screen resizers!

         Hide navbar on home view non-mobile
          */
        scope.state = $state;

        var windowWidth = $window.innerWidth;
        scope.showNavbar = true;

        angular.element($window).bind('resize', function () {
          windowWidth = $window.innerWidth;
          scope.showNavbar = (windowWidth < 768);
          if(scope.state.current.name == 'home'&& windowWidth >= 768 ) watchHomeScroll();

        });
        $rootScope.$on("$stateChangeSuccess", function(event, toState) {
          if(windowWidth < 768) {
            scope.showNavbar = true;
          } else {
            scope.showNavbar = (toState.name !== 'home' && windowWidth >= 768);
          }
          if(toState.name == 'home' && windowWidth >= 768) watchHomeScroll()
          else angular.element($window).unbind('scroll');
        });

        scope.goTo = function(state) {
          $state.go(state);
        }

        var headerHeight;
        function watchHomeScroll() {
          $timeout(function() {
            headerHeight = document.getElementById('sectionHeader').clientHeight;
          }, 100);

          angular.element($window).bind("scroll", function(e) {
            scope.$apply(function() {
              scope.showNavbar = ($window.scrollY > headerHeight)
            });
          })
        }

        scope.isActive = function(state) {
          return $state.current.name == state;
        }
      }
    }
  })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/main-section.partial.html',
    '<section class="section-with-top-nav container"><h1 class="display-2">{{sectionTitle}}</h1><h2 class="subhead-1">{{sectionSubTitle}}</h2><content-container content-type="{{contentType}}"></content-container></section>');
}]);

/**
 * Created by Danny on 11/6/16.
 */
angular.module('freqCultureApp')
  .directive('imageShadow', function() {
    return {
      restrict : 'A',
      link : function(scope, elem, attrs) {
        var img = elem[0];
        var style;
        var imgSrc;

        elem.bind('error', function() {
          attrs.$set('src', '../images/logo-backup.png');
          imgSrc = '../images/logo-backup.png';
        })

        attrs.$observe('src', function(value) {
          imgSrc = attrs.src;
          if(imgSrc != '../images/logo-backup.png') addShadow();
        })

        function addShadow() {
          var container = document.createElement('div');
          container.className = 'image-shadow-container image-shadow';
          container.id = "image-shadow-0";
          img.classList.remove('image-shadow');
          img.parentNode.insertBefore(container, img);
          container.appendChild(img);
          style = "#image-shadow-0"+"::after {"+
            "  background-image: url('"+imgSrc+"');"+
            "  content: '';"+
            "}";
          var $style = document.createElement("style");
          $style.appendChild(document.createTextNode(style));
          document.head.appendChild($style);
        }
      }
    }
  })

/**
 * Created by Danny on 11/8/16.
 */
angular.module('freqCultureApp')
  .directive('hamburgerMenu', function() {
    return {
      restrict: 'E',
      scope: {
        state: '='
      },
      templateUrl: 'partials/hamburger-menu.html',
      link: function($scope, $element, $attrs) {

        /**
         * @ngdoc object
         * @name toggleState
         * @methodOf ngHamburger.directive:hamburgerToggle
         * @description Toggles two way bound model.
         */
        $scope.toggleState = function() {
          return $scope.state = !$scope.state;
        };
      }
    };
  })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/home.html',
    '<section-header class="hidden-xs"></section-header><section class="section-with-top-nav container"><content-container content-type="home"></content-container></section>');
}]);

/**
 * Created by Danny on 11/28/16.
 */
angular.module('freqCultureApp')
  .directive('contentHeader', function() {
    return {
      restrict : 'E',
      templateUrl : 'partials/content-header.html',
      scope : {
        selectedContent : '='
      },
      link : function(scope, elem, attrs) {
      }
    }
  })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/hamburger-menu.html',
    '<div class="material-design-hamburger" ng-click="toggleState()"><button class="material-design-hamburger__icon"><span class="material-design-hamburger__layer" ng-class="\'material-design-hamburger__icon--\' + (state ? \'to\' : \'from\') + \'-arrow\'"></span></button></div>');
}]);

/**
 * Created by Danny on 11/22/16.
 */
angular.module('freqCultureApp')
  .directive('contentContainer', function(ContentService, $rootScope,
                                          $timeout, $state) {
    return {
      restrict : 'E',
      scope : {
        contentType : '@'
      },
      templateUrl : 'partials/content-container.html',
      link : function(scope, elem, attrs) {
        ContentService.getContent()
          .then(function(content) {
            buildContent(content)
          })

        //scope.showHero = false;
        //$timeout(function() {
        //  console.log('show hero!');
        //  scope.showHero = true;
        //},100);
          console.log('scope: ', scope.contentType);
        function buildContent(allContent) {
          if(scope.contentType == 'home') {
            scope.content = allContent;
            buildHero();
          } else {
            scope.content = [];
            for(var c=0;c<allContent.length;c++) {
              if(allContent[c].contentType == scope.contentType) {
                scope.content.push(allContent[c])
              }
            }
            buildHero();
          }
        }


        function buildHero() {
          scope.heroContent = [];
          var limit = 3;
          if(scope.content.length < 3) {
            limit = scope.content.length;
          }
          for(var c=0;c<limit;c++) {
            scope.heroContent.push(scope.content[c]);
          }
          scope.showHero = (scope.heroContent.length > 0)
        }

        $rootScope.$on("$stateChangeStart", function() {
          scope.showHero = false;
        })

        $rootScope.$on("$stateChangeSuccess", function() {
          $timeout(function() {
            console.log('show hero!');
            scope.showHero = true;
          },200)
        })

        scope.goTo = function(content) {
            console.log('content: ', content);
          if(content.class == 'creator-series') {
            content.class = 'view-creator-series'
          }
          ContentService.setSelected(content);
          $state.go('content', {contentType: content.contentType, contentUrl : content.url})
        }
      }

    }
  })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/content-header.html',
    '<header class="content-header"><h1 class="display-2">{{selectedContent.title}}</h1><h1 class="subhead-2" ng-if="selectedContent.author">By {{selectedContent.author}}</h1><div class="header-image" ng-style="{\'background-image\' : \'url(\' + selectedContent.headerImage + \')\'}"></div><ul class="header-info"><li><h2 class="text-capitalize subhead-1">{{selectedContent.contentType}}</h2></li><li><h2 class="caption">{{selectedContent.publishedDate | date : \'EEEE, MMMM d, y\'}}</h2></li></ul></header>');
}]);

/**
 * Created by Danny on 12/15/16.
 */
'use strict';
angular.module('freqCultureApp')
    .config(function ($locationProvider, $stateProvider,  $urlRouterProvider,
                      $urlMatcherFactoryProvider) {

        $urlMatcherFactoryProvider.caseInsensitive(true);
        $urlMatcherFactoryProvider.strictMode(false);
        $urlRouterProvider.otherwise('/');

        $stateProvider
            .state('home', {
                url : '/',
                controller : 'HomeCtrl',
                templateUrl : 'partials/home.html'
            })

            .state('news', {
                url : '/news',
                controller : 'MainSectionCtrl',
                templateUrl : 'partials/main-section.partial.html',
                resolve : {
                    sectionTitle : function() {
                        return 'News';
                    },
                    sectionSubTitle : function() {
                        return 'News section'
                    },
                    contentType : function() {
                        return 'news'
                    }
                }
            })


            .state('features', {
                url : '/features',
                controller : 'MainSectionCtrl',
                templateUrl : 'partials/main-section.partial.html',
                resolve : {
                    sectionTitle : function() {
                        return 'Features';
                    },
                    sectionSubTitle : function() {
                        return 'Features section'
                    },
                    contentType : function() {
                        return 'features'
                    }
                }
            })

            .state('commentary', {
                url : '/commentary',
                controller : 'MainSectionCtrl',
                templateUrl : 'partials/main-section.partial.html',
                resolve : {
                    sectionTitle : function() {
                        return 'Commentary';
                    },
                    sectionSubTitle : function() {
                        return 'Commentary section'
                    },
                    contentType : function() {
                        return 'commentary'
                    }
                }
            })

            .state('sound', {
                url : '/sound',
                controller : 'MainSectionCtrl',
                templateUrl : 'partials/main-section.partial.html',
                resolve : {
                    sectionTitle : function() {
                        return 'Sound';
                    },
                    sectionSubTitle : function() {
                        return 'Sound section'
                    },
                    contentType : function() {
                        return 'sound'
                    }
                }
            })

            .state('film', {
                url : '/film',
                controller : 'MainSectionCtrl',
                templateUrl : 'partials/main-section.partial.html',
                resolve : {
                    sectionTitle : function() {
                        return 'Film';
                    },
                    sectionSubTitle : function() {
                        return 'Film section'
                    },
                    contentType : function() {
                        return 'film'
                    }
                }
            })

            .state('admin', {
                url : '/admin',
                templateUrl : 'partials/view.admin.html',
                controller : 'AdminCtrl'
            })

            .state('about', {
                url : '/about',
                templateUrl : 'partials/about.html'
            })



            .state('content', {
                url : '/:contentType/:contentUrl',
                templateUrl : 'partials/view.content.html',
                controller : 'ViewContentCtrl'
            })


        $locationProvider.html5Mode(true).hashPrefix('!');

    });

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/content-container.html',
    '<section class="content-container"><div class="hero-container"><slick infinite="true" slides-to-show="1" slides-to-scroll="1" arrows="false" autoplay="true" class="col-xs-12 hero-content" pause-on-hover="true" autoplay-speed="3000" ng-class="{\'show-hero\' : showHero}"><div class="hero-slide" ng-repeat="heroItem in heroContent track by $index" ng-style="{\'background-image\' : \'url(\' + heroItem.headerImage + \')\'}" ng-click="goTo(heroItem)"><div class="hero-footer"><div class="hero-info"><h1>{{heroItem.title}}</h1><p class="site-body-text">{{heroItem.subTitle}}</p></div><ul><li>Read Now</li><li class="{{heroItem.contentType}}-content">{{heroItem.contentType}}</li></ul></div></div></slick></div><div ng-repeat="subContent in content track by $index" class="sub-content col-xs-12 col-md-6" ng-style="{\'background-image\' : \'url(\' +subContent.headerImage + \')\'}" ng-if="$index > 2" ng-click="goTo(subContent)"><div class="content-footer"><div class="content-info"><h1>{{subContent.title}}</h1></div><ul><li>Read Now</li><li class="{{subContent.contentType}}-content">{{subContent.contentType}}</li></ul></div></div></section>');
}]);

/**
 * Created by Danny on 12/15/16.
 */
angular.module('freqCultureApp')
    .config(function(plangularConfigProvider) {
        plangularConfigProvider.clientId = 'oerXf6nBcDu5CoNdaOrIGutVCKXPYvSB'
    });

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/about.html',
    '<section class="section-with-top-nav container"><h2 class="site-body-title">About Content</h2><p class="site-body-text">Well, the way they make shows is, they make one show. That show\'s called a pilot. Then they show that show to the people who make shows, and on the strength of that one show they decide if they\'re going to make more shows. Some pilots get picked and become television programs. Some don\'t, become nothing. She starred in one of the ones that became nothing.</p></section>');
}]);

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('404.html',
    '<!doctype html><html lang="en"><head><meta charset="utf-8"><title>Page Not Found :(</title><style>::-moz-selection {\n' +
    '    background: #b3d4fc;\n' +
    '    text-shadow: none;\n' +
    '}\n' +
    '\n' +
    '::selection {\n' +
    '    background: #b3d4fc;\n' +
    '    text-shadow: none;\n' +
    '}\n' +
    '\n' +
    'html {\n' +
    '    padding: 30px 10px;\n' +
    '    font-size: 20px;\n' +
    '    line-height: 1.4;\n' +
    '    color: #737373;\n' +
    '    background: #f0f0f0;\n' +
    '    -webkit-text-size-adjust: 100%;\n' +
    '    -ms-text-size-adjust: 100%;\n' +
    '}\n' +
    '\n' +
    'html,\n' +
    'input {\n' +
    '    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n' +
    '}\n' +
    '\n' +
    'body {\n' +
    '    max-width: 500px;\n' +
    '    padding: 30px 20px 50px;\n' +
    '    border: 1px solid #b3b3b3;\n' +
    '    border-radius: 4px;\n' +
    '    margin: 0 auto;\n' +
    '    box-shadow: 0 1px 10px #a7a7a7, inset 0 1px 0 #fff;\n' +
    '    background: #fcfcfc;\n' +
    '}\n' +
    '\n' +
    'h1 {\n' +
    '    margin: 0 10px;\n' +
    '    font-size: 50px;\n' +
    '    text-align: center;\n' +
    '}\n' +
    '\n' +
    'h1 span {\n' +
    '    color: #bbb;\n' +
    '}\n' +
    '\n' +
    'h3 {\n' +
    '    margin: 1.5em 0 0.5em;\n' +
    '}\n' +
    '\n' +
    'p {\n' +
    '    margin: 1em 0;\n' +
    '}\n' +
    '\n' +
    'ul {\n' +
    '    padding: 0 0 0 40px;\n' +
    '    margin: 1em 0;\n' +
    '}\n' +
    '\n' +
    '.container {\n' +
    '    max-width: 380px;\n' +
    '    margin: 0 auto;\n' +
    '}\n' +
    '\n' +
    '/* google possessions-search */\n' +
    '\n' +
    '#goog-fixurl ul {\n' +
    '    list-style: none;\n' +
    '    padding: 0;\n' +
    '    margin: 0;\n' +
    '}\n' +
    '\n' +
    '#goog-fixurl form {\n' +
    '    margin: 0;\n' +
    '}\n' +
    '\n' +
    '#goog-wm-qt,\n' +
    '#goog-wm-sb {\n' +
    '    border: 1px solid #bbb;\n' +
    '    font-size: 16px;\n' +
    '    line-height: normal;\n' +
    '    vertical-align: top;\n' +
    '    color: #444;\n' +
    '    border-radius: 2px;\n' +
    '}\n' +
    '\n' +
    '#goog-wm-qt {\n' +
    '    width: 220px;\n' +
    '    height: 20px;\n' +
    '    padding: 5px;\n' +
    '    margin: 5px 10px 0 0;\n' +
    '    box-shadow: inset 0 1px 1px #ccc;\n' +
    '}\n' +
    '\n' +
    '#goog-wm-sb {\n' +
    '    display: inline-block;\n' +
    '    height: 32px;\n' +
    '    padding: 0 10px;\n' +
    '    margin: 5px 0 0;\n' +
    '    white-space: nowrap;\n' +
    '    cursor: pointer;\n' +
    '    background-color: #f5f5f5;\n' +
    '    background-image: -webkit-linear-gradient(rgba(255,255,255,0), #f1f1f1);\n' +
    '    background-image: -moz-linear-gradient(rgba(255,255,255,0), #f1f1f1);\n' +
    '    background-image: -ms-linear-gradient(rgba(255,255,255,0), #f1f1f1);\n' +
    '    background-image: -o-linear-gradient(rgba(255,255,255,0), #f1f1f1);\n' +
    '    -webkit-appearance: none;\n' +
    '    -moz-appearance: none;\n' +
    '    appearance: none;\n' +
    '}\n' +
    '\n' +
    '#goog-wm-sb:hover,\n' +
    '#goog-wm-sb:focus {\n' +
    '    border-color: #aaa;\n' +
    '    box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);\n' +
    '    background-color: #f8f8f8;\n' +
    '}\n' +
    '\n' +
    '#goog-wm-qt:hover,\n' +
    '#goog-wm-qt:focus {\n' +
    '    border-color: #105cb6;\n' +
    '    outline: 0;\n' +
    '    color: #222;\n' +
    '}\n' +
    '\n' +
    'input::-moz-focus-inner {\n' +
    '    padding: 0;\n' +
    '    border: 0;\n' +
    '}</style></head><body><div class="container"><h1>Not found <span>:(</span></h1><p>Sorry, but the page you were trying to view does not exist.</p><p>It looks like this was the result of either:</p><ul><li>a mistyped address</li><li>an out-of-date link</li></ul><script>var GOOG_FIXURL_LANG = (navigator.language || \'\').slice(0,2),GOOG_FIXURL_SITE = location.host;</script><script src="//linkhelp.clients.google.com/tbproxy/lh/wm/fixurl.js"></script></div></body></html>');
}]);

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsInNjcmlwdHMvc2VydmljZXMvY29udGVudC5zZXJ2aWNlLmpzIiwic2NyaXB0cy9yb3V0ZXMvdmlldy1jb250ZW50LmNvbnRyb2xsZXIuanMiLCJzY3JpcHRzL3JvdXRlcy9tYWluLXNlY3Rpb24uY29udHJvbGxlci5qcyIsInBhcnRpYWxzL3ZpZXcuY29udGVudC5qcyIsInNjcmlwdHMvcm91dGVzL2hvbWUuY29udHJvbGxlci5qcyIsInBhcnRpYWxzL3ZpZXcuYWRtaW4uanMiLCJzY3JpcHRzL3JvdXRlcy9hZG1pbi5jb250cm9sbGVyLmpzIiwicGFydGlhbHMvc2l0ZS1mb290ZXIuanMiLCJzY3JpcHRzL2RpcmVjdGl2ZXMvc2l0ZS1mb290ZXIuZGlyZWN0aXZlLmpzIiwicGFydGlhbHMvc2l0ZS1hdWRpby5qcyIsInNjcmlwdHMvZGlyZWN0aXZlcy9zaXRlLWF1ZGlvLmRpcmVjdGl2ZS5qcyIsInBhcnRpYWxzL3NpZGVtZW51LmpzIiwic2NyaXB0cy9kaXJlY3RpdmVzL3NpZGUtbWVudS5kaXJlY3RpdmUuanMiLCJwYXJ0aWFscy9zZWN0aW9uLWhlYWRlci5qcyIsInNjcmlwdHMvZGlyZWN0aXZlcy9zZWN0aW9uLWhlYWRlci5kaXJlY3RpdmUuanMiLCJwYXJ0aWFscy9uYXZiYXIuanMiLCJzY3JpcHRzL2RpcmVjdGl2ZXMvbmF2YmFyLmRpcmVjdGl2ZS5qcyIsInBhcnRpYWxzL21haW4tc2VjdGlvbi5wYXJ0aWFsLmpzIiwic2NyaXB0cy9kaXJlY3RpdmVzL2ltYWdlLXNoYWRvdy5qcyIsInNjcmlwdHMvZGlyZWN0aXZlcy9oYW1idXJnZXItbWVudS5kaXJlY3RpdmUuanMiLCJwYXJ0aWFscy9ob21lLmpzIiwic2NyaXB0cy9kaXJlY3RpdmVzL2NvbnRlbnQtaGVhZGVyLmRpcmVjdGl2ZS5qcyIsInBhcnRpYWxzL2hhbWJ1cmdlci1tZW51LmpzIiwic2NyaXB0cy9kaXJlY3RpdmVzL2NvbnRlbnQtY29udGFpbmVyLmRpcmVjdGl2ZS5qcyIsInBhcnRpYWxzL2NvbnRlbnQtaGVhZGVyLmpzIiwic2NyaXB0cy9jb25maWcvcm91dGVzLmpzIiwicGFydGlhbHMvY29udGVudC1jb250YWluZXIuanMiLCJzY3JpcHRzL2NvbmZpZy9jb25maWcuanMiLCJwYXJ0aWFscy9hYm91dC5qcyIsIjQwNC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNkQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3JIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDbkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ25KQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDekJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMxQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzVDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzdEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3hDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDekJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzNFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDaElBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDcmVhdGVkIGJ5IERhbm55IG9uIDEyLzE1LzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnLCBbXG4gICAgJ25nQW5pbWF0ZScsXG4gICAgJ25nQ29va2llcycsXG4gICAgJ25nUmVzb3VyY2UnLFxuICAgICd1aS5yb3V0ZXInLFxuICAgICduZ1Nhbml0aXplJyxcbiAgICAnbmdUb3VjaCcsXG4gICAgJ25nLWZhc3RjbGljaycsXG4gICAgJ3NsaWNrQ2Fyb3VzZWwnLFxuICAgICdwbGFuZ3VsYXInXG5dKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBEYW5ueSBvbiAxMS82LzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKVxuICAuc2VydmljZSgnQ29udGVudFNlcnZpY2UnLCBmdW5jdGlvbigkaHR0cCwgJHEpIHtcbiAgICB2YXIgX3NpdGVDb250ZW50LFxuICAgICAgX3NlbGVjdGVkQ29udGVudDtcblxuXG4gICAgdmFyIHNldENvbnRlbnQgPSBmdW5jdGlvbihjb250ZW50LCBjYWxsYmFjaykge1xuICAgICAgX3NpdGVDb250ZW50ID0gY29udGVudDtcbiAgICAgIGlmKGNhbGxiYWNrKSB7XG4gICAgICAgIGNhbGxiYWNrKGNvbnRlbnQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBnZXRDb250ZW50ID0gZnVuY3Rpb24oY29udGVudCkge1xuICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICAgIGlmKCFfc2l0ZUNvbnRlbnQpIHtcbiAgICAgICAgaW5pdENvbnRlbnQoZnVuY3Rpb24oY29udGVudCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdjb250ZW50OiAnLCBjb250ZW50KTtcbiAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGNvbnRlbnQpO1xuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShfc2l0ZUNvbnRlbnQpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9XG5cbiAgICB2YXIgaW5pdENvbnRlbnQgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgJGh0dHAuZ2V0KCdhcGkvc2l0ZUNvbnRlbnQvYWxsQ29udGVudCcpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3VsdHMpe1xuICAgICAgICAgIHNldENvbnRlbnQocmVzdWx0cy5kYXRhLCBjYWxsYmFjayk7XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZm9ybWF0Q29udGVudChjb250ZW50LCBjYWxsYmFjaykge1xuICAgICAgdmFyIGZvcm1hdHRlZENvbnRlbnQgPSBbXTtcbiAgICAgICAgY29uc29sZS5sb2coJ2NvbnRlbnQ6ICcsIGNvbnRlbnQpO1xuICAgICAgLy9mb3IodmFyIGtleSBpbiBjb250ZW50KSB7XG4gICAgICAvLyAgYW5ndWxhci5mb3JFYWNoKGNvbnRlbnRba2V5XSwgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIC8vICAgIGl0ZW0uc3RhdGVOYW1lID0gKGl0ZW0uc3RhdGVOYW1lIHx8IGl0ZW0udXJsKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgLy8gICAgaXRlbS51cmxQcmVmaXggPSAnLycgKyBrZXkgKyAnLycgKyBpdGVtLnVybDtcbiAgICAgIC8vICAgIGl0ZW0uaHJlZiA9IGl0ZW0udXJsO1xuICAgICAgLy8gICAgaWYoa2V5ID09ICdhcnRpY2xlcycpIHtcbiAgICAgIC8vICAgICAgaXRlbS5zcmMgPSAndmlld3Mvdmlldy5hcnRpY2xlLmh0bWwnO1xuICAgICAgLy8gICAgfSBlbHNlIGlmKGtleSA9PSAnY3JlYXRvci1zZXJpZXMnKSB7XG4gICAgICAvLyAgICAgIGl0ZW0uc3JjID0gXCJ2aWV3cy92aWV3LmNyZWF0b3Itc2VyaWVzLmh0bWxcIjtcbiAgICAgIC8vICAgIH1cbiAgICAgIC8vICAgIGZvcm1hdHRlZENvbnRlbnQucHVzaChpdGVtKTtcbiAgICAgIC8vICB9KTtcbiAgICAgIC8vfVxuICAgICAgc2V0Q29udGVudChmb3JtYXR0ZWRDb250ZW50LCBjYWxsYmFjayk7XG4gICAgfVxuXG4gICAgdmFyIHNldFNlbGVjdGVkID0gZnVuY3Rpb24oY29udGVudCkge1xuICAgICAgX3NlbGVjdGVkQ29udGVudCA9IGNvbnRlbnQ7XG4gICAgfVxuXG4gICAgdmFyIGdldFNlbGVjdGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gX3NlbGVjdGVkQ29udGVudDtcbiAgICB9XG5cbiAgICB2YXIgZmluZENvbnRlbnQgPSBmdW5jdGlvbihzZWxlY3RlZEhyZWYpIHtcbiAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICBpZighX3NlbGVjdGVkQ29udGVudCkge1xuICAgICAgICBpbml0Q29udGVudChmdW5jdGlvbihjb250ZW50KSB7XG4gICAgICAgICAgZm9yKHZhciBjPTA7Yzxjb250ZW50Lmxlbmd0aDtjKyspIHtcbiAgICAgICAgICAgIGlmKGNvbnRlbnRbY10uaHJlZiA9PSBzZWxlY3RlZEhyZWYpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnJlc29sdmUoY29udGVudFtjXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnJlc29sdmUoX3NlbGVjdGVkQ29udGVudCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9XG5cblxuXG4gICAgICB2YXIgbmV3Q29udGVudCA9IGZ1bmN0aW9uKG5ld0NvbnRlbnQpIHtcbiAgICAgICAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgICAgICAgICBtZXRob2QgOiAnUE9TVCcsXG4gICAgICAgICAgICAgIHVybCA6ICdhcGkvc2l0ZUNvbnRlbnQvJyxcbiAgICAgICAgICAgICAgZGF0YSA6IG5ld0NvbnRlbnRcbiAgICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICB2YXIgdXBkYXRlQ29udGVudCA9IGZ1bmN0aW9uKGNvbnRlbnQpIHtcbiAgICAgICAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgICAgICAgICBtZXRob2QgOiAnUFVUJyxcbiAgICAgICAgICAgICAgdXJsIDogJ2FwaS9zaXRlQ29udGVudC8nICsgY29udGVudC5faWQsXG4gICAgICAgICAgICAgIGRhdGEgOiBjb250ZW50XG4gICAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgdmFyIGRlbGV0ZUNvbnRlbnQgPSBmdW5jdGlvbihjb250ZW50KSB7XG4gICAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgICAgbWV0aG9kIDogJ0RFTEVURScsXG4gICAgICAgICAgICAgIHVybCA6ICdhcGkvc2l0ZUNvbnRlbnQvJyArIGNvbnRlbnQuX2lkXG4gICAgICAgICAgfSlcbiAgICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBzZXRDb250ZW50IDogc2V0Q29udGVudCxcbiAgICAgIGdldENvbnRlbnQgOiBnZXRDb250ZW50LFxuICAgICAgaW5pdENvbnRlbnQgOiBpbml0Q29udGVudCxcbiAgICAgIHNldFNlbGVjdGVkIDogc2V0U2VsZWN0ZWQsXG4gICAgICBnZXRTZWxlY3RlZCA6IGdldFNlbGVjdGVkLFxuICAgICAgZmluZENvbnRlbnQgOiBmaW5kQ29udGVudCxcbiAgICAgIG5ld0NvbnRlbnQgOiBuZXdDb250ZW50LFxuICAgICAgdXBkYXRlQ29udGVudCA6IHVwZGF0ZUNvbnRlbnQsXG4gICAgICBkZWxldGVDb250ZW50IDogZGVsZXRlQ29udGVudFxuICAgIH1cbiAgfSlcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBEYW5ueSBvbiAxMS8yNy8xNi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJylcbiAgLmNvbnRyb2xsZXIoJ1ZpZXdDb250ZW50Q3RybCcsIGZ1bmN0aW9uKCRzY29wZSwgQ29udGVudFNlcnZpY2UsICRzdGF0ZVBhcmFtcywgJHdpbmRvdykge1xuXG5cbiAgICAkc2NvcGUuc2VsZWN0ZWRDb250ZW50ID0gQ29udGVudFNlcnZpY2UuZ2V0U2VsZWN0ZWQoKTtcblxuICAgIGlmKCEkc2NvcGUuc2VsZWN0ZWRDb250ZW50KSB7XG4gICAgICBDb250ZW50U2VydmljZS5maW5kQ29udGVudCgkc3RhdGVQYXJhbXMuY29udGVudEhyZWYpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKHNlbGVjdGVkKSB7XG4gICAgICAgICAgJHNjb3BlLnNlbGVjdGVkQ29udGVudCA9IHNlbGVjdGVkO1xuICAgICAgICAgICRzY29wZS5zZWxlY3RlZENvbnRlbnQucHVibGlzaERhdGUgPSBuZXcgRGF0ZSgkc2NvcGUuc2VsZWN0ZWRDb250ZW50LmRhdGUpO1xuICAgICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICAkc2NvcGUuc2VsZWN0ZWRDb250ZW50LnB1Ymxpc2hEYXRlID0gbmV3IERhdGUoJHNjb3BlLnNlbGVjdGVkQ29udGVudC5kYXRlKTtcbiAgICB9XG4gIH0pXG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgRGFubnkgb24gMTIvMTkvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ01haW5TZWN0aW9uQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSwgc2VjdGlvblRpdGxlLCBzZWN0aW9uU3ViVGl0bGUsIGNvbnRlbnRUeXBlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdtYWluIHNlY3Rpb24nKTtcbiAgICAgICAgJHNjb3BlLnNlY3Rpb25UaXRsZSA9IHNlY3Rpb25UaXRsZTtcbiAgICAgICAgJHNjb3BlLnNlY3Rpb25TdWJUaXRsZSA9IHNlY3Rpb25TdWJUaXRsZTtcbiAgICAgICAgJHNjb3BlLmNvbnRlbnRUeXBlID0gY29udGVudFR5cGU7XG4gICAgfSlcbiIsImFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdwYXJ0aWFscy92aWV3LmNvbnRlbnQuaHRtbCcsXG4gICAgJzxzZWN0aW9uIGNsYXNzPVwic2VjdGlvbi13aXRoLXRvcC1uYXYgY29udGFpbmVyXCI+PGNvbnRlbnQtaGVhZGVyIHNlbGVjdGVkLWNvbnRlbnQ9XCJzZWxlY3RlZENvbnRlbnRcIj48L2NvbnRlbnQtaGVhZGVyPjxkaXYgY2xhc3M9XCJjb250ZW50LXNlY3Rpb25cIiBuZy1yZXBlYXQ9XCJjb250ZW50U2VjdGlvbiBpbiBzZWxlY3RlZENvbnRlbnQuY29udGVudFNlY3Rpb25zXCI+PGltZyBjbGFzcz1cImNvbnRlbnQtaW1hZ2VcIiBuZy1pZj1cImNvbnRlbnRTZWN0aW9uLmhlYWRlckltYWdlIFwiIG5nLXNyYz1cInt7Y29udGVudFNlY3Rpb24uaGVhZGVySW1hZ2V9fVwiPjxwIGNsYXNzPVwic2l0ZS1ib2R5LXRleHQgY2VudGVyLWJsb2NrXCIgbmctY2xhc3M9XCJ7XFwnaW5kZW50LXBhcmFncmFwaFxcJyA6ICRmaXJzdCwgXFwnc3ViLXBhcmFncmFwaFxcJyA6ICEkZmlyc3R9XCI+e3tjb250ZW50U2VjdGlvbi5jb250ZW50fX08L3A+PGltZyBjbGFzcz1cImNvbnRlbnQtaW1hZ2VcIiBuZy1pZj1cImNvbnRlbnRTZWN0aW9uLmZvb3RlckltYWdlIFwiIG5nLXNyYz1cInt7Y29udGVudFNlY3Rpb24uZm9vdGVySW1hZ2V9fVwiPjwvZGl2Pjwvc2VjdGlvbj4nKTtcbn1dKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBEYW5ueSBvbiAxMS83LzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKVxuICAuY29udHJvbGxlcignSG9tZUN0cmwnLCBmdW5jdGlvbigkc2NvcGUsIENvbnRlbnRTZXJ2aWNlLCAkc3RhdGUpIHtcblxuICAgICRzY29wZS5nb1RvID0gZnVuY3Rpb24oc3RhdGUsIHN0YXRlUGFyYW1zKSB7XG4gICAgICAkc3RhdGUuZ28oc3RhdGUsIHN0YXRlUGFyYW1zKTtcbiAgICB9XG4gIH0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgncGFydGlhbHMvdmlldy5hZG1pbi5odG1sJyxcbiAgICAnPHNlY3Rpb24gY2xhc3M9XCJzZWN0aW9uLXdpdGgtdG9wLW5hdiBmbHVpZC1jb250YWluZXJcIj48aDEgY2xhc3M9XCJkaXNwbGF5LTJcIj5BZG1pbiBQYW5lbDwvaDE+PGRpdiBjbGFzcz1cImZsdWlkLWNvbnRhaW5lciBhZG1pbi12aWV3XCIgbmctY2xhc3M9XCJ7XFwncmlnaHQtc2lkZVxcJyA6IHNlbGVjdGVkVmlldyAhPSBcXCdtZW51XFwnfVwiPjxkaXYgY2xhc3M9XCJhZG1pbi1zZWN0aW9uXCI+PGgxIGNsYXNzPVwic2l0ZS1ib2R5LXRpdGxlXCI+QWRtaW4gTWVudTwvaDE+PGJ1dHRvbiBjbGFzcz1cInNpdGUtYnV0dG9uXCIgbmctY2xpY2s9XCJuZXdDb250ZW50KClcIj48aDEgY2xhc3M9XCJidXR0b25cIj5DcmVhdGUgQ29udGVudDwvaDE+PGRpdiBjbGFzcz1cImJ1dHRvbi1jb3ZlclwiPjwvZGl2PjwvYnV0dG9uPjx1bCBjbGFzcz1cImFkbWluLWNvbnRlbnQtbGlzdFwiPjxsaSBuZy1yZXBlYXQ9XCJjb250ZW50IGluIHNpdGVDb250ZW50XCIgY2xhc3M9XCJjb250ZW50LWl0ZW1cIj48aDEgY2xhc3M9XCJzaXRlLWJvZHktdGl0bGVcIj5UaXRsZToge3tjb250ZW50LnRpdGxlfX08L2gxPjxoMiBjbGFzcz1cImJvZHktMlwiPlB1Ymxpc2hlZCA6IHt7Y29udGVudC5wdWJsaXNoZWREYXRlIHwgZGF0ZSA6IFxcJ0VFRUUsIE1NTU0gZCwgeVxcJ319PC9oMj48ZGl2IGNsYXNzPVwie3tjb250ZW50LmNvbnRlbnRUeXBlfX0tY29udGVudCBjb250ZW50VHlwZVwiPnt7Y29udGVudC5jb250ZW50VHlwZX19PC9kaXY+PHVsIGNsYXNzPVwiY29udGVudC1idXR0b25zXCIgbmctaWY9XCIhc2hvd0NvbmZpcm1cIj48bGkgbmctY2xpY2s9XCJlZGl0Q29udGVudChjb250ZW50KVwiPjxpIGNsYXNzPVwiZmEgZmEtcGVuY2lsXCI+PC9pPjxoMSBjbGFzcz1cImxhYmVsXCI+RWRpdDwvaDE+PC9saT48bGkgbmctY2xpY2s9XCJjb25maXJtKHRydWUpXCI+PGkgY2xhc3M9XCJmYSBmYS10cmFzaC1vXCI+PC9pPjxoMSBjbGFzcz1cImxhYmVsXCI+RGVsZXRlPC9oMT48L2xpPjwvdWw+PHVsIGNsYXNzPVwiY29udGVudC1idXR0b25zXCIgbmctaWY9XCJzaG93Q29uZmlybVwiPjxsaSBuZy1jbGljaz1cImNvbmZpcm1EZWxldGUoY29udGVudCwgJGluZGV4KVwiPjxoMSBjbGFzcz1cImxhYmVsXCI+RGVsZXRlPC9oMT48L2xpPjxsaSBuZy1jbGljaz1cImNvbmZpcm0oZmFsc2UpXCI+PGgxIGNsYXNzPVwibGFiZWxcIj5DYW5jZWw8L2gxPjwvbGk+PC91bD48L2xpPjwvdWw+PC9kaXY+PGRpdiBjbGFzcz1cImFkbWluLXNlY3Rpb25cIj48aDEgY2xhc3M9XCJzaXRlLWJvZHktdGl0bGUgdGV4dC11cHBlcmNhc2VcIj57e3NlbGVjdGVkVmlld319IENvbnRlbnQ8L2gxPjxkaXYgY2xhc3M9XCJhZG1pbi1idXR0b25zXCI+PGRpdiBuZy1jbGljaz1cImNhbmNlbCgpXCIgY2xhc3M9XCJyZWQtYnV0dG9uXCI+PGgxIGNsYXNzPVwic2l0ZS1ib2R5LXRpdGxlXCI+Q2FuY2VsPC9oMT48L2Rpdj48ZGl2IG5nLWNsaWNrPVwic2F2ZSgpXCI+PGgxIGNsYXNzPVwic2l0ZS1ib2R5LXRpdGxlXCI+U2F2ZTwvaDE+PC9kaXY+PC9kaXY+PGZvcm0+PGRpdiBjbGFzcz1cImZvcm0tZ3JvdXAgY29sLXhzLTEyIGNvbC1zbS00XCI+PGxhYmVsIGZvcj1cImNvbnRlbnRUaXRsZVwiPlRpdGxlPC9sYWJlbD48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIGlkPVwiY29udGVudFRpdGxlXCIgcGxhY2Vob2xkZXI9XCJUaXRsZVwiIG5nLW1vZGVsPVwic2VsZWN0ZWRDb250ZW50LnRpdGxlXCIgbmctYmx1cj1cImZvcm1hdFVybCgpXCI+PC9kaXY+PGRpdiBjbGFzcz1cImZvcm0tZ3JvdXAgY29sLXhzLTEyIGNvbC1zbS00XCI+PGxhYmVsIGZvcj1cImNvbnRlbnRTdWJUaXRsZVwiPlN1YiBUaXRsZTwvbGFiZWw+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBpZD1cImNvbnRlbnRTdWJUaXRsZVwiIHBsYWNlaG9sZGVyPVwiU3ViLXRpdGxlXCIgbmctbW9kZWw9XCJzZWxlY3RlZENvbnRlbnQuc3ViVGl0bGVcIj48L2Rpdj48ZGl2IGNsYXNzPVwiZm9ybS1ncm91cCBjb2wteHMtMTIgY29sLXNtLTRcIj48bGFiZWwgZm9yPVwiY29udGVudEF1dGhvclwiPkF1dGhvcjwvbGFiZWw+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBpZD1cImNvbnRlbnRBdXRob3JcIiBwbGFjZWhvbGRlcj1cIkF1dGhvclwiIG5nLW1vZGVsPVwic2VsZWN0ZWRDb250ZW50LmF1dGhvclwiPjwvZGl2PjxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwIGNvbC14cy0xMCBjb2wtc20tOFwiPjxsYWJlbD5UeXBlIG9mIENvbnRlbnQ8L2xhYmVsPjx1bCBjbGFzcz1cImFkbWluLWxpc3RcIj48bGkgbmctY2xhc3M9XCJ7XFwnc2VsZWN0ZWQtdHlwZVxcJyA6IHNlbGVjdGVkQ29udGVudC5jb250ZW50VHlwZSA9PSBcXCduZXdzXFwnfVwiIG5nLWNsaWNrPVwic2VsZWN0ZWRDb250ZW50LmNvbnRlbnRUeXBlID0gXFwnbmV3c1xcJ1wiPjxoMSBjbGFzcz1cInNpdGUtbGlzdC1pdGVtXCI+TmV3czwvaDE+PC9saT48bGkgbmctY2xhc3M9XCJ7XFwnc2VsZWN0ZWQtdHlwZVxcJyA6IHNlbGVjdGVkQ29udGVudC5jb250ZW50VHlwZSA9PSBcXCdmZWF0dXJlc1xcJ31cIiBuZy1jbGljaz1cInNlbGVjdGVkQ29udGVudC5jb250ZW50VHlwZSA9IFxcJ2ZlYXR1cmVzXFwnXCI+PGgxIGNsYXNzPVwic2l0ZS1saXN0LWl0ZW1cIj5GZWF0dXJlczwvaDE+PC9saT48bGkgbmctY2xhc3M9XCJ7XFwnc2VsZWN0ZWQtdHlwZVxcJyA6IHNlbGVjdGVkQ29udGVudC5jb250ZW50VHlwZSA9PSBcXCdjb21tZW50YXJ5XFwnfVwiIG5nLWNsaWNrPVwic2VsZWN0ZWRDb250ZW50LmNvbnRlbnRUeXBlID0gXFwnY29tbWVudGFyeVxcJ1wiPjxoMSBjbGFzcz1cInNpdGUtbGlzdC1pdGVtXCI+Q29tbWVudGFyeTwvaDE+PC9saT48bGkgbmctY2xhc3M9XCJ7XFwnc2VsZWN0ZWQtdHlwZVxcJyA6IHNlbGVjdGVkQ29udGVudC5jb250ZW50VHlwZSA9PSBcXCdzb3VuZFxcJ31cIiBuZy1jbGljaz1cInNlbGVjdGVkQ29udGVudC5jb250ZW50VHlwZSA9IFxcJ3NvdW5kXFwnXCI+PGgxIGNsYXNzPVwic2l0ZS1saXN0LWl0ZW1cIj5Tb3VuZDwvaDE+PC9saT48bGkgbmctY2xhc3M9XCJ7XFwnc2VsZWN0ZWQtdHlwZVxcJyA6IHNlbGVjdGVkQ29udGVudC5jb250ZW50VHlwZSA9PSBcXCdmaWxtXFwnfVwiIG5nLWNsaWNrPVwic2VsZWN0ZWRDb250ZW50LmNvbnRlbnRUeXBlID0gXFwnZmlsbVxcJ1wiPjxoMSBjbGFzcz1cInNpdGUtbGlzdC1pdGVtXCI+RmlsbTwvaDE+PC9saT48L3VsPjwvZGl2PjxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwIGNvbC14cy0xMiBjb2wtc20tNFwiPjxsYWJlbCBjbGFzcz1cInNyLW9ubHlcIiBmb3I9XCJjb250ZW50VXJsXCI+Q29udGVudCBVUkw8L2xhYmVsPjxkaXYgY2xhc3M9XCJpbnB1dC1ncm91cFwiPjxkaXYgY2xhc3M9XCJpbnB1dC1ncm91cC1hZGRvblwiPi97e3NlbGVjdGVkQ29udGVudC5jb250ZW50VHlwZX19LzwvZGl2PjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgaWQ9XCJjb250ZW50VXJsXCIgcGxhY2Vob2xkZXI9XCJVUkxcIiBuZy1kaXNhYmxlZD1cInRydWVcIiBuZy1tb2RlbD1cInNlbGVjdGVkQ29udGVudC51cmxcIj48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPVwiZm9ybS1ncm91cCBjb2wteHMtMTIgY29sLXNtLTRcIj48bGFiZWwgZm9yPVwiY29udGVudEhlYWRlckltYWdlXCI+SGVhZGVyIEltYWdlPC9sYWJlbD48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIGlkPVwiY29udGVudEhlYWRlckltYWdlXCIgcGxhY2Vob2xkZXI9XCJVUkwgZm9yIEhlYWRlckltYWdlXCIgbmctbW9kZWw9XCJzZWxlY3RlZENvbnRlbnQuaGVhZGVySW1hZ2VcIj48L2Rpdj48ZGl2IGNsYXNzPVwiZm9ybS1ncm91cCBjb2wteHMtMTIgY29sLXNtLTJcIj48bGFiZWwgZm9yPVwiY29udGVudFB1Ymxpc2hlZERhdGVcIj5QdWJsaXNoZWQgRGF0ZTwvbGFiZWw+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBpZD1cImNvbnRlbnRQdWJsaXNoZWREYXRlXCIgcGxhY2Vob2xkZXI9XCJNTS9ERC9ZWVlZXCIgbmctbW9kZWw9XCJzZWxlY3RlZENvbnRlbnQucHVibGlzaGVkRGF0ZVwiPjwvZGl2PjxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwIGNvbC14cy0xMiBjb2wtc20tNlwiPjxsYWJlbD5UYWdzPC9sYWJlbD48dWwgY2xhc3M9XCJpbnB1dC1saXN0XCI+PGxpIG5nLXJlcGVhdD1cInRhZyBpbiBzZWxlY3RlZENvbnRlbnQudGFncyB0cmFjayBieSAkaW5kZXhcIj48ZGl2IGNsYXNzPVwiaW5wdXQtZ3JvdXAgY29sLXhzLTZcIj48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIHBsYWNlaG9sZGVyPVwiVGFnXCIgbmctbW9kZWw9XCJzZWxlY3RlZENvbnRlbnRbXFwndGFnc1xcJ11bJGluZGV4XVwiPiA8c3BhbiBjbGFzcz1cImlucHV0LWdyb3VwLWFkZG9uIGRlbGV0ZVwiIG5nLWNsaWNrPVwicmVtb3ZlSXRlbShcXCd0YWdzXFwnLCAkaW5kZXgpXCI+PGkgY2xhc3M9XCJmYSBmYS10cmFzaFwiPjwvaT48L3NwYW4+PC9kaXY+PC9saT48L3VsPjxidXR0b24gY2xhc3M9XCJzaXRlLWJ1dHRvbiBzbWFsbFwiIG5nLWNsaWNrPVwiYWRkSXRlbShcXCd0YWdcXCcsIFxcJ3RhZ3NcXCcpXCI+PGgxIGNsYXNzPVwiYnV0dG9uXCI+QWRkIFRhZzwvaDE+PGRpdiBjbGFzcz1cImJ1dHRvbi1jb3ZlclwiPjwvZGl2PjwvYnV0dG9uPjwvZGl2PjxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwIGNvbC14cy0xMiBjb2wtc20tNlwiPjxsYWJlbD5RdW90ZXM8L2xhYmVsPjx1bCBjbGFzcz1cImlucHV0LWxpc3RcIj48bGkgbmctcmVwZWF0PVwicXVvdGUgaW4gc2VsZWN0ZWRDb250ZW50LnF1b3RlcyB0cmFjayBieSAkaW5kZXhcIj48ZGl2IGNsYXNzPVwiaW5wdXQtZ3JvdXAgY29sLXhzLTEwXCI+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBwbGFjZWhvbGRlcj1cIlF1b3RlXCIgbmctbW9kZWw9XCJzZWxlY3RlZENvbnRlbnRbXFwncXVvdGVzXFwnXVskaW5kZXhdXCI+IDxzcGFuIGNsYXNzPVwiaW5wdXQtZ3JvdXAtYWRkb24gZGVsZXRlXCIgbmctY2xpY2s9XCJyZW1vdmVJdGVtKFxcJ3F1b3Rlc1xcJywgJGluZGV4KVwiPjxpIGNsYXNzPVwiZmEgZmEtdHJhc2hcIj48L2k+PC9zcGFuPjwvZGl2PjwvbGk+PC91bD48YnV0dG9uIGNsYXNzPVwic2l0ZS1idXR0b24gc21hbGxcIiBuZy1jbGljaz1cImFkZEl0ZW0oXFwncXVvdGVcXCcsIFxcJ3F1b3Rlc1xcJylcIj48aDEgY2xhc3M9XCJidXR0b25cIj5BZGQgUXVvdGU8L2gxPjxkaXYgY2xhc3M9XCJidXR0b24tY292ZXJcIj48L2Rpdj48L2J1dHRvbj48L2Rpdj48ZGl2IGNsYXNzPVwiZm9ybS1ncm91cCBjb2wteHMtMTIgY29sLXNtLTZcIj48bGFiZWw+QXVkaW8gTGlua3M8L2xhYmVsPjx1bCBjbGFzcz1cImlucHV0LWxpc3RcIj48bGkgbmctcmVwZWF0PVwiYXVkaW8gaW4gc2VsZWN0ZWRDb250ZW50LmF1ZGlvVXJscyB0cmFjayBieSAkaW5kZXhcIj48ZGl2IGNsYXNzPVwiaW5wdXQtZ3JvdXAgY29sLXhzLTEwXCI+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBwbGFjZWhvbGRlcj1cIkF1ZGlvIFVSTFwiIG5nLW1vZGVsPVwic2VsZWN0ZWRDb250ZW50W1xcJ2F1ZGlvVXJsc1xcJ11bJGluZGV4XVwiPiA8c3BhbiBjbGFzcz1cImlucHV0LWdyb3VwLWFkZG9uIGRlbGV0ZVwiIG5nLWNsaWNrPVwicmVtb3ZlSXRlbShcXCdhdWRpb1VybHNcXCcsICRpbmRleClcIj48aSBjbGFzcz1cImZhIGZhLXRyYXNoXCI+PC9pPjwvc3Bhbj48L2Rpdj48L2xpPjwvdWw+PGJ1dHRvbiBjbGFzcz1cInNpdGUtYnV0dG9uIHNtYWxsXCIgbmctY2xpY2s9XCJhZGRJdGVtKFxcJ2F1ZGlvXFwnLCBcXCdhdWRpb1VybHNcXCcpXCI+PGgxIGNsYXNzPVwiYnV0dG9uXCI+QWRkIFVSTDwvaDE+PGRpdiBjbGFzcz1cImJ1dHRvbi1jb3ZlclwiPjwvZGl2PjwvYnV0dG9uPjwvZGl2PjxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwIGNvbC14cy0xMlwiPjxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwIGNvbC14cy02IGNvbC1zbS01XCI+PGxhYmVsPkZhY2Vib29rPC9sYWJlbD48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIHBsYWNlaG9sZGVyPVwiRmFjZWJvb2tcIiBuZy1tb2RlbD1cInNlbGVjdGVkQ29udGVudC5zb2NpYWxNZWRpYS5mYWNlYm9va1wiPjwvZGl2PjxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwIGNvbC14cy02IGNvbC1zbS01XCI+PGxhYmVsPlR3aXR0ZXI8L2xhYmVsPjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgcGxhY2Vob2xkZXI9XCJUd2l0dGVyXCIgbmctbW9kZWw9XCJzZWxlY3RlZENvbnRlbnQuc29jaWFsTWVkaWEudHdpdHRlclwiPjwvZGl2PjxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwIGNvbC14cy02IGNvbC1zbS01XCI+PGxhYmVsPkluc3RhZ3JhbTwvbGFiZWw+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBwbGFjZWhvbGRlcj1cIkluc3RhZ3JhbVwiIG5nLW1vZGVsPVwic2VsZWN0ZWRDb250ZW50LnNvY2lhbE1lZGlhLmluc3RhZ3JhbVwiPjwvZGl2PjxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwIGNvbC14cy02IGNvbC1zbS01XCI+PGxhYmVsPlNvdW5kY2xvdWQ8L2xhYmVsPjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgcGxhY2Vob2xkZXI9XCJTb3VuZGNsb3VkXCIgbmctbW9kZWw9XCJzZWxlY3RlZENvbnRlbnQuc29jaWFsTWVkaWEuc291bmRjbG91ZFwiPjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwIGNvbC14cy0xMlwiPjxkaXYgY2xhc3M9XCJjb2wteHMtMTIgY29sLXNtLTRcIj48bGFiZWw+RGVzY3JpcHRpb248L2xhYmVsPjx0ZXh0YXJlYSByb3dzPVwiMlwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgcGxhY2Vob2xkZXI9XCJEZXNjcmlwdGlvbiAoS2VlcCBpdCBzaG9ydC4gaS5lLCAxMzAgY2hhcmFjdGVycylcIiBuZy1tb2RlbD1cInNlbGVjdGVkQ29udGVudC5kZXNjcmlwdGlvblwiPjwvdGV4dGFyZWE+PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz1cImZvcm0tZ3JvdXAgY29sLXhzLTEyXCI+PGRpdiBjbGFzcz1cImNvbC14cy0xMlwiPjxsYWJlbD5TZWN0aW9uczwvbGFiZWw+PGJ1dHRvbiBjbGFzcz1cInNpdGUtYnV0dG9uIHNtYWxsXCIgbmctY2xpY2s9XCJhZGRJdGVtKFxcJ3NlY3Rpb25cXCcsIFxcJ2NvbnRlbnRTZWN0aW9uc1xcJylcIj48aDEgY2xhc3M9XCJidXR0b25cIj5BZGQgU2VjdGlvbjwvaDE+PGRpdiBjbGFzcz1cImJ1dHRvbi1jb3ZlclwiPjwvZGl2PjwvYnV0dG9uPjwvZGl2PjxkaXYgY2xhc3M9XCJjb2wteHMtMTIgY29sLXNtLTEwIGNvbC1zbS1vZmZzZXQtMSBzaXRlLXNlY3Rpb25cIiBuZy1yZXBlYXQ9XCJzZWN0aW9uIGluIHNlbGVjdGVkQ29udGVudC5jb250ZW50U2VjdGlvbnMgdHJhY2sgYnkgJGluZGV4XCI+PGRpdiBjbGFzcz1cImNvbC14cy0xMiBjb2wtc20tNFwiPjxkaXYgY2xhc3M9XCJpbnB1dC1ncm91cCBjb2wteHMtMTBcIj48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIHBsYWNlaG9sZGVyPVwiSGVhZGVyIEltYWdlXCIgbmctbW9kZWw9XCJzZWxlY3RlZENvbnRlbnQuY29udGVudFNlY3Rpb25zWyRpbmRleF0uaGVhZGVySW1hZ2VcIj4gPHNwYW4gY2xhc3M9XCJpbnB1dC1ncm91cC1hZGRvbiBkZWxldGVcIj48aSBjbGFzcz1cImZhIGZhLXRyYXNoXCI+PC9pPjwvc3Bhbj48L2Rpdj48ZGl2IGNsYXNzPVwiaW5wdXQtZ3JvdXAgY29sLXhzLTEwXCI+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBwbGFjZWhvbGRlcj1cIkZvb3RlciBJbWFnZVwiIG5nLW1vZGVsPVwic2VsZWN0ZWRDb250ZW50LmNvbnRlbnRTZWN0aW9uc1skaW5kZXhdLmZvb3RlckltYWdlXCI+IDxzcGFuIGNsYXNzPVwiaW5wdXQtZ3JvdXAtYWRkb24gZGVsZXRlXCI+PGkgY2xhc3M9XCJmYSBmYS10cmFzaFwiPjwvaT48L3NwYW4+PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz1cImNvbC14cy0xMiBjb2wtc20tOFwiPjx0ZXh0YXJlYSBjbGFzcz1cImZvcm0tY29udHJvbFwiIHJvd3M9XCI0XCIgcGxhY2Vob2xkZXI9XCJDb250ZW50IChzZXBhcmF0ZSBieSBwYXJhZ3JhcGgpXCIgbmctbW9kZWw9XCJzZWxlY3RlZENvbnRlbnQuY29udGVudFNlY3Rpb25zWyRpbmRleF0uY29udGVudFwiPjwvdGV4dGFyZWE+PC9kaXY+PGkgY2xhc3M9XCJmYSBmYS10cmFzaFwiIGlkPVwiZGVsZXRlQnRuXCIgbmctY2xpY2s9XCJyZW1vdmVJdGVtKFxcJ2NvbnRlbnRTZWN0aW9uc1xcJywgJGluZGV4KVwiPjwvaT48L2Rpdj48L2Rpdj48L2Zvcm0+PC9kaXY+PC9kaXY+PC9zZWN0aW9uPicpO1xufV0pO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IERhbm55IG9uIDEyLzE4LzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKVxuICAgIC5jb250cm9sbGVyKCdBZG1pbkN0cmwnLCBmdW5jdGlvbigkc2NvcGUsICR0aW1lb3V0LCBDb250ZW50U2VydmljZSkge1xuICAgICAgICBjb25zb2xlLmxvZygnc2NvcGU6ICcsICRzY29wZSk7XG5cbiAgICAgICAgJHNjb3BlLnNlbGVjdGVkVmlldyA9ICdtZW51JztcbiAgICAgICAgJHNjb3BlLmxvYWRpbmcgPSBmYWxzZTtcblxuICAgICAgICB2YXIgY29udGVudEZpZWxkcyA9IFtcbiAgICAgICAgICAgICdhdXRob3InLFxuICAgICAgICAgICAgJ3RpdGxlJyxcbiAgICAgICAgICAgICdjb250ZW50VHlwZScsXG4gICAgICAgICAgICAnc3ViVGl0bGUnLFxuICAgICAgICAgICAgJ3VybCcsXG4gICAgICAgICAgICAnaGVhZGVySW1hZ2UnLFxuICAgICAgICAgICAgJ3RhZ3MnLFxuICAgICAgICAgICAgJ3B1Ymxpc2hlZERhdGUnLFxuICAgICAgICAgICAgJ2Rlc2NyaXB0aW9uJyxcbiAgICAgICAgICAgICdjb250ZW50U2VjdGlvbnMnLFxuICAgICAgICAgICAgJ3F1b3RlcycsXG4gICAgICAgICAgICAnYXVkaW9VcmxzJyxcbiAgICAgICAgICAgICdzb2NpYWxNZWRpYScsXG4gICAgICAgICAgICAnc2hhcmVVcmwnXG4gICAgICAgIF1cblxuICAgICAgICBDb250ZW50U2VydmljZS5nZXRDb250ZW50KClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2l0ZUNvbnRlbnQgPSBjb250ZW50O1xuICAgICAgICAgICAgfSlcblxuICAgICAgICAvLyR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyAgICAkc2NvcGUuc2VsZWN0ZWRWaWV3ID0gJ2VkaXQnO1xuICAgICAgICAvL30sIDIwMDApXG5cbiAgICAgICAgJHNjb3BlLmNoYW5nZVZpZXcgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmKCRzY29wZS5zZWxlY3RlZFZpZXcgPT0gJ2VkaXQnKSAkc2NvcGUuc2VsZWN0ZWRWaWV3ID0gJ21lbnUnO1xuICAgICAgICAgICAgZWxzZSAkc2NvcGUuc2VsZWN0ZWRWaWV3ID0gJ2VkaXQnO1xuICAgICAgICB9XG5cbiAgICAgICAgJHNjb3BlLnNlbGVjdGVkQ29udGVudCA9IHt9O1xuXG4gICAgICAgICRzY29wZS5uZXdDb250ZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRWaWV3ID0gJ2NyZWF0ZSc7XG4gICAgICAgICAgICBpbml0TmV3Q29udGVudCgpXG4gICAgICAgIH1cblxuICAgICAgICAkc2NvcGUuZWRpdENvbnRlbnQgPSBmdW5jdGlvbihjb250ZW50KSB7XG4gICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRDb250ZW50ID0gY29udGVudDtcbiAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZFZpZXcgPSAnZWRpdCc7XG4gICAgICAgIH1cblxuICAgICAgICAkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRWaWV3ID0gJ21lbnUnO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gaW5pdE5ld0NvbnRlbnQoKSB7XG4gICAgICAgICAgICBjb250ZW50RmllbGRzLm1hcChmdW5jdGlvbihmaWVsZCkge1xuICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZENvbnRlbnRbZmllbGRdID0gbnVsbDtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbmV3SXRlbXMgPSB7XG4gICAgICAgICAgICAndGFnJyA6ICcnLFxuICAgICAgICAgICAgJ3F1b3RlJyA6ICcnLFxuICAgICAgICAgICAgJ2F1ZGlvJyA6ICcnLFxuICAgICAgICAgICAgJ3NlY3Rpb24nIDogbnVsbFxuXG4gICAgICAgIH1cblxuICAgICAgICAkc2NvcGUuYWRkSXRlbSA9IGZ1bmN0aW9uKGl0ZW1UeXBlLCBrZXkpIHtcbiAgICAgICAgICAgIHZhciBuZXdJdGVtID0gbmV3SXRlbXNbaXRlbVR5cGVdO1xuICAgICAgICAgICAgaWYoISRzY29wZS5zZWxlY3RlZENvbnRlbnRba2V5XSl7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkQ29udGVudFtrZXldID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRDb250ZW50W2tleV0ucHVzaChuZXdJdGVtKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCduZXcgaXRlbTogJywgbmV3SXRlbSk7XG4gICAgICAgIH1cblxuICAgICAgICAkc2NvcGUucmVtb3ZlSXRlbSA9IGZ1bmN0aW9uKGtleSwgaW5kZXgpIHtcbiAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZENvbnRlbnRba2V5XS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9XG5cbiAgICAgICAgJHNjb3BlLnNob3dDb25maXJtID0gZmFsc2U7XG5cbiAgICAgICAgJHNjb3BlLmNvbmZpcm0gPSBmdW5jdGlvbihjb25maXJtKSB7XG4gICAgICAgICAgICAkc2NvcGUuc2hvd0NvbmZpcm0gPSBjb25maXJtO1xuICAgICAgICB9XG5cbiAgICAgICAgJHNjb3BlLmNvbmZpcm1EZWxldGUgPSBmdW5jdGlvbihjb250ZW50LCBpbmRleCkge1xuXG4gICAgICAgICAgICBpZighJHNjb3BlLmxvYWRpbmcpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUubG9hZGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgQ29udGVudFNlcnZpY2UuZGVsZXRlQ29udGVudChjb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihyZXMpe1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkVmlldyA9ICdtZW51JztcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zaXRlQ29udGVudC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuZmluYWxseShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuXG4gICAgICAgICRzY29wZS5zYXZlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZighJHNjb3BlLmxvYWRpbmcpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUubG9hZGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3NlbGVjdGVkJywgJHNjb3BlLnNlbGVjdGVkQ29udGVudCk7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZighJHNjb3BlLnNlbGVjdGVkQ29udGVudC5faWQpIHtcbiAgICAgICAgICAgICAgICAgICAgQ29udGVudFNlcnZpY2UubmV3Q29udGVudCgkc2NvcGUuc2VsZWN0ZWRDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlczogJywgcmVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2VycjogJywgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmluYWxseShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZFZpZXcgPSAnbWVudSc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIENvbnRlbnRTZXJ2aWNlLnVwZGF0ZUNvbnRlbnQoJHNjb3BlLnNlbGVjdGVkQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZXM6ICcsIHJlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnI6ICcsIGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmFsbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRWaWV3ID0gJ21lbnUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5mb3JtYXRVcmwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmKCRzY29wZS5zZWxlY3RlZENvbnRlbnQudGl0bGUpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRDb250ZW50LnVybCA9ICRzY29wZS5zZWxlY3RlZENvbnRlbnQudGl0bGUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMvZywgXCJfXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICB9KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3BhcnRpYWxzL3NpdGUtZm9vdGVyLmh0bWwnLFxuICAgICc8Zm9vdGVyIGNsYXNzPVwiZm9vdGVyXCI+PGRpdiBjbGFzcz1cImZvb3Rlci1jb250YWluZXJcIj48bmF2IGNsYXNzPVwiZm9vdGVyLWxpbmtzXCI+PGRpdiBjbGFzcz1cImxpbmtzLWNvbnRhaW5lclwiPjxoMSBjbGFzcz1cInNpdGUtbGlzdC10aXRsZVwiPlNpdGU8L2gxPjx1bD48bGk+PGEgdWktc3JlZj1cImhvbWVcIiBjbGFzcz1cInNpdGUtbGlzdC1pdGVtXCI+SG9tZTwvYT48L2xpPjxsaT48YSB1aS1zcmVmPVwibmV3c1wiIGNsYXNzPVwic2l0ZS1saXN0LWl0ZW1cIj5OZXdzPC9hPjwvbGk+PGxpPjxhIHVpLXNyZWY9XCJmZWF0dXJlc1wiIGNsYXNzPVwic2l0ZS1saXN0LWl0ZW1cIj5GZWF0dXJlczwvYT48L2xpPjxsaT48YSB1aS1zcmVmPVwiY29tbWVudGFyeVwiIGNsYXNzPVwic2l0ZS1saXN0LWl0ZW1cIj5Db21tZW50YXJ5PC9hPjwvbGk+PGxpPjxhIHVpLXNyZWY9XCJTb3VuZFwiIGNsYXNzPVwic2l0ZS1saXN0LWl0ZW1cIj5Tb3VuZDwvYT48L2xpPjxsaT48YSB1aS1zcmVmPVwiZmlsbVwiIGNsYXNzPVwic2l0ZS1saXN0LWl0ZW1cIj5GaWxtPC9hPjwvbGk+PC91bD48L2Rpdj48ZGl2IGNsYXNzPVwibGlua3MtY29udGFpbmVyXCI+PGgxIGNsYXNzPVwic2l0ZS1saXN0LXRpdGxlXCI+QWJvdXQ8L2gxPjx1bD48bGkgdWktc3JlZj1cImFib3V0XCIgY2xhc3M9XCJzaXRlLWxpc3QtaXRlbVwiPjxhPkFib3V0PC9hPjwvbGk+PGxpPjxhIGhyZWY9XCJtYWlsdG86RGFubnlARnJlcXVlbmN5Q3VsdHVyZS5jb20sIEJlbkBGcmVxdWVuY3lDdWx0dXJlXCIgY2xhc3M9XCJzaXRlLWxpc3QtaXRlbVwiPkNvbnRhY3Q8L2E+PC9saT48bGk+PGEgaHJlZj1cIm1haWx0bzpEYW5ueUBGcmVxdWVuY3lDdWx0dXJlLmNvbSwgQmVuQEZyZXF1ZW5jeUN1bHR1cmVcIiBjbGFzcz1cInNpdGUtbGlzdC1pdGVtXCI+U3VibWlzc2lvbnM8L2E+PC9saT48bGk+PGEgaHJlZj1cIm1haWx0bzpEYW5ueUBGcmVxdWVuY3lDdWx0dXJlLmNvbSwgQmVuQEZyZXF1ZW5jeUN1bHR1cmVcIiBjbGFzcz1cInNpdGUtbGlzdC1pdGVtXCI+QWR2ZXJ0aXNlPC9hPjwvbGk+PC91bD48L2Rpdj48ZGl2IGNsYXNzPVwic29jaWFsLWZvb3RlclwiPjx1bD48bGk+PGkgY2xhc3M9XCJmYSBmYS1mYWNlYm9va1wiPjwvaT48L2xpPjxsaT48aSBjbGFzcz1cImZhIGZhLXR3aXR0ZXJcIj48L2k+PC9saT48bGk+PGkgY2xhc3M9XCJmYSBmYS1zb3VuZGNsb3VkXCI+PC9pPjwvbGk+PC91bD48L2Rpdj48L25hdj48ZGl2IGNsYXNzPVwiYm90dG9tLWZvb3RlclwiPjxoMiBjbGFzcz1cImxhYmVsXCI+JmNvcHk7IDIwMTYgRnJlcXVlbmN5IEN1bHR1cmU8L2gyPjwvZGl2PjwvZGl2PjwvZm9vdGVyPicpO1xufV0pO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IERhbm55IG9uIDExLzYvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpXG4gIC5kaXJlY3RpdmUoJ3NpdGVGb290ZXInLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3QgOiAnRScsXG4gICAgICB0ZW1wbGF0ZVVybCA6ICdwYXJ0aWFscy9zaXRlLWZvb3Rlci5odG1sJ1xuICAgIH1cbiAgfSlcbiIsImFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdwYXJ0aWFscy9zaXRlLWF1ZGlvLmh0bWwnLFxuICAgICc8ZGl2IGNsYXNzPVwic2l0ZS1hdWRpb1wiPjxkaXYgY2xhc3M9XCJuYXZiYXIgbmF2YmFyLWRlZmF1bHQgbmF2YmFyLWZpeGVkLWJvdHRvbVwiIHJvbGU9XCJuYXZpZ2F0aW9uXCI+PGRpdiBjbGFzcz1cImNvbnRhaW5lci1mbHVpZFwiIHBsYW5ndWxhcj1cInt7dHJhY2tVcmx9fVwiIG5nLWlmPVwidHJhY2tVcmxcIj48ZGl2IGNsYXNzPVwibmF2YmFyLWhlYWRlclwiPjxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwibmF2YmFyLXRvZ2dsZSBjb2xsYXBzZWQgYnV0dG9uLWRlZmF1bHRcIiBkYXRhLXRvZ2dsZT1cImNvbGxhcHNlXCIgZGF0YS10YXJnZXQ9XCIjYXVkaW8tcGxheWVyXCI+PGkgY2xhc3M9XCJmYSBmYS1tdXNpY1wiPjwvaT48L2J1dHRvbj48L2Rpdj48ZGl2IGNsYXNzPVwiZnVsbC1jb250cm9scyBjb250YWluZXIgaGlkZGVuLXhzXCI+PHVsIGNsYXNzPVwiYXVkaW8tY29udHJvbHNcIj48bGk+PGkgY2xhc3M9XCJmYSBmYS1iYWNrd2FyZFwiPjwvaT48L2xpPjxsaSBuZy1jbGljaz1cInBsYXlQYXVzZSgpXCI+PGkgY2xhc3M9XCJmYSBmYS1wbGF5XCIgbmctaWY9XCJwbGF5ZXIucGxheWluZyAhPT0gdHJhY2suc3JjXCI+PC9pPiA8aSBjbGFzcz1cImZhIGZhLXBhdXNlXCIgbmctaWY9XCJwbGF5ZXIucGxheWluZyA9PSB0cmFjay5zcmNcIj48L2k+PC9saT48bGk+PGkgY2xhc3M9XCJmYSBmYS1mb3J3YXJkXCI+PC9pPjwvbGk+PC91bD48aW1nIG5nLXNyYz1cInt7dHJhY2suYXJ0d29ya191cmx9fVwiIGNsYXNzPVwiaW1hZ2Utc2hhZG93IGF1ZGlvLWltYWdlXCIgaW1hZ2Utc2hhZG93Pjx1bCBjbGFzcz1cImF1ZGlvLWluZm8tZnVsbFwiPjxsaT48aDEgY2xhc3M9XCJsYWJlbFwiPkFydGlzdCA6IDxzcGFuPnt7dHJhY2sudXNlci51c2VybmFtZX19PC9zcGFuPjwvaDE+PC9saT48bGk+PGgxIGNsYXNzPVwibGFiZWxcIj5UcmFjayA6IDxzcGFuPnt7dHJhY2sudGl0bGV9fTwvc3Bhbj48L2gxPjwvbGk+PC91bD48L2Rpdj48ZGl2IGNsYXNzPVwiaGlkZGVuLXNtIGhpZGRlbi1tZCBoaWRkZW4tbGcgbWluaS1jb250cm9scyBjb250YWluZXItZmx1aWRcIj48dWwgY2xhc3M9XCJhdWRpby1jb250cm9sc1wiPjxsaT48aSBjbGFzcz1cImZhIGZhLWJhY2t3YXJkXCI+PC9pPjwvbGk+PGxpIG5nLWNsaWNrPVwicGxheVBhdXNlKClcIj48aSBjbGFzcz1cImZhIGZhLXBsYXlcIiBuZy1pZj1cInBsYXllci5wbGF5aW5nICE9PSB0cmFjay5zcmNcIj48L2k+IDxpIGNsYXNzPVwiZmEgZmEtcGF1c2VcIiBuZy1pZj1cInBsYXllci5wbGF5aW5nID09IHRyYWNrLnNyY1wiPjwvaT48L2xpPjxsaT48aSBjbGFzcz1cImZhIGZhLWZvcndhcmRcIj48L2k+PC9saT48L3VsPjwvZGl2PjxkaXYgY2xhc3M9XCJjb2xsYXBzZSBuYXZiYXItY29sbGFwc2VcIiBpZD1cImF1ZGlvLXBsYXllclwiPjx1bCBjbGFzcz1cIm5hdiBuYXZiYXItbmF2IGNvbnRhaW5lciBoaWRkZW4tbWQgaGlkZGVuLWxnIGhpZGRlbi1zbSBtaW5pLWF1ZGlvXCI+PGRpdiBjbGFzcz1cImF1ZGlvLWluZm9cIj48aW1nIG5nLXNyYz1cInt7dHJhY2suYXJ0d29ya191cmx9fVwiIGNsYXNzPVwiaW1hZ2Utc2hhZG93IGF1ZGlvLWltYWdlXCIgaW1hZ2Utc2hhZG93Pjx1bD48bGk+PGgxIGNsYXNzPVwibGFiZWxcIj5BcnRpc3QgOiA8c3Bhbj57e3RyYWNrLnVzZXIudXNlcm5hbWV9fTwvc3Bhbj48L2gxPjwvbGk+PGxpPjxoMSBjbGFzcz1cImxhYmVsXCI+VGl0bGUgOiA8c3Bhbj57e3RyYWNrLnRpdGxlfX08L3NwYW4+PC9oMT48L2xpPjwvdWw+PC9kaXY+PC91bD48L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj4nKTtcbn1dKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBEYW5ueSBvbiAxMS82LzE2LlxuICovXG5cbmFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpXG4gIC5kaXJlY3RpdmUoJ3NpdGVBdWRpbycsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdCA6ICdFJyxcbiAgICAgIHRlbXBsYXRlVXJsIDogJ3BhcnRpYWxzL3NpdGUtYXVkaW8uaHRtbCcsXG4gICAgICBsaW5rIDogZnVuY3Rpb24oc2NvcGUsIGVsZW0sIGF0dHJzKSB7XG5cbiAgICAgICAgdmFyIGNsaWVudElkID0gJ29lclhmNm5CY0R1NUNvTmRhT3JJR3V0VkNLWFBZdlNCJztcbiAgICAgICAgc2NvcGUudHJhY2tVcmwgPSAnaHR0cHM6Ly9zb3VuZGNsb3VkLmNvbS9pdHphaWEvbWl4LW1hY2hpbmUtMjk3LTE2LW5vdi0yMDE2LXdpdGgtaXR6YWlhJztcblxuICAgICAgICBTQy5pbml0aWFsaXplKHtcbiAgICAgICAgICBjbGllbnRfaWQ6IGNsaWVudElkXG4gICAgICAgIH0pO1xuICAgICAgICBTQy5yZXNvbHZlKCdodHRwczovL3NvdW5kY2xvdWQuY29tL2l0emFpYS9taXgtbWFjaGluZS0yOTctMTYtbm92LTIwMTYtd2l0aC1pdHphaWEnKVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHRyYWNrKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygndHJhY2s6ICcsIHRyYWNrKTtcbiAgICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgfSlcblxuIiwiYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3BhcnRpYWxzL3NpZGVtZW51Lmh0bWwnLFxuICAgICc8bmF2IGNsYXNzPVwibW9iaWxlLW1lbnVcIiBuZy1jbGFzcz1cIntcXCdzaG93LW1lbnVcXCcgOiBzaG93TWVudX1cIj48ZGl2IGNsYXNzPVwibmF2LWNvbnRhaW5lclwiPjx1bD48aDEgY2xhc3M9XCJzaXRlLWxpc3QtdGl0bGVcIj5TaXRlPC9oMT48bGk+PGEgdWktc3JlZj1cIm5ld3NcIiBjbGFzcz1cInNpdGUtbGlzdC1pdGVtXCI+TmV3czwvYT48L2xpPjxsaT48YSB1aS1zcmVmPVwiZmVhdHVyZXNcIiBjbGFzcz1cInNpdGUtbGlzdC1pdGVtXCI+RmVhdHVyZXM8L2E+PC9saT48bGk+PGEgdWktc3JlZj1cImNvbW1lbnRhcnlcIiBjbGFzcz1cInNpdGUtbGlzdC1pdGVtXCI+Q29tbWVudGFyeTwvYT48L2xpPjxsaT48YSB1aS1zcmVmPVwiU291bmRcIiBjbGFzcz1cInNpdGUtbGlzdC1pdGVtXCI+U291bmQ8L2E+PC9saT48bGk+PGEgdWktc3JlZj1cImZpbG1cIiBjbGFzcz1cInNpdGUtbGlzdC1pdGVtXCI+RmlsbTwvYT48L2xpPjwvdWw+PHVsPjxoMSBjbGFzcz1cInNpdGUtbGlzdC10aXRsZVwiPkFib3V0PC9oMT48bGk+PGEgaHJlZj1cIlwiIGNsYXNzPVwic2l0ZS1saXN0LWl0ZW1cIj5BYm91dDwvYT48L2xpPjxsaT48YSBocmVmPVwibWFpbHRvOkRhbm55QEZyZXF1ZW5jeUN1bHR1cmUuY29tLCBCZW5ARnJlcXVlbmN5Q3VsdHVyZVwiIGNsYXNzPVwic2l0ZS1saXN0LWl0ZW1cIj5Db250YWN0PC9hPjwvbGk+PGxpPjxhIGhyZWY9XCJtYWlsdG86RGFubnlARnJlcXVlbmN5Q3VsdHVyZS5jb20sIEJlbkBGcmVxdWVuY3lDdWx0dXJlXCIgY2xhc3M9XCJzaXRlLWxpc3QtaXRlbVwiPlN1Ym1pc3Npb25zPC9hPjwvbGk+PGxpPjxhIGhyZWY9XCJtYWlsdG86RGFubnlARnJlcXVlbmN5Q3VsdHVyZS5jb20sIEJlbkBGcmVxdWVuY3lDdWx0dXJlXCIgY2xhc3M9XCJzaXRlLWxpc3QtaXRlbVwiPkFkdmVydGlzZTwvYT48L2xpPjwvdWw+PC9kaXY+PGRpdiBjbGFzcz1cInNvY2lhbC1jb250YWluZXJcIj48dWw+PGxpPjxpIGNsYXNzPVwiZmEgZmEtZmFjZWJvb2tcIj48L2k+PC9saT48bGk+PGkgY2xhc3M9XCJmYSBmYS10d2l0dGVyXCI+PC9pPjwvbGk+PGxpPjxpIGNsYXNzPVwiZmEgZmEtc291bmRjbG91ZFwiPjwvaT48L2xpPjwvdWw+PC9kaXY+PC9uYXY+Jyk7XG59XSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgRGFubnkgb24gMTEvNS8xNi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJylcbiAgLmRpcmVjdGl2ZSgnc2lkZW1lbnUnLCBmdW5jdGlvbigkcm9vdFNjb3BlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNjb3BlOiAnRScsXG4gICAgICB0ZW1wbGF0ZVVybCA6ICdwYXJ0aWFscy9zaWRlbWVudS5odG1sJyxcbiAgICAgIGxpbmsgOiBmdW5jdGlvbihzY29wZSwgZWxlbSwgYXR0cnMpIHtcblxuICAgICAgICBzY29wZS5zaG93TWVudSA9IGZhbHNlO1xuICAgICAgICBzY29wZS50b2dnbGVMaW5rcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBsaW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vYmlsZS1tZW51JykucXVlcnlTZWxlY3RvckFsbCgnbGknKTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmsubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxpbmtbaV0uY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgICRyb290U2NvcGUuJG9uKFwiJHN0YXRlQ2hhbmdlU3VjY2Vzc1wiLCBmdW5jdGlvbihldmVudCwgdG9TdGF0ZSkge1xuICAgICAgICAgIGlmKHNjb3BlLnNob3dNZW51KSB7XG4gICAgICAgICAgICBzY29wZS50b2dnbGVMaW5rcygpXG4gICAgICAgICAgICBzY29wZS5zaG93TWVudSA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3BhcnRpYWxzL3NlY3Rpb24taGVhZGVyLmh0bWwnLFxuICAgICc8aGVhZGVyIGNsYXNzPVwic2VjdGlvbi1oZWFkZXJcIiBpZD1cInNlY3Rpb25IZWFkZXJcIj48aW1nIHNyYz1cIi4uL2ltYWdlcy9mcmVxdWVuY3lfY3VsdHVyZV9sb2dvLnN2Z1wiIGNsYXNzPVwibG9nb1wiPjx1bCBjbGFzcz1cImhlYWRlci1tZW51XCI+PGxpIG5nLWNsaWNrPVwiZ29UbyhcXCduZXdzXFwnKVwiIG5nLWNsYXNzPVwie1xcJ2FjdGl2ZS1saW5rXFwnIDogaXNBY3RpdmUoXFwnbmV3c1xcJyl9XCI+PGgxIGNsYXNzPVwidGl0bGVcIj5OZXdzPC9oMT48L2xpPjxsaSBuZy1jbGljaz1cImdvVG8oXFwnZmVhdHVyZXNcXCcpXCIgbmctY2xhc3M9XCJ7XFwnYWN0aXZlLWxpbmtcXCcgOiBpc0FjdGl2ZShcXCdmZWF0dXJlc1xcJyl9XCI+PGgxIGNsYXNzPVwidGl0bGVcIj5GZWF0dXJlczwvaDE+PC9saT48bGkgbmctY2xpY2s9XCJnb1RvKFxcJ2NvbW1lbnRhcnlcXCcpXCIgbmctY2xhc3M9XCJ7XFwnYWN0aXZlLWxpbmtcXCcgOiBpc0FjdGl2ZShcXCdjb21tZW50YXJ5XFwnKX1cIj48aDEgY2xhc3M9XCJ0aXRsZVwiPkNvbW1lbnRhcnk8L2gxPjwvbGk+PGxpIG5nLWNsaWNrPVwiZ29UbyhcXCdmaWxtXFwnKVwiIG5nLWNsYXNzPVwie1xcJ2FjdGl2ZS1saW5rXFwnIDogaXNBY3RpdmUoXFwnZmlsbVxcJyl9XCI+PGgxIGNsYXNzPVwidGl0bGVcIj5GaWxtPC9oMT48L2xpPjxsaSBuZy1jbGljaz1cImdvVG8oXFwnc291bmRcXCcpXCIgbmctY2xhc3M9XCJ7XFwnYWN0aXZlLWxpbmtcXCcgOiBpc0FjdGl2ZShcXCdzb3VuZFxcJyl9XCI+PGgxIGNsYXNzPVwidGl0bGVcIj5Tb3VuZDwvaDE+PC9saT48L3VsPjwvaGVhZGVyPicpO1xufV0pO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IERhbm55IG9uIDExLzgvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpXG4gIC5kaXJlY3RpdmUoJ3NlY3Rpb25IZWFkZXInLCBmdW5jdGlvbigkc3RhdGUsICR3aW5kb3csICRyb290U2NvcGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3QgOiAnRScsXG4gICAgICB0ZW1wbGF0ZVVybCA6ICdwYXJ0aWFscy9zZWN0aW9uLWhlYWRlci5odG1sJyxcbiAgICAgIGxpbmsgOiBmdW5jdGlvbihzY29wZSwgZWxlbSwgYXR0cnMpIHtcbiAgICAgICAgLy9zY29wZS5oZWFkZXJTdHlsZSA9IHtcbiAgICAgICAgLy8gICdiYWNrZ3JvdW5kLXJlcGVhdCcgOiAnbm8tcmVwZWF0JyxcbiAgICAgICAgLy8gICdiYWNrZ3JvdW5kLXBvc2l0aW9uJyA6ICdjZW50ZXInLFxuICAgICAgICAvLyAgJ2JhY2tncm91bmQtc2l6ZScgOiAnY292ZXInXG4gICAgICAgIC8vXG4gICAgICAgIC8vfTtcbiAgICAgICAgLy9zY29wZS5zdGF0ZSA9ICRzdGF0ZTtcbiAgICAgICAgLy92YXIgd2luZG93V2lkdGggPSAkd2luZG93LmlubmVyV2lkdGgsXG4gICAgICAgIC8vICBzdGF0ZU5hbWU7XG4gICAgICAgIC8vXG4gICAgICAgIC8vLy8gSW4gY2FzZSBvZiBzY3JlZW4gcmVzaXplcywgbWFrZSBzdXJlIHdlIHVzZSBjb3JyZWN0IGJhY2tncm91bmQgaW1hZ2VcbiAgICAgICAgLy9hbmd1bGFyLmVsZW1lbnQoJHdpbmRvdykuYmluZCgncmVzaXplJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyAgd2luZG93V2lkdGggPSAkd2luZG93LmlubmVyV2lkdGg7XG4gICAgICAgIC8vICBpZihzdGF0ZU5hbWUgIT0gJ2hvbWUnKSBnZXRIZWFkZXJJbWFnZSgpO1xuICAgICAgICAvL30pO1xuICAgICAgICAvL1xuICAgICAgICAvLyRyb290U2NvcGUuJG9uKFwiJHN0YXRlQ2hhbmdlU3VjY2Vzc1wiLCBmdW5jdGlvbihldmVudCwgdG9TdGF0ZSkge1xuICAgICAgICAvLyAgc3RhdGVOYW1lID0gdG9TdGF0ZS5uYW1lO1xuICAgICAgICAvLyAgaWYoc3RhdGVOYW1lICE9ICdob21lJykgZ2V0SGVhZGVySW1hZ2UoKTtcbiAgICAgICAgLy99KTtcbiAgICAgICAgLy9mdW5jdGlvbiBnZXRIZWFkZXJJbWFnZSgpIHtcbiAgICAgICAgLy8gIHZhciBpbWFnZUxvY2F0aW9uID0gc3RhdGVOYW1lICsgJy1oZWFkZXIucG5nJztcbiAgICAgICAgLy8gIGlmKHdpbmRvd1dpZHRoIDwgNzY4KSBpbWFnZUxvY2F0aW9uID0gJ21vYmlsZS0nICsgaW1hZ2VMb2NhdGlvbjtcbiAgICAgICAgLy8gIGltYWdlTG9jYXRpb24gPSAndXJsKC4uL2ltYWdlcy8nICsgaW1hZ2VMb2NhdGlvbiArICcpJztcbiAgICAgICAgLy8gIHNjb3BlLmhlYWRlclN0eWxlWydiYWNrZ3JvdW5kLWltYWdlJ10gPSBpbWFnZUxvY2F0aW9uO1xuICAgICAgICAvL31cbiAgICAgICAgc2NvcGUuaXNBY3RpdmUgPSBmdW5jdGlvbihzdGF0ZSkge1xuICAgICAgICAgIHJldHVybiAkc3RhdGUuY3VycmVudC5uYW1lID09IHN0YXRlO1xuICAgICAgICB9XG4gICAgICAgIHNjb3BlLmdvVG8gPSBmdW5jdGlvbihzdGF0ZSkge1xuICAgICAgICAgICRzdGF0ZS5nbyhzdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgncGFydGlhbHMvbmF2YmFyLmh0bWwnLFxuICAgICc8ZGl2IGNsYXNzPVwiaGVhZGVyXCI+PG5hdiBjbGFzcz1cIm5hdmJhciBuYXZiYXItZGVmYXVsdCBuYXZiYXItaW52ZXJzZSBuYXZiYXItZml4ZWQtdG9wIG1haW4tbmF2YmFyXCIgcm9sZT1cIm5hdmlnYXRpb25cIiBuZy1jbGFzcz1cIntcXCd2aXNpYmxlLW5hdlxcJyA6IHNob3dOYXZiYXJ9XCI+PGRpdiBjbGFzcz1cImNvbnRhaW5lclwiPjxkaXYgY2xhc3M9XCJtZW51LWxvZ28gaGlkZGVuLXhzXCIgbmctY2xpY2s9XCJnb1RvKFxcJ2hvbWVcXCcpXCI+PGltZyBzcmM9XCIuLi9pbWFnZXMvZnJlcXVlbmN5X2N1bHR1cmVfdGl0bGUuc3ZnXCI+PC9kaXY+PHVsIGNsYXNzPVwiZnVsbC1uYXYgaGlkZGVuLXhzXCI+PGxpIG5nLWNsaWNrPVwiZ29UbyhcXCduZXdzXFwnKVwiIG5nLWNsYXNzPVwie1xcJ2FjdGl2ZS1saW5rXFwnIDogaXNBY3RpdmUoXFwnbmV3c1xcJyl9XCIgY2xhc3M9XCJuYXZiYXItbGlua1wiPjxoMT5OZXdzPC9oMT48L2xpPjxsaSBuZy1jbGljaz1cImdvVG8oXFwnZmVhdHVyZXNcXCcpXCIgY2xhc3M9XCJuYXZiYXItbGlua1wiIG5nLWNsYXNzPVwie1xcJ2FjdGl2ZS1saW5rXFwnIDogaXNBY3RpdmUoXFwnZmVhdHVyZXNcXCcpfVwiPjxoMT5GZWF0dXJlczwvaDE+PC9saT48bGkgbmctY2xpY2s9XCJnb1RvKFxcJ2NvbW1lbnRhcnlcXCcpXCIgY2xhc3M9XCJuYXZiYXItbGlua1wiIG5nLWNsYXNzPVwie1xcJ2FjdGl2ZS1saW5rXFwnIDogaXNBY3RpdmUoXFwnY29tbWVudGFyeVxcJyl9XCI+PGgxPkNvbW1lbnRhcnk8L2gxPjwvbGk+PGxpIG5nLWNsaWNrPVwiZ29UbyhcXCdzb3VuZFxcJylcIiBjbGFzcz1cIm5hdmJhci1saW5rXCIgbmctY2xhc3M9XCJ7XFwnYWN0aXZlLWxpbmtcXCcgOiBpc0FjdGl2ZShcXCdzb3VuZFxcJyl9XCI+PGgxPlNvdW5kPC9oMT48L2xpPjxsaSBuZy1jbGljaz1cImdvVG8oXFwnZmlsbVxcJylcIiBjbGFzcz1cIm5hdmJhci1saW5rXCIgbmctY2xhc3M9XCJ7XFwnYWN0aXZlLWxpbmtcXCcgOiBpc0FjdGl2ZShcXCdmaWxtXFwnKX1cIj48aDE+RmlsbTwvaDE+PC9saT48L3VsPjxkaXYgY2xhc3M9XCJ2aXNpYmxlLXhzIG1vYmlsZS1uYXZiYXJcIj48aW1nIHNyYz1cIi4uL2ltYWdlcy9mcmVxdWVuY3lfY3VsdHVyZV90aXRsZS5zdmdcIiBuZy1jbGljaz1cImdvVG8oXFwnaG9tZVxcJylcIj48aGFtYnVyZ2VyLW1lbnUgc3RhdGU9XCJzaG93TWVudVwiIG5nLWNsaWNrPVwidG9nZ2xlTGlua3MoKVwiPjwvaGFtYnVyZ2VyLW1lbnU+PC9kaXY+PC9kaXY+PC9uYXY+PC9kaXY+Jyk7XG59XSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgRGFubnkgb24gMTAvMTAvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpXG4gIC5kaXJlY3RpdmUoJ25hdmJhcicsIGZ1bmN0aW9uKCR3aW5kb3csICRyb290U2NvcGUsICRzdGF0ZSwgJHRpbWVvdXQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc2NvcGU6ICdFJyxcbiAgICAgIHRlbXBsYXRlVXJsIDogJ3BhcnRpYWxzL25hdmJhci5odG1sJyxcbiAgICAgIGxpbmsgOiBmdW5jdGlvbihzY29wZSwgZWxlbSwgYXR0cnMpIHtcblxuICAgICAgICAvKlxuICAgICAgICAgQWx3YXlzIFNob3cgTmF2YmFyIG9uIG1vYmlsZSBzY3JlZW5zXG5cbiAgICAgICAgIE1vbml0b3IgV2lkdGggaW4gY2FzZSBvZiBzY3JlZW4gcmVzaXplcnMhXG5cbiAgICAgICAgIEhpZGUgbmF2YmFyIG9uIGhvbWUgdmlldyBub24tbW9iaWxlXG4gICAgICAgICAgKi9cbiAgICAgICAgc2NvcGUuc3RhdGUgPSAkc3RhdGU7XG5cbiAgICAgICAgdmFyIHdpbmRvd1dpZHRoID0gJHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgICBzY29wZS5zaG93TmF2YmFyID0gdHJ1ZTtcblxuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJHdpbmRvdykuYmluZCgncmVzaXplJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHdpbmRvd1dpZHRoID0gJHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgICAgIHNjb3BlLnNob3dOYXZiYXIgPSAod2luZG93V2lkdGggPCA3NjgpO1xuICAgICAgICAgIGlmKHNjb3BlLnN0YXRlLmN1cnJlbnQubmFtZSA9PSAnaG9tZScmJiB3aW5kb3dXaWR0aCA+PSA3NjggKSB3YXRjaEhvbWVTY3JvbGwoKTtcblxuICAgICAgICB9KTtcbiAgICAgICAgJHJvb3RTY29wZS4kb24oXCIkc3RhdGVDaGFuZ2VTdWNjZXNzXCIsIGZ1bmN0aW9uKGV2ZW50LCB0b1N0YXRlKSB7XG4gICAgICAgICAgaWYod2luZG93V2lkdGggPCA3NjgpIHtcbiAgICAgICAgICAgIHNjb3BlLnNob3dOYXZiYXIgPSB0cnVlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzY29wZS5zaG93TmF2YmFyID0gKHRvU3RhdGUubmFtZSAhPT0gJ2hvbWUnICYmIHdpbmRvd1dpZHRoID49IDc2OCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmKHRvU3RhdGUubmFtZSA9PSAnaG9tZScgJiYgd2luZG93V2lkdGggPj0gNzY4KSB3YXRjaEhvbWVTY3JvbGwoKVxuICAgICAgICAgIGVsc2UgYW5ndWxhci5lbGVtZW50KCR3aW5kb3cpLnVuYmluZCgnc2Nyb2xsJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNjb3BlLmdvVG8gPSBmdW5jdGlvbihzdGF0ZSkge1xuICAgICAgICAgICRzdGF0ZS5nbyhzdGF0ZSk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaGVhZGVySGVpZ2h0O1xuICAgICAgICBmdW5jdGlvbiB3YXRjaEhvbWVTY3JvbGwoKSB7XG4gICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBoZWFkZXJIZWlnaHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VjdGlvbkhlYWRlcicpLmNsaWVudEhlaWdodDtcbiAgICAgICAgICB9LCAxMDApO1xuXG4gICAgICAgICAgYW5ndWxhci5lbGVtZW50KCR3aW5kb3cpLmJpbmQoXCJzY3JvbGxcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBzY29wZS5zaG93TmF2YmFyID0gKCR3aW5kb3cuc2Nyb2xsWSA+IGhlYWRlckhlaWdodClcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICBzY29wZS5pc0FjdGl2ZSA9IGZ1bmN0aW9uKHN0YXRlKSB7XG4gICAgICAgICAgcmV0dXJuICRzdGF0ZS5jdXJyZW50Lm5hbWUgPT0gc3RhdGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgncGFydGlhbHMvbWFpbi1zZWN0aW9uLnBhcnRpYWwuaHRtbCcsXG4gICAgJzxzZWN0aW9uIGNsYXNzPVwic2VjdGlvbi13aXRoLXRvcC1uYXYgY29udGFpbmVyXCI+PGgxIGNsYXNzPVwiZGlzcGxheS0yXCI+e3tzZWN0aW9uVGl0bGV9fTwvaDE+PGgyIGNsYXNzPVwic3ViaGVhZC0xXCI+e3tzZWN0aW9uU3ViVGl0bGV9fTwvaDI+PGNvbnRlbnQtY29udGFpbmVyIGNvbnRlbnQtdHlwZT1cInt7Y29udGVudFR5cGV9fVwiPjwvY29udGVudC1jb250YWluZXI+PC9zZWN0aW9uPicpO1xufV0pO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IERhbm55IG9uIDExLzYvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpXG4gIC5kaXJlY3RpdmUoJ2ltYWdlU2hhZG93JywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0IDogJ0EnLFxuICAgICAgbGluayA6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtLCBhdHRycykge1xuICAgICAgICB2YXIgaW1nID0gZWxlbVswXTtcbiAgICAgICAgdmFyIHN0eWxlO1xuICAgICAgICB2YXIgaW1nU3JjO1xuXG4gICAgICAgIGVsZW0uYmluZCgnZXJyb3InLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBhdHRycy4kc2V0KCdzcmMnLCAnLi4vaW1hZ2VzL2xvZ28tYmFja3VwLnBuZycpO1xuICAgICAgICAgIGltZ1NyYyA9ICcuLi9pbWFnZXMvbG9nby1iYWNrdXAucG5nJztcbiAgICAgICAgfSlcblxuICAgICAgICBhdHRycy4kb2JzZXJ2ZSgnc3JjJywgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICBpbWdTcmMgPSBhdHRycy5zcmM7XG4gICAgICAgICAgaWYoaW1nU3JjICE9ICcuLi9pbWFnZXMvbG9nby1iYWNrdXAucG5nJykgYWRkU2hhZG93KCk7XG4gICAgICAgIH0pXG5cbiAgICAgICAgZnVuY3Rpb24gYWRkU2hhZG93KCkge1xuICAgICAgICAgIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICBjb250YWluZXIuY2xhc3NOYW1lID0gJ2ltYWdlLXNoYWRvdy1jb250YWluZXIgaW1hZ2Utc2hhZG93JztcbiAgICAgICAgICBjb250YWluZXIuaWQgPSBcImltYWdlLXNoYWRvdy0wXCI7XG4gICAgICAgICAgaW1nLmNsYXNzTGlzdC5yZW1vdmUoJ2ltYWdlLXNoYWRvdycpO1xuICAgICAgICAgIGltZy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShjb250YWluZXIsIGltZyk7XG4gICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGltZyk7XG4gICAgICAgICAgc3R5bGUgPSBcIiNpbWFnZS1zaGFkb3ctMFwiK1wiOjphZnRlciB7XCIrXG4gICAgICAgICAgICBcIiAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCdcIitpbWdTcmMrXCInKTtcIitcbiAgICAgICAgICAgIFwiICBjb250ZW50OiAnJztcIitcbiAgICAgICAgICAgIFwifVwiO1xuICAgICAgICAgIHZhciAkc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG4gICAgICAgICAgJHN0eWxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHN0eWxlKSk7XG4gICAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCgkc3R5bGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KVxuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IERhbm55IG9uIDExLzgvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpXG4gIC5kaXJlY3RpdmUoJ2hhbWJ1cmdlck1lbnUnLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgIHNjb3BlOiB7XG4gICAgICAgIHN0YXRlOiAnPSdcbiAgICAgIH0sXG4gICAgICB0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL2hhbWJ1cmdlci1tZW51Lmh0bWwnLFxuICAgICAgbGluazogZnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCwgJGF0dHJzKSB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBuZ2RvYyBvYmplY3RcbiAgICAgICAgICogQG5hbWUgdG9nZ2xlU3RhdGVcbiAgICAgICAgICogQG1ldGhvZE9mIG5nSGFtYnVyZ2VyLmRpcmVjdGl2ZTpoYW1idXJnZXJUb2dnbGVcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIFRvZ2dsZXMgdHdvIHdheSBib3VuZCBtb2RlbC5cbiAgICAgICAgICovXG4gICAgICAgICRzY29wZS50b2dnbGVTdGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiAkc2NvcGUuc3RhdGUgPSAhJHNjb3BlLnN0YXRlO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH07XG4gIH0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgncGFydGlhbHMvaG9tZS5odG1sJyxcbiAgICAnPHNlY3Rpb24taGVhZGVyIGNsYXNzPVwiaGlkZGVuLXhzXCI+PC9zZWN0aW9uLWhlYWRlcj48c2VjdGlvbiBjbGFzcz1cInNlY3Rpb24td2l0aC10b3AtbmF2IGNvbnRhaW5lclwiPjxjb250ZW50LWNvbnRhaW5lciBjb250ZW50LXR5cGU9XCJob21lXCI+PC9jb250ZW50LWNvbnRhaW5lcj48L3NlY3Rpb24+Jyk7XG59XSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgRGFubnkgb24gMTEvMjgvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpXG4gIC5kaXJlY3RpdmUoJ2NvbnRlbnRIZWFkZXInLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3QgOiAnRScsXG4gICAgICB0ZW1wbGF0ZVVybCA6ICdwYXJ0aWFscy9jb250ZW50LWhlYWRlci5odG1sJyxcbiAgICAgIHNjb3BlIDoge1xuICAgICAgICBzZWxlY3RlZENvbnRlbnQgOiAnPSdcbiAgICAgIH0sXG4gICAgICBsaW5rIDogZnVuY3Rpb24oc2NvcGUsIGVsZW0sIGF0dHJzKSB7XG4gICAgICB9XG4gICAgfVxuICB9KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3BhcnRpYWxzL2hhbWJ1cmdlci1tZW51Lmh0bWwnLFxuICAgICc8ZGl2IGNsYXNzPVwibWF0ZXJpYWwtZGVzaWduLWhhbWJ1cmdlclwiIG5nLWNsaWNrPVwidG9nZ2xlU3RhdGUoKVwiPjxidXR0b24gY2xhc3M9XCJtYXRlcmlhbC1kZXNpZ24taGFtYnVyZ2VyX19pY29uXCI+PHNwYW4gY2xhc3M9XCJtYXRlcmlhbC1kZXNpZ24taGFtYnVyZ2VyX19sYXllclwiIG5nLWNsYXNzPVwiXFwnbWF0ZXJpYWwtZGVzaWduLWhhbWJ1cmdlcl9faWNvbi0tXFwnICsgKHN0YXRlID8gXFwndG9cXCcgOiBcXCdmcm9tXFwnKSArIFxcJy1hcnJvd1xcJ1wiPjwvc3Bhbj48L2J1dHRvbj48L2Rpdj4nKTtcbn1dKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBEYW5ueSBvbiAxMS8yMi8xNi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJylcbiAgLmRpcmVjdGl2ZSgnY29udGVudENvbnRhaW5lcicsIGZ1bmN0aW9uKENvbnRlbnRTZXJ2aWNlLCAkcm9vdFNjb3BlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQsICRzdGF0ZSkge1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdCA6ICdFJyxcbiAgICAgIHNjb3BlIDoge1xuICAgICAgICBjb250ZW50VHlwZSA6ICdAJ1xuICAgICAgfSxcbiAgICAgIHRlbXBsYXRlVXJsIDogJ3BhcnRpYWxzL2NvbnRlbnQtY29udGFpbmVyLmh0bWwnLFxuICAgICAgbGluayA6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtLCBhdHRycykge1xuICAgICAgICBDb250ZW50U2VydmljZS5nZXRDb250ZW50KClcbiAgICAgICAgICAudGhlbihmdW5jdGlvbihjb250ZW50KSB7XG4gICAgICAgICAgICBidWlsZENvbnRlbnQoY29udGVudClcbiAgICAgICAgICB9KVxuXG4gICAgICAgIC8vc2NvcGUuc2hvd0hlcm8gPSBmYWxzZTtcbiAgICAgICAgLy8kdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gIGNvbnNvbGUubG9nKCdzaG93IGhlcm8hJyk7XG4gICAgICAgIC8vICBzY29wZS5zaG93SGVybyA9IHRydWU7XG4gICAgICAgIC8vfSwxMDApO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdzY29wZTogJywgc2NvcGUuY29udGVudFR5cGUpO1xuICAgICAgICBmdW5jdGlvbiBidWlsZENvbnRlbnQoYWxsQ29udGVudCkge1xuICAgICAgICAgIGlmKHNjb3BlLmNvbnRlbnRUeXBlID09ICdob21lJykge1xuICAgICAgICAgICAgc2NvcGUuY29udGVudCA9IGFsbENvbnRlbnQ7XG4gICAgICAgICAgICBidWlsZEhlcm8oKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2NvcGUuY29udGVudCA9IFtdO1xuICAgICAgICAgICAgZm9yKHZhciBjPTA7YzxhbGxDb250ZW50Lmxlbmd0aDtjKyspIHtcbiAgICAgICAgICAgICAgaWYoYWxsQ29udGVudFtjXS5jb250ZW50VHlwZSA9PSBzY29wZS5jb250ZW50VHlwZSkge1xuICAgICAgICAgICAgICAgIHNjb3BlLmNvbnRlbnQucHVzaChhbGxDb250ZW50W2NdKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBidWlsZEhlcm8oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuXG4gICAgICAgIGZ1bmN0aW9uIGJ1aWxkSGVybygpIHtcbiAgICAgICAgICBzY29wZS5oZXJvQ29udGVudCA9IFtdO1xuICAgICAgICAgIHZhciBsaW1pdCA9IDM7XG4gICAgICAgICAgaWYoc2NvcGUuY29udGVudC5sZW5ndGggPCAzKSB7XG4gICAgICAgICAgICBsaW1pdCA9IHNjb3BlLmNvbnRlbnQubGVuZ3RoO1xuICAgICAgICAgIH1cbiAgICAgICAgICBmb3IodmFyIGM9MDtjPGxpbWl0O2MrKykge1xuICAgICAgICAgICAgc2NvcGUuaGVyb0NvbnRlbnQucHVzaChzY29wZS5jb250ZW50W2NdKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2NvcGUuc2hvd0hlcm8gPSAoc2NvcGUuaGVyb0NvbnRlbnQubGVuZ3RoID4gMClcbiAgICAgICAgfVxuXG4gICAgICAgICRyb290U2NvcGUuJG9uKFwiJHN0YXRlQ2hhbmdlU3RhcnRcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2NvcGUuc2hvd0hlcm8gPSBmYWxzZTtcbiAgICAgICAgfSlcblxuICAgICAgICAkcm9vdFNjb3BlLiRvbihcIiRzdGF0ZUNoYW5nZVN1Y2Nlc3NcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnc2hvdyBoZXJvIScpO1xuICAgICAgICAgICAgc2NvcGUuc2hvd0hlcm8gPSB0cnVlO1xuICAgICAgICAgIH0sMjAwKVxuICAgICAgICB9KVxuXG4gICAgICAgIHNjb3BlLmdvVG8gPSBmdW5jdGlvbihjb250ZW50KSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnY29udGVudDogJywgY29udGVudCk7XG4gICAgICAgICAgaWYoY29udGVudC5jbGFzcyA9PSAnY3JlYXRvci1zZXJpZXMnKSB7XG4gICAgICAgICAgICBjb250ZW50LmNsYXNzID0gJ3ZpZXctY3JlYXRvci1zZXJpZXMnXG4gICAgICAgICAgfVxuICAgICAgICAgIENvbnRlbnRTZXJ2aWNlLnNldFNlbGVjdGVkKGNvbnRlbnQpO1xuICAgICAgICAgICRzdGF0ZS5nbygnY29udGVudCcsIHtjb250ZW50VHlwZTogY29udGVudC5jb250ZW50VHlwZSwgY29udGVudFVybCA6IGNvbnRlbnQudXJsfSlcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgfVxuICB9KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3BhcnRpYWxzL2NvbnRlbnQtaGVhZGVyLmh0bWwnLFxuICAgICc8aGVhZGVyIGNsYXNzPVwiY29udGVudC1oZWFkZXJcIj48aDEgY2xhc3M9XCJkaXNwbGF5LTJcIj57e3NlbGVjdGVkQ29udGVudC50aXRsZX19PC9oMT48aDEgY2xhc3M9XCJzdWJoZWFkLTJcIiBuZy1pZj1cInNlbGVjdGVkQ29udGVudC5hdXRob3JcIj5CeSB7e3NlbGVjdGVkQ29udGVudC5hdXRob3J9fTwvaDE+PGRpdiBjbGFzcz1cImhlYWRlci1pbWFnZVwiIG5nLXN0eWxlPVwie1xcJ2JhY2tncm91bmQtaW1hZ2VcXCcgOiBcXCd1cmwoXFwnICsgc2VsZWN0ZWRDb250ZW50LmhlYWRlckltYWdlICsgXFwnKVxcJ31cIj48L2Rpdj48dWwgY2xhc3M9XCJoZWFkZXItaW5mb1wiPjxsaT48aDIgY2xhc3M9XCJ0ZXh0LWNhcGl0YWxpemUgc3ViaGVhZC0xXCI+e3tzZWxlY3RlZENvbnRlbnQuY29udGVudFR5cGV9fTwvaDI+PC9saT48bGk+PGgyIGNsYXNzPVwiY2FwdGlvblwiPnt7c2VsZWN0ZWRDb250ZW50LnB1Ymxpc2hlZERhdGUgfCBkYXRlIDogXFwnRUVFRSwgTU1NTSBkLCB5XFwnfX08L2gyPjwvbGk+PC91bD48L2hlYWRlcj4nKTtcbn1dKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBEYW5ueSBvbiAxMi8xNS8xNi5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJylcbiAgICAuY29uZmlnKGZ1bmN0aW9uICgkbG9jYXRpb25Qcm92aWRlciwgJHN0YXRlUHJvdmlkZXIsICAkdXJsUm91dGVyUHJvdmlkZXIsXG4gICAgICAgICAgICAgICAgICAgICAgJHVybE1hdGNoZXJGYWN0b3J5UHJvdmlkZXIpIHtcblxuICAgICAgICAkdXJsTWF0Y2hlckZhY3RvcnlQcm92aWRlci5jYXNlSW5zZW5zaXRpdmUodHJ1ZSk7XG4gICAgICAgICR1cmxNYXRjaGVyRmFjdG9yeVByb3ZpZGVyLnN0cmljdE1vZGUoZmFsc2UpO1xuICAgICAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvJyk7XG5cbiAgICAgICAgJHN0YXRlUHJvdmlkZXJcbiAgICAgICAgICAgIC5zdGF0ZSgnaG9tZScsIHtcbiAgICAgICAgICAgICAgICB1cmwgOiAnLycsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlciA6ICdIb21lQ3RybCcsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiAncGFydGlhbHMvaG9tZS5odG1sJ1xuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgLnN0YXRlKCduZXdzJywge1xuICAgICAgICAgICAgICAgIHVybCA6ICcvbmV3cycsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlciA6ICdNYWluU2VjdGlvbkN0cmwnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsIDogJ3BhcnRpYWxzL21haW4tc2VjdGlvbi5wYXJ0aWFsLmh0bWwnLFxuICAgICAgICAgICAgICAgIHJlc29sdmUgOiB7XG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb25UaXRsZSA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdOZXdzJztcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvblN1YlRpdGxlIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ05ld3Mgc2VjdGlvbidcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGUgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnbmV3cydcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG5cblxuICAgICAgICAgICAgLnN0YXRlKCdmZWF0dXJlcycsIHtcbiAgICAgICAgICAgICAgICB1cmwgOiAnL2ZlYXR1cmVzJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyIDogJ01haW5TZWN0aW9uQ3RybCcsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiAncGFydGlhbHMvbWFpbi1zZWN0aW9uLnBhcnRpYWwuaHRtbCcsXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSA6IHtcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvblRpdGxlIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ0ZlYXR1cmVzJztcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvblN1YlRpdGxlIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ0ZlYXR1cmVzIHNlY3Rpb24nXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2ZlYXR1cmVzJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgLnN0YXRlKCdjb21tZW50YXJ5Jywge1xuICAgICAgICAgICAgICAgIHVybCA6ICcvY29tbWVudGFyeScsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlciA6ICdNYWluU2VjdGlvbkN0cmwnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsIDogJ3BhcnRpYWxzL21haW4tc2VjdGlvbi5wYXJ0aWFsLmh0bWwnLFxuICAgICAgICAgICAgICAgIHJlc29sdmUgOiB7XG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb25UaXRsZSA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdDb21tZW50YXJ5JztcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvblN1YlRpdGxlIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ0NvbW1lbnRhcnkgc2VjdGlvbidcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGUgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnY29tbWVudGFyeSdcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIC5zdGF0ZSgnc291bmQnLCB7XG4gICAgICAgICAgICAgICAgdXJsIDogJy9zb3VuZCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlciA6ICdNYWluU2VjdGlvbkN0cmwnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsIDogJ3BhcnRpYWxzL21haW4tc2VjdGlvbi5wYXJ0aWFsLmh0bWwnLFxuICAgICAgICAgICAgICAgIHJlc29sdmUgOiB7XG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb25UaXRsZSA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdTb3VuZCc7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb25TdWJUaXRsZSA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdTb3VuZCBzZWN0aW9uJ1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZSA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdzb3VuZCdcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIC5zdGF0ZSgnZmlsbScsIHtcbiAgICAgICAgICAgICAgICB1cmwgOiAnL2ZpbG0nLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIgOiAnTWFpblNlY3Rpb25DdHJsJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybCA6ICdwYXJ0aWFscy9tYWluLXNlY3Rpb24ucGFydGlhbC5odG1sJyxcbiAgICAgICAgICAgICAgICByZXNvbHZlIDoge1xuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uVGl0bGUgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnRmlsbSc7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb25TdWJUaXRsZSA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdGaWxtIHNlY3Rpb24nXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2ZpbG0nXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAuc3RhdGUoJ2FkbWluJywge1xuICAgICAgICAgICAgICAgIHVybCA6ICcvYWRtaW4nLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsIDogJ3BhcnRpYWxzL3ZpZXcuYWRtaW4uaHRtbCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlciA6ICdBZG1pbkN0cmwnXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAuc3RhdGUoJ2Fib3V0Jywge1xuICAgICAgICAgICAgICAgIHVybCA6ICcvYWJvdXQnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsIDogJ3BhcnRpYWxzL2Fib3V0Lmh0bWwnXG4gICAgICAgICAgICB9KVxuXG5cblxuICAgICAgICAgICAgLnN0YXRlKCdjb250ZW50Jywge1xuICAgICAgICAgICAgICAgIHVybCA6ICcvOmNvbnRlbnRUeXBlLzpjb250ZW50VXJsJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybCA6ICdwYXJ0aWFscy92aWV3LmNvbnRlbnQuaHRtbCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlciA6ICdWaWV3Q29udGVudEN0cmwnXG4gICAgICAgICAgICB9KVxuXG5cbiAgICAgICAgJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpLmhhc2hQcmVmaXgoJyEnKTtcblxuICAgIH0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3BhcnRpYWxzL2NvbnRlbnQtY29udGFpbmVyLmh0bWwnLFxuICAgICc8c2VjdGlvbiBjbGFzcz1cImNvbnRlbnQtY29udGFpbmVyXCI+PGRpdiBjbGFzcz1cImhlcm8tY29udGFpbmVyXCI+PHNsaWNrIGluZmluaXRlPVwidHJ1ZVwiIHNsaWRlcy10by1zaG93PVwiMVwiIHNsaWRlcy10by1zY3JvbGw9XCIxXCIgYXJyb3dzPVwiZmFsc2VcIiBhdXRvcGxheT1cInRydWVcIiBjbGFzcz1cImNvbC14cy0xMiBoZXJvLWNvbnRlbnRcIiBwYXVzZS1vbi1ob3Zlcj1cInRydWVcIiBhdXRvcGxheS1zcGVlZD1cIjMwMDBcIiBuZy1jbGFzcz1cIntcXCdzaG93LWhlcm9cXCcgOiBzaG93SGVyb31cIj48ZGl2IGNsYXNzPVwiaGVyby1zbGlkZVwiIG5nLXJlcGVhdD1cImhlcm9JdGVtIGluIGhlcm9Db250ZW50IHRyYWNrIGJ5ICRpbmRleFwiIG5nLXN0eWxlPVwie1xcJ2JhY2tncm91bmQtaW1hZ2VcXCcgOiBcXCd1cmwoXFwnICsgaGVyb0l0ZW0uaGVhZGVySW1hZ2UgKyBcXCcpXFwnfVwiIG5nLWNsaWNrPVwiZ29UbyhoZXJvSXRlbSlcIj48ZGl2IGNsYXNzPVwiaGVyby1mb290ZXJcIj48ZGl2IGNsYXNzPVwiaGVyby1pbmZvXCI+PGgxPnt7aGVyb0l0ZW0udGl0bGV9fTwvaDE+PHAgY2xhc3M9XCJzaXRlLWJvZHktdGV4dFwiPnt7aGVyb0l0ZW0uc3ViVGl0bGV9fTwvcD48L2Rpdj48dWw+PGxpPlJlYWQgTm93PC9saT48bGkgY2xhc3M9XCJ7e2hlcm9JdGVtLmNvbnRlbnRUeXBlfX0tY29udGVudFwiPnt7aGVyb0l0ZW0uY29udGVudFR5cGV9fTwvbGk+PC91bD48L2Rpdj48L2Rpdj48L3NsaWNrPjwvZGl2PjxkaXYgbmctcmVwZWF0PVwic3ViQ29udGVudCBpbiBjb250ZW50IHRyYWNrIGJ5ICRpbmRleFwiIGNsYXNzPVwic3ViLWNvbnRlbnQgY29sLXhzLTEyIGNvbC1tZC02XCIgbmctc3R5bGU9XCJ7XFwnYmFja2dyb3VuZC1pbWFnZVxcJyA6IFxcJ3VybChcXCcgK3N1YkNvbnRlbnQuaGVhZGVySW1hZ2UgKyBcXCcpXFwnfVwiIG5nLWlmPVwiJGluZGV4ID4gMlwiIG5nLWNsaWNrPVwiZ29UbyhzdWJDb250ZW50KVwiPjxkaXYgY2xhc3M9XCJjb250ZW50LWZvb3RlclwiPjxkaXYgY2xhc3M9XCJjb250ZW50LWluZm9cIj48aDE+e3tzdWJDb250ZW50LnRpdGxlfX08L2gxPjwvZGl2Pjx1bD48bGk+UmVhZCBOb3c8L2xpPjxsaSBjbGFzcz1cInt7c3ViQ29udGVudC5jb250ZW50VHlwZX19LWNvbnRlbnRcIj57e3N1YkNvbnRlbnQuY29udGVudFR5cGV9fTwvbGk+PC91bD48L2Rpdj48L2Rpdj48L3NlY3Rpb24+Jyk7XG59XSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgRGFubnkgb24gMTIvMTUvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpXG4gICAgLmNvbmZpZyhmdW5jdGlvbihwbGFuZ3VsYXJDb25maWdQcm92aWRlcikge1xuICAgICAgICBwbGFuZ3VsYXJDb25maWdQcm92aWRlci5jbGllbnRJZCA9ICdvZXJYZjZuQmNEdTVDb05kYU9ySUd1dFZDS1hQWXZTQidcbiAgICB9KTtcbiIsImFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdwYXJ0aWFscy9hYm91dC5odG1sJyxcbiAgICAnPHNlY3Rpb24gY2xhc3M9XCJzZWN0aW9uLXdpdGgtdG9wLW5hdiBjb250YWluZXJcIj48aDIgY2xhc3M9XCJzaXRlLWJvZHktdGl0bGVcIj5BYm91dCBDb250ZW50PC9oMj48cCBjbGFzcz1cInNpdGUtYm9keS10ZXh0XCI+V2VsbCwgdGhlIHdheSB0aGV5IG1ha2Ugc2hvd3MgaXMsIHRoZXkgbWFrZSBvbmUgc2hvdy4gVGhhdCBzaG93XFwncyBjYWxsZWQgYSBwaWxvdC4gVGhlbiB0aGV5IHNob3cgdGhhdCBzaG93IHRvIHRoZSBwZW9wbGUgd2hvIG1ha2Ugc2hvd3MsIGFuZCBvbiB0aGUgc3RyZW5ndGggb2YgdGhhdCBvbmUgc2hvdyB0aGV5IGRlY2lkZSBpZiB0aGV5XFwncmUgZ29pbmcgdG8gbWFrZSBtb3JlIHNob3dzLiBTb21lIHBpbG90cyBnZXQgcGlja2VkIGFuZCBiZWNvbWUgdGVsZXZpc2lvbiBwcm9ncmFtcy4gU29tZSBkb25cXCd0LCBiZWNvbWUgbm90aGluZy4gU2hlIHN0YXJyZWQgaW4gb25lIG9mIHRoZSBvbmVzIHRoYXQgYmVjYW1lIG5vdGhpbmcuPC9wPjwvc2VjdGlvbj4nKTtcbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCc0MDQuaHRtbCcsXG4gICAgJzwhZG9jdHlwZSBodG1sPjxodG1sIGxhbmc9XCJlblwiPjxoZWFkPjxtZXRhIGNoYXJzZXQ9XCJ1dGYtOFwiPjx0aXRsZT5QYWdlIE5vdCBGb3VuZCA6KDwvdGl0bGU+PHN0eWxlPjo6LW1vei1zZWxlY3Rpb24ge1xcbicgK1xuICAgICcgICAgYmFja2dyb3VuZDogI2IzZDRmYztcXG4nICtcbiAgICAnICAgIHRleHQtc2hhZG93OiBub25lO1xcbicgK1xuICAgICd9XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICc6OnNlbGVjdGlvbiB7XFxuJyArXG4gICAgJyAgICBiYWNrZ3JvdW5kOiAjYjNkNGZjO1xcbicgK1xuICAgICcgICAgdGV4dC1zaGFkb3c6IG5vbmU7XFxuJyArXG4gICAgJ31cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJ2h0bWwge1xcbicgK1xuICAgICcgICAgcGFkZGluZzogMzBweCAxMHB4O1xcbicgK1xuICAgICcgICAgZm9udC1zaXplOiAyMHB4O1xcbicgK1xuICAgICcgICAgbGluZS1oZWlnaHQ6IDEuNDtcXG4nICtcbiAgICAnICAgIGNvbG9yOiAjNzM3MzczO1xcbicgK1xuICAgICcgICAgYmFja2dyb3VuZDogI2YwZjBmMDtcXG4nICtcbiAgICAnICAgIC13ZWJraXQtdGV4dC1zaXplLWFkanVzdDogMTAwJTtcXG4nICtcbiAgICAnICAgIC1tcy10ZXh0LXNpemUtYWRqdXN0OiAxMDAlO1xcbicgK1xuICAgICd9XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICdodG1sLFxcbicgK1xuICAgICdpbnB1dCB7XFxuJyArXG4gICAgJyAgICBmb250LWZhbWlseTogXCJIZWx2ZXRpY2EgTmV1ZVwiLCBIZWx2ZXRpY2EsIEFyaWFsLCBzYW5zLXNlcmlmO1xcbicgK1xuICAgICd9XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICdib2R5IHtcXG4nICtcbiAgICAnICAgIG1heC13aWR0aDogNTAwcHg7XFxuJyArXG4gICAgJyAgICBwYWRkaW5nOiAzMHB4IDIwcHggNTBweDtcXG4nICtcbiAgICAnICAgIGJvcmRlcjogMXB4IHNvbGlkICNiM2IzYjM7XFxuJyArXG4gICAgJyAgICBib3JkZXItcmFkaXVzOiA0cHg7XFxuJyArXG4gICAgJyAgICBtYXJnaW46IDAgYXV0bztcXG4nICtcbiAgICAnICAgIGJveC1zaGFkb3c6IDAgMXB4IDEwcHggI2E3YTdhNywgaW5zZXQgMCAxcHggMCAjZmZmO1xcbicgK1xuICAgICcgICAgYmFja2dyb3VuZDogI2ZjZmNmYztcXG4nICtcbiAgICAnfVxcbicgK1xuICAgICdcXG4nICtcbiAgICAnaDEge1xcbicgK1xuICAgICcgICAgbWFyZ2luOiAwIDEwcHg7XFxuJyArXG4gICAgJyAgICBmb250LXNpemU6IDUwcHg7XFxuJyArXG4gICAgJyAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxuJyArXG4gICAgJ31cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJ2gxIHNwYW4ge1xcbicgK1xuICAgICcgICAgY29sb3I6ICNiYmI7XFxuJyArXG4gICAgJ31cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJ2gzIHtcXG4nICtcbiAgICAnICAgIG1hcmdpbjogMS41ZW0gMCAwLjVlbTtcXG4nICtcbiAgICAnfVxcbicgK1xuICAgICdcXG4nICtcbiAgICAncCB7XFxuJyArXG4gICAgJyAgICBtYXJnaW46IDFlbSAwO1xcbicgK1xuICAgICd9XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICd1bCB7XFxuJyArXG4gICAgJyAgICBwYWRkaW5nOiAwIDAgMCA0MHB4O1xcbicgK1xuICAgICcgICAgbWFyZ2luOiAxZW0gMDtcXG4nICtcbiAgICAnfVxcbicgK1xuICAgICdcXG4nICtcbiAgICAnLmNvbnRhaW5lciB7XFxuJyArXG4gICAgJyAgICBtYXgtd2lkdGg6IDM4MHB4O1xcbicgK1xuICAgICcgICAgbWFyZ2luOiAwIGF1dG87XFxuJyArXG4gICAgJ31cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJy8qIGdvb2dsZSBwb3NzZXNzaW9ucy1zZWFyY2ggKi9cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyNnb29nLWZpeHVybCB1bCB7XFxuJyArXG4gICAgJyAgICBsaXN0LXN0eWxlOiBub25lO1xcbicgK1xuICAgICcgICAgcGFkZGluZzogMDtcXG4nICtcbiAgICAnICAgIG1hcmdpbjogMDtcXG4nICtcbiAgICAnfVxcbicgK1xuICAgICdcXG4nICtcbiAgICAnI2dvb2ctZml4dXJsIGZvcm0ge1xcbicgK1xuICAgICcgICAgbWFyZ2luOiAwO1xcbicgK1xuICAgICd9XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcjZ29vZy13bS1xdCxcXG4nICtcbiAgICAnI2dvb2ctd20tc2Ige1xcbicgK1xuICAgICcgICAgYm9yZGVyOiAxcHggc29saWQgI2JiYjtcXG4nICtcbiAgICAnICAgIGZvbnQtc2l6ZTogMTZweDtcXG4nICtcbiAgICAnICAgIGxpbmUtaGVpZ2h0OiBub3JtYWw7XFxuJyArXG4gICAgJyAgICB2ZXJ0aWNhbC1hbGlnbjogdG9wO1xcbicgK1xuICAgICcgICAgY29sb3I6ICM0NDQ7XFxuJyArXG4gICAgJyAgICBib3JkZXItcmFkaXVzOiAycHg7XFxuJyArXG4gICAgJ31cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyNnb29nLXdtLXF0IHtcXG4nICtcbiAgICAnICAgIHdpZHRoOiAyMjBweDtcXG4nICtcbiAgICAnICAgIGhlaWdodDogMjBweDtcXG4nICtcbiAgICAnICAgIHBhZGRpbmc6IDVweDtcXG4nICtcbiAgICAnICAgIG1hcmdpbjogNXB4IDEwcHggMCAwO1xcbicgK1xuICAgICcgICAgYm94LXNoYWRvdzogaW5zZXQgMCAxcHggMXB4ICNjY2M7XFxuJyArXG4gICAgJ31cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyNnb29nLXdtLXNiIHtcXG4nICtcbiAgICAnICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXG4nICtcbiAgICAnICAgIGhlaWdodDogMzJweDtcXG4nICtcbiAgICAnICAgIHBhZGRpbmc6IDAgMTBweDtcXG4nICtcbiAgICAnICAgIG1hcmdpbjogNXB4IDAgMDtcXG4nICtcbiAgICAnICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XFxuJyArXG4gICAgJyAgICBjdXJzb3I6IHBvaW50ZXI7XFxuJyArXG4gICAgJyAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjVmNWY1O1xcbicgK1xuICAgICcgICAgYmFja2dyb3VuZC1pbWFnZTogLXdlYmtpdC1saW5lYXItZ3JhZGllbnQocmdiYSgyNTUsMjU1LDI1NSwwKSwgI2YxZjFmMSk7XFxuJyArXG4gICAgJyAgICBiYWNrZ3JvdW5kLWltYWdlOiAtbW96LWxpbmVhci1ncmFkaWVudChyZ2JhKDI1NSwyNTUsMjU1LDApLCAjZjFmMWYxKTtcXG4nICtcbiAgICAnICAgIGJhY2tncm91bmQtaW1hZ2U6IC1tcy1saW5lYXItZ3JhZGllbnQocmdiYSgyNTUsMjU1LDI1NSwwKSwgI2YxZjFmMSk7XFxuJyArXG4gICAgJyAgICBiYWNrZ3JvdW5kLWltYWdlOiAtby1saW5lYXItZ3JhZGllbnQocmdiYSgyNTUsMjU1LDI1NSwwKSwgI2YxZjFmMSk7XFxuJyArXG4gICAgJyAgICAtd2Via2l0LWFwcGVhcmFuY2U6IG5vbmU7XFxuJyArXG4gICAgJyAgICAtbW96LWFwcGVhcmFuY2U6IG5vbmU7XFxuJyArXG4gICAgJyAgICBhcHBlYXJhbmNlOiBub25lO1xcbicgK1xuICAgICd9XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcjZ29vZy13bS1zYjpob3ZlcixcXG4nICtcbiAgICAnI2dvb2ctd20tc2I6Zm9jdXMge1xcbicgK1xuICAgICcgICAgYm9yZGVyLWNvbG9yOiAjYWFhO1xcbicgK1xuICAgICcgICAgYm94LXNoYWRvdzogMCAxcHggMXB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcXG4nICtcbiAgICAnICAgIGJhY2tncm91bmQtY29sb3I6ICNmOGY4Zjg7XFxuJyArXG4gICAgJ31cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyNnb29nLXdtLXF0OmhvdmVyLFxcbicgK1xuICAgICcjZ29vZy13bS1xdDpmb2N1cyB7XFxuJyArXG4gICAgJyAgICBib3JkZXItY29sb3I6ICMxMDVjYjY7XFxuJyArXG4gICAgJyAgICBvdXRsaW5lOiAwO1xcbicgK1xuICAgICcgICAgY29sb3I6ICMyMjI7XFxuJyArXG4gICAgJ31cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJ2lucHV0OjotbW96LWZvY3VzLWlubmVyIHtcXG4nICtcbiAgICAnICAgIHBhZGRpbmc6IDA7XFxuJyArXG4gICAgJyAgICBib3JkZXI6IDA7XFxuJyArXG4gICAgJ308L3N0eWxlPjwvaGVhZD48Ym9keT48ZGl2IGNsYXNzPVwiY29udGFpbmVyXCI+PGgxPk5vdCBmb3VuZCA8c3Bhbj46KDwvc3Bhbj48L2gxPjxwPlNvcnJ5LCBidXQgdGhlIHBhZ2UgeW91IHdlcmUgdHJ5aW5nIHRvIHZpZXcgZG9lcyBub3QgZXhpc3QuPC9wPjxwPkl0IGxvb2tzIGxpa2UgdGhpcyB3YXMgdGhlIHJlc3VsdCBvZiBlaXRoZXI6PC9wPjx1bD48bGk+YSBtaXN0eXBlZCBhZGRyZXNzPC9saT48bGk+YW4gb3V0LW9mLWRhdGUgbGluazwvbGk+PC91bD48c2NyaXB0PnZhciBHT09HX0ZJWFVSTF9MQU5HID0gKG5hdmlnYXRvci5sYW5ndWFnZSB8fCBcXCdcXCcpLnNsaWNlKDAsMiksR09PR19GSVhVUkxfU0lURSA9IGxvY2F0aW9uLmhvc3Q7PC9zY3JpcHQ+PHNjcmlwdCBzcmM9XCIvL2xpbmtoZWxwLmNsaWVudHMuZ29vZ2xlLmNvbS90YnByb3h5L2xoL3dtL2ZpeHVybC5qc1wiPjwvc2NyaXB0PjwvZGl2PjwvYm9keT48L2h0bWw+Jyk7XG59XSk7XG4iXX0=
