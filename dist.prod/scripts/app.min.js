/**
 * Created by Danny on 12/15/16.
 */
angular.module('freqCultureApp', [
    'ngAnimate',
    'ngCookies',
    'ngResource',
    'ui.router',
    'ngTouch',
    'ng-fastclick',
    'slickCarousel',
    'plangular',
    'textAngular',
    'LocalStorageModule'
]);

/**
 * Created by Danny on 11/27/16.
 */
angular.module('freqCultureApp')
  .controller('ViewContentCtrl', function($scope, ContentService, $stateParams, $window) {


    $scope.selectedContent = ContentService.getSelected();

    if(!$scope.selectedContent) {
      ContentService.findContent($stateParams.contentHref)
        .then(function(selected) {
          $scope.selectedContent = selected;
          $scope.selectedContent.publishDate = new Date($scope.selectedContent.date);
        })
    } else {
      $scope.selectedContent.publishDate = new Date($scope.selectedContent.date);
    }
  })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/view.dashboard.html',
    '<section class="fluid-container dashboard-view"><nav class="dashboard-nav"><div class="nav-logo" ng-click="goTo(\'home\')"><img src="../images/kinetik_name_white.png"></div><div class="dashboard-user"><div class="user-container"><figure class="user-initials"><h1 class="subhead-2" ng-if="currentUser">{{currentUser.firstName.charAt(0)}}{{currentUser.lastName.charAt(0)}}</h1><i class="fa fa-exclamation-triangle" ng-if="!currentUser"></i></figure><div class="user-info"><h1 class="subhead-2" ng-if="currentUser">{{currentUser.firstName + \' \' + currentUser.lastName}}</h1><h1 class="subhead-2" ng-if="!currentUser" ng-click="showLoginModal()">Please login.</h1><ul><li ng-show="currentUser && !loading" ng-class="{\'hide-item\' : !currentUser}" ng-click="logout()"><a>Logout</a></li><li ng-show="!currentUser && !loading" ng-class="{\'hide-item\' : currentUser}" ng-click="showLoginModal()"><a>Login</a></li></ul></div></div></div><ul class="dashboard-menu"><li ng-class="{active: $state.includes(\'dashboard.admin\')}" ng-click="goTo(\'dashboard.admin\', \'Admin\')" ng-show="currentUser.role == \'SuperAdmin\'"><i class="fa fa-users"></i> <a class="subhead-2">Admin</a></li><li ng-class="{active: $state.includes(\'dashboard.profile\')}" ng-click="goTo(\'dashboard.profile\', \'Profile\')" ng-show="currentUser"><i class="fa fa-address-card"></i> <a class="subhead-2">Profile</a></li><li ng-class="{active: $state.includes(\'dashboard.content\')}" ng-click="goTo(\'dashboard.content\', \'Content\')" ng-show="currentUser"><i class="fa fa-list"></i> <a class="subhead-2">Content</a></li></ul><footer class="admin-menu-footer" ng-click="goTo(\'home\')"><i class="fa fa-arrow-left" aria-hidden="true"></i> <a class="subhead-2">Back To Site</a></footer></nav><header class="dashboard-header"><h1 class="headline" ng-click="goTo(\'dashboard.welcome\', \'Welcome\')">Dashboard</h1><h2 class="headline" id="muted-text" ng-click="goTo(\'dashboard.profile\', \'Profile\')">/ {{selectedView}}</h2></header><div class="dashboard-body" ng-class="{\'gray-body\' : !$state.includes(\'dashboard.welcome\')}"><div class="ui-view"></div></div></section>');
}]);

/**
 * Created by Danny on 12/19/16.
 */
angular.module('freqCultureApp')
    .controller('MainSectionCtrl', function($scope, sectionTitle, sectionSubTitle, contentType) {
        console.log('main section');
        $scope.sectionTitle = sectionTitle;
        $scope.sectionSubTitle = sectionSubTitle;
        $scope.contentType = contentType;
    })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/view.content.html',
    '<section class="section-with-top-nav container"><content-header selected-content="selectedContent"></content-header><div class="content-section" ng-repeat="contentSection in selectedContent.contentSections"><img class="content-image" ng-if="contentSection.headerImage " ng-src="{{contentSection.headerImage}}"><p class="site-body-text center-block" ng-class="{\'indent-paragraph\' : $first, \'sub-paragraph\' : !$first}">{{contentSection.content}}</p><img class="content-image" ng-if="contentSection.footerImage " ng-src="{{contentSection.footerImage}}"></div></section>');
}]);

/**
 * Created by Danny on 11/7/16.
 */
angular.module('freqCultureApp')
  .controller('HomeCtrl', function($scope, ContentService, $state) {

    $scope.goTo = function(state, stateParams) {
      $state.go(state, stateParams);
    }


    $scope.showSignup = function() {
        console.log('signup!');
    }
  })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/view.admin.html',
    '<section class="fluid-container admin-view"><nav class="admin-nav"><div class="nav-logo" ng-click="goTo(\'home\')"><img src="../images/frequency_culture_white_trans.png"></div><div class="admin-user"><div class="user-container"><figure class="user-initials"><h1 class="subhead-2" ng-if="false">DF</h1><i class="fa fa-exclamation-triangle"></i></figure><div class="user-info"><h1 class="subhead-2" ng-if="currentUser">{{currentUser.firstName + \' \' + currentUser.lastName}}</h1><h1 class="subhead-2" ng-if="!currentUser" data-toggle="modal" data-target="#loginModal">Please login.</h1><ul><li ng-if="currentUser"><a>Settings</a></li><li ng-if="currentUser"><a>Logout</a></li><li ng-if="!currentUser" data-toggle="modal" data-target="#loginModal"><a>Login</a></li></ul></div></div></div></nav><header class="admin-header"><h1 class="headline">Dashboard</h1></header></section><div class="modal fade admin-modal" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h1 class="title">Login</h1></div><div class="modal-body"><div class="row"><div class="col-xs-6 col-xs-offset-3 col-sm-6 col-sm-offset-0 form-group"><label for="userEmail" class="label">Email</label><input type="email" class="form-control" id="userEmail" placeholder="Email"></div><div class="col-xs-6 col-xs-offset-3 col-sm-6 col-sm-offset-0 form-group"><label for="userPassword" class="label">Password</label><input type="password" class="form-control" id="userPassword" placeholder="Password"></div></div></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal"><h1 class="button">Cancel</h1></button> <button type="button" class="btn purple-button"><h1 class="button">Login</h1></button></div></div></div></div>');
}]);

/**
 * Created by Danny on 12/24/16.
 */
angular.module('freqCultureApp')
    .controller('DashboardCtrl', function($scope, $timeout, ContentService,
                                          $state, ModalService, UserService) {

        $scope.selectedView = $state.current.data.stateTitle;
        $scope.errorMessage = null;
        $scope.loading = true;
        $scope.$state = $state;

        UserService.initUser()
            .then(function(response) {
                $scope.currentUser = response;
                $scope.goTo('dashboard.profile', 'Profile')
            })
            .catch(function() {
                $scope.currentUser = undefined;
                $scope.goTo('dashboard.welcome', 'Welcome')
            })
            .finally(function() {
                $scope.loading = false;
            })


        $scope.goTo = function(state, changeTitle) {
            if(changeTitle) {
                $scope.selectedView = changeTitle
            }
            $state.go(state);
        }

        $scope.logout = function() {
            ModalService.openModal('logout')
                .then(function() {
                    $scope.loading = true;
                    UserService.logoutUser();
                    $scope.currentUser = undefined;
                    $scope.loading = false;
                    $scope.goTo('dashboard.welcome', 'Welcome')
                })
        }

        $scope.showContactModal = function() {
            ModalService.openModal('contact', 'Content Editor Request')
                .then(function(modalData) {
                    console.log('promise to contact!', modalData)
                })
                .catch(function() {
                    console.log(' no value');
                })
        }

        $scope.showPlaceholder = function() {
            ModalService.openModal('placeholder')
        }

        $scope.showLoginModal = function() {
            $scope.loading = true;
            ModalService.openModal('login')
                .then(function(user) {
                    $scope.currentUser = user;
                    $scope.goTo('dashboard.profile', 'Profile')
                })
                .catch(function() {
                    console.log(' no value');
                })
                .finally(function() {
                    $scope.loading = false;
                })
        }

        $scope.resetLogin = function() {
            $scope.errorMessage = null;
            $scope.loading = false;
            $scope.loginForm.email = null;
            $scope.loginForm.password = null;
        }



    })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/site-modal.html',
    '<div class="modal fade dashboard-modal" id="siteModal" tabindex="-1" role="dialog"><div class="modal-dialog" role="document"><div class="modal-content"><div ng-include="modalTemplate"></div></div></div></div>');
}]);

/**
 * Created by Danny on 12/25/16.
 */
angular.module('freqCultureApp')
    .controller('DashboardContentCtrl', function($scope, $timeout, ContentService, $state) {
        console.log('scope: ', $scope);

        $scope.selectedView = 'menu';
        $scope.loading = false;

        $scope.currentUser = undefined;

        var contentFields = [
            'author',
            'title',
            'contentType',
            'subTitle',
            'url',
            'headerImage',
            'tags',
            'publishedDate',
            'description',
            'contentSections',
            'quotes',
            'audioUrls',
            'socialMedia',
            'shareUrl',
            'mainContent'
        ]

        ContentService.getContent()
            .then(function(content) {
                $scope.siteContent = content;
                console.log('content: ', content);
                dubContent(content);
            })
            .catch(function(err) {
                console.log('err: ', err);
            })

        var contentTypes = [
            'sound',
            'fashion',
            'commentary',
            'film',
            'culture'
        ]

        var headerImages = [

        ]

        function dubContent(content) {
            for(var i=0;i<10;i++) {
                var newContent = {
                    title : 'Content_' + i,
                    author : 'Danny Francken',
                    contentType : contentTypes[Math.floor(Math.random() * contentTypes.length)],
                    description : 'It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using ',
                    headerImage : 'images/articles-header.png'
                }

                $scope.siteContent.push(newContent);
            }
        }
        //$timeout(function() {
        //    $scope.selectedView = 'edit';
        //}, 2000)

        $scope.changeView = function() {
            if($scope.selectedView == 'edit') $scope.selectedView = 'menu';
            else $scope.selectedView = 'edit';
        }

        $scope.goTo = function(state) {
            $state.go(state);
        }

        $scope.selectedContent = {};

        $scope.newContent = function() {
            $scope.selectedView = 'create';
            initNewContent()
        }

        $scope.editContent = function(content) {
            $scope.selectedContent = content;
            $scope.selectedView = 'edit';
        }

        $scope.cancel = function() {
            $scope.selectedView = 'menu';
        }

        function initNewContent() {
            contentFields.map(function(field) {
                $scope.selectedContent[field] = null;
            })
        }

        var newItems = {
            'tag' : '',
            'quote' : '',
            'audio' : '',
            'section' : null

        }

        $scope.addItem = function(itemType, key) {
            var newItem = newItems[itemType];
            if(!$scope.selectedContent[key]){
                $scope.selectedContent[key] = [];
            }
            $scope.selectedContent[key].push(newItem);
            console.log('new item: ', newItem);
        }

        $scope.removeItem = function(key, index) {
            $scope.selectedContent[key].splice(index, 1);
        }

        $scope.showConfirm = false;

        $scope.confirm = function(confirm) {
            $scope.showConfirm = confirm;
        }

        $scope.confirmDelete = function(content, index) {

            if(!$scope.loading) {
                $scope.loading = true;
                ContentService.deleteContent(content)
                    .then(function(res){
                        $scope.selectedView = 'menu';
                        $scope.siteContent.splice(index, 1);
                    })
                    .finally(function() {
                        $scope.loading = false;
                    })
            }
        }


        $scope.save = function() {
            console.log('selected: ', $scope.selectedContent);
            //if(!$scope.loading) {
            //    $scope.loading = true;
            //    console.log('selected', $scope.selectedContent);
            //    $scope.loading = false;
            //    if(!$scope.selectedContent._id) {
            //        ContentService.newContent($scope.selectedContent)
            //            .then(function(res) {
            //                console.log('res: ', res);
            //            })
            //            .catch(function(err) {
            //                console.log('err: ', err);
            //            })
            //            .finally(function() {
            //                $scope.loading = false;
            //                $scope.selectedView = 'menu';
            //            })
            //    } else {
            //        ContentService.updateContent($scope.selectedContent)
            //            .then(function(res) {
            //                console.log('res: ', res);
            //            })
            //            .catch(function(err) {
            //                console.log('err: ', err);
            //            })
            //            .finally(function() {
            //                $scope.loading = false;
            //                $scope.selectedView = 'menu';
            //            })
            //    }
            //}

        }

        $scope.formatUrl = function() {
            if($scope.selectedContent.title) {
                $scope.selectedContent.url = $scope.selectedContent.title.toLowerCase().replace(/\s/g, "_");
            }
        }
    })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/site-footer.html',
    '<footer class="footer" ng-if="!state.includes(\'dashboard\')"><div class="footer-container"><nav class="footer-links"><div class="links-container"><h1 class="site-list-title">Site</h1><ul><li><a ui-sref="home" class="site-list-item">Home</a></li><li><a ui-sref="sound" class="site-list-item">Sound</a></li><li><a ui-sref="film" class="site-list-item">Film</a></li><li><a ui-sref="fashion" class="site-list-item">Fashion</a></li><li><a ui-sref="culture" class="site-list-item">Culture</a></li></ul></div><div class="links-container"><h1 class="site-list-title">About</h1><ul><li ui-sref="about" class="site-list-item"><a>About</a></li><li><a href="mailto:Danny@FrequencyCulture.com, Ben@FrequencyCulture" class="site-list-item">Contact</a></li><li><a href="mailto:Danny@FrequencyCulture.com, Ben@FrequencyCulture" class="site-list-item">Submissions</a></li><li><a href="mailto:Danny@FrequencyCulture.com, Ben@FrequencyCulture" class="site-list-item">Advertise</a></li></ul></div><div class="social-footer"><ul><li><i class="fa fa-facebook"></i></li><li><i class="fa fa-twitter"></i></li><li><i class="fa fa-soundcloud"></i></li></ul></div></nav><div class="bottom-footer"><h2 class="label">&copy; 2016 Frequency Culture</h2></div></div></footer>');
}]);

/**
 * Created by Danny on 12/18/16.
 */
angular.module('freqCultureApp')
    .controller('AdminCtrl', function($scope, $timeout, UserService, AdminService, ModalService) {

        $scope.sideMemberCard = null;
        $scope.saving = false;
        $scope.adminErrorMessage = null;

        AdminService.allUsers()
            .then(function(users) {
                console.log('users: ', users);
                $scope.teamMembers = users;
            })
            .catch(function(err) {
                console.log('err: ', err);
            })

        $scope.showMemberCard = function(type) {
            $scope.sideMemberCard = type;
            if(!type) {
                $scope.clearMemberForm();
            }
        }

        $scope.save = function(memberInfo) {
            if(!$scope.saving) {
                $scope.adminErrorMessage = null;
                if(!memberInfo.firstName) {
                    $scope.adminErrorMessage = 'Please include a first name.'
                } else if(!memberInfo.lastName) {
                    $scope.adminErrorMessage = 'Please include a last name (or initial).';
                } else if(!memberInfo.email) {
                    $scope.adminErrorMessage = 'Please include an email.';
                } else if(!memberInfo.role) {
                    $scope.adminErrorMessage = 'Please select a role.';
                } else {
                    $scope.saving = true;
                    if(memberInfo._id) {
                        console.log('update!');
                        UserService.updateUser(memberInfo)
                            .then(function(res) {
                                console.log('res', res);
                                $scope.showMemberCard(null);
                                updateUserInArray(res.data);
                            })
                            .catch(function(err) {
                                console.log('err: ', err);
                            })
                            .finally(function() {
                                $scope.saving = false;
                            })
                    } else {
                        AdminService.newUser(createUserObj(memberInfo))
                            .then(function(res) {
                                console.log('res', res);
                                $scope.teamMembers.push(res.data)
                                $scope.sideMemberCard = null;
                                $scope.clearMemberForm();
                            })
                            .catch(function(err) {
                                console.log('err: ', err);
                            })
                            .finally(function() {
                                $scope.saving = false;
                            })
                    }
                }
            }
        };

        $scope.delete = function(member) {
            console.log('delete: ', member);
            ModalService.openModal('confirm', 'Delete ' + member.firstName + '?')
                .then(function(modalData) {
                    console.log('delete: ', member);
                    $scope.saving = true;
                    AdminService.deleteUser(member._id)
                        .then(function(res) {
                            $scope.showMemberCard(null);
                            removeUserFromArray(member._id)
                        })
                        .catch(function(err) {
                            console.log('err: ', err);
                        })
                        .finally(function() {
                            $scope.saving = false;
                        })
                })
                .catch(function() {
                    console.log(' no value');
                })
        }

        $scope.editMember = function(member) {
            $scope.memberForm = angular.copy(member);
            $scope.saving = false;
            $scope.sideMemberCard = 'edit';
        }


        $scope.clearMemberForm = function() {
            $scope.adminErrorMessage = null;
            $scope.saving = false;
            $scope.memberForm.firstName = null;
            $scope.memberForm.lastName = null;
            $scope.memberForm.email = null;
            $scope.memberForm.role = null;
        };


        function createUserObj(memberInfo) {
            return {
                firstName : memberInfo.firstName,
                lastName : memberInfo.lastName,
                email : memberInfo.email,
                role : memberInfo.role
            }
        }

        function updateUserInArray(updatedUser) {
            var usersLen = $scope.teamMembers.length;
            for(var i=0;i<usersLen;i++) {
                if(updatedUser._id == $scope.teamMembers[i]._id) {
                    $scope.teamMembers[i] = updatedUser;
                    break;
                }
            }
        }

        function removeUserFromArray(userId) {
            var usersLen = $scope.teamMembers.length;
            var idx;
            for(var i=0;i<usersLen;i++) {
                if(userId == $scope.teamMembers[i]._id) {
                    idx = i;
                    break;
                }
            }
            if(idx < usersLen) {
                $scope.teamMembers.splice(idx,1);
            }
        }

    })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/site-audio.html',
    '<div class="site-audio" ng-if="!state.includes(\'dashboard\')"><div class="navbar navbar-default navbar-fixed-bottom" role="navigation"><div class="container-fluid" plangular="{{trackUrl}}" ng-if="trackUrl"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed button-default" data-toggle="collapse" data-target="#audio-player"><i class="fa fa-music"></i></button></div><div class="full-controls container hidden-xs"><ul class="audio-controls"><li><i class="fa fa-backward"></i></li><li ng-click="playPause()"><i class="fa fa-play" ng-if="player.playing !== track.src"></i> <i class="fa fa-pause" ng-if="player.playing == track.src"></i></li><li><i class="fa fa-forward"></i></li></ul><img ng-src="{{track.artwork_url}}" class="image-shadow audio-image" image-shadow><ul class="audio-info-full"><li><h1 class="label">Artist : <span>{{track.user.username}}</span></h1></li><li><h1 class="label">Track : <span>{{track.title}}</span></h1></li></ul></div><div class="hidden-sm hidden-md hidden-lg mini-controls container-fluid"><ul class="audio-controls"><li><i class="fa fa-backward"></i></li><li ng-click="playPause()"><i class="fa fa-play" ng-if="player.playing !== track.src"></i> <i class="fa fa-pause" ng-if="player.playing == track.src"></i></li><li><i class="fa fa-forward"></i></li></ul></div><div class="collapse navbar-collapse" id="audio-player"><ul class="nav navbar-nav container hidden-md hidden-lg hidden-sm mini-audio"><div class="audio-info"><img ng-src="{{track.artwork_url}}" class="image-shadow audio-image" image-shadow><ul><li><h1 class="label">Artist : <span>{{track.user.username}}</span></h1></li><li><h1 class="label">Title : <span>{{track.title}}</span></h1></li></ul></div></ul></div></div></div></div>');
}]);

/**
 * Created by Danny on 12/24/16.
 */
angular.module('freqCultureApp')
    .service('UserService', function($http, localStorageService, $q) {

        var _user;
        var updateUser = function(updates) {
            return $http({
                method : 'PUT',
                url : 'api/user/updateUser/' + updates._id,
                data : updates
            })
        }

        var initUser = function() {
            var deferred = $q.defer();
            var token = localStorageService.get('jwtToken');
            if(!token) {
                deferred.reject('No token!');
            } else {
                loginViaToken(token, deferred);
            }

            return deferred.promise;
        }

        function loginViaToken(token, deferred) {
            var postData = {
                jwtToken : token
            }
            $http({
                method : 'POST',
                url : 'api/user/loginViaToken',
                data : postData
            })
                .then(function(data) {
                    _user = data.data.user;
                    localStorageService.set('jwtToken', data.data.token);
                    deferred.resolve(_user)
                })
                .catch(function(err) {
                    localStorageService.remove('jwtToken');
                    deferred.reject('Expired token.');
                })
        }

        var logoutUser = function() {
            _user = null;
            localStorageService.remove('jwtToken');
        }

        var loginUser = function(loginInfo) {
            var deferred = $q.defer();
            $http({
                method : 'POST',
                url : 'api/user/loginUser',
                data : loginInfo
            })
                .then(function(data) {
                    console.log('data: ', data);
                    _user = data.data.user;
                    localStorageService.set('jwtToken', data.data.token);
                    deferred.resolve(_user)
                })
                .catch(function(err) {
                    console.log('err', err);
                    deferred.reject(err);
                })

            return deferred.promise;
        }

        return {
            updateUser : updateUser,
            loginUser : loginUser,
            logoutUser : logoutUser,
            initUser : initUser
        }
    })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/sidemenu.html',
    '<nav class="mobile-menu" ng-class="{\'show-menu\' : showMenu}"><div class="nav-container"><ul><h1 class="site-list-title">Site</h1><li><a ui-sref="sound" class="site-list-item">Sound</a></li><li><a ui-sref="film" class="site-list-item">Film</a></li><li><a ui-sref="fashion" class="site-list-item">Fashion</a></li><li><a ui-sref="culture" class="site-list-item">Culture</a></li></ul><ul><h1 class="site-list-title">About</h1><li><a href="" class="site-list-item">About</a></li><li><a href="mailto:Danny@FrequencyCulture.com, Ben@FrequencyCulture" class="site-list-item">Contact</a></li><li><a href="mailto:Danny@FrequencyCulture.com, Ben@FrequencyCulture" class="site-list-item">Submissions</a></li><li><a href="mailto:Danny@FrequencyCulture.com, Ben@FrequencyCulture" class="site-list-item">Advertise</a></li></ul></div><div class="social-container"><ul><li><i class="fa fa-facebook"></i></li><li><i class="fa fa-twitter"></i></li><li><i class="fa fa-soundcloud"></i></li></ul></div></nav>');
}]);

/**
 * Created by Danny on 1/29/17.
 */
angular.module('freqCultureApp')
    .service('SignupService', function($http) {
        var newSignup = function(signupData) {
            return $http({
                method : 'POST',
                url : 'api/signup/newSignup',
                data : signupData
            })
        }

        return {
            newSignup : newSignup
        }
    })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/section-header.html',
    '<header class="section-header" id="sectionHeader"><img src="../images/kinetik_logo_purple.svg" class="logo"><ul class="header-menu"><li ng-click="goTo(\'sound\')" ng-class="{\'active-link\' : isActive(\'sound\')}"><h1 class="title">Sound</h1></li><li ng-click="goTo(\'film\')" ng-class="{\'active-link\' : isActive(\'film\')}"><h1 class="title">Film</h1></li><li ng-click="goTo(\'fashion\')" ng-class="{\'active-link\' : isActive(\'fashion\')}"><h1 class="title">Fashion</h1></li><li ng-click="goTo(\'culture\')" ng-class="{\'active-link\' : isActive(\'culture\')}"><h1 class="title">Culture</h1></li></ul></header>');
}]);

/**
 * Created by Danny on 12/24/16.
 */
angular.module('freqCultureApp')
    .service('ModalService', function($rootScope, $q, $timeout) {

        var partialUrls = {
            'login' : 'partials/modal-login.html',
            'contact' : 'partials/modal-contact.html',
            'confirm' : 'partials/modal-confirm.html',
            'signup' : 'partials/modal-signup.html',
            'logout' : 'partials/modal-logout.html',
            'placeholder' : 'partials/modal-placeholder.html'
        }

        var _modal;
        var closeModal;

        $timeout(function() {
            _modal = $('#siteModal');
            _modal.on('hide.bs.modal', function(e) {
                closeModal(e);
            })
        },100)

        // Global hide modal listener


        return {

            // Returns a promise which is resolved when the modal closes.
            openModal : function(type, modalTitle) {
                var deferred = $q.defer();
                $rootScope.modalTemplate = partialUrls[type];
                $rootScope.modalTitle = modalTitle;
                $rootScope.modalConfirm = function(data) {
                    deferred.resolve(data);
                    _modal.modal('hide');
                };

                console.log('modal: ', _modal)
                _modal.modal('show');

                closeModal = function(e) {
                    deferred.reject();
                }
                return deferred.promise;
            }
        }
    })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/navbar.html',
    '<div class="header"><nav class="navbar navbar-default navbar-inverse navbar-fixed-top main-navbar" role="navigation" ng-class="{\'visible-nav\' : showNavbar}"><div class="container"><div class="menu-logo hidden-xs" ng-click="goTo(\'home\')"><img src="../images/kinetik_name.svg"></div><ul class="full-nav hidden-xs"><li ng-click="goTo(\'sound\')" ng-class="{\'active-link\' : isActive(\'sound\')}" class="navbar-link"><h1>Sound</h1></li><li ng-click="goTo(\'film\')" class="navbar-link" ng-class="{\'active-link\' : isActive(\'film\')}"><h1>Film</h1></li><li ng-click="goTo(\'fashion\')" class="navbar-link" ng-class="{\'active-link\' : isActive(\'fashion\')}"><h1>Fashion</h1></li><li ng-click="goTo(\'culture\')" class="navbar-link" ng-class="{\'active-link\' : isActive(\'culture\')}"><h1>Culture</h1></li></ul><div class="visible-xs mobile-navbar"><img src="../images/kinetik_name.svg" ng-click="goTo(\'home\')"><hamburger-menu state="showMenu" ng-click="toggleLinks()"></hamburger-menu></div></div></nav></div>');
}]);

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/modal-signup.html',
    '<div><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h1 class="title">Kinetik Mag Early Access</h1></div><div class="modal-body"><form role="form" novalidate name="signupForm"><div class="row"><div class="col-xs-10 col-xs-offset-1 col-sm-6 col-sm-offset-0 form-group"><label for="userEmail" class="label">Email</label><input type="email" class="form-control" id="userEmail" placeholder="Email" ng-model="signupForm.email"></div><div class="col-xs-10 col-xs-offset-1 col-sm-6 col-sm-offset-0 form-group"><label for="firstName" class="label">First Name</label><input type="text" class="form-control" id="firstName" placeholder="First Name" ng-model="signupForm.firstName"></div></div></form></div><div class="modal-footer"><div class="modal-footer-extras"><h1 class="title modal-error">{{errorMessage}}</h1><i class="fa fa-spinner fa-spin" ng-if="!errorMessage && loggingIn"></i></div><button type="button" class="btn btn-default" data-dismiss="modal"><h1 class="button">Cancel</h1></button> <button type="submit" class="btn purple-button" ng-click="$parent.modalConfirm(signupForm)"><h1 class="button">Submit</h1></button></div></div>');
}]);

/**
 * Created by Danny on 11/6/16.
 */
angular.module('freqCultureApp')
  .service('ContentService', function($http, $q) {
    var _siteContent,
      _selectedContent;


    var setContent = function(content, callback) {
      _siteContent = content;
      if(callback) {
        callback(content);
      }
    }

    var getContent = function(content) {
      var deferred = $q.defer();
      if(!_siteContent) {
        initContent(function(content) {
          console.log('content: ', content);
          deferred.resolve(content);
        })
      } else {
        deferred.resolve(_siteContent);
      }

      return deferred.promise;
    }

    var initContent = function(callback) {
      $http.get('api/siteContent/allContent')
        .then(function(results){
          setContent(results.data, callback);
        })
    }

    function formatContent(content, callback) {
      var formattedContent = [];
        console.log('content: ', content);
      //for(var key in content) {
      //  angular.forEach(content[key], function (item) {
      //    item.stateName = (item.stateName || item.url).toLowerCase();
      //    item.urlPrefix = '/' + key + '/' + item.url;
      //    item.href = item.url;
      //    if(key == 'articles') {
      //      item.src = 'views/view.article.html';
      //    } else if(key == 'creator-series') {
      //      item.src = "views/view.creator-series.html";
      //    }
      //    formattedContent.push(item);
      //  });
      //}
      setContent(formattedContent, callback);
    }

    var setSelected = function(content) {
      _selectedContent = content;
    }

    var getSelected = function() {
      return _selectedContent;
    }

    var findContent = function(selectedHref) {
      var deferred = $q.defer();
      if(!_selectedContent) {
        initContent(function(content) {
          for(var c=0;c<content.length;c++) {
            if(content[c].href == selectedHref) {
              return deferred.resolve(content[c]);
            }
          }
        })
      } else {
        return deferred.resolve(_selectedContent);
      }
      return deferred.promise;
    }



      var newContent = function(newContent) {
          return $http({
              method : 'POST',
              url : 'api/siteContent/',
              data : newContent
          })
      }

      var updateContent = function(content) {
          return $http({
              method : 'PUT',
              url : 'api/siteContent/' + content._id,
              data : content
          })
      }

      var deleteContent = function(content) {
          return $http({
              method : 'DELETE',
              url : 'api/siteContent/' + content._id
          })
      }

    return {
      setContent : setContent,
      getContent : getContent,
      initContent : initContent,
      setSelected : setSelected,
      getSelected : getSelected,
      findContent : findContent,
      newContent : newContent,
      updateContent : updateContent,
      deleteContent : deleteContent
    }
  })

/**
 * Created by Danny on 12/25/16.
 */
angular.module('freqCultureApp')
    .service('AdminService', function($http, $q) {

        var _allUsers;
        var newUser = function(newUser) {
            return $http({
                method : 'POST',
                url : 'api/user/newUser',
                data : newUser
            })
        }

        var allUsers = function() {
            if(!_allUsers) {
                return $http({
                    method: 'GET',
                    url : 'api/user/allUsers'
                })
                    .then(function(response) {
                        _allUsers = response.data;
                        return _allUsers
                    })
            } else {
                var deferred = $q.defer();
                deferred.resolve(_allUsers);
                return deferred.promise;
            }
        }

        var deleteUser = function(userId) {
            return $http({
                method: 'DELETE',
                url : 'api/user/' + userId
            })
        }

        return {
            newUser : newUser,
            allUsers : allUsers,
            deleteUser : deleteUser
        }
    })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/modal-placeholder.html',
    '<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h1 class="title">Coming Soon...</h1></div><div class="modal-body">This feature is currently in development. Stay tuned for more info!</div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal"><h1 class="button">Got it!</h1></button></div>');
}]);

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/modal-logout.html',
    '<div class="modal-header red-modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h1 class="title">Logout?</h1></div><div class="modal-body">Are you sure you wish to logout? You will need to log back in if you wish to continue editing content.</div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal"><h1 class="button">Cancel</h1></button> <button type="submit" class="btn btn-danger" ng-click="$parent.modalConfirm()">Confirm</button></div>');
}]);

/**
 * Created by Danny on 12/24/16.
 */
angular.module('freqCultureApp')
    .directive('siteModal', function($rootScope) {
        return {
            restrict : 'E',
            templateUrl : 'partials/site-modal.html',
            link : function(scope, elem, attrs) {
                scope.modalTemplate = $rootScope.modalTemplate;
                scope.modalConfirm = $rootScope.modalConfirm;
            }
        }
    })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/modal-login.html',
    '<div ng-controller="LoginModalCtrl"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h1 class="title">Login</h1></div><div class="modal-body"><form role="form" novalidate name="loginForm" ng-init="resetLogin(loginForm)"><div class="row"><div class="col-xs-6 col-xs-offset-3 col-sm-6 col-sm-offset-0 form-group"><label for="userEmail" class="label">Email</label><input type="email" class="form-control" id="userEmail" placeholder="Email" ng-model="loginForm.email"></div><div class="col-xs-6 col-xs-offset-3 col-sm-6 col-sm-offset-0 form-group"><label for="userPassword" class="label">Password</label><input type="password" class="form-control" id="userPassword" placeholder="Password" ng-model="loginForm.password"></div></div></form></div><div class="modal-footer"><div class="modal-footer-extras"><h1 class="title modal-error">{{errorMessage}}</h1><i class="fa fa-spinner fa-spin" ng-show="loggingIn" ng-class="{\'hide-spinner\' : errorMessage}"></i></div><button type="button" class="btn btn-default" data-dismiss="modal"><h1 class="button">Cancel</h1></button> <button type="submit" class="btn purple-button" ng-click="login(loginForm)"><h1 class="button">Login</h1></button></div></div>');
}]);

/**
 * Created by Danny on 11/6/16.
 */
angular.module('freqCultureApp')
  .directive('siteFooter', function() {
    return {
      restrict : 'E',
      templateUrl : 'partials/site-footer.html'
    }
  })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/modal-contact.html',
    '<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h1 class="title">{{$parent.modalTitle ? $parent.modalTitle : \'Contact\'}}</h1></div><div class="modal-body"><p class="site-body-text center-block">Please fill out some details so we can get back to you.</p><form role="form" novalidate name="contactForm" class="center-block"><div class="row"><div class="col-xs-6 col-xs-offset-3 col-sm-5 col-sm-offset-1 form-group"><label for="contactFirstName" class="label">First Name</label><input type="text" class="form-control" id="contactFirstName" placeholder="First Name" ng-model="contactForm.firstName"></div><div class="col-xs-6 col-xs-offset-3 col-sm-5 col-sm-offset-0 form-group"><label for="contactLastName" class="label">Last Name</label><input type="text" class="form-control" id="contactLastName" placeholder="Last Name" ng-model="contactForm.lastName"></div></div><div class="row"><div class="col-xs-6 col-xs-offset-3 col-sm-5 col-sm-offset-1 form-group"><label for="contactEmail" class="label">Email</label><input type="email" class="form-control" id="contactEmail" placeholder="Email" ng-model="contactForm.email"></div><div class="col-xs-6 col-xs-offset-3 col-sm-5 col-sm-offset-0 form-group"><label for="contactCompany" class="label">(Optional) Company</label><input type="text" class="form-control" id="contactCompany" placeholder="Company" ng-model="contactForm.company"></div></div><div class="row"><div class="col-xs-10 col-xs-offset-1 col-sm-8 col-sm-offset-2 form-group"><label for="contactMessage" class="label">(Optional) Message</label><textarea class="form-control" id="contactMessage" rows="3" ng-model="contactForm.message"></textarea></div></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal"><h1 class="button">Cancel</h1></button> <button type="submit" class="btn purple-button" ng-click="$parent.modalConfirm(contactForm)"><h1 class="button">Submit</h1></button></div>');
}]);

/**
 * Created by Danny on 11/6/16.
 */

angular.module('freqCultureApp')
  .directive('siteAudio', function() {
    return {
      restrict : 'E',
      templateUrl : 'partials/site-audio.html',
      link : function(scope, elem, attrs) {

        var clientId = 'oerXf6nBcDu5CoNdaOrIGutVCKXPYvSB';
        scope.trackUrl = 'https://soundcloud.com/itzaia/mix-machine-297-16-nov-2016-with-itzaia';

        SC.initialize({
          client_id: clientId
        });
        SC.resolve('https://soundcloud.com/itzaia/mix-machine-297-16-nov-2016-with-itzaia')
          .then(function(track) {
            //console.log('track: ', track);
          })
      }
    }
  })


angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/modal-confirm.html',
    '<div class="modal-header red-modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h1 class="title">{{$parent.modalTitle ? $parent.modalTitle : \'Please Confirm\'}}</h1></div><div class="modal-body">Are you sure you wish to continue? This action is permanent and cannot be undone.</div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal"><h1 class="button">Cancel</h1></button> <button type="submit" class="btn btn-danger" ng-click="$parent.modalConfirm(contactForm)">Confirm</button></div>');
}]);

/**
 * Created by Danny on 11/5/16.
 */
angular.module('freqCultureApp')
  .directive('sidemenu', function($rootScope) {
    return {
      scope: 'E',
      templateUrl : 'partials/sidemenu.html',
      link : function(scope, elem, attrs) {

        scope.showMenu = false;
        scope.toggleLinks = function() {
          var link = document.querySelector('.mobile-menu').querySelectorAll('li');
          for (var i = 0; i < link.length; i++) {
            link[i].classList.toggle('active');
          }
        }
        $rootScope.$on("$stateChangeSuccess", function(event, toState) {
          if(scope.showMenu) {
            scope.toggleLinks()
            scope.showMenu = false;
          }
        });
      }
    }
  })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/main-section.partial.html',
    '<section class="section-with-top-nav container"><h1 class="display-2">{{sectionTitle}}</h1><h2 class="subhead-1">{{sectionSubTitle}}</h2><content-container content-type="{{contentType}}"></content-container></section>');
}]);

/**
 * Created by Danny on 11/8/16.
 */
angular.module('freqCultureApp')
  .directive('sectionHeader', function($state, $window, $rootScope) {
    return {
      restrict : 'E',
      templateUrl : 'partials/section-header.html',
      link : function(scope, elem, attrs) {
        //scope.headerStyle = {
        //  'background-repeat' : 'no-repeat',
        //  'background-position' : 'center',
        //  'background-size' : 'cover'
        //
        //};
        //scope.state = $state;
        //var windowWidth = $window.innerWidth,
        //  stateName;
        //
        //// In case of screen resizes, make sure we use correct background image
        //angular.element($window).bind('resize', function () {
        //  windowWidth = $window.innerWidth;
        //  if(stateName != 'home') getHeaderImage();
        //});
        //
        //$rootScope.$on("$stateChangeSuccess", function(event, toState) {
        //  stateName = toState.name;
        //  if(stateName != 'home') getHeaderImage();
        //});
        //function getHeaderImage() {
        //  var imageLocation = stateName + '-header.png';
        //  if(windowWidth < 768) imageLocation = 'mobile-' + imageLocation;
        //  imageLocation = 'url(../images/' + imageLocation + ')';
        //  scope.headerStyle['background-image'] = imageLocation;
        //}
        scope.isActive = function(state) {
          return $state.current.name == state;
        }
        scope.goTo = function(state) {
          $state.go(state);
        }
      }
    }
  })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/home.html',
    '<section-header class="hidden-xs"></section-header><section class="section-with-top-nav container"><content-container content-type="home"></content-container></section>');
}]);

/**
 * Created by Danny on 10/10/16.
 */
angular.module('freqCultureApp')
  .directive('navbar', function($window, $rootScope, $state, $timeout) {
    return {
      scope: 'E',
      templateUrl : 'partials/navbar.html',
      link : function(scope, elem, attrs) {

        /*
         Always Show Navbar on mobile screens

         Monitor Width in case of screen resizers!

         Hide navbar on home view non-mobile
          */
        scope.state = $state;

        var windowWidth = $window.innerWidth;
        scope.showNavbar = true;

        angular.element($window).bind('resize', function () {
          windowWidth = $window.innerWidth;
          scope.showNavbar = (windowWidth < 768);
          if(scope.state.current.name == 'home'&& windowWidth >= 768 ) watchHomeScroll();

        });
        $rootScope.$on("$stateChangeSuccess", function(event, toState) {
          if(windowWidth < 768) {
            scope.showNavbar = true;
          } else {
            scope.showNavbar = (toState.name !== 'home' && windowWidth >= 768);
          }
          if(toState.name == 'home' && windowWidth >= 768) watchHomeScroll()
          else angular.element($window).unbind('scroll');

          if(scope.state.includes('dashboard')) scope.showNavbar = false;
        });

        scope.goTo = function(state) {
          $state.go(state);
        }

        var headerHeight;
        function watchHomeScroll() {
          $timeout(function() {
            headerHeight = document.getElementById('sectionHeader').clientHeight;
          }, 100);

          angular.element($window).bind("scroll", function(e) {
            scope.$apply(function() {
              scope.showNavbar = ($window.scrollY > headerHeight)
            });
          })
        }

        scope.isActive = function(state) {
          return $state.current.name == state;
        }
      }
    }
  })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/hamburger-menu.html',
    '<div class="material-design-hamburger" ng-click="toggleState()"><button class="material-design-hamburger__icon"><span class="material-design-hamburger__layer" ng-class="\'material-design-hamburger__icon--\' + (state ? \'to\' : \'from\') + \'-arrow\'"></span></button></div>');
}]);

/**
 * Created by Danny on 12/25/16.
 */
angular.module('freqCultureApp')
    .controller('LoginModalCtrl', function($scope, $timeout, UserService) {

        $scope.errorMessage = null;
        $scope.loggingIn = false;
        $scope.loginForm = {};

        $scope.login = function(loginForm) {
            if(!$scope.loggingIn) {
                $scope.loggingIn = false;
                if(!loginForm.email) {
                    $scope.errorMessage = 'Please enter your email.'
                } else if(!loginForm.password) {
                    $scope.errorMessage = 'Please enter your password.'
                } else {
                    $scope.errorMessage = undefined;
                    loginUser(loginForm)
                }
            }
        }

        function loginUser(loginForm) {
            $scope.loggingIn = true;
            var loginInfo = {
                email : loginForm.email,
                password : loginForm.password
            }
            UserService.loginUser(loginInfo)
                .then(function(res) {
                    console.log('res: ', res);
                    $scope.modalConfirm(res);
                })
                .catch(function(err) {
                    if(err.data) {
                        $scope.errorMessage = err.data;
                    } else {
                        $scope.errorMessage = "Error logging you in."
                    }
                })
                .finally(function() {
                    $scope.loggingIn = false;
                })
        }

        $scope.resetLogin = function(loginForm) {
            $scope.errorMessage = null;
            $scope.loading = false;
            loginForm.email = null;
            loginForm.password = null;
        }

    })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/dashboard.welcome.html',
    '<div class="container-fluid dashboard-welcome"><img src="../images/kinetik_logo_gray.png"><div class="welcome-text" ng-if="!currentUser"><h1 class="display-1">Content Editor</h1><p class="site-body-text center-block">To begin contributing content to Kinetik Mag, please login or request access.</p><ul class="welcome-list"><li ng-click="showLoginModal()"><a>Login</a></li><li ng-click="showContactModal()"><a>Request Access</a></li></ul></div><div class="welcome-text" ng-if="currentUser"><h1 class="display-1">Content Editor</h1><p class="site-body-text center-block">Welcome to Kinetik and thanks for being a part! Get started below.</p><ul class="welcome-list"><li ng-click="goTo(\'dashboard.content\', \'Content\')"><a>Edit Content</a></li><li ng-click="showPlaceholder()"><a>Tutorial</a></li></ul></div></div>');
}]);

/**
 * Created by Danny on 11/6/16.
 */
angular.module('freqCultureApp')
  .directive('imageShadow', function() {
    return {
      restrict : 'A',
      link : function(scope, elem, attrs) {
        var img = elem[0];
        var style;
        var imgSrc;

        elem.bind('error', function() {
          attrs.$set('src', '../images/logo-backup.png');
          imgSrc = '../images/logo-backup.png';
        })

        attrs.$observe('src', function(value) {
          imgSrc = attrs.src;
          if(imgSrc != '../images/logo-backup.png') addShadow();
        })

        function addShadow() {
          var container = document.createElement('div');
          container.className = 'image-shadow-container image-shadow';
          container.id = "image-shadow-0";
          img.classList.remove('image-shadow');
          img.parentNode.insertBefore(container, img);
          container.appendChild(img);
          style = "#image-shadow-0"+"::after {"+
            "  background-image: url('"+imgSrc+"');"+
            "  content: '';"+
            "}";
          var $style = document.createElement("style");
          $style.appendChild(document.createTextNode(style));
          document.head.appendChild($style);
        }
      }
    }
  })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/dashboard.profile.html',
    '<div class="container-fluid"><div class="col-xs-12"><h1 class="headline">Profile</h1></div></div>');
}]);

/**
 * Created by Danny on 11/8/16.
 */
angular.module('freqCultureApp')
  .directive('hamburgerMenu', function() {
    return {
      restrict: 'E',
      scope: {
        state: '='
      },
      templateUrl: 'partials/hamburger-menu.html',
      link: function($scope, $element, $attrs) {

        /**
         * @ngdoc object
         * @name toggleState
         * @methodOf ngHamburger.directive:hamburgerToggle
         * @description Toggles two way bound model.
         */
        $scope.toggleState = function() {
          return $scope.state = !$scope.state;
        };
      }
    };
  })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/dashboard.content.html',
    '<div class="container-fluid"><ul class="content-list"><li ng-repeat="content in siteContent" class="site-card content-card col-xs-10 col-sm-6 col-md-4"><header class="content-image" ng-style="{\'background-image\' : \'url(\' + content.headerImage + \')\'}"><span class="content-type {{content.contentType}}-content">{{content.contentType}}</span></header><div class="content-info-container"><div class="content-main-info"><h1>{{content.title}}</h1><h2>{{content.author}}</h2></div><p class="body-1">{{content.description}}</p><footer class="content-card-footer"><h1>Live</h1><button class="site-button"><h1>Edit</h1></button></footer></div></li></ul></div>');
}]);

/**
 * Created by Danny on 11/28/16.
 */
angular.module('freqCultureApp')
  .directive('contentHeader', function() {
    return {
      restrict : 'E',
      templateUrl : 'partials/content-header.html',
      scope : {
        selectedContent : '='
      },
      link : function(scope, elem, attrs) {
      }
    }
  })

/**
 * Created by Danny on 11/22/16.
 */
angular.module('freqCultureApp')
  .directive('contentContainer', function(ContentService, $rootScope,
                                          $timeout, $state) {
    return {
      restrict : 'E',
      scope : {
        contentType : '@'
      },
      templateUrl : 'partials/content-container.html',
      link : function(scope, elem, attrs) {
        ContentService.getContent()
          .then(function(content) {
            buildContent(content)
          })

        //scope.showHero = false;
        //$timeout(function() {
        //  console.log('show hero!');
        //  scope.showHero = true;
        //},100);
          console.log('scope: ', scope.contentType);
        function buildContent(allContent) {
          if(scope.contentType == 'home') {
            scope.content = allContent;
            buildHero();
          } else {
            scope.content = [];
            for(var c=0;c<allContent.length;c++) {
              if(allContent[c].contentType == scope.contentType) {
                scope.content.push(allContent[c])
              }
            }
            buildHero();
          }
        }


        function buildHero() {
          scope.heroContent = [];
          var limit = 3;
          if(scope.content.length < 3) {
            limit = scope.content.length;
          }
          for(var c=0;c<limit;c++) {
            scope.heroContent.push(scope.content[c]);
          }
          scope.showHero = (scope.heroContent.length > 0)
        }

        $rootScope.$on("$stateChangeStart", function() {
          scope.showHero = false;
        })

        $rootScope.$on("$stateChangeSuccess", function() {
          $timeout(function() {
            console.log('show hero!');
            scope.showHero = true;
          },200)
        })

        scope.goTo = function(content) {
            console.log('content: ', content);
          if(content.class == 'creator-series') {
            content.class = 'view-creator-series'
          }
          ContentService.setSelected(content);
          $state.go('content', {contentType: content.contentType, contentUrl : content.url})
        }
      }

    }
  })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/dashboard.admin.html',
    '<div class="container-fluid dashboard-admin"><div class="site-card admin-card col-xs-5 list-card"><header><h1 class="subhead-2">Team Members</h1><i class="fa fa-plus-circle" ng-click="showMemberCard(\'new\')"></i></header><ul class="team-list"><li ng-repeat="member in teamMembers" ng-click="editMember(member)"><figure class="member-initals"><h1 class="subhead-2">{{member.firstName.charAt(0)}}{{member.lastName.charAt(0)}}</h1></figure><div class="member-info"><h1 class="subhead-2">{{member.firstName}} {{member.lastName}}</h1><h2 class="body-1">{{member.email}}</h2><h3 class="caption">Role: <span>{{member.role}}</span></h3></div><div class="member-edit"><i class="fa fa-pencil"></i></div></li></ul><div class="team-list-cover" ng-if="teamMembers.length > 8"></div></div><div class="site-card admin-card col-xs-6 col-xs-offset-1" ng-show="sideMemberCard"><header><h1 class="subhead-2">{{sideMemberCard == \'new\' ? \'New\' : \'Edit\'}} Member</h1><i class="fa fa-times-circle-o" ng-click="showMemberCard(null)"></i></header><form role="form" novalidate name="memberForm"><div class="form-group"><label for="firstName" class="label">First Name</label><input type="text" class="form-control" id="firstName" placeholder="First Name" ng-model="memberForm.firstName"></div><div class="form-group"><label for="lastName" class="label">Last Name</label><input type="text" class="form-control" placeholder="Last Name" id="lastName" ng-model="memberForm.lastName"></div><div class="form-group"><label for="email" class="label">Email</label><input type="email" class="form-control" id="email" placeholder="Email" ng-model="memberForm.email"></div><div class="form-group"><label for="memberRoles" class="label">Role</label><ul class="admin-roles" id="memberRoles"><li ng-click="memberForm.role = \'SuperAdmin\'" ng-class="{\'selected\' : memberForm.role == \'SuperAdmin\'}"><h1 class="body-2">Super</h1></li><li ng-click="memberForm.role = \'Admin\'" ng-class="{\'selected\' : memberForm.role == \'Admin\'}"><h1 class="body-2">Admin</h1></li><li ng-click="memberForm.role = \'Editor\'" ng-class="{\'selected\' : memberForm.role == \'Editor\'}"><h1 class="body-2">Editor</h1></li></ul></div></form><footer><div class="admin-footer-extras"><h1 class="title" ng-if="adminErrorMessage">{{adminErrorMessage}}</h1><i class="fa fa-spinner fa-spin" ng-if="!adminErrorMessage && saving"></i></div><div><button type="button" class="btn btn-danger" ng-if="sideMemberCard == \'edit\'" ng-click="delete(memberForm)">Delete</button> <button type="submit" class="btn purple-button" ng-click="save(memberForm)"><h1 class="button">{{sideMemberCard == \'new\' ? \'Create\' : \'Save\'}}</h1></button></div></footer></div></div>');
}]);

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/content-header.html',
    '<header class="content-header"><h1 class="display-2">{{selectedContent.title}}</h1><h1 class="subhead-2" ng-if="selectedContent.author">By {{selectedContent.author}}</h1><div class="header-image" ng-style="{\'background-image\' : \'url(\' + selectedContent.headerImage + \')\'}"></div><ul class="header-info"><li><h2 class="text-capitalize subhead-1">{{selectedContent.contentType}}</h2></li><li><h2 class="caption">{{selectedContent.publishedDate | date : \'EEEE, MMMM d, y\'}}</h2></li></ul></header>');
}]);

/**
 * Created by Danny on 12/15/16.
 */
'use strict';
angular.module('freqCultureApp')
    .config(function ($locationProvider, $stateProvider,  $urlRouterProvider,
                      $urlMatcherFactoryProvider) {

        $urlMatcherFactoryProvider.caseInsensitive(true);
        $urlMatcherFactoryProvider.strictMode(false);
        $urlRouterProvider.otherwise('/');

        $stateProvider
            .state('home', {
                url : '/',
                controller : 'HomeCtrl',
                templateUrl : 'partials/home.html'
            })

            .state('sound', {
                url : '/sound',
                controller : 'MainSectionCtrl',
                templateUrl : 'partials/main-section.partial.html',
                resolve : {
                    sectionTitle : function() {
                        return 'Sound';
                    },
                    sectionSubTitle : function() {
                        return 'Sound section'
                    },
                    contentType : function() {
                        return 'sound'
                    }
                }
            })

            .state('film', {
                url : '/film',
                controller : 'MainSectionCtrl',
                templateUrl : 'partials/main-section.partial.html',
                resolve : {
                    sectionTitle : function() {
                        return 'Film';
                    },
                    sectionSubTitle : function() {
                        return 'Film section'
                    },
                    contentType : function() {
                        return 'film'
                    }
                }
            })

            .state('fashion', {
                url : '/fashion',
                controller : 'MainSectionCtrl',
                templateUrl : 'partials/main-section.partial.html',
                resolve : {
                    sectionTitle : function() {
                        return 'Fashion';
                    },
                    sectionSubTitle : function() {
                        return 'Fashion section'
                    },
                    contentType : function() {
                        return 'fashion'
                    }
                }
            })

            .state('culture', {
                url : '/culture',
                controller : 'MainSectionCtrl',
                templateUrl : 'partials/main-section.partial.html',
                resolve : {
                    sectionTitle : function() {
                        return 'Culture';
                    },
                    sectionSubTitle : function() {
                        return 'Culture section'
                    },
                    contentType : function() {
                        return 'culture'
                    }
                }
            })



            .state('admin', {
                url : '/admin',
                templateUrl : 'partials/view.admin.html',
                controller : 'AdminCtrl'
            })

            .state('dashboard', {
                url : '/dashboard',
                templateUrl : 'partials/view.dashboard.html',
                controller : 'DashboardCtrl',
                abstract : true
            })

            .state('dashboard.welcome', {
                url : '',
                templateUrl : 'partials/dashboard.welcome.html',
                data : {
                    stateTitle : 'Welcome'
                }
            })

            .state('dashboard.admin', {
                url : '/admin',
                templateUrl : 'partials/dashboard.admin.html',
                controller : 'AdminCtrl',
                data : {
                    stateTitle : 'Admin'
                }
            })

            .state('dashboard.profile', {
                url : '/profile',
                templateUrl : 'partials/dashboard.profile.html',
                data : {
                    stateTitle : 'Profile'
                }
            })

            .state('dashboard.content', {
                url : '/content',
                templateUrl : 'partials/dashboard.content.html',
                controller : 'DashboardContentCtrl',
                data : {
                    stateTitle : 'Content'
                }
            })

            .state('about', {
                url : '/about',
                templateUrl : 'partials/about.html'
            })



            .state('content', {
                url : '/:contentType/:contentUrl',
                templateUrl : 'partials/view.content.html',
                controller : 'ViewContentCtrl'
            })


        $locationProvider.html5Mode(true).hashPrefix('!');

    });

/**
 * Created by Danny on 12/15/16.
 */
angular.module('freqCultureApp')
    .config(function(plangularConfigProvider) {
        plangularConfigProvider.clientId = 'oerXf6nBcDu5CoNdaOrIGutVCKXPYvSB'
    });

/**
 * Created by Danny on 1/29/17.
 */
angular.module('freqCultureApp')
    .run(function($rootScope, $state, ModalService, SignupService) {
        $rootScope.showSite = false;
        $rootScope.$state = $state;
        $rootScope.showSignup = function() {
            ModalService.openModal('signup', 'Kinetik Mag Early Access')
                .then(function(modalData) {
                    console.log('promise to contact!', modalData)
                    var formData = {
                        firstName : modalData.firstName,
                        email : modalData.email,
                        type : 'EarlyAccess'
                    }
                    SignupService.newSignup(formData)
                        .then(function(response) {
                            console.log('response: ', response);
                        })
                        .catch(function(err) {
                            console.log('err: ', err);
                        })
                })
                .catch(function() {
                    console.log(' no value');
                })
        }

    })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/content-container.html',
    '<section class="content-container"><div class="hero-container"><slick infinite="true" slides-to-show="1" slides-to-scroll="1" arrows="false" autoplay="true" class="col-xs-12 hero-content" pause-on-hover="true" autoplay-speed="3000" ng-class="{\'show-hero\' : showHero}"><div class="hero-slide" ng-repeat="heroItem in heroContent track by $index" ng-style="{\'background-image\' : \'url(\' + heroItem.headerImage + \')\'}" ng-click="goTo(heroItem)"><div class="hero-footer"><div class="hero-info"><h1>{{heroItem.title}}</h1><p class="site-body-text">{{heroItem.subTitle}}</p></div><ul><li>Read Now</li><li class="{{heroItem.contentType}}-content">{{heroItem.contentType}}</li></ul></div></div></slick></div><div ng-repeat="subContent in content track by $index" class="sub-content col-xs-12 col-md-6" ng-style="{\'background-image\' : \'url(\' +subContent.headerImage + \')\'}" ng-if="$index > 2" ng-click="goTo(subContent)"><div class="content-footer"><div class="content-info"><h1>{{subContent.title}}</h1></div><ul><li>Read Now</li><li class="{{subContent.contentType}}-content">{{subContent.contentType}}</li></ul></div></div></section>');
}]);

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/about.html',
    '<section class="section-with-top-nav container"><h2 class="site-body-title">About Content</h2><p class="site-body-text">Well, the way they make shows is, they make one show. That show\'s called a pilot. Then they show that show to the people who make shows, and on the strength of that one show they decide if they\'re going to make more shows. Some pilots get picked and become television programs. Some don\'t, become nothing. She starred in one of the ones that became nothing.</p></section>');
}]);

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('404.html',
    '<!doctype html><html lang="en"><head><meta charset="utf-8"><title>Page Not Found :(</title><style>::-moz-selection {\n' +
    '    background: #b3d4fc;\n' +
    '    text-shadow: none;\n' +
    '}\n' +
    '\n' +
    '::selection {\n' +
    '    background: #b3d4fc;\n' +
    '    text-shadow: none;\n' +
    '}\n' +
    '\n' +
    'html {\n' +
    '    padding: 30px 10px;\n' +
    '    font-size: 20px;\n' +
    '    line-height: 1.4;\n' +
    '    color: #737373;\n' +
    '    background: #f0f0f0;\n' +
    '    -webkit-text-size-adjust: 100%;\n' +
    '    -ms-text-size-adjust: 100%;\n' +
    '}\n' +
    '\n' +
    'html,\n' +
    'input {\n' +
    '    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n' +
    '}\n' +
    '\n' +
    'body {\n' +
    '    max-width: 500px;\n' +
    '    padding: 30px 20px 50px;\n' +
    '    border: 1px solid #b3b3b3;\n' +
    '    border-radius: 4px;\n' +
    '    margin: 0 auto;\n' +
    '    box-shadow: 0 1px 10px #a7a7a7, inset 0 1px 0 #fff;\n' +
    '    background: #fcfcfc;\n' +
    '}\n' +
    '\n' +
    'h1 {\n' +
    '    margin: 0 10px;\n' +
    '    font-size: 50px;\n' +
    '    text-align: center;\n' +
    '}\n' +
    '\n' +
    'h1 span {\n' +
    '    color: #bbb;\n' +
    '}\n' +
    '\n' +
    'h3 {\n' +
    '    margin: 1.5em 0 0.5em;\n' +
    '}\n' +
    '\n' +
    'p {\n' +
    '    margin: 1em 0;\n' +
    '}\n' +
    '\n' +
    'ul {\n' +
    '    padding: 0 0 0 40px;\n' +
    '    margin: 1em 0;\n' +
    '}\n' +
    '\n' +
    '.container {\n' +
    '    max-width: 380px;\n' +
    '    margin: 0 auto;\n' +
    '}\n' +
    '\n' +
    '/* google possessions-search */\n' +
    '\n' +
    '#goog-fixurl ul {\n' +
    '    list-style: none;\n' +
    '    padding: 0;\n' +
    '    margin: 0;\n' +
    '}\n' +
    '\n' +
    '#goog-fixurl form {\n' +
    '    margin: 0;\n' +
    '}\n' +
    '\n' +
    '#goog-wm-qt,\n' +
    '#goog-wm-sb {\n' +
    '    border: 1px solid #bbb;\n' +
    '    font-size: 16px;\n' +
    '    line-height: normal;\n' +
    '    vertical-align: top;\n' +
    '    color: #444;\n' +
    '    border-radius: 2px;\n' +
    '}\n' +
    '\n' +
    '#goog-wm-qt {\n' +
    '    width: 220px;\n' +
    '    height: 20px;\n' +
    '    padding: 5px;\n' +
    '    margin: 5px 10px 0 0;\n' +
    '    box-shadow: inset 0 1px 1px #ccc;\n' +
    '}\n' +
    '\n' +
    '#goog-wm-sb {\n' +
    '    display: inline-block;\n' +
    '    height: 32px;\n' +
    '    padding: 0 10px;\n' +
    '    margin: 5px 0 0;\n' +
    '    white-space: nowrap;\n' +
    '    cursor: pointer;\n' +
    '    background-color: #f5f5f5;\n' +
    '    background-image: -webkit-linear-gradient(rgba(255,255,255,0), #f1f1f1);\n' +
    '    background-image: -moz-linear-gradient(rgba(255,255,255,0), #f1f1f1);\n' +
    '    background-image: -ms-linear-gradient(rgba(255,255,255,0), #f1f1f1);\n' +
    '    background-image: -o-linear-gradient(rgba(255,255,255,0), #f1f1f1);\n' +
    '    -webkit-appearance: none;\n' +
    '    -moz-appearance: none;\n' +
    '    appearance: none;\n' +
    '}\n' +
    '\n' +
    '#goog-wm-sb:hover,\n' +
    '#goog-wm-sb:focus {\n' +
    '    border-color: #aaa;\n' +
    '    box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);\n' +
    '    background-color: #f8f8f8;\n' +
    '}\n' +
    '\n' +
    '#goog-wm-qt:hover,\n' +
    '#goog-wm-qt:focus {\n' +
    '    border-color: #105cb6;\n' +
    '    outline: 0;\n' +
    '    color: #222;\n' +
    '}\n' +
    '\n' +
    'input::-moz-focus-inner {\n' +
    '    padding: 0;\n' +
    '    border: 0;\n' +
    '}</style></head><body><div class="container"><h1>Not found <span>:(</span></h1><p>Sorry, but the page you were trying to view does not exist.</p><p>It looks like this was the result of either:</p><ul><li>a mistyped address</li><li>an out-of-date link</li></ul><script>var GOOG_FIXURL_LANG = (navigator.language || \'\').slice(0,2),GOOG_FIXURL_SITE = location.host;</script><script src="//linkhelp.clients.google.com/tbproxy/lh/wm/fixurl.js"></script></div></body></html>');
}]);

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsInNjcmlwdHMvcm91dGVzL3ZpZXctY29udGVudC5jb250cm9sbGVyLmpzIiwicGFydGlhbHMvdmlldy5kYXNoYm9hcmQuanMiLCJzY3JpcHRzL3JvdXRlcy9tYWluLXNlY3Rpb24uY29udHJvbGxlci5qcyIsInBhcnRpYWxzL3ZpZXcuY29udGVudC5qcyIsInNjcmlwdHMvcm91dGVzL2hvbWUuY29udHJvbGxlci5qcyIsInBhcnRpYWxzL3ZpZXcuYWRtaW4uanMiLCJzY3JpcHRzL3JvdXRlcy9kYXNoYm9hcmQuY29udHJvbGxlci5qcyIsInBhcnRpYWxzL3NpdGUtbW9kYWwuanMiLCJzY3JpcHRzL3JvdXRlcy9kYXNoYm9hcmQuY29udGVudC5jb250cm9sbGVyLmpzIiwicGFydGlhbHMvc2l0ZS1mb290ZXIuanMiLCJzY3JpcHRzL3JvdXRlcy9hZG1pbi5jb250cm9sbGVyLmpzIiwicGFydGlhbHMvc2l0ZS1hdWRpby5qcyIsInNjcmlwdHMvc2VydmljZXMvdXNlci5zZXJ2aWNlLmpzIiwicGFydGlhbHMvc2lkZW1lbnUuanMiLCJzY3JpcHRzL3NlcnZpY2VzL3NpZ251cC5zZXJ2aWNlLmpzIiwicGFydGlhbHMvc2VjdGlvbi1oZWFkZXIuanMiLCJzY3JpcHRzL3NlcnZpY2VzL21vZGFsLnNlcnZpY2UuanMiLCJwYXJ0aWFscy9uYXZiYXIuanMiLCJwYXJ0aWFscy9tb2RhbC1zaWdudXAuanMiLCJzY3JpcHRzL3NlcnZpY2VzL2NvbnRlbnQuc2VydmljZS5qcyIsInNjcmlwdHMvc2VydmljZXMvYWRtaW4uc2VydmljZS5qcyIsInBhcnRpYWxzL21vZGFsLXBsYWNlaG9sZGVyLmpzIiwicGFydGlhbHMvbW9kYWwtbG9nb3V0LmpzIiwic2NyaXB0cy9kaXJlY3RpdmVzL3NpdGUtbW9kYWwuZGlyZWN0aXZlLmpzIiwicGFydGlhbHMvbW9kYWwtbG9naW4uanMiLCJzY3JpcHRzL2RpcmVjdGl2ZXMvc2l0ZS1mb290ZXIuZGlyZWN0aXZlLmpzIiwicGFydGlhbHMvbW9kYWwtY29udGFjdC5qcyIsInNjcmlwdHMvZGlyZWN0aXZlcy9zaXRlLWF1ZGlvLmRpcmVjdGl2ZS5qcyIsInBhcnRpYWxzL21vZGFsLWNvbmZpcm0uanMiLCJzY3JpcHRzL2RpcmVjdGl2ZXMvc2lkZS1tZW51LmRpcmVjdGl2ZS5qcyIsInBhcnRpYWxzL21haW4tc2VjdGlvbi5wYXJ0aWFsLmpzIiwic2NyaXB0cy9kaXJlY3RpdmVzL3NlY3Rpb24taGVhZGVyLmRpcmVjdGl2ZS5qcyIsInBhcnRpYWxzL2hvbWUuanMiLCJzY3JpcHRzL2RpcmVjdGl2ZXMvbmF2YmFyLmRpcmVjdGl2ZS5qcyIsInBhcnRpYWxzL2hhbWJ1cmdlci1tZW51LmpzIiwic2NyaXB0cy9kaXJlY3RpdmVzL2xvZ2luTW9kYWwuY29udHJvbGxlci5qcyIsInBhcnRpYWxzL2Rhc2hib2FyZC53ZWxjb21lLmpzIiwic2NyaXB0cy9kaXJlY3RpdmVzL2ltYWdlLXNoYWRvdy5qcyIsInBhcnRpYWxzL2Rhc2hib2FyZC5wcm9maWxlLmpzIiwic2NyaXB0cy9kaXJlY3RpdmVzL2hhbWJ1cmdlci1tZW51LmRpcmVjdGl2ZS5qcyIsInBhcnRpYWxzL2Rhc2hib2FyZC5jb250ZW50LmpzIiwic2NyaXB0cy9kaXJlY3RpdmVzL2NvbnRlbnQtaGVhZGVyLmRpcmVjdGl2ZS5qcyIsInNjcmlwdHMvZGlyZWN0aXZlcy9jb250ZW50LWNvbnRhaW5lci5kaXJlY3RpdmUuanMiLCJwYXJ0aWFscy9kYXNoYm9hcmQuYWRtaW4uanMiLCJwYXJ0aWFscy9jb250ZW50LWhlYWRlci5qcyIsInNjcmlwdHMvY29uZmlnL3JvdXRlcy5qcyIsInNjcmlwdHMvY29uZmlnL2NvbmZpZy5qcyIsInNjcmlwdHMvY29uZmlnL2FwcFJ1bi5qcyIsInBhcnRpYWxzL2NvbnRlbnQtY29udGFpbmVyLmpzIiwicGFydGlhbHMvYWJvdXQuanMiLCI0MDQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDbkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ25GQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3hMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDbEpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNoRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2pCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDbERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNySEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM3Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNkQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDekJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMxQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzVDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMvREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN2REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN4Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN6QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMzRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3pKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM5QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ3JlYXRlZCBieSBEYW5ueSBvbiAxMi8xNS8xNi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJywgW1xuICAgICduZ0FuaW1hdGUnLFxuICAgICduZ0Nvb2tpZXMnLFxuICAgICduZ1Jlc291cmNlJyxcbiAgICAndWkucm91dGVyJyxcbiAgICAnbmdUb3VjaCcsXG4gICAgJ25nLWZhc3RjbGljaycsXG4gICAgJ3NsaWNrQ2Fyb3VzZWwnLFxuICAgICdwbGFuZ3VsYXInLFxuICAgICd0ZXh0QW5ndWxhcicsXG4gICAgJ0xvY2FsU3RvcmFnZU1vZHVsZSdcbl0pO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IERhbm55IG9uIDExLzI3LzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKVxuICAuY29udHJvbGxlcignVmlld0NvbnRlbnRDdHJsJywgZnVuY3Rpb24oJHNjb3BlLCBDb250ZW50U2VydmljZSwgJHN0YXRlUGFyYW1zLCAkd2luZG93KSB7XG5cblxuICAgICRzY29wZS5zZWxlY3RlZENvbnRlbnQgPSBDb250ZW50U2VydmljZS5nZXRTZWxlY3RlZCgpO1xuXG4gICAgaWYoISRzY29wZS5zZWxlY3RlZENvbnRlbnQpIHtcbiAgICAgIENvbnRlbnRTZXJ2aWNlLmZpbmRDb250ZW50KCRzdGF0ZVBhcmFtcy5jb250ZW50SHJlZilcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oc2VsZWN0ZWQpIHtcbiAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRDb250ZW50ID0gc2VsZWN0ZWQ7XG4gICAgICAgICAgJHNjb3BlLnNlbGVjdGVkQ29udGVudC5wdWJsaXNoRGF0ZSA9IG5ldyBEYXRlKCRzY29wZS5zZWxlY3RlZENvbnRlbnQuZGF0ZSk7XG4gICAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgICRzY29wZS5zZWxlY3RlZENvbnRlbnQucHVibGlzaERhdGUgPSBuZXcgRGF0ZSgkc2NvcGUuc2VsZWN0ZWRDb250ZW50LmRhdGUpO1xuICAgIH1cbiAgfSlcbiIsImFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdwYXJ0aWFscy92aWV3LmRhc2hib2FyZC5odG1sJyxcbiAgICAnPHNlY3Rpb24gY2xhc3M9XCJmbHVpZC1jb250YWluZXIgZGFzaGJvYXJkLXZpZXdcIj48bmF2IGNsYXNzPVwiZGFzaGJvYXJkLW5hdlwiPjxkaXYgY2xhc3M9XCJuYXYtbG9nb1wiIG5nLWNsaWNrPVwiZ29UbyhcXCdob21lXFwnKVwiPjxpbWcgc3JjPVwiLi4vaW1hZ2VzL2tpbmV0aWtfbmFtZV93aGl0ZS5wbmdcIj48L2Rpdj48ZGl2IGNsYXNzPVwiZGFzaGJvYXJkLXVzZXJcIj48ZGl2IGNsYXNzPVwidXNlci1jb250YWluZXJcIj48ZmlndXJlIGNsYXNzPVwidXNlci1pbml0aWFsc1wiPjxoMSBjbGFzcz1cInN1YmhlYWQtMlwiIG5nLWlmPVwiY3VycmVudFVzZXJcIj57e2N1cnJlbnRVc2VyLmZpcnN0TmFtZS5jaGFyQXQoMCl9fXt7Y3VycmVudFVzZXIubGFzdE5hbWUuY2hhckF0KDApfX08L2gxPjxpIGNsYXNzPVwiZmEgZmEtZXhjbGFtYXRpb24tdHJpYW5nbGVcIiBuZy1pZj1cIiFjdXJyZW50VXNlclwiPjwvaT48L2ZpZ3VyZT48ZGl2IGNsYXNzPVwidXNlci1pbmZvXCI+PGgxIGNsYXNzPVwic3ViaGVhZC0yXCIgbmctaWY9XCJjdXJyZW50VXNlclwiPnt7Y3VycmVudFVzZXIuZmlyc3ROYW1lICsgXFwnIFxcJyArIGN1cnJlbnRVc2VyLmxhc3ROYW1lfX08L2gxPjxoMSBjbGFzcz1cInN1YmhlYWQtMlwiIG5nLWlmPVwiIWN1cnJlbnRVc2VyXCIgbmctY2xpY2s9XCJzaG93TG9naW5Nb2RhbCgpXCI+UGxlYXNlIGxvZ2luLjwvaDE+PHVsPjxsaSBuZy1zaG93PVwiY3VycmVudFVzZXIgJiYgIWxvYWRpbmdcIiBuZy1jbGFzcz1cIntcXCdoaWRlLWl0ZW1cXCcgOiAhY3VycmVudFVzZXJ9XCIgbmctY2xpY2s9XCJsb2dvdXQoKVwiPjxhPkxvZ291dDwvYT48L2xpPjxsaSBuZy1zaG93PVwiIWN1cnJlbnRVc2VyICYmICFsb2FkaW5nXCIgbmctY2xhc3M9XCJ7XFwnaGlkZS1pdGVtXFwnIDogY3VycmVudFVzZXJ9XCIgbmctY2xpY2s9XCJzaG93TG9naW5Nb2RhbCgpXCI+PGE+TG9naW48L2E+PC9saT48L3VsPjwvZGl2PjwvZGl2PjwvZGl2Pjx1bCBjbGFzcz1cImRhc2hib2FyZC1tZW51XCI+PGxpIG5nLWNsYXNzPVwie2FjdGl2ZTogJHN0YXRlLmluY2x1ZGVzKFxcJ2Rhc2hib2FyZC5hZG1pblxcJyl9XCIgbmctY2xpY2s9XCJnb1RvKFxcJ2Rhc2hib2FyZC5hZG1pblxcJywgXFwnQWRtaW5cXCcpXCIgbmctc2hvdz1cImN1cnJlbnRVc2VyLnJvbGUgPT0gXFwnU3VwZXJBZG1pblxcJ1wiPjxpIGNsYXNzPVwiZmEgZmEtdXNlcnNcIj48L2k+IDxhIGNsYXNzPVwic3ViaGVhZC0yXCI+QWRtaW48L2E+PC9saT48bGkgbmctY2xhc3M9XCJ7YWN0aXZlOiAkc3RhdGUuaW5jbHVkZXMoXFwnZGFzaGJvYXJkLnByb2ZpbGVcXCcpfVwiIG5nLWNsaWNrPVwiZ29UbyhcXCdkYXNoYm9hcmQucHJvZmlsZVxcJywgXFwnUHJvZmlsZVxcJylcIiBuZy1zaG93PVwiY3VycmVudFVzZXJcIj48aSBjbGFzcz1cImZhIGZhLWFkZHJlc3MtY2FyZFwiPjwvaT4gPGEgY2xhc3M9XCJzdWJoZWFkLTJcIj5Qcm9maWxlPC9hPjwvbGk+PGxpIG5nLWNsYXNzPVwie2FjdGl2ZTogJHN0YXRlLmluY2x1ZGVzKFxcJ2Rhc2hib2FyZC5jb250ZW50XFwnKX1cIiBuZy1jbGljaz1cImdvVG8oXFwnZGFzaGJvYXJkLmNvbnRlbnRcXCcsIFxcJ0NvbnRlbnRcXCcpXCIgbmctc2hvdz1cImN1cnJlbnRVc2VyXCI+PGkgY2xhc3M9XCJmYSBmYS1saXN0XCI+PC9pPiA8YSBjbGFzcz1cInN1YmhlYWQtMlwiPkNvbnRlbnQ8L2E+PC9saT48L3VsPjxmb290ZXIgY2xhc3M9XCJhZG1pbi1tZW51LWZvb3RlclwiIG5nLWNsaWNrPVwiZ29UbyhcXCdob21lXFwnKVwiPjxpIGNsYXNzPVwiZmEgZmEtYXJyb3ctbGVmdFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4gPGEgY2xhc3M9XCJzdWJoZWFkLTJcIj5CYWNrIFRvIFNpdGU8L2E+PC9mb290ZXI+PC9uYXY+PGhlYWRlciBjbGFzcz1cImRhc2hib2FyZC1oZWFkZXJcIj48aDEgY2xhc3M9XCJoZWFkbGluZVwiIG5nLWNsaWNrPVwiZ29UbyhcXCdkYXNoYm9hcmQud2VsY29tZVxcJywgXFwnV2VsY29tZVxcJylcIj5EYXNoYm9hcmQ8L2gxPjxoMiBjbGFzcz1cImhlYWRsaW5lXCIgaWQ9XCJtdXRlZC10ZXh0XCIgbmctY2xpY2s9XCJnb1RvKFxcJ2Rhc2hib2FyZC5wcm9maWxlXFwnLCBcXCdQcm9maWxlXFwnKVwiPi8ge3tzZWxlY3RlZFZpZXd9fTwvaDI+PC9oZWFkZXI+PGRpdiBjbGFzcz1cImRhc2hib2FyZC1ib2R5XCIgbmctY2xhc3M9XCJ7XFwnZ3JheS1ib2R5XFwnIDogISRzdGF0ZS5pbmNsdWRlcyhcXCdkYXNoYm9hcmQud2VsY29tZVxcJyl9XCI+PGRpdiBjbGFzcz1cInVpLXZpZXdcIj48L2Rpdj48L2Rpdj48L3NlY3Rpb24+Jyk7XG59XSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgRGFubnkgb24gMTIvMTkvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ01haW5TZWN0aW9uQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSwgc2VjdGlvblRpdGxlLCBzZWN0aW9uU3ViVGl0bGUsIGNvbnRlbnRUeXBlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdtYWluIHNlY3Rpb24nKTtcbiAgICAgICAgJHNjb3BlLnNlY3Rpb25UaXRsZSA9IHNlY3Rpb25UaXRsZTtcbiAgICAgICAgJHNjb3BlLnNlY3Rpb25TdWJUaXRsZSA9IHNlY3Rpb25TdWJUaXRsZTtcbiAgICAgICAgJHNjb3BlLmNvbnRlbnRUeXBlID0gY29udGVudFR5cGU7XG4gICAgfSlcbiIsImFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdwYXJ0aWFscy92aWV3LmNvbnRlbnQuaHRtbCcsXG4gICAgJzxzZWN0aW9uIGNsYXNzPVwic2VjdGlvbi13aXRoLXRvcC1uYXYgY29udGFpbmVyXCI+PGNvbnRlbnQtaGVhZGVyIHNlbGVjdGVkLWNvbnRlbnQ9XCJzZWxlY3RlZENvbnRlbnRcIj48L2NvbnRlbnQtaGVhZGVyPjxkaXYgY2xhc3M9XCJjb250ZW50LXNlY3Rpb25cIiBuZy1yZXBlYXQ9XCJjb250ZW50U2VjdGlvbiBpbiBzZWxlY3RlZENvbnRlbnQuY29udGVudFNlY3Rpb25zXCI+PGltZyBjbGFzcz1cImNvbnRlbnQtaW1hZ2VcIiBuZy1pZj1cImNvbnRlbnRTZWN0aW9uLmhlYWRlckltYWdlIFwiIG5nLXNyYz1cInt7Y29udGVudFNlY3Rpb24uaGVhZGVySW1hZ2V9fVwiPjxwIGNsYXNzPVwic2l0ZS1ib2R5LXRleHQgY2VudGVyLWJsb2NrXCIgbmctY2xhc3M9XCJ7XFwnaW5kZW50LXBhcmFncmFwaFxcJyA6ICRmaXJzdCwgXFwnc3ViLXBhcmFncmFwaFxcJyA6ICEkZmlyc3R9XCI+e3tjb250ZW50U2VjdGlvbi5jb250ZW50fX08L3A+PGltZyBjbGFzcz1cImNvbnRlbnQtaW1hZ2VcIiBuZy1pZj1cImNvbnRlbnRTZWN0aW9uLmZvb3RlckltYWdlIFwiIG5nLXNyYz1cInt7Y29udGVudFNlY3Rpb24uZm9vdGVySW1hZ2V9fVwiPjwvZGl2Pjwvc2VjdGlvbj4nKTtcbn1dKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBEYW5ueSBvbiAxMS83LzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKVxuICAuY29udHJvbGxlcignSG9tZUN0cmwnLCBmdW5jdGlvbigkc2NvcGUsIENvbnRlbnRTZXJ2aWNlLCAkc3RhdGUpIHtcblxuICAgICRzY29wZS5nb1RvID0gZnVuY3Rpb24oc3RhdGUsIHN0YXRlUGFyYW1zKSB7XG4gICAgICAkc3RhdGUuZ28oc3RhdGUsIHN0YXRlUGFyYW1zKTtcbiAgICB9XG5cblxuICAgICRzY29wZS5zaG93U2lnbnVwID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdzaWdudXAhJyk7XG4gICAgfVxuICB9KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3BhcnRpYWxzL3ZpZXcuYWRtaW4uaHRtbCcsXG4gICAgJzxzZWN0aW9uIGNsYXNzPVwiZmx1aWQtY29udGFpbmVyIGFkbWluLXZpZXdcIj48bmF2IGNsYXNzPVwiYWRtaW4tbmF2XCI+PGRpdiBjbGFzcz1cIm5hdi1sb2dvXCIgbmctY2xpY2s9XCJnb1RvKFxcJ2hvbWVcXCcpXCI+PGltZyBzcmM9XCIuLi9pbWFnZXMvZnJlcXVlbmN5X2N1bHR1cmVfd2hpdGVfdHJhbnMucG5nXCI+PC9kaXY+PGRpdiBjbGFzcz1cImFkbWluLXVzZXJcIj48ZGl2IGNsYXNzPVwidXNlci1jb250YWluZXJcIj48ZmlndXJlIGNsYXNzPVwidXNlci1pbml0aWFsc1wiPjxoMSBjbGFzcz1cInN1YmhlYWQtMlwiIG5nLWlmPVwiZmFsc2VcIj5ERjwvaDE+PGkgY2xhc3M9XCJmYSBmYS1leGNsYW1hdGlvbi10cmlhbmdsZVwiPjwvaT48L2ZpZ3VyZT48ZGl2IGNsYXNzPVwidXNlci1pbmZvXCI+PGgxIGNsYXNzPVwic3ViaGVhZC0yXCIgbmctaWY9XCJjdXJyZW50VXNlclwiPnt7Y3VycmVudFVzZXIuZmlyc3ROYW1lICsgXFwnIFxcJyArIGN1cnJlbnRVc2VyLmxhc3ROYW1lfX08L2gxPjxoMSBjbGFzcz1cInN1YmhlYWQtMlwiIG5nLWlmPVwiIWN1cnJlbnRVc2VyXCIgZGF0YS10b2dnbGU9XCJtb2RhbFwiIGRhdGEtdGFyZ2V0PVwiI2xvZ2luTW9kYWxcIj5QbGVhc2UgbG9naW4uPC9oMT48dWw+PGxpIG5nLWlmPVwiY3VycmVudFVzZXJcIj48YT5TZXR0aW5nczwvYT48L2xpPjxsaSBuZy1pZj1cImN1cnJlbnRVc2VyXCI+PGE+TG9nb3V0PC9hPjwvbGk+PGxpIG5nLWlmPVwiIWN1cnJlbnRVc2VyXCIgZGF0YS10b2dnbGU9XCJtb2RhbFwiIGRhdGEtdGFyZ2V0PVwiI2xvZ2luTW9kYWxcIj48YT5Mb2dpbjwvYT48L2xpPjwvdWw+PC9kaXY+PC9kaXY+PC9kaXY+PC9uYXY+PGhlYWRlciBjbGFzcz1cImFkbWluLWhlYWRlclwiPjxoMSBjbGFzcz1cImhlYWRsaW5lXCI+RGFzaGJvYXJkPC9oMT48L2hlYWRlcj48L3NlY3Rpb24+PGRpdiBjbGFzcz1cIm1vZGFsIGZhZGUgYWRtaW4tbW9kYWxcIiBpZD1cImxvZ2luTW9kYWxcIiB0YWJpbmRleD1cIi0xXCIgcm9sZT1cImRpYWxvZ1wiIGFyaWEtbGFiZWxsZWRieT1cIm15TW9kYWxMYWJlbFwiPjxkaXYgY2xhc3M9XCJtb2RhbC1kaWFsb2dcIiByb2xlPVwiZG9jdW1lbnRcIj48ZGl2IGNsYXNzPVwibW9kYWwtY29udGVudFwiPjxkaXYgY2xhc3M9XCJtb2RhbC1oZWFkZXJcIj48YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImNsb3NlXCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIiBhcmlhLWxhYmVsPVwiQ2xvc2VcIj48c3BhbiBhcmlhLWhpZGRlbj1cInRydWVcIj4mdGltZXM7PC9zcGFuPjwvYnV0dG9uPjxoMSBjbGFzcz1cInRpdGxlXCI+TG9naW48L2gxPjwvZGl2PjxkaXYgY2xhc3M9XCJtb2RhbC1ib2R5XCI+PGRpdiBjbGFzcz1cInJvd1wiPjxkaXYgY2xhc3M9XCJjb2wteHMtNiBjb2wteHMtb2Zmc2V0LTMgY29sLXNtLTYgY29sLXNtLW9mZnNldC0wIGZvcm0tZ3JvdXBcIj48bGFiZWwgZm9yPVwidXNlckVtYWlsXCIgY2xhc3M9XCJsYWJlbFwiPkVtYWlsPC9sYWJlbD48aW5wdXQgdHlwZT1cImVtYWlsXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBpZD1cInVzZXJFbWFpbFwiIHBsYWNlaG9sZGVyPVwiRW1haWxcIj48L2Rpdj48ZGl2IGNsYXNzPVwiY29sLXhzLTYgY29sLXhzLW9mZnNldC0zIGNvbC1zbS02IGNvbC1zbS1vZmZzZXQtMCBmb3JtLWdyb3VwXCI+PGxhYmVsIGZvcj1cInVzZXJQYXNzd29yZFwiIGNsYXNzPVwibGFiZWxcIj5QYXNzd29yZDwvbGFiZWw+PGlucHV0IHR5cGU9XCJwYXNzd29yZFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgaWQ9XCJ1c2VyUGFzc3dvcmRcIiBwbGFjZWhvbGRlcj1cIlBhc3N3b3JkXCI+PC9kaXY+PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz1cIm1vZGFsLWZvb3RlclwiPjxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0XCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIj48aDEgY2xhc3M9XCJidXR0b25cIj5DYW5jZWw8L2gxPjwvYnV0dG9uPiA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBwdXJwbGUtYnV0dG9uXCI+PGgxIGNsYXNzPVwiYnV0dG9uXCI+TG9naW48L2gxPjwvYnV0dG9uPjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PicpO1xufV0pO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IERhbm55IG9uIDEyLzI0LzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKVxuICAgIC5jb250cm9sbGVyKCdEYXNoYm9hcmRDdHJsJywgZnVuY3Rpb24oJHNjb3BlLCAkdGltZW91dCwgQ29udGVudFNlcnZpY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc3RhdGUsIE1vZGFsU2VydmljZSwgVXNlclNlcnZpY2UpIHtcblxuICAgICAgICAkc2NvcGUuc2VsZWN0ZWRWaWV3ID0gJHN0YXRlLmN1cnJlbnQuZGF0YS5zdGF0ZVRpdGxlO1xuICAgICAgICAkc2NvcGUuZXJyb3JNZXNzYWdlID0gbnVsbDtcbiAgICAgICAgJHNjb3BlLmxvYWRpbmcgPSB0cnVlO1xuICAgICAgICAkc2NvcGUuJHN0YXRlID0gJHN0YXRlO1xuXG4gICAgICAgIFVzZXJTZXJ2aWNlLmluaXRVc2VyKClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRVc2VyID0gcmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmdvVG8oJ2Rhc2hib2FyZC5wcm9maWxlJywgJ1Byb2ZpbGUnKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuY3VycmVudFVzZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmdvVG8oJ2Rhc2hib2FyZC53ZWxjb21lJywgJ1dlbGNvbWUnKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5maW5hbGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICRzY29wZS5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9KVxuXG5cbiAgICAgICAgJHNjb3BlLmdvVG8gPSBmdW5jdGlvbihzdGF0ZSwgY2hhbmdlVGl0bGUpIHtcbiAgICAgICAgICAgIGlmKGNoYW5nZVRpdGxlKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkVmlldyA9IGNoYW5nZVRpdGxlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkc3RhdGUuZ28oc3RhdGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgJHNjb3BlLmxvZ291dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgTW9kYWxTZXJ2aWNlLm9wZW5Nb2RhbCgnbG9nb3V0JylcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBVc2VyU2VydmljZS5sb2dvdXRVc2VyKCk7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jdXJyZW50VXNlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmdvVG8oJ2Rhc2hib2FyZC53ZWxjb21lJywgJ1dlbGNvbWUnKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICAkc2NvcGUuc2hvd0NvbnRhY3RNb2RhbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgTW9kYWxTZXJ2aWNlLm9wZW5Nb2RhbCgnY29udGFjdCcsICdDb250ZW50IEVkaXRvciBSZXF1ZXN0JylcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihtb2RhbERhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Byb21pc2UgdG8gY29udGFjdCEnLCBtb2RhbERhdGEpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCcgbm8gdmFsdWUnKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgJHNjb3BlLnNob3dQbGFjZWhvbGRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgTW9kYWxTZXJ2aWNlLm9wZW5Nb2RhbCgncGxhY2Vob2xkZXInKVxuICAgICAgICB9XG5cbiAgICAgICAgJHNjb3BlLnNob3dMb2dpbk1vZGFsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkc2NvcGUubG9hZGluZyA9IHRydWU7XG4gICAgICAgICAgICBNb2RhbFNlcnZpY2Uub3Blbk1vZGFsKCdsb2dpbicpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24odXNlcikge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY3VycmVudFVzZXIgPSB1c2VyO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZ29UbygnZGFzaGJvYXJkLnByb2ZpbGUnLCAnUHJvZmlsZScpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCcgbm8gdmFsdWUnKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5maW5hbGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICAkc2NvcGUucmVzZXRMb2dpbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJHNjb3BlLmVycm9yTWVzc2FnZSA9IG51bGw7XG4gICAgICAgICAgICAkc2NvcGUubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgJHNjb3BlLmxvZ2luRm9ybS5lbWFpbCA9IG51bGw7XG4gICAgICAgICAgICAkc2NvcGUubG9naW5Gb3JtLnBhc3N3b3JkID0gbnVsbDtcbiAgICAgICAgfVxuXG5cblxuICAgIH0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgncGFydGlhbHMvc2l0ZS1tb2RhbC5odG1sJyxcbiAgICAnPGRpdiBjbGFzcz1cIm1vZGFsIGZhZGUgZGFzaGJvYXJkLW1vZGFsXCIgaWQ9XCJzaXRlTW9kYWxcIiB0YWJpbmRleD1cIi0xXCIgcm9sZT1cImRpYWxvZ1wiPjxkaXYgY2xhc3M9XCJtb2RhbC1kaWFsb2dcIiByb2xlPVwiZG9jdW1lbnRcIj48ZGl2IGNsYXNzPVwibW9kYWwtY29udGVudFwiPjxkaXYgbmctaW5jbHVkZT1cIm1vZGFsVGVtcGxhdGVcIj48L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj4nKTtcbn1dKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBEYW5ueSBvbiAxMi8yNS8xNi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJylcbiAgICAuY29udHJvbGxlcignRGFzaGJvYXJkQ29udGVudEN0cmwnLCBmdW5jdGlvbigkc2NvcGUsICR0aW1lb3V0LCBDb250ZW50U2VydmljZSwgJHN0YXRlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdzY29wZTogJywgJHNjb3BlKTtcblxuICAgICAgICAkc2NvcGUuc2VsZWN0ZWRWaWV3ID0gJ21lbnUnO1xuICAgICAgICAkc2NvcGUubG9hZGluZyA9IGZhbHNlO1xuXG4gICAgICAgICRzY29wZS5jdXJyZW50VXNlciA9IHVuZGVmaW5lZDtcblxuICAgICAgICB2YXIgY29udGVudEZpZWxkcyA9IFtcbiAgICAgICAgICAgICdhdXRob3InLFxuICAgICAgICAgICAgJ3RpdGxlJyxcbiAgICAgICAgICAgICdjb250ZW50VHlwZScsXG4gICAgICAgICAgICAnc3ViVGl0bGUnLFxuICAgICAgICAgICAgJ3VybCcsXG4gICAgICAgICAgICAnaGVhZGVySW1hZ2UnLFxuICAgICAgICAgICAgJ3RhZ3MnLFxuICAgICAgICAgICAgJ3B1Ymxpc2hlZERhdGUnLFxuICAgICAgICAgICAgJ2Rlc2NyaXB0aW9uJyxcbiAgICAgICAgICAgICdjb250ZW50U2VjdGlvbnMnLFxuICAgICAgICAgICAgJ3F1b3RlcycsXG4gICAgICAgICAgICAnYXVkaW9VcmxzJyxcbiAgICAgICAgICAgICdzb2NpYWxNZWRpYScsXG4gICAgICAgICAgICAnc2hhcmVVcmwnLFxuICAgICAgICAgICAgJ21haW5Db250ZW50J1xuICAgICAgICBdXG5cbiAgICAgICAgQ29udGVudFNlcnZpY2UuZ2V0Q29udGVudCgpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihjb250ZW50KSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNpdGVDb250ZW50ID0gY29udGVudDtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnY29udGVudDogJywgY29udGVudCk7XG4gICAgICAgICAgICAgICAgZHViQ29udGVudChjb250ZW50KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2VycjogJywgZXJyKTtcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgdmFyIGNvbnRlbnRUeXBlcyA9IFtcbiAgICAgICAgICAgICdzb3VuZCcsXG4gICAgICAgICAgICAnZmFzaGlvbicsXG4gICAgICAgICAgICAnY29tbWVudGFyeScsXG4gICAgICAgICAgICAnZmlsbScsXG4gICAgICAgICAgICAnY3VsdHVyZSdcbiAgICAgICAgXVxuXG4gICAgICAgIHZhciBoZWFkZXJJbWFnZXMgPSBbXG5cbiAgICAgICAgXVxuXG4gICAgICAgIGZ1bmN0aW9uIGR1YkNvbnRlbnQoY29udGVudCkge1xuICAgICAgICAgICAgZm9yKHZhciBpPTA7aTwxMDtpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgbmV3Q29udGVudCA9IHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGUgOiAnQ29udGVudF8nICsgaSxcbiAgICAgICAgICAgICAgICAgICAgYXV0aG9yIDogJ0Rhbm55IEZyYW5ja2VuJyxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGUgOiBjb250ZW50VHlwZXNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY29udGVudFR5cGVzLmxlbmd0aCldLFxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiA6ICdJdCBpcyBhIGxvbmcgZXN0YWJsaXNoZWQgZmFjdCB0aGF0IGEgcmVhZGVyIHdpbGwgYmUgZGlzdHJhY3RlZCBieSB0aGUgcmVhZGFibGUgY29udGVudCBvZiBhIHBhZ2Ugd2hlbiBsb29raW5nIGF0IGl0cyBsYXlvdXQuIFRoZSBwb2ludCBvZiB1c2luZyBMb3JlbSBJcHN1bSBpcyB0aGF0IGl0IGhhcyBhIG1vcmUtb3ItbGVzcyBub3JtYWwgZGlzdHJpYnV0aW9uIG9mIGxldHRlcnMsIGFzIG9wcG9zZWQgdG8gdXNpbmcgJyxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVySW1hZ2UgOiAnaW1hZ2VzL2FydGljbGVzLWhlYWRlci5wbmcnXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNpdGVDb250ZW50LnB1c2gobmV3Q29udGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8kdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gICAgJHNjb3BlLnNlbGVjdGVkVmlldyA9ICdlZGl0JztcbiAgICAgICAgLy99LCAyMDAwKVxuXG4gICAgICAgICRzY29wZS5jaGFuZ2VWaWV3ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZigkc2NvcGUuc2VsZWN0ZWRWaWV3ID09ICdlZGl0JykgJHNjb3BlLnNlbGVjdGVkVmlldyA9ICdtZW51JztcbiAgICAgICAgICAgIGVsc2UgJHNjb3BlLnNlbGVjdGVkVmlldyA9ICdlZGl0JztcbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5nb1RvID0gZnVuY3Rpb24oc3RhdGUpIHtcbiAgICAgICAgICAgICRzdGF0ZS5nbyhzdGF0ZSk7XG4gICAgICAgIH1cblxuICAgICAgICAkc2NvcGUuc2VsZWN0ZWRDb250ZW50ID0ge307XG5cbiAgICAgICAgJHNjb3BlLm5ld0NvbnRlbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZFZpZXcgPSAnY3JlYXRlJztcbiAgICAgICAgICAgIGluaXROZXdDb250ZW50KClcbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5lZGl0Q29udGVudCA9IGZ1bmN0aW9uKGNvbnRlbnQpIHtcbiAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZENvbnRlbnQgPSBjb250ZW50O1xuICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkVmlldyA9ICdlZGl0JztcbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZFZpZXcgPSAnbWVudSc7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBpbml0TmV3Q29udGVudCgpIHtcbiAgICAgICAgICAgIGNvbnRlbnRGaWVsZHMubWFwKGZ1bmN0aW9uKGZpZWxkKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkQ29udGVudFtmaWVsZF0gPSBudWxsO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBuZXdJdGVtcyA9IHtcbiAgICAgICAgICAgICd0YWcnIDogJycsXG4gICAgICAgICAgICAncXVvdGUnIDogJycsXG4gICAgICAgICAgICAnYXVkaW8nIDogJycsXG4gICAgICAgICAgICAnc2VjdGlvbicgOiBudWxsXG5cbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5hZGRJdGVtID0gZnVuY3Rpb24oaXRlbVR5cGUsIGtleSkge1xuICAgICAgICAgICAgdmFyIG5ld0l0ZW0gPSBuZXdJdGVtc1tpdGVtVHlwZV07XG4gICAgICAgICAgICBpZighJHNjb3BlLnNlbGVjdGVkQ29udGVudFtrZXldKXtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRDb250ZW50W2tleV0gPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZENvbnRlbnRba2V5XS5wdXNoKG5ld0l0ZW0pO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ25ldyBpdGVtOiAnLCBuZXdJdGVtKTtcbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5yZW1vdmVJdGVtID0gZnVuY3Rpb24oa2V5LCBpbmRleCkge1xuICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkQ29udGVudFtrZXldLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH1cblxuICAgICAgICAkc2NvcGUuc2hvd0NvbmZpcm0gPSBmYWxzZTtcblxuICAgICAgICAkc2NvcGUuY29uZmlybSA9IGZ1bmN0aW9uKGNvbmZpcm0pIHtcbiAgICAgICAgICAgICRzY29wZS5zaG93Q29uZmlybSA9IGNvbmZpcm07XG4gICAgICAgIH1cblxuICAgICAgICAkc2NvcGUuY29uZmlybURlbGV0ZSA9IGZ1bmN0aW9uKGNvbnRlbnQsIGluZGV4KSB7XG5cbiAgICAgICAgICAgIGlmKCEkc2NvcGUubG9hZGluZykge1xuICAgICAgICAgICAgICAgICRzY29wZS5sb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBDb250ZW50U2VydmljZS5kZWxldGVDb250ZW50KGNvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlcyl7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRWaWV3ID0gJ21lbnUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNpdGVDb250ZW50LnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5maW5hbGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG5cbiAgICAgICAgJHNjb3BlLnNhdmUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzZWxlY3RlZDogJywgJHNjb3BlLnNlbGVjdGVkQ29udGVudCk7XG4gICAgICAgICAgICAvL2lmKCEkc2NvcGUubG9hZGluZykge1xuICAgICAgICAgICAgLy8gICAgJHNjb3BlLmxvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgLy8gICAgY29uc29sZS5sb2coJ3NlbGVjdGVkJywgJHNjb3BlLnNlbGVjdGVkQ29udGVudCk7XG4gICAgICAgICAgICAvLyAgICAkc2NvcGUubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgLy8gICAgaWYoISRzY29wZS5zZWxlY3RlZENvbnRlbnQuX2lkKSB7XG4gICAgICAgICAgICAvLyAgICAgICAgQ29udGVudFNlcnZpY2UubmV3Q29udGVudCgkc2NvcGUuc2VsZWN0ZWRDb250ZW50KVxuICAgICAgICAgICAgLy8gICAgICAgICAgICAudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZXM6ICcsIHJlcyk7XG4gICAgICAgICAgICAvLyAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAvLyAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnI6ICcsIGVycik7XG4gICAgICAgICAgICAvLyAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAvLyAgICAgICAgICAgIC5maW5hbGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgJHNjb3BlLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZFZpZXcgPSAnbWVudSc7XG4gICAgICAgICAgICAvLyAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAvLyAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gICAgICAgIENvbnRlbnRTZXJ2aWNlLnVwZGF0ZUNvbnRlbnQoJHNjb3BlLnNlbGVjdGVkQ29udGVudClcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVzOiAnLCByZXMpO1xuICAgICAgICAgICAgLy8gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLy8gICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyOiAnLCBlcnIpO1xuICAgICAgICAgICAgLy8gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLy8gICAgICAgICAgICAuZmluYWxseShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICRzY29wZS5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRWaWV3ID0gJ21lbnUnO1xuICAgICAgICAgICAgLy8gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLy8gICAgfVxuICAgICAgICAgICAgLy99XG5cbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5mb3JtYXRVcmwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmKCRzY29wZS5zZWxlY3RlZENvbnRlbnQudGl0bGUpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRDb250ZW50LnVybCA9ICRzY29wZS5zZWxlY3RlZENvbnRlbnQudGl0bGUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMvZywgXCJfXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSlcbiIsImFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdwYXJ0aWFscy9zaXRlLWZvb3Rlci5odG1sJyxcbiAgICAnPGZvb3RlciBjbGFzcz1cImZvb3RlclwiIG5nLWlmPVwiIXN0YXRlLmluY2x1ZGVzKFxcJ2Rhc2hib2FyZFxcJylcIj48ZGl2IGNsYXNzPVwiZm9vdGVyLWNvbnRhaW5lclwiPjxuYXYgY2xhc3M9XCJmb290ZXItbGlua3NcIj48ZGl2IGNsYXNzPVwibGlua3MtY29udGFpbmVyXCI+PGgxIGNsYXNzPVwic2l0ZS1saXN0LXRpdGxlXCI+U2l0ZTwvaDE+PHVsPjxsaT48YSB1aS1zcmVmPVwiaG9tZVwiIGNsYXNzPVwic2l0ZS1saXN0LWl0ZW1cIj5Ib21lPC9hPjwvbGk+PGxpPjxhIHVpLXNyZWY9XCJzb3VuZFwiIGNsYXNzPVwic2l0ZS1saXN0LWl0ZW1cIj5Tb3VuZDwvYT48L2xpPjxsaT48YSB1aS1zcmVmPVwiZmlsbVwiIGNsYXNzPVwic2l0ZS1saXN0LWl0ZW1cIj5GaWxtPC9hPjwvbGk+PGxpPjxhIHVpLXNyZWY9XCJmYXNoaW9uXCIgY2xhc3M9XCJzaXRlLWxpc3QtaXRlbVwiPkZhc2hpb248L2E+PC9saT48bGk+PGEgdWktc3JlZj1cImN1bHR1cmVcIiBjbGFzcz1cInNpdGUtbGlzdC1pdGVtXCI+Q3VsdHVyZTwvYT48L2xpPjwvdWw+PC9kaXY+PGRpdiBjbGFzcz1cImxpbmtzLWNvbnRhaW5lclwiPjxoMSBjbGFzcz1cInNpdGUtbGlzdC10aXRsZVwiPkFib3V0PC9oMT48dWw+PGxpIHVpLXNyZWY9XCJhYm91dFwiIGNsYXNzPVwic2l0ZS1saXN0LWl0ZW1cIj48YT5BYm91dDwvYT48L2xpPjxsaT48YSBocmVmPVwibWFpbHRvOkRhbm55QEZyZXF1ZW5jeUN1bHR1cmUuY29tLCBCZW5ARnJlcXVlbmN5Q3VsdHVyZVwiIGNsYXNzPVwic2l0ZS1saXN0LWl0ZW1cIj5Db250YWN0PC9hPjwvbGk+PGxpPjxhIGhyZWY9XCJtYWlsdG86RGFubnlARnJlcXVlbmN5Q3VsdHVyZS5jb20sIEJlbkBGcmVxdWVuY3lDdWx0dXJlXCIgY2xhc3M9XCJzaXRlLWxpc3QtaXRlbVwiPlN1Ym1pc3Npb25zPC9hPjwvbGk+PGxpPjxhIGhyZWY9XCJtYWlsdG86RGFubnlARnJlcXVlbmN5Q3VsdHVyZS5jb20sIEJlbkBGcmVxdWVuY3lDdWx0dXJlXCIgY2xhc3M9XCJzaXRlLWxpc3QtaXRlbVwiPkFkdmVydGlzZTwvYT48L2xpPjwvdWw+PC9kaXY+PGRpdiBjbGFzcz1cInNvY2lhbC1mb290ZXJcIj48dWw+PGxpPjxpIGNsYXNzPVwiZmEgZmEtZmFjZWJvb2tcIj48L2k+PC9saT48bGk+PGkgY2xhc3M9XCJmYSBmYS10d2l0dGVyXCI+PC9pPjwvbGk+PGxpPjxpIGNsYXNzPVwiZmEgZmEtc291bmRjbG91ZFwiPjwvaT48L2xpPjwvdWw+PC9kaXY+PC9uYXY+PGRpdiBjbGFzcz1cImJvdHRvbS1mb290ZXJcIj48aDIgY2xhc3M9XCJsYWJlbFwiPiZjb3B5OyAyMDE2IEZyZXF1ZW5jeSBDdWx0dXJlPC9oMj48L2Rpdj48L2Rpdj48L2Zvb3Rlcj4nKTtcbn1dKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBEYW5ueSBvbiAxMi8xOC8xNi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJylcbiAgICAuY29udHJvbGxlcignQWRtaW5DdHJsJywgZnVuY3Rpb24oJHNjb3BlLCAkdGltZW91dCwgVXNlclNlcnZpY2UsIEFkbWluU2VydmljZSwgTW9kYWxTZXJ2aWNlKSB7XG5cbiAgICAgICAgJHNjb3BlLnNpZGVNZW1iZXJDYXJkID0gbnVsbDtcbiAgICAgICAgJHNjb3BlLnNhdmluZyA9IGZhbHNlO1xuICAgICAgICAkc2NvcGUuYWRtaW5FcnJvck1lc3NhZ2UgPSBudWxsO1xuXG4gICAgICAgIEFkbWluU2VydmljZS5hbGxVc2VycygpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbih1c2Vycykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd1c2VyczogJywgdXNlcnMpO1xuICAgICAgICAgICAgICAgICRzY29wZS50ZWFtTWVtYmVycyA9IHVzZXJzO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyOiAnLCBlcnIpO1xuICAgICAgICAgICAgfSlcblxuICAgICAgICAkc2NvcGUuc2hvd01lbWJlckNhcmQgPSBmdW5jdGlvbih0eXBlKSB7XG4gICAgICAgICAgICAkc2NvcGUuc2lkZU1lbWJlckNhcmQgPSB0eXBlO1xuICAgICAgICAgICAgaWYoIXR5cGUpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuY2xlYXJNZW1iZXJGb3JtKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAkc2NvcGUuc2F2ZSA9IGZ1bmN0aW9uKG1lbWJlckluZm8pIHtcbiAgICAgICAgICAgIGlmKCEkc2NvcGUuc2F2aW5nKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmFkbWluRXJyb3JNZXNzYWdlID0gbnVsbDtcbiAgICAgICAgICAgICAgICBpZighbWVtYmVySW5mby5maXJzdE5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFkbWluRXJyb3JNZXNzYWdlID0gJ1BsZWFzZSBpbmNsdWRlIGEgZmlyc3QgbmFtZS4nXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmKCFtZW1iZXJJbmZvLmxhc3ROYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hZG1pbkVycm9yTWVzc2FnZSA9ICdQbGVhc2UgaW5jbHVkZSBhIGxhc3QgbmFtZSAob3IgaW5pdGlhbCkuJztcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYoIW1lbWJlckluZm8uZW1haWwpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFkbWluRXJyb3JNZXNzYWdlID0gJ1BsZWFzZSBpbmNsdWRlIGFuIGVtYWlsLic7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmKCFtZW1iZXJJbmZvLnJvbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFkbWluRXJyb3JNZXNzYWdlID0gJ1BsZWFzZSBzZWxlY3QgYSByb2xlLic7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNhdmluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGlmKG1lbWJlckluZm8uX2lkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndXBkYXRlIScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgVXNlclNlcnZpY2UudXBkYXRlVXNlcihtZW1iZXJJbmZvKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVzJywgcmVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNob3dNZW1iZXJDYXJkKG51bGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVVc2VySW5BcnJheShyZXMuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnI6ICcsIGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmluYWxseShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNhdmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBBZG1pblNlcnZpY2UubmV3VXNlcihjcmVhdGVVc2VyT2JqKG1lbWJlckluZm8pKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVzJywgcmVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRlYW1NZW1iZXJzLnB1c2gocmVzLmRhdGEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zaWRlTWVtYmVyQ2FyZCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jbGVhck1lbWJlckZvcm0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2VycjogJywgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maW5hbGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2F2aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuZGVsZXRlID0gZnVuY3Rpb24obWVtYmVyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZGVsZXRlOiAnLCBtZW1iZXIpO1xuICAgICAgICAgICAgTW9kYWxTZXJ2aWNlLm9wZW5Nb2RhbCgnY29uZmlybScsICdEZWxldGUgJyArIG1lbWJlci5maXJzdE5hbWUgKyAnPycpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24obW9kYWxEYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkZWxldGU6ICcsIG1lbWJlcik7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zYXZpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBBZG1pblNlcnZpY2UuZGVsZXRlVXNlcihtZW1iZXIuX2lkKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNob3dNZW1iZXJDYXJkKG51bGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZVVzZXJGcm9tQXJyYXkobWVtYmVyLl9pZClcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2VycjogJywgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmluYWxseShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2F2aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnIG5vIHZhbHVlJyk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5lZGl0TWVtYmVyID0gZnVuY3Rpb24obWVtYmVyKSB7XG4gICAgICAgICAgICAkc2NvcGUubWVtYmVyRm9ybSA9IGFuZ3VsYXIuY29weShtZW1iZXIpO1xuICAgICAgICAgICAgJHNjb3BlLnNhdmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgJHNjb3BlLnNpZGVNZW1iZXJDYXJkID0gJ2VkaXQnO1xuICAgICAgICB9XG5cblxuICAgICAgICAkc2NvcGUuY2xlYXJNZW1iZXJGb3JtID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkc2NvcGUuYWRtaW5FcnJvck1lc3NhZ2UgPSBudWxsO1xuICAgICAgICAgICAgJHNjb3BlLnNhdmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgJHNjb3BlLm1lbWJlckZvcm0uZmlyc3ROYW1lID0gbnVsbDtcbiAgICAgICAgICAgICRzY29wZS5tZW1iZXJGb3JtLmxhc3ROYW1lID0gbnVsbDtcbiAgICAgICAgICAgICRzY29wZS5tZW1iZXJGb3JtLmVtYWlsID0gbnVsbDtcbiAgICAgICAgICAgICRzY29wZS5tZW1iZXJGb3JtLnJvbGUgPSBudWxsO1xuICAgICAgICB9O1xuXG5cbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlVXNlck9iaihtZW1iZXJJbmZvKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGZpcnN0TmFtZSA6IG1lbWJlckluZm8uZmlyc3ROYW1lLFxuICAgICAgICAgICAgICAgIGxhc3ROYW1lIDogbWVtYmVySW5mby5sYXN0TmFtZSxcbiAgICAgICAgICAgICAgICBlbWFpbCA6IG1lbWJlckluZm8uZW1haWwsXG4gICAgICAgICAgICAgICAgcm9sZSA6IG1lbWJlckluZm8ucm9sZVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlVXNlckluQXJyYXkodXBkYXRlZFVzZXIpIHtcbiAgICAgICAgICAgIHZhciB1c2Vyc0xlbiA9ICRzY29wZS50ZWFtTWVtYmVycy5sZW5ndGg7XG4gICAgICAgICAgICBmb3IodmFyIGk9MDtpPHVzZXJzTGVuO2krKykge1xuICAgICAgICAgICAgICAgIGlmKHVwZGF0ZWRVc2VyLl9pZCA9PSAkc2NvcGUudGVhbU1lbWJlcnNbaV0uX2lkKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS50ZWFtTWVtYmVyc1tpXSA9IHVwZGF0ZWRVc2VyO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiByZW1vdmVVc2VyRnJvbUFycmF5KHVzZXJJZCkge1xuICAgICAgICAgICAgdmFyIHVzZXJzTGVuID0gJHNjb3BlLnRlYW1NZW1iZXJzLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciBpZHg7XG4gICAgICAgICAgICBmb3IodmFyIGk9MDtpPHVzZXJzTGVuO2krKykge1xuICAgICAgICAgICAgICAgIGlmKHVzZXJJZCA9PSAkc2NvcGUudGVhbU1lbWJlcnNbaV0uX2lkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlkeCA9IGk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKGlkeCA8IHVzZXJzTGVuKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnRlYW1NZW1iZXJzLnNwbGljZShpZHgsMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgIH0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgncGFydGlhbHMvc2l0ZS1hdWRpby5odG1sJyxcbiAgICAnPGRpdiBjbGFzcz1cInNpdGUtYXVkaW9cIiBuZy1pZj1cIiFzdGF0ZS5pbmNsdWRlcyhcXCdkYXNoYm9hcmRcXCcpXCI+PGRpdiBjbGFzcz1cIm5hdmJhciBuYXZiYXItZGVmYXVsdCBuYXZiYXItZml4ZWQtYm90dG9tXCIgcm9sZT1cIm5hdmlnYXRpb25cIj48ZGl2IGNsYXNzPVwiY29udGFpbmVyLWZsdWlkXCIgcGxhbmd1bGFyPVwie3t0cmFja1VybH19XCIgbmctaWY9XCJ0cmFja1VybFwiPjxkaXYgY2xhc3M9XCJuYXZiYXItaGVhZGVyXCI+PGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJuYXZiYXItdG9nZ2xlIGNvbGxhcHNlZCBidXR0b24tZGVmYXVsdFwiIGRhdGEtdG9nZ2xlPVwiY29sbGFwc2VcIiBkYXRhLXRhcmdldD1cIiNhdWRpby1wbGF5ZXJcIj48aSBjbGFzcz1cImZhIGZhLW11c2ljXCI+PC9pPjwvYnV0dG9uPjwvZGl2PjxkaXYgY2xhc3M9XCJmdWxsLWNvbnRyb2xzIGNvbnRhaW5lciBoaWRkZW4teHNcIj48dWwgY2xhc3M9XCJhdWRpby1jb250cm9sc1wiPjxsaT48aSBjbGFzcz1cImZhIGZhLWJhY2t3YXJkXCI+PC9pPjwvbGk+PGxpIG5nLWNsaWNrPVwicGxheVBhdXNlKClcIj48aSBjbGFzcz1cImZhIGZhLXBsYXlcIiBuZy1pZj1cInBsYXllci5wbGF5aW5nICE9PSB0cmFjay5zcmNcIj48L2k+IDxpIGNsYXNzPVwiZmEgZmEtcGF1c2VcIiBuZy1pZj1cInBsYXllci5wbGF5aW5nID09IHRyYWNrLnNyY1wiPjwvaT48L2xpPjxsaT48aSBjbGFzcz1cImZhIGZhLWZvcndhcmRcIj48L2k+PC9saT48L3VsPjxpbWcgbmctc3JjPVwie3t0cmFjay5hcnR3b3JrX3VybH19XCIgY2xhc3M9XCJpbWFnZS1zaGFkb3cgYXVkaW8taW1hZ2VcIiBpbWFnZS1zaGFkb3c+PHVsIGNsYXNzPVwiYXVkaW8taW5mby1mdWxsXCI+PGxpPjxoMSBjbGFzcz1cImxhYmVsXCI+QXJ0aXN0IDogPHNwYW4+e3t0cmFjay51c2VyLnVzZXJuYW1lfX08L3NwYW4+PC9oMT48L2xpPjxsaT48aDEgY2xhc3M9XCJsYWJlbFwiPlRyYWNrIDogPHNwYW4+e3t0cmFjay50aXRsZX19PC9zcGFuPjwvaDE+PC9saT48L3VsPjwvZGl2PjxkaXYgY2xhc3M9XCJoaWRkZW4tc20gaGlkZGVuLW1kIGhpZGRlbi1sZyBtaW5pLWNvbnRyb2xzIGNvbnRhaW5lci1mbHVpZFwiPjx1bCBjbGFzcz1cImF1ZGlvLWNvbnRyb2xzXCI+PGxpPjxpIGNsYXNzPVwiZmEgZmEtYmFja3dhcmRcIj48L2k+PC9saT48bGkgbmctY2xpY2s9XCJwbGF5UGF1c2UoKVwiPjxpIGNsYXNzPVwiZmEgZmEtcGxheVwiIG5nLWlmPVwicGxheWVyLnBsYXlpbmcgIT09IHRyYWNrLnNyY1wiPjwvaT4gPGkgY2xhc3M9XCJmYSBmYS1wYXVzZVwiIG5nLWlmPVwicGxheWVyLnBsYXlpbmcgPT0gdHJhY2suc3JjXCI+PC9pPjwvbGk+PGxpPjxpIGNsYXNzPVwiZmEgZmEtZm9yd2FyZFwiPjwvaT48L2xpPjwvdWw+PC9kaXY+PGRpdiBjbGFzcz1cImNvbGxhcHNlIG5hdmJhci1jb2xsYXBzZVwiIGlkPVwiYXVkaW8tcGxheWVyXCI+PHVsIGNsYXNzPVwibmF2IG5hdmJhci1uYXYgY29udGFpbmVyIGhpZGRlbi1tZCBoaWRkZW4tbGcgaGlkZGVuLXNtIG1pbmktYXVkaW9cIj48ZGl2IGNsYXNzPVwiYXVkaW8taW5mb1wiPjxpbWcgbmctc3JjPVwie3t0cmFjay5hcnR3b3JrX3VybH19XCIgY2xhc3M9XCJpbWFnZS1zaGFkb3cgYXVkaW8taW1hZ2VcIiBpbWFnZS1zaGFkb3c+PHVsPjxsaT48aDEgY2xhc3M9XCJsYWJlbFwiPkFydGlzdCA6IDxzcGFuPnt7dHJhY2sudXNlci51c2VybmFtZX19PC9zcGFuPjwvaDE+PC9saT48bGk+PGgxIGNsYXNzPVwibGFiZWxcIj5UaXRsZSA6IDxzcGFuPnt7dHJhY2sudGl0bGV9fTwvc3Bhbj48L2gxPjwvbGk+PC91bD48L2Rpdj48L3VsPjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PicpO1xufV0pO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IERhbm55IG9uIDEyLzI0LzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKVxuICAgIC5zZXJ2aWNlKCdVc2VyU2VydmljZScsIGZ1bmN0aW9uKCRodHRwLCBsb2NhbFN0b3JhZ2VTZXJ2aWNlLCAkcSkge1xuXG4gICAgICAgIHZhciBfdXNlcjtcbiAgICAgICAgdmFyIHVwZGF0ZVVzZXIgPSBmdW5jdGlvbih1cGRhdGVzKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgICAgICAgICAgIG1ldGhvZCA6ICdQVVQnLFxuICAgICAgICAgICAgICAgIHVybCA6ICdhcGkvdXNlci91cGRhdGVVc2VyLycgKyB1cGRhdGVzLl9pZCxcbiAgICAgICAgICAgICAgICBkYXRhIDogdXBkYXRlc1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBpbml0VXNlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICAgICAgIHZhciB0b2tlbiA9IGxvY2FsU3RvcmFnZVNlcnZpY2UuZ2V0KCdqd3RUb2tlbicpO1xuICAgICAgICAgICAgaWYoIXRva2VuKSB7XG4gICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KCdObyB0b2tlbiEnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbG9naW5WaWFUb2tlbih0b2tlbiwgZGVmZXJyZWQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGxvZ2luVmlhVG9rZW4odG9rZW4sIGRlZmVycmVkKSB7XG4gICAgICAgICAgICB2YXIgcG9zdERhdGEgPSB7XG4gICAgICAgICAgICAgICAgand0VG9rZW4gOiB0b2tlblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJGh0dHAoe1xuICAgICAgICAgICAgICAgIG1ldGhvZCA6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICB1cmwgOiAnYXBpL3VzZXIvbG9naW5WaWFUb2tlbicsXG4gICAgICAgICAgICAgICAgZGF0YSA6IHBvc3REYXRhXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgX3VzZXIgPSBkYXRhLmRhdGEudXNlcjtcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlU2VydmljZS5zZXQoJ2p3dFRva2VuJywgZGF0YS5kYXRhLnRva2VuKTtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShfdXNlcilcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlU2VydmljZS5yZW1vdmUoJ2p3dFRva2VuJyk7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdCgnRXhwaXJlZCB0b2tlbi4nKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGxvZ291dFVzZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIF91c2VyID0gbnVsbDtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZVNlcnZpY2UucmVtb3ZlKCdqd3RUb2tlbicpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGxvZ2luVXNlciA9IGZ1bmN0aW9uKGxvZ2luSW5mbykge1xuICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICAgICAgICRodHRwKHtcbiAgICAgICAgICAgICAgICBtZXRob2QgOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgdXJsIDogJ2FwaS91c2VyL2xvZ2luVXNlcicsXG4gICAgICAgICAgICAgICAgZGF0YSA6IGxvZ2luSW5mb1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkYXRhOiAnLCBkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgX3VzZXIgPSBkYXRhLmRhdGEudXNlcjtcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlU2VydmljZS5zZXQoJ2p3dFRva2VuJywgZGF0YS5kYXRhLnRva2VuKTtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShfdXNlcilcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2VycicsIGVycik7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHVwZGF0ZVVzZXIgOiB1cGRhdGVVc2VyLFxuICAgICAgICAgICAgbG9naW5Vc2VyIDogbG9naW5Vc2VyLFxuICAgICAgICAgICAgbG9nb3V0VXNlciA6IGxvZ291dFVzZXIsXG4gICAgICAgICAgICBpbml0VXNlciA6IGluaXRVc2VyXG4gICAgICAgIH1cbiAgICB9KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3BhcnRpYWxzL3NpZGVtZW51Lmh0bWwnLFxuICAgICc8bmF2IGNsYXNzPVwibW9iaWxlLW1lbnVcIiBuZy1jbGFzcz1cIntcXCdzaG93LW1lbnVcXCcgOiBzaG93TWVudX1cIj48ZGl2IGNsYXNzPVwibmF2LWNvbnRhaW5lclwiPjx1bD48aDEgY2xhc3M9XCJzaXRlLWxpc3QtdGl0bGVcIj5TaXRlPC9oMT48bGk+PGEgdWktc3JlZj1cInNvdW5kXCIgY2xhc3M9XCJzaXRlLWxpc3QtaXRlbVwiPlNvdW5kPC9hPjwvbGk+PGxpPjxhIHVpLXNyZWY9XCJmaWxtXCIgY2xhc3M9XCJzaXRlLWxpc3QtaXRlbVwiPkZpbG08L2E+PC9saT48bGk+PGEgdWktc3JlZj1cImZhc2hpb25cIiBjbGFzcz1cInNpdGUtbGlzdC1pdGVtXCI+RmFzaGlvbjwvYT48L2xpPjxsaT48YSB1aS1zcmVmPVwiY3VsdHVyZVwiIGNsYXNzPVwic2l0ZS1saXN0LWl0ZW1cIj5DdWx0dXJlPC9hPjwvbGk+PC91bD48dWw+PGgxIGNsYXNzPVwic2l0ZS1saXN0LXRpdGxlXCI+QWJvdXQ8L2gxPjxsaT48YSBocmVmPVwiXCIgY2xhc3M9XCJzaXRlLWxpc3QtaXRlbVwiPkFib3V0PC9hPjwvbGk+PGxpPjxhIGhyZWY9XCJtYWlsdG86RGFubnlARnJlcXVlbmN5Q3VsdHVyZS5jb20sIEJlbkBGcmVxdWVuY3lDdWx0dXJlXCIgY2xhc3M9XCJzaXRlLWxpc3QtaXRlbVwiPkNvbnRhY3Q8L2E+PC9saT48bGk+PGEgaHJlZj1cIm1haWx0bzpEYW5ueUBGcmVxdWVuY3lDdWx0dXJlLmNvbSwgQmVuQEZyZXF1ZW5jeUN1bHR1cmVcIiBjbGFzcz1cInNpdGUtbGlzdC1pdGVtXCI+U3VibWlzc2lvbnM8L2E+PC9saT48bGk+PGEgaHJlZj1cIm1haWx0bzpEYW5ueUBGcmVxdWVuY3lDdWx0dXJlLmNvbSwgQmVuQEZyZXF1ZW5jeUN1bHR1cmVcIiBjbGFzcz1cInNpdGUtbGlzdC1pdGVtXCI+QWR2ZXJ0aXNlPC9hPjwvbGk+PC91bD48L2Rpdj48ZGl2IGNsYXNzPVwic29jaWFsLWNvbnRhaW5lclwiPjx1bD48bGk+PGkgY2xhc3M9XCJmYSBmYS1mYWNlYm9va1wiPjwvaT48L2xpPjxsaT48aSBjbGFzcz1cImZhIGZhLXR3aXR0ZXJcIj48L2k+PC9saT48bGk+PGkgY2xhc3M9XCJmYSBmYS1zb3VuZGNsb3VkXCI+PC9pPjwvbGk+PC91bD48L2Rpdj48L25hdj4nKTtcbn1dKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBEYW5ueSBvbiAxLzI5LzE3LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKVxuICAgIC5zZXJ2aWNlKCdTaWdudXBTZXJ2aWNlJywgZnVuY3Rpb24oJGh0dHApIHtcbiAgICAgICAgdmFyIG5ld1NpZ251cCA9IGZ1bmN0aW9uKHNpZ251cERhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cCh7XG4gICAgICAgICAgICAgICAgbWV0aG9kIDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIHVybCA6ICdhcGkvc2lnbnVwL25ld1NpZ251cCcsXG4gICAgICAgICAgICAgICAgZGF0YSA6IHNpZ251cERhdGFcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmV3U2lnbnVwIDogbmV3U2lnbnVwXG4gICAgICAgIH1cbiAgICB9KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3BhcnRpYWxzL3NlY3Rpb24taGVhZGVyLmh0bWwnLFxuICAgICc8aGVhZGVyIGNsYXNzPVwic2VjdGlvbi1oZWFkZXJcIiBpZD1cInNlY3Rpb25IZWFkZXJcIj48aW1nIHNyYz1cIi4uL2ltYWdlcy9raW5ldGlrX2xvZ29fcHVycGxlLnN2Z1wiIGNsYXNzPVwibG9nb1wiPjx1bCBjbGFzcz1cImhlYWRlci1tZW51XCI+PGxpIG5nLWNsaWNrPVwiZ29UbyhcXCdzb3VuZFxcJylcIiBuZy1jbGFzcz1cIntcXCdhY3RpdmUtbGlua1xcJyA6IGlzQWN0aXZlKFxcJ3NvdW5kXFwnKX1cIj48aDEgY2xhc3M9XCJ0aXRsZVwiPlNvdW5kPC9oMT48L2xpPjxsaSBuZy1jbGljaz1cImdvVG8oXFwnZmlsbVxcJylcIiBuZy1jbGFzcz1cIntcXCdhY3RpdmUtbGlua1xcJyA6IGlzQWN0aXZlKFxcJ2ZpbG1cXCcpfVwiPjxoMSBjbGFzcz1cInRpdGxlXCI+RmlsbTwvaDE+PC9saT48bGkgbmctY2xpY2s9XCJnb1RvKFxcJ2Zhc2hpb25cXCcpXCIgbmctY2xhc3M9XCJ7XFwnYWN0aXZlLWxpbmtcXCcgOiBpc0FjdGl2ZShcXCdmYXNoaW9uXFwnKX1cIj48aDEgY2xhc3M9XCJ0aXRsZVwiPkZhc2hpb248L2gxPjwvbGk+PGxpIG5nLWNsaWNrPVwiZ29UbyhcXCdjdWx0dXJlXFwnKVwiIG5nLWNsYXNzPVwie1xcJ2FjdGl2ZS1saW5rXFwnIDogaXNBY3RpdmUoXFwnY3VsdHVyZVxcJyl9XCI+PGgxIGNsYXNzPVwidGl0bGVcIj5DdWx0dXJlPC9oMT48L2xpPjwvdWw+PC9oZWFkZXI+Jyk7XG59XSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgRGFubnkgb24gMTIvMjQvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpXG4gICAgLnNlcnZpY2UoJ01vZGFsU2VydmljZScsIGZ1bmN0aW9uKCRyb290U2NvcGUsICRxLCAkdGltZW91dCkge1xuXG4gICAgICAgIHZhciBwYXJ0aWFsVXJscyA9IHtcbiAgICAgICAgICAgICdsb2dpbicgOiAncGFydGlhbHMvbW9kYWwtbG9naW4uaHRtbCcsXG4gICAgICAgICAgICAnY29udGFjdCcgOiAncGFydGlhbHMvbW9kYWwtY29udGFjdC5odG1sJyxcbiAgICAgICAgICAgICdjb25maXJtJyA6ICdwYXJ0aWFscy9tb2RhbC1jb25maXJtLmh0bWwnLFxuICAgICAgICAgICAgJ3NpZ251cCcgOiAncGFydGlhbHMvbW9kYWwtc2lnbnVwLmh0bWwnLFxuICAgICAgICAgICAgJ2xvZ291dCcgOiAncGFydGlhbHMvbW9kYWwtbG9nb3V0Lmh0bWwnLFxuICAgICAgICAgICAgJ3BsYWNlaG9sZGVyJyA6ICdwYXJ0aWFscy9tb2RhbC1wbGFjZWhvbGRlci5odG1sJ1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIF9tb2RhbDtcbiAgICAgICAgdmFyIGNsb3NlTW9kYWw7XG5cbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBfbW9kYWwgPSAkKCcjc2l0ZU1vZGFsJyk7XG4gICAgICAgICAgICBfbW9kYWwub24oJ2hpZGUuYnMubW9kYWwnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgY2xvc2VNb2RhbChlKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0sMTAwKVxuXG4gICAgICAgIC8vIEdsb2JhbCBoaWRlIG1vZGFsIGxpc3RlbmVyXG5cblxuICAgICAgICByZXR1cm4ge1xuXG4gICAgICAgICAgICAvLyBSZXR1cm5zIGEgcHJvbWlzZSB3aGljaCBpcyByZXNvbHZlZCB3aGVuIHRoZSBtb2RhbCBjbG9zZXMuXG4gICAgICAgICAgICBvcGVuTW9kYWwgOiBmdW5jdGlvbih0eXBlLCBtb2RhbFRpdGxlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLm1vZGFsVGVtcGxhdGUgPSBwYXJ0aWFsVXJsc1t0eXBlXTtcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLm1vZGFsVGl0bGUgPSBtb2RhbFRpdGxlO1xuICAgICAgICAgICAgICAgICRyb290U2NvcGUubW9kYWxDb25maXJtID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICBfbW9kYWwubW9kYWwoJ2hpZGUnKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ21vZGFsOiAnLCBfbW9kYWwpXG4gICAgICAgICAgICAgICAgX21vZGFsLm1vZGFsKCdzaG93Jyk7XG5cbiAgICAgICAgICAgICAgICBjbG9zZU1vZGFsID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3BhcnRpYWxzL25hdmJhci5odG1sJyxcbiAgICAnPGRpdiBjbGFzcz1cImhlYWRlclwiPjxuYXYgY2xhc3M9XCJuYXZiYXIgbmF2YmFyLWRlZmF1bHQgbmF2YmFyLWludmVyc2UgbmF2YmFyLWZpeGVkLXRvcCBtYWluLW5hdmJhclwiIHJvbGU9XCJuYXZpZ2F0aW9uXCIgbmctY2xhc3M9XCJ7XFwndmlzaWJsZS1uYXZcXCcgOiBzaG93TmF2YmFyfVwiPjxkaXYgY2xhc3M9XCJjb250YWluZXJcIj48ZGl2IGNsYXNzPVwibWVudS1sb2dvIGhpZGRlbi14c1wiIG5nLWNsaWNrPVwiZ29UbyhcXCdob21lXFwnKVwiPjxpbWcgc3JjPVwiLi4vaW1hZ2VzL2tpbmV0aWtfbmFtZS5zdmdcIj48L2Rpdj48dWwgY2xhc3M9XCJmdWxsLW5hdiBoaWRkZW4teHNcIj48bGkgbmctY2xpY2s9XCJnb1RvKFxcJ3NvdW5kXFwnKVwiIG5nLWNsYXNzPVwie1xcJ2FjdGl2ZS1saW5rXFwnIDogaXNBY3RpdmUoXFwnc291bmRcXCcpfVwiIGNsYXNzPVwibmF2YmFyLWxpbmtcIj48aDE+U291bmQ8L2gxPjwvbGk+PGxpIG5nLWNsaWNrPVwiZ29UbyhcXCdmaWxtXFwnKVwiIGNsYXNzPVwibmF2YmFyLWxpbmtcIiBuZy1jbGFzcz1cIntcXCdhY3RpdmUtbGlua1xcJyA6IGlzQWN0aXZlKFxcJ2ZpbG1cXCcpfVwiPjxoMT5GaWxtPC9oMT48L2xpPjxsaSBuZy1jbGljaz1cImdvVG8oXFwnZmFzaGlvblxcJylcIiBjbGFzcz1cIm5hdmJhci1saW5rXCIgbmctY2xhc3M9XCJ7XFwnYWN0aXZlLWxpbmtcXCcgOiBpc0FjdGl2ZShcXCdmYXNoaW9uXFwnKX1cIj48aDE+RmFzaGlvbjwvaDE+PC9saT48bGkgbmctY2xpY2s9XCJnb1RvKFxcJ2N1bHR1cmVcXCcpXCIgY2xhc3M9XCJuYXZiYXItbGlua1wiIG5nLWNsYXNzPVwie1xcJ2FjdGl2ZS1saW5rXFwnIDogaXNBY3RpdmUoXFwnY3VsdHVyZVxcJyl9XCI+PGgxPkN1bHR1cmU8L2gxPjwvbGk+PC91bD48ZGl2IGNsYXNzPVwidmlzaWJsZS14cyBtb2JpbGUtbmF2YmFyXCI+PGltZyBzcmM9XCIuLi9pbWFnZXMva2luZXRpa19uYW1lLnN2Z1wiIG5nLWNsaWNrPVwiZ29UbyhcXCdob21lXFwnKVwiPjxoYW1idXJnZXItbWVudSBzdGF0ZT1cInNob3dNZW51XCIgbmctY2xpY2s9XCJ0b2dnbGVMaW5rcygpXCI+PC9oYW1idXJnZXItbWVudT48L2Rpdj48L2Rpdj48L25hdj48L2Rpdj4nKTtcbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdwYXJ0aWFscy9tb2RhbC1zaWdudXAuaHRtbCcsXG4gICAgJzxkaXY+PGRpdiBjbGFzcz1cIm1vZGFsLWhlYWRlclwiPjxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiY2xvc2VcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiIGFyaWEtbGFiZWw9XCJDbG9zZVwiPjxzcGFuIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPiZ0aW1lczs8L3NwYW4+PC9idXR0b24+PGgxIGNsYXNzPVwidGl0bGVcIj5LaW5ldGlrIE1hZyBFYXJseSBBY2Nlc3M8L2gxPjwvZGl2PjxkaXYgY2xhc3M9XCJtb2RhbC1ib2R5XCI+PGZvcm0gcm9sZT1cImZvcm1cIiBub3ZhbGlkYXRlIG5hbWU9XCJzaWdudXBGb3JtXCI+PGRpdiBjbGFzcz1cInJvd1wiPjxkaXYgY2xhc3M9XCJjb2wteHMtMTAgY29sLXhzLW9mZnNldC0xIGNvbC1zbS02IGNvbC1zbS1vZmZzZXQtMCBmb3JtLWdyb3VwXCI+PGxhYmVsIGZvcj1cInVzZXJFbWFpbFwiIGNsYXNzPVwibGFiZWxcIj5FbWFpbDwvbGFiZWw+PGlucHV0IHR5cGU9XCJlbWFpbFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgaWQ9XCJ1c2VyRW1haWxcIiBwbGFjZWhvbGRlcj1cIkVtYWlsXCIgbmctbW9kZWw9XCJzaWdudXBGb3JtLmVtYWlsXCI+PC9kaXY+PGRpdiBjbGFzcz1cImNvbC14cy0xMCBjb2wteHMtb2Zmc2V0LTEgY29sLXNtLTYgY29sLXNtLW9mZnNldC0wIGZvcm0tZ3JvdXBcIj48bGFiZWwgZm9yPVwiZmlyc3ROYW1lXCIgY2xhc3M9XCJsYWJlbFwiPkZpcnN0IE5hbWU8L2xhYmVsPjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgaWQ9XCJmaXJzdE5hbWVcIiBwbGFjZWhvbGRlcj1cIkZpcnN0IE5hbWVcIiBuZy1tb2RlbD1cInNpZ251cEZvcm0uZmlyc3ROYW1lXCI+PC9kaXY+PC9kaXY+PC9mb3JtPjwvZGl2PjxkaXYgY2xhc3M9XCJtb2RhbC1mb290ZXJcIj48ZGl2IGNsYXNzPVwibW9kYWwtZm9vdGVyLWV4dHJhc1wiPjxoMSBjbGFzcz1cInRpdGxlIG1vZGFsLWVycm9yXCI+e3tlcnJvck1lc3NhZ2V9fTwvaDE+PGkgY2xhc3M9XCJmYSBmYS1zcGlubmVyIGZhLXNwaW5cIiBuZy1pZj1cIiFlcnJvck1lc3NhZ2UgJiYgbG9nZ2luZ0luXCI+PC9pPjwvZGl2PjxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0XCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIj48aDEgY2xhc3M9XCJidXR0b25cIj5DYW5jZWw8L2gxPjwvYnV0dG9uPiA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIiBjbGFzcz1cImJ0biBwdXJwbGUtYnV0dG9uXCIgbmctY2xpY2s9XCIkcGFyZW50Lm1vZGFsQ29uZmlybShzaWdudXBGb3JtKVwiPjxoMSBjbGFzcz1cImJ1dHRvblwiPlN1Ym1pdDwvaDE+PC9idXR0b24+PC9kaXY+PC9kaXY+Jyk7XG59XSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgRGFubnkgb24gMTEvNi8xNi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJylcbiAgLnNlcnZpY2UoJ0NvbnRlbnRTZXJ2aWNlJywgZnVuY3Rpb24oJGh0dHAsICRxKSB7XG4gICAgdmFyIF9zaXRlQ29udGVudCxcbiAgICAgIF9zZWxlY3RlZENvbnRlbnQ7XG5cblxuICAgIHZhciBzZXRDb250ZW50ID0gZnVuY3Rpb24oY29udGVudCwgY2FsbGJhY2spIHtcbiAgICAgIF9zaXRlQ29udGVudCA9IGNvbnRlbnQ7XG4gICAgICBpZihjYWxsYmFjaykge1xuICAgICAgICBjYWxsYmFjayhjb250ZW50KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgZ2V0Q29udGVudCA9IGZ1bmN0aW9uKGNvbnRlbnQpIHtcbiAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICBpZighX3NpdGVDb250ZW50KSB7XG4gICAgICAgIGluaXRDb250ZW50KGZ1bmN0aW9uKGNvbnRlbnQpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnY29udGVudDogJywgY29udGVudCk7XG4gICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShjb250ZW50KTtcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlZmVycmVkLnJlc29sdmUoX3NpdGVDb250ZW50KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfVxuXG4gICAgdmFyIGluaXRDb250ZW50ID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICRodHRwLmdldCgnYXBpL3NpdGVDb250ZW50L2FsbENvbnRlbnQnKVxuICAgICAgICAudGhlbihmdW5jdGlvbihyZXN1bHRzKXtcbiAgICAgICAgICBzZXRDb250ZW50KHJlc3VsdHMuZGF0YSwgY2FsbGJhY2spO1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZvcm1hdENvbnRlbnQoY29udGVudCwgY2FsbGJhY2spIHtcbiAgICAgIHZhciBmb3JtYXR0ZWRDb250ZW50ID0gW107XG4gICAgICAgIGNvbnNvbGUubG9nKCdjb250ZW50OiAnLCBjb250ZW50KTtcbiAgICAgIC8vZm9yKHZhciBrZXkgaW4gY29udGVudCkge1xuICAgICAgLy8gIGFuZ3VsYXIuZm9yRWFjaChjb250ZW50W2tleV0sIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAvLyAgICBpdGVtLnN0YXRlTmFtZSA9IChpdGVtLnN0YXRlTmFtZSB8fCBpdGVtLnVybCkudG9Mb3dlckNhc2UoKTtcbiAgICAgIC8vICAgIGl0ZW0udXJsUHJlZml4ID0gJy8nICsga2V5ICsgJy8nICsgaXRlbS51cmw7XG4gICAgICAvLyAgICBpdGVtLmhyZWYgPSBpdGVtLnVybDtcbiAgICAgIC8vICAgIGlmKGtleSA9PSAnYXJ0aWNsZXMnKSB7XG4gICAgICAvLyAgICAgIGl0ZW0uc3JjID0gJ3ZpZXdzL3ZpZXcuYXJ0aWNsZS5odG1sJztcbiAgICAgIC8vICAgIH0gZWxzZSBpZihrZXkgPT0gJ2NyZWF0b3Itc2VyaWVzJykge1xuICAgICAgLy8gICAgICBpdGVtLnNyYyA9IFwidmlld3Mvdmlldy5jcmVhdG9yLXNlcmllcy5odG1sXCI7XG4gICAgICAvLyAgICB9XG4gICAgICAvLyAgICBmb3JtYXR0ZWRDb250ZW50LnB1c2goaXRlbSk7XG4gICAgICAvLyAgfSk7XG4gICAgICAvL31cbiAgICAgIHNldENvbnRlbnQoZm9ybWF0dGVkQ29udGVudCwgY2FsbGJhY2spO1xuICAgIH1cblxuICAgIHZhciBzZXRTZWxlY3RlZCA9IGZ1bmN0aW9uKGNvbnRlbnQpIHtcbiAgICAgIF9zZWxlY3RlZENvbnRlbnQgPSBjb250ZW50O1xuICAgIH1cblxuICAgIHZhciBnZXRTZWxlY3RlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIF9zZWxlY3RlZENvbnRlbnQ7XG4gICAgfVxuXG4gICAgdmFyIGZpbmRDb250ZW50ID0gZnVuY3Rpb24oc2VsZWN0ZWRIcmVmKSB7XG4gICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgaWYoIV9zZWxlY3RlZENvbnRlbnQpIHtcbiAgICAgICAgaW5pdENvbnRlbnQoZnVuY3Rpb24oY29udGVudCkge1xuICAgICAgICAgIGZvcih2YXIgYz0wO2M8Y29udGVudC5sZW5ndGg7YysrKSB7XG4gICAgICAgICAgICBpZihjb250ZW50W2NdLmhyZWYgPT0gc2VsZWN0ZWRIcmVmKSB7XG4gICAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5yZXNvbHZlKGNvbnRlbnRbY10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5yZXNvbHZlKF9zZWxlY3RlZENvbnRlbnQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfVxuXG5cblxuICAgICAgdmFyIG5ld0NvbnRlbnQgPSBmdW5jdGlvbihuZXdDb250ZW50KSB7XG4gICAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgICAgbWV0aG9kIDogJ1BPU1QnLFxuICAgICAgICAgICAgICB1cmwgOiAnYXBpL3NpdGVDb250ZW50LycsXG4gICAgICAgICAgICAgIGRhdGEgOiBuZXdDb250ZW50XG4gICAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgdmFyIHVwZGF0ZUNvbnRlbnQgPSBmdW5jdGlvbihjb250ZW50KSB7XG4gICAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgICAgbWV0aG9kIDogJ1BVVCcsXG4gICAgICAgICAgICAgIHVybCA6ICdhcGkvc2l0ZUNvbnRlbnQvJyArIGNvbnRlbnQuX2lkLFxuICAgICAgICAgICAgICBkYXRhIDogY29udGVudFxuICAgICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIHZhciBkZWxldGVDb250ZW50ID0gZnVuY3Rpb24oY29udGVudCkge1xuICAgICAgICAgIHJldHVybiAkaHR0cCh7XG4gICAgICAgICAgICAgIG1ldGhvZCA6ICdERUxFVEUnLFxuICAgICAgICAgICAgICB1cmwgOiAnYXBpL3NpdGVDb250ZW50LycgKyBjb250ZW50Ll9pZFxuICAgICAgICAgIH0pXG4gICAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgc2V0Q29udGVudCA6IHNldENvbnRlbnQsXG4gICAgICBnZXRDb250ZW50IDogZ2V0Q29udGVudCxcbiAgICAgIGluaXRDb250ZW50IDogaW5pdENvbnRlbnQsXG4gICAgICBzZXRTZWxlY3RlZCA6IHNldFNlbGVjdGVkLFxuICAgICAgZ2V0U2VsZWN0ZWQgOiBnZXRTZWxlY3RlZCxcbiAgICAgIGZpbmRDb250ZW50IDogZmluZENvbnRlbnQsXG4gICAgICBuZXdDb250ZW50IDogbmV3Q29udGVudCxcbiAgICAgIHVwZGF0ZUNvbnRlbnQgOiB1cGRhdGVDb250ZW50LFxuICAgICAgZGVsZXRlQ29udGVudCA6IGRlbGV0ZUNvbnRlbnRcbiAgICB9XG4gIH0pXG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgRGFubnkgb24gMTIvMjUvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpXG4gICAgLnNlcnZpY2UoJ0FkbWluU2VydmljZScsIGZ1bmN0aW9uKCRodHRwLCAkcSkge1xuXG4gICAgICAgIHZhciBfYWxsVXNlcnM7XG4gICAgICAgIHZhciBuZXdVc2VyID0gZnVuY3Rpb24obmV3VXNlcikge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgICAgICBtZXRob2QgOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgdXJsIDogJ2FwaS91c2VyL25ld1VzZXInLFxuICAgICAgICAgICAgICAgIGRhdGEgOiBuZXdVc2VyXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGFsbFVzZXJzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZighX2FsbFVzZXJzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICAgICAgdXJsIDogJ2FwaS91c2VyL2FsbFVzZXJzJ1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYWxsVXNlcnMgPSByZXNwb25zZS5kYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9hbGxVc2Vyc1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoX2FsbFVzZXJzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkZWxldGVVc2VyID0gZnVuY3Rpb24odXNlcklkKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICAgICAgICAgICAgdXJsIDogJ2FwaS91c2VyLycgKyB1c2VySWRcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmV3VXNlciA6IG5ld1VzZXIsXG4gICAgICAgICAgICBhbGxVc2VycyA6IGFsbFVzZXJzLFxuICAgICAgICAgICAgZGVsZXRlVXNlciA6IGRlbGV0ZVVzZXJcbiAgICAgICAgfVxuICAgIH0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgncGFydGlhbHMvbW9kYWwtcGxhY2Vob2xkZXIuaHRtbCcsXG4gICAgJzxkaXYgY2xhc3M9XCJtb2RhbC1oZWFkZXJcIj48YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImNsb3NlXCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIiBhcmlhLWxhYmVsPVwiQ2xvc2VcIj48c3BhbiBhcmlhLWhpZGRlbj1cInRydWVcIj4mdGltZXM7PC9zcGFuPjwvYnV0dG9uPjxoMSBjbGFzcz1cInRpdGxlXCI+Q29taW5nIFNvb24uLi48L2gxPjwvZGl2PjxkaXYgY2xhc3M9XCJtb2RhbC1ib2R5XCI+VGhpcyBmZWF0dXJlIGlzIGN1cnJlbnRseSBpbiBkZXZlbG9wbWVudC4gU3RheSB0dW5lZCBmb3IgbW9yZSBpbmZvITwvZGl2PjxkaXYgY2xhc3M9XCJtb2RhbC1mb290ZXJcIj48YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdFwiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCI+PGgxIGNsYXNzPVwiYnV0dG9uXCI+R290IGl0ITwvaDE+PC9idXR0b24+PC9kaXY+Jyk7XG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgncGFydGlhbHMvbW9kYWwtbG9nb3V0Lmh0bWwnLFxuICAgICc8ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyIHJlZC1tb2RhbC1oZWFkZXJcIj48YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImNsb3NlXCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIiBhcmlhLWxhYmVsPVwiQ2xvc2VcIj48c3BhbiBhcmlhLWhpZGRlbj1cInRydWVcIj4mdGltZXM7PC9zcGFuPjwvYnV0dG9uPjxoMSBjbGFzcz1cInRpdGxlXCI+TG9nb3V0PzwvaDE+PC9kaXY+PGRpdiBjbGFzcz1cIm1vZGFsLWJvZHlcIj5BcmUgeW91IHN1cmUgeW91IHdpc2ggdG8gbG9nb3V0PyBZb3Ugd2lsbCBuZWVkIHRvIGxvZyBiYWNrIGluIGlmIHlvdSB3aXNoIHRvIGNvbnRpbnVlIGVkaXRpbmcgY29udGVudC48L2Rpdj48ZGl2IGNsYXNzPVwibW9kYWwtZm9vdGVyXCI+PGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHRcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiPjxoMSBjbGFzcz1cImJ1dHRvblwiPkNhbmNlbDwvaDE+PC9idXR0b24+IDxidXR0b24gdHlwZT1cInN1Ym1pdFwiIGNsYXNzPVwiYnRuIGJ0bi1kYW5nZXJcIiBuZy1jbGljaz1cIiRwYXJlbnQubW9kYWxDb25maXJtKClcIj5Db25maXJtPC9idXR0b24+PC9kaXY+Jyk7XG59XSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgRGFubnkgb24gMTIvMjQvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpXG4gICAgLmRpcmVjdGl2ZSgnc2l0ZU1vZGFsJywgZnVuY3Rpb24oJHJvb3RTY29wZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3QgOiAnRScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybCA6ICdwYXJ0aWFscy9zaXRlLW1vZGFsLmh0bWwnLFxuICAgICAgICAgICAgbGluayA6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtLCBhdHRycykge1xuICAgICAgICAgICAgICAgIHNjb3BlLm1vZGFsVGVtcGxhdGUgPSAkcm9vdFNjb3BlLm1vZGFsVGVtcGxhdGU7XG4gICAgICAgICAgICAgICAgc2NvcGUubW9kYWxDb25maXJtID0gJHJvb3RTY29wZS5tb2RhbENvbmZpcm07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3BhcnRpYWxzL21vZGFsLWxvZ2luLmh0bWwnLFxuICAgICc8ZGl2IG5nLWNvbnRyb2xsZXI9XCJMb2dpbk1vZGFsQ3RybFwiPjxkaXYgY2xhc3M9XCJtb2RhbC1oZWFkZXJcIj48YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImNsb3NlXCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIiBhcmlhLWxhYmVsPVwiQ2xvc2VcIj48c3BhbiBhcmlhLWhpZGRlbj1cInRydWVcIj4mdGltZXM7PC9zcGFuPjwvYnV0dG9uPjxoMSBjbGFzcz1cInRpdGxlXCI+TG9naW48L2gxPjwvZGl2PjxkaXYgY2xhc3M9XCJtb2RhbC1ib2R5XCI+PGZvcm0gcm9sZT1cImZvcm1cIiBub3ZhbGlkYXRlIG5hbWU9XCJsb2dpbkZvcm1cIiBuZy1pbml0PVwicmVzZXRMb2dpbihsb2dpbkZvcm0pXCI+PGRpdiBjbGFzcz1cInJvd1wiPjxkaXYgY2xhc3M9XCJjb2wteHMtNiBjb2wteHMtb2Zmc2V0LTMgY29sLXNtLTYgY29sLXNtLW9mZnNldC0wIGZvcm0tZ3JvdXBcIj48bGFiZWwgZm9yPVwidXNlckVtYWlsXCIgY2xhc3M9XCJsYWJlbFwiPkVtYWlsPC9sYWJlbD48aW5wdXQgdHlwZT1cImVtYWlsXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBpZD1cInVzZXJFbWFpbFwiIHBsYWNlaG9sZGVyPVwiRW1haWxcIiBuZy1tb2RlbD1cImxvZ2luRm9ybS5lbWFpbFwiPjwvZGl2PjxkaXYgY2xhc3M9XCJjb2wteHMtNiBjb2wteHMtb2Zmc2V0LTMgY29sLXNtLTYgY29sLXNtLW9mZnNldC0wIGZvcm0tZ3JvdXBcIj48bGFiZWwgZm9yPVwidXNlclBhc3N3b3JkXCIgY2xhc3M9XCJsYWJlbFwiPlBhc3N3b3JkPC9sYWJlbD48aW5wdXQgdHlwZT1cInBhc3N3b3JkXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBpZD1cInVzZXJQYXNzd29yZFwiIHBsYWNlaG9sZGVyPVwiUGFzc3dvcmRcIiBuZy1tb2RlbD1cImxvZ2luRm9ybS5wYXNzd29yZFwiPjwvZGl2PjwvZGl2PjwvZm9ybT48L2Rpdj48ZGl2IGNsYXNzPVwibW9kYWwtZm9vdGVyXCI+PGRpdiBjbGFzcz1cIm1vZGFsLWZvb3Rlci1leHRyYXNcIj48aDEgY2xhc3M9XCJ0aXRsZSBtb2RhbC1lcnJvclwiPnt7ZXJyb3JNZXNzYWdlfX08L2gxPjxpIGNsYXNzPVwiZmEgZmEtc3Bpbm5lciBmYS1zcGluXCIgbmctc2hvdz1cImxvZ2dpbmdJblwiIG5nLWNsYXNzPVwie1xcJ2hpZGUtc3Bpbm5lclxcJyA6IGVycm9yTWVzc2FnZX1cIj48L2k+PC9kaXY+PGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHRcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiPjxoMSBjbGFzcz1cImJ1dHRvblwiPkNhbmNlbDwvaDE+PC9idXR0b24+IDxidXR0b24gdHlwZT1cInN1Ym1pdFwiIGNsYXNzPVwiYnRuIHB1cnBsZS1idXR0b25cIiBuZy1jbGljaz1cImxvZ2luKGxvZ2luRm9ybSlcIj48aDEgY2xhc3M9XCJidXR0b25cIj5Mb2dpbjwvaDE+PC9idXR0b24+PC9kaXY+PC9kaXY+Jyk7XG59XSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgRGFubnkgb24gMTEvNi8xNi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJylcbiAgLmRpcmVjdGl2ZSgnc2l0ZUZvb3RlcicsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdCA6ICdFJyxcbiAgICAgIHRlbXBsYXRlVXJsIDogJ3BhcnRpYWxzL3NpdGUtZm9vdGVyLmh0bWwnXG4gICAgfVxuICB9KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3BhcnRpYWxzL21vZGFsLWNvbnRhY3QuaHRtbCcsXG4gICAgJzxkaXYgY2xhc3M9XCJtb2RhbC1oZWFkZXJcIj48YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImNsb3NlXCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIiBhcmlhLWxhYmVsPVwiQ2xvc2VcIj48c3BhbiBhcmlhLWhpZGRlbj1cInRydWVcIj4mdGltZXM7PC9zcGFuPjwvYnV0dG9uPjxoMSBjbGFzcz1cInRpdGxlXCI+e3skcGFyZW50Lm1vZGFsVGl0bGUgPyAkcGFyZW50Lm1vZGFsVGl0bGUgOiBcXCdDb250YWN0XFwnfX08L2gxPjwvZGl2PjxkaXYgY2xhc3M9XCJtb2RhbC1ib2R5XCI+PHAgY2xhc3M9XCJzaXRlLWJvZHktdGV4dCBjZW50ZXItYmxvY2tcIj5QbGVhc2UgZmlsbCBvdXQgc29tZSBkZXRhaWxzIHNvIHdlIGNhbiBnZXQgYmFjayB0byB5b3UuPC9wPjxmb3JtIHJvbGU9XCJmb3JtXCIgbm92YWxpZGF0ZSBuYW1lPVwiY29udGFjdEZvcm1cIiBjbGFzcz1cImNlbnRlci1ibG9ja1wiPjxkaXYgY2xhc3M9XCJyb3dcIj48ZGl2IGNsYXNzPVwiY29sLXhzLTYgY29sLXhzLW9mZnNldC0zIGNvbC1zbS01IGNvbC1zbS1vZmZzZXQtMSBmb3JtLWdyb3VwXCI+PGxhYmVsIGZvcj1cImNvbnRhY3RGaXJzdE5hbWVcIiBjbGFzcz1cImxhYmVsXCI+Rmlyc3QgTmFtZTwvbGFiZWw+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBpZD1cImNvbnRhY3RGaXJzdE5hbWVcIiBwbGFjZWhvbGRlcj1cIkZpcnN0IE5hbWVcIiBuZy1tb2RlbD1cImNvbnRhY3RGb3JtLmZpcnN0TmFtZVwiPjwvZGl2PjxkaXYgY2xhc3M9XCJjb2wteHMtNiBjb2wteHMtb2Zmc2V0LTMgY29sLXNtLTUgY29sLXNtLW9mZnNldC0wIGZvcm0tZ3JvdXBcIj48bGFiZWwgZm9yPVwiY29udGFjdExhc3ROYW1lXCIgY2xhc3M9XCJsYWJlbFwiPkxhc3QgTmFtZTwvbGFiZWw+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBpZD1cImNvbnRhY3RMYXN0TmFtZVwiIHBsYWNlaG9sZGVyPVwiTGFzdCBOYW1lXCIgbmctbW9kZWw9XCJjb250YWN0Rm9ybS5sYXN0TmFtZVwiPjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XCJyb3dcIj48ZGl2IGNsYXNzPVwiY29sLXhzLTYgY29sLXhzLW9mZnNldC0zIGNvbC1zbS01IGNvbC1zbS1vZmZzZXQtMSBmb3JtLWdyb3VwXCI+PGxhYmVsIGZvcj1cImNvbnRhY3RFbWFpbFwiIGNsYXNzPVwibGFiZWxcIj5FbWFpbDwvbGFiZWw+PGlucHV0IHR5cGU9XCJlbWFpbFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgaWQ9XCJjb250YWN0RW1haWxcIiBwbGFjZWhvbGRlcj1cIkVtYWlsXCIgbmctbW9kZWw9XCJjb250YWN0Rm9ybS5lbWFpbFwiPjwvZGl2PjxkaXYgY2xhc3M9XCJjb2wteHMtNiBjb2wteHMtb2Zmc2V0LTMgY29sLXNtLTUgY29sLXNtLW9mZnNldC0wIGZvcm0tZ3JvdXBcIj48bGFiZWwgZm9yPVwiY29udGFjdENvbXBhbnlcIiBjbGFzcz1cImxhYmVsXCI+KE9wdGlvbmFsKSBDb21wYW55PC9sYWJlbD48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIGlkPVwiY29udGFjdENvbXBhbnlcIiBwbGFjZWhvbGRlcj1cIkNvbXBhbnlcIiBuZy1tb2RlbD1cImNvbnRhY3RGb3JtLmNvbXBhbnlcIj48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPVwicm93XCI+PGRpdiBjbGFzcz1cImNvbC14cy0xMCBjb2wteHMtb2Zmc2V0LTEgY29sLXNtLTggY29sLXNtLW9mZnNldC0yIGZvcm0tZ3JvdXBcIj48bGFiZWwgZm9yPVwiY29udGFjdE1lc3NhZ2VcIiBjbGFzcz1cImxhYmVsXCI+KE9wdGlvbmFsKSBNZXNzYWdlPC9sYWJlbD48dGV4dGFyZWEgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBpZD1cImNvbnRhY3RNZXNzYWdlXCIgcm93cz1cIjNcIiBuZy1tb2RlbD1cImNvbnRhY3RGb3JtLm1lc3NhZ2VcIj48L3RleHRhcmVhPjwvZGl2PjwvZGl2PjwvZm9ybT48L2Rpdj48ZGl2IGNsYXNzPVwibW9kYWwtZm9vdGVyXCI+PGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHRcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiPjxoMSBjbGFzcz1cImJ1dHRvblwiPkNhbmNlbDwvaDE+PC9idXR0b24+IDxidXR0b24gdHlwZT1cInN1Ym1pdFwiIGNsYXNzPVwiYnRuIHB1cnBsZS1idXR0b25cIiBuZy1jbGljaz1cIiRwYXJlbnQubW9kYWxDb25maXJtKGNvbnRhY3RGb3JtKVwiPjxoMSBjbGFzcz1cImJ1dHRvblwiPlN1Ym1pdDwvaDE+PC9idXR0b24+PC9kaXY+Jyk7XG59XSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgRGFubnkgb24gMTEvNi8xNi5cbiAqL1xuXG5hbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKVxuICAuZGlyZWN0aXZlKCdzaXRlQXVkaW8nLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3QgOiAnRScsXG4gICAgICB0ZW1wbGF0ZVVybCA6ICdwYXJ0aWFscy9zaXRlLWF1ZGlvLmh0bWwnLFxuICAgICAgbGluayA6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtLCBhdHRycykge1xuXG4gICAgICAgIHZhciBjbGllbnRJZCA9ICdvZXJYZjZuQmNEdTVDb05kYU9ySUd1dFZDS1hQWXZTQic7XG4gICAgICAgIHNjb3BlLnRyYWNrVXJsID0gJ2h0dHBzOi8vc291bmRjbG91ZC5jb20vaXR6YWlhL21peC1tYWNoaW5lLTI5Ny0xNi1ub3YtMjAxNi13aXRoLWl0emFpYSc7XG5cbiAgICAgICAgU0MuaW5pdGlhbGl6ZSh7XG4gICAgICAgICAgY2xpZW50X2lkOiBjbGllbnRJZFxuICAgICAgICB9KTtcbiAgICAgICAgU0MucmVzb2x2ZSgnaHR0cHM6Ly9zb3VuZGNsb3VkLmNvbS9pdHphaWEvbWl4LW1hY2hpbmUtMjk3LTE2LW5vdi0yMDE2LXdpdGgtaXR6YWlhJylcbiAgICAgICAgICAudGhlbihmdW5jdGlvbih0cmFjaykge1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygndHJhY2s6ICcsIHRyYWNrKTtcbiAgICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgfSlcblxuIiwiYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3BhcnRpYWxzL21vZGFsLWNvbmZpcm0uaHRtbCcsXG4gICAgJzxkaXYgY2xhc3M9XCJtb2RhbC1oZWFkZXIgcmVkLW1vZGFsLWhlYWRlclwiPjxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiY2xvc2VcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiIGFyaWEtbGFiZWw9XCJDbG9zZVwiPjxzcGFuIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPiZ0aW1lczs8L3NwYW4+PC9idXR0b24+PGgxIGNsYXNzPVwidGl0bGVcIj57eyRwYXJlbnQubW9kYWxUaXRsZSA/ICRwYXJlbnQubW9kYWxUaXRsZSA6IFxcJ1BsZWFzZSBDb25maXJtXFwnfX08L2gxPjwvZGl2PjxkaXYgY2xhc3M9XCJtb2RhbC1ib2R5XCI+QXJlIHlvdSBzdXJlIHlvdSB3aXNoIHRvIGNvbnRpbnVlPyBUaGlzIGFjdGlvbiBpcyBwZXJtYW5lbnQgYW5kIGNhbm5vdCBiZSB1bmRvbmUuPC9kaXY+PGRpdiBjbGFzcz1cIm1vZGFsLWZvb3RlclwiPjxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0XCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIj48aDEgY2xhc3M9XCJidXR0b25cIj5DYW5jZWw8L2gxPjwvYnV0dG9uPiA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIiBjbGFzcz1cImJ0biBidG4tZGFuZ2VyXCIgbmctY2xpY2s9XCIkcGFyZW50Lm1vZGFsQ29uZmlybShjb250YWN0Rm9ybSlcIj5Db25maXJtPC9idXR0b24+PC9kaXY+Jyk7XG59XSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgRGFubnkgb24gMTEvNS8xNi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJylcbiAgLmRpcmVjdGl2ZSgnc2lkZW1lbnUnLCBmdW5jdGlvbigkcm9vdFNjb3BlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNjb3BlOiAnRScsXG4gICAgICB0ZW1wbGF0ZVVybCA6ICdwYXJ0aWFscy9zaWRlbWVudS5odG1sJyxcbiAgICAgIGxpbmsgOiBmdW5jdGlvbihzY29wZSwgZWxlbSwgYXR0cnMpIHtcblxuICAgICAgICBzY29wZS5zaG93TWVudSA9IGZhbHNlO1xuICAgICAgICBzY29wZS50b2dnbGVMaW5rcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBsaW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vYmlsZS1tZW51JykucXVlcnlTZWxlY3RvckFsbCgnbGknKTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmsubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxpbmtbaV0uY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgICRyb290U2NvcGUuJG9uKFwiJHN0YXRlQ2hhbmdlU3VjY2Vzc1wiLCBmdW5jdGlvbihldmVudCwgdG9TdGF0ZSkge1xuICAgICAgICAgIGlmKHNjb3BlLnNob3dNZW51KSB7XG4gICAgICAgICAgICBzY29wZS50b2dnbGVMaW5rcygpXG4gICAgICAgICAgICBzY29wZS5zaG93TWVudSA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3BhcnRpYWxzL21haW4tc2VjdGlvbi5wYXJ0aWFsLmh0bWwnLFxuICAgICc8c2VjdGlvbiBjbGFzcz1cInNlY3Rpb24td2l0aC10b3AtbmF2IGNvbnRhaW5lclwiPjxoMSBjbGFzcz1cImRpc3BsYXktMlwiPnt7c2VjdGlvblRpdGxlfX08L2gxPjxoMiBjbGFzcz1cInN1YmhlYWQtMVwiPnt7c2VjdGlvblN1YlRpdGxlfX08L2gyPjxjb250ZW50LWNvbnRhaW5lciBjb250ZW50LXR5cGU9XCJ7e2NvbnRlbnRUeXBlfX1cIj48L2NvbnRlbnQtY29udGFpbmVyPjwvc2VjdGlvbj4nKTtcbn1dKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBEYW5ueSBvbiAxMS84LzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKVxuICAuZGlyZWN0aXZlKCdzZWN0aW9uSGVhZGVyJywgZnVuY3Rpb24oJHN0YXRlLCAkd2luZG93LCAkcm9vdFNjb3BlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0IDogJ0UnLFxuICAgICAgdGVtcGxhdGVVcmwgOiAncGFydGlhbHMvc2VjdGlvbi1oZWFkZXIuaHRtbCcsXG4gICAgICBsaW5rIDogZnVuY3Rpb24oc2NvcGUsIGVsZW0sIGF0dHJzKSB7XG4gICAgICAgIC8vc2NvcGUuaGVhZGVyU3R5bGUgPSB7XG4gICAgICAgIC8vICAnYmFja2dyb3VuZC1yZXBlYXQnIDogJ25vLXJlcGVhdCcsXG4gICAgICAgIC8vICAnYmFja2dyb3VuZC1wb3NpdGlvbicgOiAnY2VudGVyJyxcbiAgICAgICAgLy8gICdiYWNrZ3JvdW5kLXNpemUnIDogJ2NvdmVyJ1xuICAgICAgICAvL1xuICAgICAgICAvL307XG4gICAgICAgIC8vc2NvcGUuc3RhdGUgPSAkc3RhdGU7XG4gICAgICAgIC8vdmFyIHdpbmRvd1dpZHRoID0gJHdpbmRvdy5pbm5lcldpZHRoLFxuICAgICAgICAvLyAgc3RhdGVOYW1lO1xuICAgICAgICAvL1xuICAgICAgICAvLy8vIEluIGNhc2Ugb2Ygc2NyZWVuIHJlc2l6ZXMsIG1ha2Ugc3VyZSB3ZSB1c2UgY29ycmVjdCBiYWNrZ3JvdW5kIGltYWdlXG4gICAgICAgIC8vYW5ndWxhci5lbGVtZW50KCR3aW5kb3cpLmJpbmQoJ3Jlc2l6ZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gIHdpbmRvd1dpZHRoID0gJHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgICAvLyAgaWYoc3RhdGVOYW1lICE9ICdob21lJykgZ2V0SGVhZGVySW1hZ2UoKTtcbiAgICAgICAgLy99KTtcbiAgICAgICAgLy9cbiAgICAgICAgLy8kcm9vdFNjb3BlLiRvbihcIiRzdGF0ZUNoYW5nZVN1Y2Nlc3NcIiwgZnVuY3Rpb24oZXZlbnQsIHRvU3RhdGUpIHtcbiAgICAgICAgLy8gIHN0YXRlTmFtZSA9IHRvU3RhdGUubmFtZTtcbiAgICAgICAgLy8gIGlmKHN0YXRlTmFtZSAhPSAnaG9tZScpIGdldEhlYWRlckltYWdlKCk7XG4gICAgICAgIC8vfSk7XG4gICAgICAgIC8vZnVuY3Rpb24gZ2V0SGVhZGVySW1hZ2UoKSB7XG4gICAgICAgIC8vICB2YXIgaW1hZ2VMb2NhdGlvbiA9IHN0YXRlTmFtZSArICctaGVhZGVyLnBuZyc7XG4gICAgICAgIC8vICBpZih3aW5kb3dXaWR0aCA8IDc2OCkgaW1hZ2VMb2NhdGlvbiA9ICdtb2JpbGUtJyArIGltYWdlTG9jYXRpb247XG4gICAgICAgIC8vICBpbWFnZUxvY2F0aW9uID0gJ3VybCguLi9pbWFnZXMvJyArIGltYWdlTG9jYXRpb24gKyAnKSc7XG4gICAgICAgIC8vICBzY29wZS5oZWFkZXJTdHlsZVsnYmFja2dyb3VuZC1pbWFnZSddID0gaW1hZ2VMb2NhdGlvbjtcbiAgICAgICAgLy99XG4gICAgICAgIHNjb3BlLmlzQWN0aXZlID0gZnVuY3Rpb24oc3RhdGUpIHtcbiAgICAgICAgICByZXR1cm4gJHN0YXRlLmN1cnJlbnQubmFtZSA9PSBzdGF0ZTtcbiAgICAgICAgfVxuICAgICAgICBzY29wZS5nb1RvID0gZnVuY3Rpb24oc3RhdGUpIHtcbiAgICAgICAgICAkc3RhdGUuZ28oc3RhdGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3BhcnRpYWxzL2hvbWUuaHRtbCcsXG4gICAgJzxzZWN0aW9uLWhlYWRlciBjbGFzcz1cImhpZGRlbi14c1wiPjwvc2VjdGlvbi1oZWFkZXI+PHNlY3Rpb24gY2xhc3M9XCJzZWN0aW9uLXdpdGgtdG9wLW5hdiBjb250YWluZXJcIj48Y29udGVudC1jb250YWluZXIgY29udGVudC10eXBlPVwiaG9tZVwiPjwvY29udGVudC1jb250YWluZXI+PC9zZWN0aW9uPicpO1xufV0pO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IERhbm55IG9uIDEwLzEwLzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKVxuICAuZGlyZWN0aXZlKCduYXZiYXInLCBmdW5jdGlvbigkd2luZG93LCAkcm9vdFNjb3BlLCAkc3RhdGUsICR0aW1lb3V0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNjb3BlOiAnRScsXG4gICAgICB0ZW1wbGF0ZVVybCA6ICdwYXJ0aWFscy9uYXZiYXIuaHRtbCcsXG4gICAgICBsaW5rIDogZnVuY3Rpb24oc2NvcGUsIGVsZW0sIGF0dHJzKSB7XG5cbiAgICAgICAgLypcbiAgICAgICAgIEFsd2F5cyBTaG93IE5hdmJhciBvbiBtb2JpbGUgc2NyZWVuc1xuXG4gICAgICAgICBNb25pdG9yIFdpZHRoIGluIGNhc2Ugb2Ygc2NyZWVuIHJlc2l6ZXJzIVxuXG4gICAgICAgICBIaWRlIG5hdmJhciBvbiBob21lIHZpZXcgbm9uLW1vYmlsZVxuICAgICAgICAgICovXG4gICAgICAgIHNjb3BlLnN0YXRlID0gJHN0YXRlO1xuXG4gICAgICAgIHZhciB3aW5kb3dXaWR0aCA9ICR3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgc2NvcGUuc2hvd05hdmJhciA9IHRydWU7XG5cbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCR3aW5kb3cpLmJpbmQoJ3Jlc2l6ZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB3aW5kb3dXaWR0aCA9ICR3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgICBzY29wZS5zaG93TmF2YmFyID0gKHdpbmRvd1dpZHRoIDwgNzY4KTtcbiAgICAgICAgICBpZihzY29wZS5zdGF0ZS5jdXJyZW50Lm5hbWUgPT0gJ2hvbWUnJiYgd2luZG93V2lkdGggPj0gNzY4ICkgd2F0Y2hIb21lU2Nyb2xsKCk7XG5cbiAgICAgICAgfSk7XG4gICAgICAgICRyb290U2NvcGUuJG9uKFwiJHN0YXRlQ2hhbmdlU3VjY2Vzc1wiLCBmdW5jdGlvbihldmVudCwgdG9TdGF0ZSkge1xuICAgICAgICAgIGlmKHdpbmRvd1dpZHRoIDwgNzY4KSB7XG4gICAgICAgICAgICBzY29wZS5zaG93TmF2YmFyID0gdHJ1ZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2NvcGUuc2hvd05hdmJhciA9ICh0b1N0YXRlLm5hbWUgIT09ICdob21lJyAmJiB3aW5kb3dXaWR0aCA+PSA3NjgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZih0b1N0YXRlLm5hbWUgPT0gJ2hvbWUnICYmIHdpbmRvd1dpZHRoID49IDc2OCkgd2F0Y2hIb21lU2Nyb2xsKClcbiAgICAgICAgICBlbHNlIGFuZ3VsYXIuZWxlbWVudCgkd2luZG93KS51bmJpbmQoJ3Njcm9sbCcpO1xuXG4gICAgICAgICAgaWYoc2NvcGUuc3RhdGUuaW5jbHVkZXMoJ2Rhc2hib2FyZCcpKSBzY29wZS5zaG93TmF2YmFyID0gZmFsc2U7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNjb3BlLmdvVG8gPSBmdW5jdGlvbihzdGF0ZSkge1xuICAgICAgICAgICRzdGF0ZS5nbyhzdGF0ZSk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaGVhZGVySGVpZ2h0O1xuICAgICAgICBmdW5jdGlvbiB3YXRjaEhvbWVTY3JvbGwoKSB7XG4gICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBoZWFkZXJIZWlnaHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VjdGlvbkhlYWRlcicpLmNsaWVudEhlaWdodDtcbiAgICAgICAgICB9LCAxMDApO1xuXG4gICAgICAgICAgYW5ndWxhci5lbGVtZW50KCR3aW5kb3cpLmJpbmQoXCJzY3JvbGxcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBzY29wZS5zaG93TmF2YmFyID0gKCR3aW5kb3cuc2Nyb2xsWSA+IGhlYWRlckhlaWdodClcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICBzY29wZS5pc0FjdGl2ZSA9IGZ1bmN0aW9uKHN0YXRlKSB7XG4gICAgICAgICAgcmV0dXJuICRzdGF0ZS5jdXJyZW50Lm5hbWUgPT0gc3RhdGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgncGFydGlhbHMvaGFtYnVyZ2VyLW1lbnUuaHRtbCcsXG4gICAgJzxkaXYgY2xhc3M9XCJtYXRlcmlhbC1kZXNpZ24taGFtYnVyZ2VyXCIgbmctY2xpY2s9XCJ0b2dnbGVTdGF0ZSgpXCI+PGJ1dHRvbiBjbGFzcz1cIm1hdGVyaWFsLWRlc2lnbi1oYW1idXJnZXJfX2ljb25cIj48c3BhbiBjbGFzcz1cIm1hdGVyaWFsLWRlc2lnbi1oYW1idXJnZXJfX2xheWVyXCIgbmctY2xhc3M9XCJcXCdtYXRlcmlhbC1kZXNpZ24taGFtYnVyZ2VyX19pY29uLS1cXCcgKyAoc3RhdGUgPyBcXCd0b1xcJyA6IFxcJ2Zyb21cXCcpICsgXFwnLWFycm93XFwnXCI+PC9zcGFuPjwvYnV0dG9uPjwvZGl2PicpO1xufV0pO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IERhbm55IG9uIDEyLzI1LzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKVxuICAgIC5jb250cm9sbGVyKCdMb2dpbk1vZGFsQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSwgJHRpbWVvdXQsIFVzZXJTZXJ2aWNlKSB7XG5cbiAgICAgICAgJHNjb3BlLmVycm9yTWVzc2FnZSA9IG51bGw7XG4gICAgICAgICRzY29wZS5sb2dnaW5nSW4gPSBmYWxzZTtcbiAgICAgICAgJHNjb3BlLmxvZ2luRm9ybSA9IHt9O1xuXG4gICAgICAgICRzY29wZS5sb2dpbiA9IGZ1bmN0aW9uKGxvZ2luRm9ybSkge1xuICAgICAgICAgICAgaWYoISRzY29wZS5sb2dnaW5nSW4pIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUubG9nZ2luZ0luID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYoIWxvZ2luRm9ybS5lbWFpbCkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3JNZXNzYWdlID0gJ1BsZWFzZSBlbnRlciB5b3VyIGVtYWlsLidcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYoIWxvZ2luRm9ybS5wYXNzd29yZCkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3JNZXNzYWdlID0gJ1BsZWFzZSBlbnRlciB5b3VyIHBhc3N3b3JkLidcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3JNZXNzYWdlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICBsb2dpblVzZXIobG9naW5Gb3JtKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGxvZ2luVXNlcihsb2dpbkZvcm0pIHtcbiAgICAgICAgICAgICRzY29wZS5sb2dnaW5nSW4gPSB0cnVlO1xuICAgICAgICAgICAgdmFyIGxvZ2luSW5mbyA9IHtcbiAgICAgICAgICAgICAgICBlbWFpbCA6IGxvZ2luRm9ybS5lbWFpbCxcbiAgICAgICAgICAgICAgICBwYXNzd29yZCA6IGxvZ2luRm9ybS5wYXNzd29yZFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgVXNlclNlcnZpY2UubG9naW5Vc2VyKGxvZ2luSW5mbylcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlczogJywgcmVzKTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1vZGFsQ29uZmlybShyZXMpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgICAgICBpZihlcnIuZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yTWVzc2FnZSA9IGVyci5kYXRhO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yTWVzc2FnZSA9IFwiRXJyb3IgbG9nZ2luZyB5b3UgaW4uXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmZpbmFsbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5sb2dnaW5nSW4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgJHNjb3BlLnJlc2V0TG9naW4gPSBmdW5jdGlvbihsb2dpbkZvcm0pIHtcbiAgICAgICAgICAgICRzY29wZS5lcnJvck1lc3NhZ2UgPSBudWxsO1xuICAgICAgICAgICAgJHNjb3BlLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIGxvZ2luRm9ybS5lbWFpbCA9IG51bGw7XG4gICAgICAgICAgICBsb2dpbkZvcm0ucGFzc3dvcmQgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICB9KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3BhcnRpYWxzL2Rhc2hib2FyZC53ZWxjb21lLmh0bWwnLFxuICAgICc8ZGl2IGNsYXNzPVwiY29udGFpbmVyLWZsdWlkIGRhc2hib2FyZC13ZWxjb21lXCI+PGltZyBzcmM9XCIuLi9pbWFnZXMva2luZXRpa19sb2dvX2dyYXkucG5nXCI+PGRpdiBjbGFzcz1cIndlbGNvbWUtdGV4dFwiIG5nLWlmPVwiIWN1cnJlbnRVc2VyXCI+PGgxIGNsYXNzPVwiZGlzcGxheS0xXCI+Q29udGVudCBFZGl0b3I8L2gxPjxwIGNsYXNzPVwic2l0ZS1ib2R5LXRleHQgY2VudGVyLWJsb2NrXCI+VG8gYmVnaW4gY29udHJpYnV0aW5nIGNvbnRlbnQgdG8gS2luZXRpayBNYWcsIHBsZWFzZSBsb2dpbiBvciByZXF1ZXN0IGFjY2Vzcy48L3A+PHVsIGNsYXNzPVwid2VsY29tZS1saXN0XCI+PGxpIG5nLWNsaWNrPVwic2hvd0xvZ2luTW9kYWwoKVwiPjxhPkxvZ2luPC9hPjwvbGk+PGxpIG5nLWNsaWNrPVwic2hvd0NvbnRhY3RNb2RhbCgpXCI+PGE+UmVxdWVzdCBBY2Nlc3M8L2E+PC9saT48L3VsPjwvZGl2PjxkaXYgY2xhc3M9XCJ3ZWxjb21lLXRleHRcIiBuZy1pZj1cImN1cnJlbnRVc2VyXCI+PGgxIGNsYXNzPVwiZGlzcGxheS0xXCI+Q29udGVudCBFZGl0b3I8L2gxPjxwIGNsYXNzPVwic2l0ZS1ib2R5LXRleHQgY2VudGVyLWJsb2NrXCI+V2VsY29tZSB0byBLaW5ldGlrIGFuZCB0aGFua3MgZm9yIGJlaW5nIGEgcGFydCEgR2V0IHN0YXJ0ZWQgYmVsb3cuPC9wPjx1bCBjbGFzcz1cIndlbGNvbWUtbGlzdFwiPjxsaSBuZy1jbGljaz1cImdvVG8oXFwnZGFzaGJvYXJkLmNvbnRlbnRcXCcsIFxcJ0NvbnRlbnRcXCcpXCI+PGE+RWRpdCBDb250ZW50PC9hPjwvbGk+PGxpIG5nLWNsaWNrPVwic2hvd1BsYWNlaG9sZGVyKClcIj48YT5UdXRvcmlhbDwvYT48L2xpPjwvdWw+PC9kaXY+PC9kaXY+Jyk7XG59XSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgRGFubnkgb24gMTEvNi8xNi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJylcbiAgLmRpcmVjdGl2ZSgnaW1hZ2VTaGFkb3cnLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3QgOiAnQScsXG4gICAgICBsaW5rIDogZnVuY3Rpb24oc2NvcGUsIGVsZW0sIGF0dHJzKSB7XG4gICAgICAgIHZhciBpbWcgPSBlbGVtWzBdO1xuICAgICAgICB2YXIgc3R5bGU7XG4gICAgICAgIHZhciBpbWdTcmM7XG5cbiAgICAgICAgZWxlbS5iaW5kKCdlcnJvcicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGF0dHJzLiRzZXQoJ3NyYycsICcuLi9pbWFnZXMvbG9nby1iYWNrdXAucG5nJyk7XG4gICAgICAgICAgaW1nU3JjID0gJy4uL2ltYWdlcy9sb2dvLWJhY2t1cC5wbmcnO1xuICAgICAgICB9KVxuXG4gICAgICAgIGF0dHJzLiRvYnNlcnZlKCdzcmMnLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgIGltZ1NyYyA9IGF0dHJzLnNyYztcbiAgICAgICAgICBpZihpbWdTcmMgIT0gJy4uL2ltYWdlcy9sb2dvLWJhY2t1cC5wbmcnKSBhZGRTaGFkb3coKTtcbiAgICAgICAgfSlcblxuICAgICAgICBmdW5jdGlvbiBhZGRTaGFkb3coKSB7XG4gICAgICAgICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgIGNvbnRhaW5lci5jbGFzc05hbWUgPSAnaW1hZ2Utc2hhZG93LWNvbnRhaW5lciBpbWFnZS1zaGFkb3cnO1xuICAgICAgICAgIGNvbnRhaW5lci5pZCA9IFwiaW1hZ2Utc2hhZG93LTBcIjtcbiAgICAgICAgICBpbWcuY2xhc3NMaXN0LnJlbW92ZSgnaW1hZ2Utc2hhZG93Jyk7XG4gICAgICAgICAgaW1nLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGNvbnRhaW5lciwgaW1nKTtcbiAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoaW1nKTtcbiAgICAgICAgICBzdHlsZSA9IFwiI2ltYWdlLXNoYWRvdy0wXCIrXCI6OmFmdGVyIHtcIitcbiAgICAgICAgICAgIFwiICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ1wiK2ltZ1NyYytcIicpO1wiK1xuICAgICAgICAgICAgXCIgIGNvbnRlbnQ6ICcnO1wiK1xuICAgICAgICAgICAgXCJ9XCI7XG4gICAgICAgICAgdmFyICRzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcbiAgICAgICAgICAkc3R5bGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoc3R5bGUpKTtcbiAgICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKCRzdHlsZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgncGFydGlhbHMvZGFzaGJvYXJkLnByb2ZpbGUuaHRtbCcsXG4gICAgJzxkaXYgY2xhc3M9XCJjb250YWluZXItZmx1aWRcIj48ZGl2IGNsYXNzPVwiY29sLXhzLTEyXCI+PGgxIGNsYXNzPVwiaGVhZGxpbmVcIj5Qcm9maWxlPC9oMT48L2Rpdj48L2Rpdj4nKTtcbn1dKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBEYW5ueSBvbiAxMS84LzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKVxuICAuZGlyZWN0aXZlKCdoYW1idXJnZXJNZW51JywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICBzY29wZToge1xuICAgICAgICBzdGF0ZTogJz0nXG4gICAgICB9LFxuICAgICAgdGVtcGxhdGVVcmw6ICdwYXJ0aWFscy9oYW1idXJnZXItbWVudS5odG1sJyxcbiAgICAgIGxpbms6IGZ1bmN0aW9uKCRzY29wZSwgJGVsZW1lbnQsICRhdHRycykge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbmdkb2Mgb2JqZWN0XG4gICAgICAgICAqIEBuYW1lIHRvZ2dsZVN0YXRlXG4gICAgICAgICAqIEBtZXRob2RPZiBuZ0hhbWJ1cmdlci5kaXJlY3RpdmU6aGFtYnVyZ2VyVG9nZ2xlXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBUb2dnbGVzIHR3byB3YXkgYm91bmQgbW9kZWwuXG4gICAgICAgICAqL1xuICAgICAgICAkc2NvcGUudG9nZ2xlU3RhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gJHNjb3BlLnN0YXRlID0gISRzY29wZS5zdGF0ZTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9O1xuICB9KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3BhcnRpYWxzL2Rhc2hib2FyZC5jb250ZW50Lmh0bWwnLFxuICAgICc8ZGl2IGNsYXNzPVwiY29udGFpbmVyLWZsdWlkXCI+PHVsIGNsYXNzPVwiY29udGVudC1saXN0XCI+PGxpIG5nLXJlcGVhdD1cImNvbnRlbnQgaW4gc2l0ZUNvbnRlbnRcIiBjbGFzcz1cInNpdGUtY2FyZCBjb250ZW50LWNhcmQgY29sLXhzLTEwIGNvbC1zbS02IGNvbC1tZC00XCI+PGhlYWRlciBjbGFzcz1cImNvbnRlbnQtaW1hZ2VcIiBuZy1zdHlsZT1cIntcXCdiYWNrZ3JvdW5kLWltYWdlXFwnIDogXFwndXJsKFxcJyArIGNvbnRlbnQuaGVhZGVySW1hZ2UgKyBcXCcpXFwnfVwiPjxzcGFuIGNsYXNzPVwiY29udGVudC10eXBlIHt7Y29udGVudC5jb250ZW50VHlwZX19LWNvbnRlbnRcIj57e2NvbnRlbnQuY29udGVudFR5cGV9fTwvc3Bhbj48L2hlYWRlcj48ZGl2IGNsYXNzPVwiY29udGVudC1pbmZvLWNvbnRhaW5lclwiPjxkaXYgY2xhc3M9XCJjb250ZW50LW1haW4taW5mb1wiPjxoMT57e2NvbnRlbnQudGl0bGV9fTwvaDE+PGgyPnt7Y29udGVudC5hdXRob3J9fTwvaDI+PC9kaXY+PHAgY2xhc3M9XCJib2R5LTFcIj57e2NvbnRlbnQuZGVzY3JpcHRpb259fTwvcD48Zm9vdGVyIGNsYXNzPVwiY29udGVudC1jYXJkLWZvb3RlclwiPjxoMT5MaXZlPC9oMT48YnV0dG9uIGNsYXNzPVwic2l0ZS1idXR0b25cIj48aDE+RWRpdDwvaDE+PC9idXR0b24+PC9mb290ZXI+PC9kaXY+PC9saT48L3VsPjwvZGl2PicpO1xufV0pO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IERhbm55IG9uIDExLzI4LzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKVxuICAuZGlyZWN0aXZlKCdjb250ZW50SGVhZGVyJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0IDogJ0UnLFxuICAgICAgdGVtcGxhdGVVcmwgOiAncGFydGlhbHMvY29udGVudC1oZWFkZXIuaHRtbCcsXG4gICAgICBzY29wZSA6IHtcbiAgICAgICAgc2VsZWN0ZWRDb250ZW50IDogJz0nXG4gICAgICB9LFxuICAgICAgbGluayA6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtLCBhdHRycykge1xuICAgICAgfVxuICAgIH1cbiAgfSlcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBEYW5ueSBvbiAxMS8yMi8xNi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJylcbiAgLmRpcmVjdGl2ZSgnY29udGVudENvbnRhaW5lcicsIGZ1bmN0aW9uKENvbnRlbnRTZXJ2aWNlLCAkcm9vdFNjb3BlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQsICRzdGF0ZSkge1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdCA6ICdFJyxcbiAgICAgIHNjb3BlIDoge1xuICAgICAgICBjb250ZW50VHlwZSA6ICdAJ1xuICAgICAgfSxcbiAgICAgIHRlbXBsYXRlVXJsIDogJ3BhcnRpYWxzL2NvbnRlbnQtY29udGFpbmVyLmh0bWwnLFxuICAgICAgbGluayA6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtLCBhdHRycykge1xuICAgICAgICBDb250ZW50U2VydmljZS5nZXRDb250ZW50KClcbiAgICAgICAgICAudGhlbihmdW5jdGlvbihjb250ZW50KSB7XG4gICAgICAgICAgICBidWlsZENvbnRlbnQoY29udGVudClcbiAgICAgICAgICB9KVxuXG4gICAgICAgIC8vc2NvcGUuc2hvd0hlcm8gPSBmYWxzZTtcbiAgICAgICAgLy8kdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gIGNvbnNvbGUubG9nKCdzaG93IGhlcm8hJyk7XG4gICAgICAgIC8vICBzY29wZS5zaG93SGVybyA9IHRydWU7XG4gICAgICAgIC8vfSwxMDApO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdzY29wZTogJywgc2NvcGUuY29udGVudFR5cGUpO1xuICAgICAgICBmdW5jdGlvbiBidWlsZENvbnRlbnQoYWxsQ29udGVudCkge1xuICAgICAgICAgIGlmKHNjb3BlLmNvbnRlbnRUeXBlID09ICdob21lJykge1xuICAgICAgICAgICAgc2NvcGUuY29udGVudCA9IGFsbENvbnRlbnQ7XG4gICAgICAgICAgICBidWlsZEhlcm8oKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2NvcGUuY29udGVudCA9IFtdO1xuICAgICAgICAgICAgZm9yKHZhciBjPTA7YzxhbGxDb250ZW50Lmxlbmd0aDtjKyspIHtcbiAgICAgICAgICAgICAgaWYoYWxsQ29udGVudFtjXS5jb250ZW50VHlwZSA9PSBzY29wZS5jb250ZW50VHlwZSkge1xuICAgICAgICAgICAgICAgIHNjb3BlLmNvbnRlbnQucHVzaChhbGxDb250ZW50W2NdKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBidWlsZEhlcm8oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuXG4gICAgICAgIGZ1bmN0aW9uIGJ1aWxkSGVybygpIHtcbiAgICAgICAgICBzY29wZS5oZXJvQ29udGVudCA9IFtdO1xuICAgICAgICAgIHZhciBsaW1pdCA9IDM7XG4gICAgICAgICAgaWYoc2NvcGUuY29udGVudC5sZW5ndGggPCAzKSB7XG4gICAgICAgICAgICBsaW1pdCA9IHNjb3BlLmNvbnRlbnQubGVuZ3RoO1xuICAgICAgICAgIH1cbiAgICAgICAgICBmb3IodmFyIGM9MDtjPGxpbWl0O2MrKykge1xuICAgICAgICAgICAgc2NvcGUuaGVyb0NvbnRlbnQucHVzaChzY29wZS5jb250ZW50W2NdKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2NvcGUuc2hvd0hlcm8gPSAoc2NvcGUuaGVyb0NvbnRlbnQubGVuZ3RoID4gMClcbiAgICAgICAgfVxuXG4gICAgICAgICRyb290U2NvcGUuJG9uKFwiJHN0YXRlQ2hhbmdlU3RhcnRcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2NvcGUuc2hvd0hlcm8gPSBmYWxzZTtcbiAgICAgICAgfSlcblxuICAgICAgICAkcm9vdFNjb3BlLiRvbihcIiRzdGF0ZUNoYW5nZVN1Y2Nlc3NcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnc2hvdyBoZXJvIScpO1xuICAgICAgICAgICAgc2NvcGUuc2hvd0hlcm8gPSB0cnVlO1xuICAgICAgICAgIH0sMjAwKVxuICAgICAgICB9KVxuXG4gICAgICAgIHNjb3BlLmdvVG8gPSBmdW5jdGlvbihjb250ZW50KSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnY29udGVudDogJywgY29udGVudCk7XG4gICAgICAgICAgaWYoY29udGVudC5jbGFzcyA9PSAnY3JlYXRvci1zZXJpZXMnKSB7XG4gICAgICAgICAgICBjb250ZW50LmNsYXNzID0gJ3ZpZXctY3JlYXRvci1zZXJpZXMnXG4gICAgICAgICAgfVxuICAgICAgICAgIENvbnRlbnRTZXJ2aWNlLnNldFNlbGVjdGVkKGNvbnRlbnQpO1xuICAgICAgICAgICRzdGF0ZS5nbygnY29udGVudCcsIHtjb250ZW50VHlwZTogY29udGVudC5jb250ZW50VHlwZSwgY29udGVudFVybCA6IGNvbnRlbnQudXJsfSlcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgfVxuICB9KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3BhcnRpYWxzL2Rhc2hib2FyZC5hZG1pbi5odG1sJyxcbiAgICAnPGRpdiBjbGFzcz1cImNvbnRhaW5lci1mbHVpZCBkYXNoYm9hcmQtYWRtaW5cIj48ZGl2IGNsYXNzPVwic2l0ZS1jYXJkIGFkbWluLWNhcmQgY29sLXhzLTUgbGlzdC1jYXJkXCI+PGhlYWRlcj48aDEgY2xhc3M9XCJzdWJoZWFkLTJcIj5UZWFtIE1lbWJlcnM8L2gxPjxpIGNsYXNzPVwiZmEgZmEtcGx1cy1jaXJjbGVcIiBuZy1jbGljaz1cInNob3dNZW1iZXJDYXJkKFxcJ25ld1xcJylcIj48L2k+PC9oZWFkZXI+PHVsIGNsYXNzPVwidGVhbS1saXN0XCI+PGxpIG5nLXJlcGVhdD1cIm1lbWJlciBpbiB0ZWFtTWVtYmVyc1wiIG5nLWNsaWNrPVwiZWRpdE1lbWJlcihtZW1iZXIpXCI+PGZpZ3VyZSBjbGFzcz1cIm1lbWJlci1pbml0YWxzXCI+PGgxIGNsYXNzPVwic3ViaGVhZC0yXCI+e3ttZW1iZXIuZmlyc3ROYW1lLmNoYXJBdCgwKX19e3ttZW1iZXIubGFzdE5hbWUuY2hhckF0KDApfX08L2gxPjwvZmlndXJlPjxkaXYgY2xhc3M9XCJtZW1iZXItaW5mb1wiPjxoMSBjbGFzcz1cInN1YmhlYWQtMlwiPnt7bWVtYmVyLmZpcnN0TmFtZX19IHt7bWVtYmVyLmxhc3ROYW1lfX08L2gxPjxoMiBjbGFzcz1cImJvZHktMVwiPnt7bWVtYmVyLmVtYWlsfX08L2gyPjxoMyBjbGFzcz1cImNhcHRpb25cIj5Sb2xlOiA8c3Bhbj57e21lbWJlci5yb2xlfX08L3NwYW4+PC9oMz48L2Rpdj48ZGl2IGNsYXNzPVwibWVtYmVyLWVkaXRcIj48aSBjbGFzcz1cImZhIGZhLXBlbmNpbFwiPjwvaT48L2Rpdj48L2xpPjwvdWw+PGRpdiBjbGFzcz1cInRlYW0tbGlzdC1jb3ZlclwiIG5nLWlmPVwidGVhbU1lbWJlcnMubGVuZ3RoID4gOFwiPjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XCJzaXRlLWNhcmQgYWRtaW4tY2FyZCBjb2wteHMtNiBjb2wteHMtb2Zmc2V0LTFcIiBuZy1zaG93PVwic2lkZU1lbWJlckNhcmRcIj48aGVhZGVyPjxoMSBjbGFzcz1cInN1YmhlYWQtMlwiPnt7c2lkZU1lbWJlckNhcmQgPT0gXFwnbmV3XFwnID8gXFwnTmV3XFwnIDogXFwnRWRpdFxcJ319IE1lbWJlcjwvaDE+PGkgY2xhc3M9XCJmYSBmYS10aW1lcy1jaXJjbGUtb1wiIG5nLWNsaWNrPVwic2hvd01lbWJlckNhcmQobnVsbClcIj48L2k+PC9oZWFkZXI+PGZvcm0gcm9sZT1cImZvcm1cIiBub3ZhbGlkYXRlIG5hbWU9XCJtZW1iZXJGb3JtXCI+PGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj48bGFiZWwgZm9yPVwiZmlyc3ROYW1lXCIgY2xhc3M9XCJsYWJlbFwiPkZpcnN0IE5hbWU8L2xhYmVsPjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgaWQ9XCJmaXJzdE5hbWVcIiBwbGFjZWhvbGRlcj1cIkZpcnN0IE5hbWVcIiBuZy1tb2RlbD1cIm1lbWJlckZvcm0uZmlyc3ROYW1lXCI+PC9kaXY+PGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj48bGFiZWwgZm9yPVwibGFzdE5hbWVcIiBjbGFzcz1cImxhYmVsXCI+TGFzdCBOYW1lPC9sYWJlbD48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIHBsYWNlaG9sZGVyPVwiTGFzdCBOYW1lXCIgaWQ9XCJsYXN0TmFtZVwiIG5nLW1vZGVsPVwibWVtYmVyRm9ybS5sYXN0TmFtZVwiPjwvZGl2PjxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+PGxhYmVsIGZvcj1cImVtYWlsXCIgY2xhc3M9XCJsYWJlbFwiPkVtYWlsPC9sYWJlbD48aW5wdXQgdHlwZT1cImVtYWlsXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBpZD1cImVtYWlsXCIgcGxhY2Vob2xkZXI9XCJFbWFpbFwiIG5nLW1vZGVsPVwibWVtYmVyRm9ybS5lbWFpbFwiPjwvZGl2PjxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+PGxhYmVsIGZvcj1cIm1lbWJlclJvbGVzXCIgY2xhc3M9XCJsYWJlbFwiPlJvbGU8L2xhYmVsPjx1bCBjbGFzcz1cImFkbWluLXJvbGVzXCIgaWQ9XCJtZW1iZXJSb2xlc1wiPjxsaSBuZy1jbGljaz1cIm1lbWJlckZvcm0ucm9sZSA9IFxcJ1N1cGVyQWRtaW5cXCdcIiBuZy1jbGFzcz1cIntcXCdzZWxlY3RlZFxcJyA6IG1lbWJlckZvcm0ucm9sZSA9PSBcXCdTdXBlckFkbWluXFwnfVwiPjxoMSBjbGFzcz1cImJvZHktMlwiPlN1cGVyPC9oMT48L2xpPjxsaSBuZy1jbGljaz1cIm1lbWJlckZvcm0ucm9sZSA9IFxcJ0FkbWluXFwnXCIgbmctY2xhc3M9XCJ7XFwnc2VsZWN0ZWRcXCcgOiBtZW1iZXJGb3JtLnJvbGUgPT0gXFwnQWRtaW5cXCd9XCI+PGgxIGNsYXNzPVwiYm9keS0yXCI+QWRtaW48L2gxPjwvbGk+PGxpIG5nLWNsaWNrPVwibWVtYmVyRm9ybS5yb2xlID0gXFwnRWRpdG9yXFwnXCIgbmctY2xhc3M9XCJ7XFwnc2VsZWN0ZWRcXCcgOiBtZW1iZXJGb3JtLnJvbGUgPT0gXFwnRWRpdG9yXFwnfVwiPjxoMSBjbGFzcz1cImJvZHktMlwiPkVkaXRvcjwvaDE+PC9saT48L3VsPjwvZGl2PjwvZm9ybT48Zm9vdGVyPjxkaXYgY2xhc3M9XCJhZG1pbi1mb290ZXItZXh0cmFzXCI+PGgxIGNsYXNzPVwidGl0bGVcIiBuZy1pZj1cImFkbWluRXJyb3JNZXNzYWdlXCI+e3thZG1pbkVycm9yTWVzc2FnZX19PC9oMT48aSBjbGFzcz1cImZhIGZhLXNwaW5uZXIgZmEtc3BpblwiIG5nLWlmPVwiIWFkbWluRXJyb3JNZXNzYWdlICYmIHNhdmluZ1wiPjwvaT48L2Rpdj48ZGl2PjxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kYW5nZXJcIiBuZy1pZj1cInNpZGVNZW1iZXJDYXJkID09IFxcJ2VkaXRcXCdcIiBuZy1jbGljaz1cImRlbGV0ZShtZW1iZXJGb3JtKVwiPkRlbGV0ZTwvYnV0dG9uPiA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIiBjbGFzcz1cImJ0biBwdXJwbGUtYnV0dG9uXCIgbmctY2xpY2s9XCJzYXZlKG1lbWJlckZvcm0pXCI+PGgxIGNsYXNzPVwiYnV0dG9uXCI+e3tzaWRlTWVtYmVyQ2FyZCA9PSBcXCduZXdcXCcgPyBcXCdDcmVhdGVcXCcgOiBcXCdTYXZlXFwnfX08L2gxPjwvYnV0dG9uPjwvZGl2PjwvZm9vdGVyPjwvZGl2PjwvZGl2PicpO1xufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3BhcnRpYWxzL2NvbnRlbnQtaGVhZGVyLmh0bWwnLFxuICAgICc8aGVhZGVyIGNsYXNzPVwiY29udGVudC1oZWFkZXJcIj48aDEgY2xhc3M9XCJkaXNwbGF5LTJcIj57e3NlbGVjdGVkQ29udGVudC50aXRsZX19PC9oMT48aDEgY2xhc3M9XCJzdWJoZWFkLTJcIiBuZy1pZj1cInNlbGVjdGVkQ29udGVudC5hdXRob3JcIj5CeSB7e3NlbGVjdGVkQ29udGVudC5hdXRob3J9fTwvaDE+PGRpdiBjbGFzcz1cImhlYWRlci1pbWFnZVwiIG5nLXN0eWxlPVwie1xcJ2JhY2tncm91bmQtaW1hZ2VcXCcgOiBcXCd1cmwoXFwnICsgc2VsZWN0ZWRDb250ZW50LmhlYWRlckltYWdlICsgXFwnKVxcJ31cIj48L2Rpdj48dWwgY2xhc3M9XCJoZWFkZXItaW5mb1wiPjxsaT48aDIgY2xhc3M9XCJ0ZXh0LWNhcGl0YWxpemUgc3ViaGVhZC0xXCI+e3tzZWxlY3RlZENvbnRlbnQuY29udGVudFR5cGV9fTwvaDI+PC9saT48bGk+PGgyIGNsYXNzPVwiY2FwdGlvblwiPnt7c2VsZWN0ZWRDb250ZW50LnB1Ymxpc2hlZERhdGUgfCBkYXRlIDogXFwnRUVFRSwgTU1NTSBkLCB5XFwnfX08L2gyPjwvbGk+PC91bD48L2hlYWRlcj4nKTtcbn1dKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBEYW5ueSBvbiAxMi8xNS8xNi5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJylcbiAgICAuY29uZmlnKGZ1bmN0aW9uICgkbG9jYXRpb25Qcm92aWRlciwgJHN0YXRlUHJvdmlkZXIsICAkdXJsUm91dGVyUHJvdmlkZXIsXG4gICAgICAgICAgICAgICAgICAgICAgJHVybE1hdGNoZXJGYWN0b3J5UHJvdmlkZXIpIHtcblxuICAgICAgICAkdXJsTWF0Y2hlckZhY3RvcnlQcm92aWRlci5jYXNlSW5zZW5zaXRpdmUodHJ1ZSk7XG4gICAgICAgICR1cmxNYXRjaGVyRmFjdG9yeVByb3ZpZGVyLnN0cmljdE1vZGUoZmFsc2UpO1xuICAgICAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvJyk7XG5cbiAgICAgICAgJHN0YXRlUHJvdmlkZXJcbiAgICAgICAgICAgIC5zdGF0ZSgnaG9tZScsIHtcbiAgICAgICAgICAgICAgICB1cmwgOiAnLycsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlciA6ICdIb21lQ3RybCcsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiAncGFydGlhbHMvaG9tZS5odG1sJ1xuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgLnN0YXRlKCdzb3VuZCcsIHtcbiAgICAgICAgICAgICAgICB1cmwgOiAnL3NvdW5kJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyIDogJ01haW5TZWN0aW9uQ3RybCcsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiAncGFydGlhbHMvbWFpbi1zZWN0aW9uLnBhcnRpYWwuaHRtbCcsXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSA6IHtcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvblRpdGxlIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ1NvdW5kJztcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvblN1YlRpdGxlIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ1NvdW5kIHNlY3Rpb24nXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3NvdW5kJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgLnN0YXRlKCdmaWxtJywge1xuICAgICAgICAgICAgICAgIHVybCA6ICcvZmlsbScsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlciA6ICdNYWluU2VjdGlvbkN0cmwnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsIDogJ3BhcnRpYWxzL21haW4tc2VjdGlvbi5wYXJ0aWFsLmh0bWwnLFxuICAgICAgICAgICAgICAgIHJlc29sdmUgOiB7XG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb25UaXRsZSA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdGaWxtJztcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvblN1YlRpdGxlIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ0ZpbG0gc2VjdGlvbidcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGUgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnZmlsbSdcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIC5zdGF0ZSgnZmFzaGlvbicsIHtcbiAgICAgICAgICAgICAgICB1cmwgOiAnL2Zhc2hpb24nLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIgOiAnTWFpblNlY3Rpb25DdHJsJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybCA6ICdwYXJ0aWFscy9tYWluLXNlY3Rpb24ucGFydGlhbC5odG1sJyxcbiAgICAgICAgICAgICAgICByZXNvbHZlIDoge1xuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uVGl0bGUgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnRmFzaGlvbic7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb25TdWJUaXRsZSA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdGYXNoaW9uIHNlY3Rpb24nXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2Zhc2hpb24nXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAuc3RhdGUoJ2N1bHR1cmUnLCB7XG4gICAgICAgICAgICAgICAgdXJsIDogJy9jdWx0dXJlJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyIDogJ01haW5TZWN0aW9uQ3RybCcsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiAncGFydGlhbHMvbWFpbi1zZWN0aW9uLnBhcnRpYWwuaHRtbCcsXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSA6IHtcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvblRpdGxlIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ0N1bHR1cmUnO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uU3ViVGl0bGUgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnQ3VsdHVyZSBzZWN0aW9uJ1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZSA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdjdWx0dXJlJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcblxuXG5cbiAgICAgICAgICAgIC5zdGF0ZSgnYWRtaW4nLCB7XG4gICAgICAgICAgICAgICAgdXJsIDogJy9hZG1pbicsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiAncGFydGlhbHMvdmlldy5hZG1pbi5odG1sJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyIDogJ0FkbWluQ3RybCdcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIC5zdGF0ZSgnZGFzaGJvYXJkJywge1xuICAgICAgICAgICAgICAgIHVybCA6ICcvZGFzaGJvYXJkJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybCA6ICdwYXJ0aWFscy92aWV3LmRhc2hib2FyZC5odG1sJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyIDogJ0Rhc2hib2FyZEN0cmwnLFxuICAgICAgICAgICAgICAgIGFic3RyYWN0IDogdHJ1ZVxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgLnN0YXRlKCdkYXNoYm9hcmQud2VsY29tZScsIHtcbiAgICAgICAgICAgICAgICB1cmwgOiAnJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybCA6ICdwYXJ0aWFscy9kYXNoYm9hcmQud2VsY29tZS5odG1sJyxcbiAgICAgICAgICAgICAgICBkYXRhIDoge1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZVRpdGxlIDogJ1dlbGNvbWUnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgLnN0YXRlKCdkYXNoYm9hcmQuYWRtaW4nLCB7XG4gICAgICAgICAgICAgICAgdXJsIDogJy9hZG1pbicsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiAncGFydGlhbHMvZGFzaGJvYXJkLmFkbWluLmh0bWwnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIgOiAnQWRtaW5DdHJsJyxcbiAgICAgICAgICAgICAgICBkYXRhIDoge1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZVRpdGxlIDogJ0FkbWluJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIC5zdGF0ZSgnZGFzaGJvYXJkLnByb2ZpbGUnLCB7XG4gICAgICAgICAgICAgICAgdXJsIDogJy9wcm9maWxlJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybCA6ICdwYXJ0aWFscy9kYXNoYm9hcmQucHJvZmlsZS5odG1sJyxcbiAgICAgICAgICAgICAgICBkYXRhIDoge1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZVRpdGxlIDogJ1Byb2ZpbGUnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgLnN0YXRlKCdkYXNoYm9hcmQuY29udGVudCcsIHtcbiAgICAgICAgICAgICAgICB1cmwgOiAnL2NvbnRlbnQnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsIDogJ3BhcnRpYWxzL2Rhc2hib2FyZC5jb250ZW50Lmh0bWwnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIgOiAnRGFzaGJvYXJkQ29udGVudEN0cmwnLFxuICAgICAgICAgICAgICAgIGRhdGEgOiB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlVGl0bGUgOiAnQ29udGVudCdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAuc3RhdGUoJ2Fib3V0Jywge1xuICAgICAgICAgICAgICAgIHVybCA6ICcvYWJvdXQnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsIDogJ3BhcnRpYWxzL2Fib3V0Lmh0bWwnXG4gICAgICAgICAgICB9KVxuXG5cblxuICAgICAgICAgICAgLnN0YXRlKCdjb250ZW50Jywge1xuICAgICAgICAgICAgICAgIHVybCA6ICcvOmNvbnRlbnRUeXBlLzpjb250ZW50VXJsJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybCA6ICdwYXJ0aWFscy92aWV3LmNvbnRlbnQuaHRtbCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlciA6ICdWaWV3Q29udGVudEN0cmwnXG4gICAgICAgICAgICB9KVxuXG5cbiAgICAgICAgJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpLmhhc2hQcmVmaXgoJyEnKTtcblxuICAgIH0pO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IERhbm55IG9uIDEyLzE1LzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKVxuICAgIC5jb25maWcoZnVuY3Rpb24ocGxhbmd1bGFyQ29uZmlnUHJvdmlkZXIpIHtcbiAgICAgICAgcGxhbmd1bGFyQ29uZmlnUHJvdmlkZXIuY2xpZW50SWQgPSAnb2VyWGY2bkJjRHU1Q29OZGFPcklHdXRWQ0tYUFl2U0InXG4gICAgfSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgRGFubnkgb24gMS8yOS8xNy5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJylcbiAgICAucnVuKGZ1bmN0aW9uKCRyb290U2NvcGUsICRzdGF0ZSwgTW9kYWxTZXJ2aWNlLCBTaWdudXBTZXJ2aWNlKSB7XG4gICAgICAgICRyb290U2NvcGUuc2hvd1NpdGUgPSBmYWxzZTtcbiAgICAgICAgJHJvb3RTY29wZS4kc3RhdGUgPSAkc3RhdGU7XG4gICAgICAgICRyb290U2NvcGUuc2hvd1NpZ251cCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgTW9kYWxTZXJ2aWNlLm9wZW5Nb2RhbCgnc2lnbnVwJywgJ0tpbmV0aWsgTWFnIEVhcmx5IEFjY2VzcycpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24obW9kYWxEYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdwcm9taXNlIHRvIGNvbnRhY3QhJywgbW9kYWxEYXRhKVxuICAgICAgICAgICAgICAgICAgICB2YXIgZm9ybURhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaXJzdE5hbWUgOiBtb2RhbERhdGEuZmlyc3ROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgZW1haWwgOiBtb2RhbERhdGEuZW1haWwsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlIDogJ0Vhcmx5QWNjZXNzJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFNpZ251cFNlcnZpY2UubmV3U2lnbnVwKGZvcm1EYXRhKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVzcG9uc2U6ICcsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2VycjogJywgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCcgbm8gdmFsdWUnKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICB9KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3BhcnRpYWxzL2NvbnRlbnQtY29udGFpbmVyLmh0bWwnLFxuICAgICc8c2VjdGlvbiBjbGFzcz1cImNvbnRlbnQtY29udGFpbmVyXCI+PGRpdiBjbGFzcz1cImhlcm8tY29udGFpbmVyXCI+PHNsaWNrIGluZmluaXRlPVwidHJ1ZVwiIHNsaWRlcy10by1zaG93PVwiMVwiIHNsaWRlcy10by1zY3JvbGw9XCIxXCIgYXJyb3dzPVwiZmFsc2VcIiBhdXRvcGxheT1cInRydWVcIiBjbGFzcz1cImNvbC14cy0xMiBoZXJvLWNvbnRlbnRcIiBwYXVzZS1vbi1ob3Zlcj1cInRydWVcIiBhdXRvcGxheS1zcGVlZD1cIjMwMDBcIiBuZy1jbGFzcz1cIntcXCdzaG93LWhlcm9cXCcgOiBzaG93SGVyb31cIj48ZGl2IGNsYXNzPVwiaGVyby1zbGlkZVwiIG5nLXJlcGVhdD1cImhlcm9JdGVtIGluIGhlcm9Db250ZW50IHRyYWNrIGJ5ICRpbmRleFwiIG5nLXN0eWxlPVwie1xcJ2JhY2tncm91bmQtaW1hZ2VcXCcgOiBcXCd1cmwoXFwnICsgaGVyb0l0ZW0uaGVhZGVySW1hZ2UgKyBcXCcpXFwnfVwiIG5nLWNsaWNrPVwiZ29UbyhoZXJvSXRlbSlcIj48ZGl2IGNsYXNzPVwiaGVyby1mb290ZXJcIj48ZGl2IGNsYXNzPVwiaGVyby1pbmZvXCI+PGgxPnt7aGVyb0l0ZW0udGl0bGV9fTwvaDE+PHAgY2xhc3M9XCJzaXRlLWJvZHktdGV4dFwiPnt7aGVyb0l0ZW0uc3ViVGl0bGV9fTwvcD48L2Rpdj48dWw+PGxpPlJlYWQgTm93PC9saT48bGkgY2xhc3M9XCJ7e2hlcm9JdGVtLmNvbnRlbnRUeXBlfX0tY29udGVudFwiPnt7aGVyb0l0ZW0uY29udGVudFR5cGV9fTwvbGk+PC91bD48L2Rpdj48L2Rpdj48L3NsaWNrPjwvZGl2PjxkaXYgbmctcmVwZWF0PVwic3ViQ29udGVudCBpbiBjb250ZW50IHRyYWNrIGJ5ICRpbmRleFwiIGNsYXNzPVwic3ViLWNvbnRlbnQgY29sLXhzLTEyIGNvbC1tZC02XCIgbmctc3R5bGU9XCJ7XFwnYmFja2dyb3VuZC1pbWFnZVxcJyA6IFxcJ3VybChcXCcgK3N1YkNvbnRlbnQuaGVhZGVySW1hZ2UgKyBcXCcpXFwnfVwiIG5nLWlmPVwiJGluZGV4ID4gMlwiIG5nLWNsaWNrPVwiZ29UbyhzdWJDb250ZW50KVwiPjxkaXYgY2xhc3M9XCJjb250ZW50LWZvb3RlclwiPjxkaXYgY2xhc3M9XCJjb250ZW50LWluZm9cIj48aDE+e3tzdWJDb250ZW50LnRpdGxlfX08L2gxPjwvZGl2Pjx1bD48bGk+UmVhZCBOb3c8L2xpPjxsaSBjbGFzcz1cInt7c3ViQ29udGVudC5jb250ZW50VHlwZX19LWNvbnRlbnRcIj57e3N1YkNvbnRlbnQuY29udGVudFR5cGV9fTwvbGk+PC91bD48L2Rpdj48L2Rpdj48L3NlY3Rpb24+Jyk7XG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgncGFydGlhbHMvYWJvdXQuaHRtbCcsXG4gICAgJzxzZWN0aW9uIGNsYXNzPVwic2VjdGlvbi13aXRoLXRvcC1uYXYgY29udGFpbmVyXCI+PGgyIGNsYXNzPVwic2l0ZS1ib2R5LXRpdGxlXCI+QWJvdXQgQ29udGVudDwvaDI+PHAgY2xhc3M9XCJzaXRlLWJvZHktdGV4dFwiPldlbGwsIHRoZSB3YXkgdGhleSBtYWtlIHNob3dzIGlzLCB0aGV5IG1ha2Ugb25lIHNob3cuIFRoYXQgc2hvd1xcJ3MgY2FsbGVkIGEgcGlsb3QuIFRoZW4gdGhleSBzaG93IHRoYXQgc2hvdyB0byB0aGUgcGVvcGxlIHdobyBtYWtlIHNob3dzLCBhbmQgb24gdGhlIHN0cmVuZ3RoIG9mIHRoYXQgb25lIHNob3cgdGhleSBkZWNpZGUgaWYgdGhleVxcJ3JlIGdvaW5nIHRvIG1ha2UgbW9yZSBzaG93cy4gU29tZSBwaWxvdHMgZ2V0IHBpY2tlZCBhbmQgYmVjb21lIHRlbGV2aXNpb24gcHJvZ3JhbXMuIFNvbWUgZG9uXFwndCwgYmVjb21lIG5vdGhpbmcuIFNoZSBzdGFycmVkIGluIG9uZSBvZiB0aGUgb25lcyB0aGF0IGJlY2FtZSBub3RoaW5nLjwvcD48L3NlY3Rpb24+Jyk7XG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgnNDA0Lmh0bWwnLFxuICAgICc8IWRvY3R5cGUgaHRtbD48aHRtbCBsYW5nPVwiZW5cIj48aGVhZD48bWV0YSBjaGFyc2V0PVwidXRmLThcIj48dGl0bGU+UGFnZSBOb3QgRm91bmQgOig8L3RpdGxlPjxzdHlsZT46Oi1tb3otc2VsZWN0aW9uIHtcXG4nICtcbiAgICAnICAgIGJhY2tncm91bmQ6ICNiM2Q0ZmM7XFxuJyArXG4gICAgJyAgICB0ZXh0LXNoYWRvdzogbm9uZTtcXG4nICtcbiAgICAnfVxcbicgK1xuICAgICdcXG4nICtcbiAgICAnOjpzZWxlY3Rpb24ge1xcbicgK1xuICAgICcgICAgYmFja2dyb3VuZDogI2IzZDRmYztcXG4nICtcbiAgICAnICAgIHRleHQtc2hhZG93OiBub25lO1xcbicgK1xuICAgICd9XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICdodG1sIHtcXG4nICtcbiAgICAnICAgIHBhZGRpbmc6IDMwcHggMTBweDtcXG4nICtcbiAgICAnICAgIGZvbnQtc2l6ZTogMjBweDtcXG4nICtcbiAgICAnICAgIGxpbmUtaGVpZ2h0OiAxLjQ7XFxuJyArXG4gICAgJyAgICBjb2xvcjogIzczNzM3MztcXG4nICtcbiAgICAnICAgIGJhY2tncm91bmQ6ICNmMGYwZjA7XFxuJyArXG4gICAgJyAgICAtd2Via2l0LXRleHQtc2l6ZS1hZGp1c3Q6IDEwMCU7XFxuJyArXG4gICAgJyAgICAtbXMtdGV4dC1zaXplLWFkanVzdDogMTAwJTtcXG4nICtcbiAgICAnfVxcbicgK1xuICAgICdcXG4nICtcbiAgICAnaHRtbCxcXG4nICtcbiAgICAnaW5wdXQge1xcbicgK1xuICAgICcgICAgZm9udC1mYW1pbHk6IFwiSGVsdmV0aWNhIE5ldWVcIiwgSGVsdmV0aWNhLCBBcmlhbCwgc2Fucy1zZXJpZjtcXG4nICtcbiAgICAnfVxcbicgK1xuICAgICdcXG4nICtcbiAgICAnYm9keSB7XFxuJyArXG4gICAgJyAgICBtYXgtd2lkdGg6IDUwMHB4O1xcbicgK1xuICAgICcgICAgcGFkZGluZzogMzBweCAyMHB4IDUwcHg7XFxuJyArXG4gICAgJyAgICBib3JkZXI6IDFweCBzb2xpZCAjYjNiM2IzO1xcbicgK1xuICAgICcgICAgYm9yZGVyLXJhZGl1czogNHB4O1xcbicgK1xuICAgICcgICAgbWFyZ2luOiAwIGF1dG87XFxuJyArXG4gICAgJyAgICBib3gtc2hhZG93OiAwIDFweCAxMHB4ICNhN2E3YTcsIGluc2V0IDAgMXB4IDAgI2ZmZjtcXG4nICtcbiAgICAnICAgIGJhY2tncm91bmQ6ICNmY2ZjZmM7XFxuJyArXG4gICAgJ31cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJ2gxIHtcXG4nICtcbiAgICAnICAgIG1hcmdpbjogMCAxMHB4O1xcbicgK1xuICAgICcgICAgZm9udC1zaXplOiA1MHB4O1xcbicgK1xuICAgICcgICAgdGV4dC1hbGlnbjogY2VudGVyO1xcbicgK1xuICAgICd9XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICdoMSBzcGFuIHtcXG4nICtcbiAgICAnICAgIGNvbG9yOiAjYmJiO1xcbicgK1xuICAgICd9XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICdoMyB7XFxuJyArXG4gICAgJyAgICBtYXJnaW46IDEuNWVtIDAgMC41ZW07XFxuJyArXG4gICAgJ31cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJ3Age1xcbicgK1xuICAgICcgICAgbWFyZ2luOiAxZW0gMDtcXG4nICtcbiAgICAnfVxcbicgK1xuICAgICdcXG4nICtcbiAgICAndWwge1xcbicgK1xuICAgICcgICAgcGFkZGluZzogMCAwIDAgNDBweDtcXG4nICtcbiAgICAnICAgIG1hcmdpbjogMWVtIDA7XFxuJyArXG4gICAgJ31cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJy5jb250YWluZXIge1xcbicgK1xuICAgICcgICAgbWF4LXdpZHRoOiAzODBweDtcXG4nICtcbiAgICAnICAgIG1hcmdpbjogMCBhdXRvO1xcbicgK1xuICAgICd9XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcvKiBnb29nbGUgcG9zc2Vzc2lvbnMtc2VhcmNoICovXFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcjZ29vZy1maXh1cmwgdWwge1xcbicgK1xuICAgICcgICAgbGlzdC1zdHlsZTogbm9uZTtcXG4nICtcbiAgICAnICAgIHBhZGRpbmc6IDA7XFxuJyArXG4gICAgJyAgICBtYXJnaW46IDA7XFxuJyArXG4gICAgJ31cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyNnb29nLWZpeHVybCBmb3JtIHtcXG4nICtcbiAgICAnICAgIG1hcmdpbjogMDtcXG4nICtcbiAgICAnfVxcbicgK1xuICAgICdcXG4nICtcbiAgICAnI2dvb2ctd20tcXQsXFxuJyArXG4gICAgJyNnb29nLXdtLXNiIHtcXG4nICtcbiAgICAnICAgIGJvcmRlcjogMXB4IHNvbGlkICNiYmI7XFxuJyArXG4gICAgJyAgICBmb250LXNpemU6IDE2cHg7XFxuJyArXG4gICAgJyAgICBsaW5lLWhlaWdodDogbm9ybWFsO1xcbicgK1xuICAgICcgICAgdmVydGljYWwtYWxpZ246IHRvcDtcXG4nICtcbiAgICAnICAgIGNvbG9yOiAjNDQ0O1xcbicgK1xuICAgICcgICAgYm9yZGVyLXJhZGl1czogMnB4O1xcbicgK1xuICAgICd9XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcjZ29vZy13bS1xdCB7XFxuJyArXG4gICAgJyAgICB3aWR0aDogMjIwcHg7XFxuJyArXG4gICAgJyAgICBoZWlnaHQ6IDIwcHg7XFxuJyArXG4gICAgJyAgICBwYWRkaW5nOiA1cHg7XFxuJyArXG4gICAgJyAgICBtYXJnaW46IDVweCAxMHB4IDAgMDtcXG4nICtcbiAgICAnICAgIGJveC1zaGFkb3c6IGluc2V0IDAgMXB4IDFweCAjY2NjO1xcbicgK1xuICAgICd9XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcjZ29vZy13bS1zYiB7XFxuJyArXG4gICAgJyAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxuJyArXG4gICAgJyAgICBoZWlnaHQ6IDMycHg7XFxuJyArXG4gICAgJyAgICBwYWRkaW5nOiAwIDEwcHg7XFxuJyArXG4gICAgJyAgICBtYXJnaW46IDVweCAwIDA7XFxuJyArXG4gICAgJyAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xcbicgK1xuICAgICcgICAgY3Vyc29yOiBwb2ludGVyO1xcbicgK1xuICAgICcgICAgYmFja2dyb3VuZC1jb2xvcjogI2Y1ZjVmNTtcXG4nICtcbiAgICAnICAgIGJhY2tncm91bmQtaW1hZ2U6IC13ZWJraXQtbGluZWFyLWdyYWRpZW50KHJnYmEoMjU1LDI1NSwyNTUsMCksICNmMWYxZjEpO1xcbicgK1xuICAgICcgICAgYmFja2dyb3VuZC1pbWFnZTogLW1vei1saW5lYXItZ3JhZGllbnQocmdiYSgyNTUsMjU1LDI1NSwwKSwgI2YxZjFmMSk7XFxuJyArXG4gICAgJyAgICBiYWNrZ3JvdW5kLWltYWdlOiAtbXMtbGluZWFyLWdyYWRpZW50KHJnYmEoMjU1LDI1NSwyNTUsMCksICNmMWYxZjEpO1xcbicgK1xuICAgICcgICAgYmFja2dyb3VuZC1pbWFnZTogLW8tbGluZWFyLWdyYWRpZW50KHJnYmEoMjU1LDI1NSwyNTUsMCksICNmMWYxZjEpO1xcbicgK1xuICAgICcgICAgLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lO1xcbicgK1xuICAgICcgICAgLW1vei1hcHBlYXJhbmNlOiBub25lO1xcbicgK1xuICAgICcgICAgYXBwZWFyYW5jZTogbm9uZTtcXG4nICtcbiAgICAnfVxcbicgK1xuICAgICdcXG4nICtcbiAgICAnI2dvb2ctd20tc2I6aG92ZXIsXFxuJyArXG4gICAgJyNnb29nLXdtLXNiOmZvY3VzIHtcXG4nICtcbiAgICAnICAgIGJvcmRlci1jb2xvcjogI2FhYTtcXG4nICtcbiAgICAnICAgIGJveC1zaGFkb3c6IDAgMXB4IDFweCByZ2JhKDAsIDAsIDAsIDAuMSk7XFxuJyArXG4gICAgJyAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjhmOGY4O1xcbicgK1xuICAgICd9XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcjZ29vZy13bS1xdDpob3ZlcixcXG4nICtcbiAgICAnI2dvb2ctd20tcXQ6Zm9jdXMge1xcbicgK1xuICAgICcgICAgYm9yZGVyLWNvbG9yOiAjMTA1Y2I2O1xcbicgK1xuICAgICcgICAgb3V0bGluZTogMDtcXG4nICtcbiAgICAnICAgIGNvbG9yOiAjMjIyO1xcbicgK1xuICAgICd9XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICdpbnB1dDo6LW1vei1mb2N1cy1pbm5lciB7XFxuJyArXG4gICAgJyAgICBwYWRkaW5nOiAwO1xcbicgK1xuICAgICcgICAgYm9yZGVyOiAwO1xcbicgK1xuICAgICd9PC9zdHlsZT48L2hlYWQ+PGJvZHk+PGRpdiBjbGFzcz1cImNvbnRhaW5lclwiPjxoMT5Ob3QgZm91bmQgPHNwYW4+Oig8L3NwYW4+PC9oMT48cD5Tb3JyeSwgYnV0IHRoZSBwYWdlIHlvdSB3ZXJlIHRyeWluZyB0byB2aWV3IGRvZXMgbm90IGV4aXN0LjwvcD48cD5JdCBsb29rcyBsaWtlIHRoaXMgd2FzIHRoZSByZXN1bHQgb2YgZWl0aGVyOjwvcD48dWw+PGxpPmEgbWlzdHlwZWQgYWRkcmVzczwvbGk+PGxpPmFuIG91dC1vZi1kYXRlIGxpbms8L2xpPjwvdWw+PHNjcmlwdD52YXIgR09PR19GSVhVUkxfTEFORyA9IChuYXZpZ2F0b3IubGFuZ3VhZ2UgfHwgXFwnXFwnKS5zbGljZSgwLDIpLEdPT0dfRklYVVJMX1NJVEUgPSBsb2NhdGlvbi5ob3N0Ozwvc2NyaXB0PjxzY3JpcHQgc3JjPVwiLy9saW5raGVscC5jbGllbnRzLmdvb2dsZS5jb20vdGJwcm94eS9saC93bS9maXh1cmwuanNcIj48L3NjcmlwdD48L2Rpdj48L2JvZHk+PC9odG1sPicpO1xufV0pO1xuIl19
