/**
 * Created by Danny on 12/15/16.
 */
angular.module('freqCultureApp', [
    'ngAnimate',
    'ngCookies',
    'ngResource',
    'ui.router',
    'ngTouch',
    'ng-fastclick',
    'slickCarousel',
    'plangular',
    'textAngular'
]);

/**
 * Created by Danny on 12/24/16.
 */
angular.module('freqCultureApp')
    .service('UserService', function($http) {

        var updateUser = function(updates) {
            return $http({
                method : 'PUT',
                url : 'api/user/updateUser/' + updates._id,
                data : updates
            })
        }

        return {
            updateUser : updateUser
        }
    })

/**
 * Created by Danny on 1/29/17.
 */
angular.module('freqCultureApp')
    .service('SignupService', function($http) {
        var newSignup = function(signupData) {
            return $http({
                method : 'POST',
                url : 'api/signup/newSignup',
                data : signupData
            })
        }

        return {
            newSignup : newSignup
        }
    })

/**
 * Created by Danny on 12/24/16.
 */
angular.module('freqCultureApp')
    .service('ModalService', function($rootScope, $q, $timeout) {

        var partialUrls = {
            'login' : 'partials/modal-login.html',
            'contact' : 'partials/modal-contact.html',
            'confirm' : 'partials/modal-confirm.html',
            'signup' : 'partials/modal-signup.html'
        }

        var _modal;
        var closeModal;

        $timeout(function() {
            _modal = $('#siteModal');
            _modal.on('hide.bs.modal', function(e) {
                closeModal(e);
            })
        },100)

        // Global hide modal listener


        return {

            // Returns a promise which is resolved when the modal closes.
            openModal : function(type, modalTitle) {
                var deferred = $q.defer();
                $rootScope.modalTemplate = partialUrls[type];
                $rootScope.modalTitle = modalTitle;
                $rootScope.modalConfirm = function(data) {
                    deferred.resolve(data);
                    _modal.modal('hide');
                };

                console.log('modal: ', _modal)
                _modal.modal('show');

                closeModal = function(e) {
                    deferred.reject();
                }
                return deferred.promise;
            }
        }
    })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/view.dashboard.html',
    '<section class="fluid-container dashboard-view"><nav class="dashboard-nav"><div class="nav-logo" ng-click="goTo(\'home\')"><img src="../images/frequency_culture_white_trans.png"></div><div class="dashboard-user"><div class="user-container"><figure class="user-initials"><h1 class="subhead-2" ng-if="false">DF</h1><i class="fa fa-exclamation-triangle"></i></figure><div class="user-info"><h1 class="subhead-2" ng-if="currentUser">{{currentUser.firstName + \' \' + currentUser.lastName}}</h1><h1 class="subhead-2" ng-if="!currentUser" ng-click="showLoginModal()">Please login.</h1><ul><li ng-if="currentUser"><a>Settings</a></li><li ng-if="currentUser"><a>Logout</a></li><li ng-if="!currentUser" ng-click="showLoginModal()"><a>Login</a></li></ul></div></div></div><ul class="dashboard-menu"><li ng-class="{active: $state.includes(\'dashboard.admin\')}" ng-click="goTo(\'dashboard.admin\', \'Admin\')"><i class="fa fa-users"></i> <a class="subhead-2">Admin</a></li><li ng-class="{active: $state.includes(\'dashboard.profile\')}" ng-click="goTo(\'dashboard.profile\', \'Profile\')"><i class="fa fa-address-card"></i> <a class="subhead-2">Profile</a></li><li ng-class="{active: $state.includes(\'dashboard.content\')}" ng-click="goTo(\'dashboard.content\', \'Content\')"><i class="fa fa-list"></i> <a class="subhead-2">Content</a></li></ul><footer class="admin-menu-footer" ng-click="goTo(\'home\')"><i class="fa fa-arrow-left" aria-hidden="true"></i> <a class="subhead-2">Back To Site</a></footer></nav><header class="dashboard-header"><h1 class="headline" ng-click="goTo(\'dashboard.welcome\', \'Welcome\')">Dashboard</h1><h2 class="headline" id="muted-text" ng-click="goTo(\'dashboard.profile\', \'Profile\')">/ {{selectedView}}</h2></header><div class="dashboard-body" ng-class="{\'gray-body\' : !$state.includes(\'dashboard.welcome\')}"><div class="ui-view"></div></div></section>');
}]);

/**
 * Created by Danny on 11/6/16.
 */
angular.module('freqCultureApp')
  .service('ContentService', function($http, $q) {
    var _siteContent,
      _selectedContent;


    var setContent = function(content, callback) {
      _siteContent = content;
      if(callback) {
        callback(content);
      }
    }

    var getContent = function(content) {
      var deferred = $q.defer();
      if(!_siteContent) {
        initContent(function(content) {
          console.log('content: ', content);
          deferred.resolve(content);
        })
      } else {
        deferred.resolve(_siteContent);
      }

      return deferred.promise;
    }

    var initContent = function(callback) {
      $http.get('api/siteContent/allContent')
        .then(function(results){
          setContent(results.data, callback);
        })
    }

    function formatContent(content, callback) {
      var formattedContent = [];
        console.log('content: ', content);
      //for(var key in content) {
      //  angular.forEach(content[key], function (item) {
      //    item.stateName = (item.stateName || item.url).toLowerCase();
      //    item.urlPrefix = '/' + key + '/' + item.url;
      //    item.href = item.url;
      //    if(key == 'articles') {
      //      item.src = 'views/view.article.html';
      //    } else if(key == 'creator-series') {
      //      item.src = "views/view.creator-series.html";
      //    }
      //    formattedContent.push(item);
      //  });
      //}
      setContent(formattedContent, callback);
    }

    var setSelected = function(content) {
      _selectedContent = content;
    }

    var getSelected = function() {
      return _selectedContent;
    }

    var findContent = function(selectedHref) {
      var deferred = $q.defer();
      if(!_selectedContent) {
        initContent(function(content) {
          for(var c=0;c<content.length;c++) {
            if(content[c].href == selectedHref) {
              return deferred.resolve(content[c]);
            }
          }
        })
      } else {
        return deferred.resolve(_selectedContent);
      }
      return deferred.promise;
    }



      var newContent = function(newContent) {
          return $http({
              method : 'POST',
              url : 'api/siteContent/',
              data : newContent
          })
      }

      var updateContent = function(content) {
          return $http({
              method : 'PUT',
              url : 'api/siteContent/' + content._id,
              data : content
          })
      }

      var deleteContent = function(content) {
          return $http({
              method : 'DELETE',
              url : 'api/siteContent/' + content._id
          })
      }

    return {
      setContent : setContent,
      getContent : getContent,
      initContent : initContent,
      setSelected : setSelected,
      getSelected : getSelected,
      findContent : findContent,
      newContent : newContent,
      updateContent : updateContent,
      deleteContent : deleteContent
    }
  })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/view.content.html',
    '<section class="section-with-top-nav container"><content-header selected-content="selectedContent"></content-header><div class="content-section" ng-repeat="contentSection in selectedContent.contentSections"><img class="content-image" ng-if="contentSection.headerImage " ng-src="{{contentSection.headerImage}}"><p class="site-body-text center-block" ng-class="{\'indent-paragraph\' : $first, \'sub-paragraph\' : !$first}">{{contentSection.content}}</p><img class="content-image" ng-if="contentSection.footerImage " ng-src="{{contentSection.footerImage}}"></div></section>');
}]);

/**
 * Created by Danny on 12/25/16.
 */
angular.module('freqCultureApp')
    .service('AdminService', function($http, $q) {

        var _allUsers;
        var newUser = function(newUser) {
            return $http({
                method : 'POST',
                url : 'api/user/newUser',
                data : newUser
            })
        }

        var allUsers = function() {
            if(!_allUsers) {
                return $http({
                    method: 'GET',
                    url : 'api/user/allUsers'
                })
                    .then(function(response) {
                        _allUsers = response.data;
                        return _allUsers
                    })
            } else {
                var deferred = $q.defer();
                deferred.resolve(_allUsers);
                return deferred.promise;
            }
        }

        var deleteUser = function(userId) {
            return $http({
                method: 'DELETE',
                url : 'api/user/' + userId
            })
        }

        return {
            newUser : newUser,
            allUsers : allUsers,
            deleteUser : deleteUser
        }
    })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/view.admin.html',
    '<section class="fluid-container admin-view"><nav class="admin-nav"><div class="nav-logo" ng-click="goTo(\'home\')"><img src="../images/frequency_culture_white_trans.png"></div><div class="admin-user"><div class="user-container"><figure class="user-initials"><h1 class="subhead-2" ng-if="false">DF</h1><i class="fa fa-exclamation-triangle"></i></figure><div class="user-info"><h1 class="subhead-2" ng-if="currentUser">{{currentUser.firstName + \' \' + currentUser.lastName}}</h1><h1 class="subhead-2" ng-if="!currentUser" data-toggle="modal" data-target="#loginModal">Please login.</h1><ul><li ng-if="currentUser"><a>Settings</a></li><li ng-if="currentUser"><a>Logout</a></li><li ng-if="!currentUser" data-toggle="modal" data-target="#loginModal"><a>Login</a></li></ul></div></div></div></nav><header class="admin-header"><h1 class="headline">Dashboard</h1></header></section><div class="modal fade admin-modal" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h1 class="title">Login</h1></div><div class="modal-body"><div class="row"><div class="col-xs-6 col-xs-offset-3 col-sm-6 col-sm-offset-0 form-group"><label for="userEmail" class="label">Email</label><input type="email" class="form-control" id="userEmail" placeholder="Email"></div><div class="col-xs-6 col-xs-offset-3 col-sm-6 col-sm-offset-0 form-group"><label for="userPassword" class="label">Password</label><input type="password" class="form-control" id="userPassword" placeholder="Password"></div></div></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal"><h1 class="button">Cancel</h1></button> <button type="button" class="btn purple-button"><h1 class="button">Login</h1></button></div></div></div></div>');
}]);

/**
 * Created by Danny on 11/27/16.
 */
angular.module('freqCultureApp')
  .controller('ViewContentCtrl', function($scope, ContentService, $stateParams, $window) {


    $scope.selectedContent = ContentService.getSelected();

    if(!$scope.selectedContent) {
      ContentService.findContent($stateParams.contentHref)
        .then(function(selected) {
          $scope.selectedContent = selected;
          $scope.selectedContent.publishDate = new Date($scope.selectedContent.date);
        })
    } else {
      $scope.selectedContent.publishDate = new Date($scope.selectedContent.date);
    }
  })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/site-modal.html',
    '<div class="modal fade dashboard-modal" id="siteModal" tabindex="-1" role="dialog"><div class="modal-dialog" role="document"><div class="modal-content"><div ng-include="modalTemplate"></div></div></div></div>');
}]);

/**
 * Created by Danny on 12/19/16.
 */
angular.module('freqCultureApp')
    .controller('MainSectionCtrl', function($scope, sectionTitle, sectionSubTitle, contentType) {
        console.log('main section');
        $scope.sectionTitle = sectionTitle;
        $scope.sectionSubTitle = sectionSubTitle;
        $scope.contentType = contentType;
    })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/site-footer.html',
    '<footer class="footer" ng-if="!state.includes(\'dashboard\')"><div class="footer-container"><nav class="footer-links"><div class="links-container"><h1 class="site-list-title">Site</h1><ul><li><a ui-sref="home" class="site-list-item">Home</a></li><li><a ui-sref="sound" class="site-list-item">Sound</a></li><li><a ui-sref="film" class="site-list-item">Film</a></li><li><a ui-sref="fashion" class="site-list-item">Fashion</a></li><li><a ui-sref="culture" class="site-list-item">Culture</a></li></ul></div><div class="links-container"><h1 class="site-list-title">About</h1><ul><li ui-sref="about" class="site-list-item"><a>About</a></li><li><a href="mailto:Danny@FrequencyCulture.com, Ben@FrequencyCulture" class="site-list-item">Contact</a></li><li><a href="mailto:Danny@FrequencyCulture.com, Ben@FrequencyCulture" class="site-list-item">Submissions</a></li><li><a href="mailto:Danny@FrequencyCulture.com, Ben@FrequencyCulture" class="site-list-item">Advertise</a></li></ul></div><div class="social-footer"><ul><li><i class="fa fa-facebook"></i></li><li><i class="fa fa-twitter"></i></li><li><i class="fa fa-soundcloud"></i></li></ul></div></nav><div class="bottom-footer"><h2 class="label">&copy; 2016 Frequency Culture</h2></div></div></footer>');
}]);

/**
 * Created by Danny on 11/7/16.
 */
angular.module('freqCultureApp')
  .controller('HomeCtrl', function($scope, ContentService, $state) {

    $scope.goTo = function(state, stateParams) {
      $state.go(state, stateParams);
    }


    $scope.showSignup = function() {
        console.log('signup!');
    }
  })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/site-audio.html',
    '<div class="site-audio" ng-if="!state.includes(\'dashboard\')"><div class="navbar navbar-default navbar-fixed-bottom" role="navigation"><div class="container-fluid" plangular="{{trackUrl}}" ng-if="trackUrl"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed button-default" data-toggle="collapse" data-target="#audio-player"><i class="fa fa-music"></i></button></div><div class="full-controls container hidden-xs"><ul class="audio-controls"><li><i class="fa fa-backward"></i></li><li ng-click="playPause()"><i class="fa fa-play" ng-if="player.playing !== track.src"></i> <i class="fa fa-pause" ng-if="player.playing == track.src"></i></li><li><i class="fa fa-forward"></i></li></ul><img ng-src="{{track.artwork_url}}" class="image-shadow audio-image" image-shadow><ul class="audio-info-full"><li><h1 class="label">Artist : <span>{{track.user.username}}</span></h1></li><li><h1 class="label">Track : <span>{{track.title}}</span></h1></li></ul></div><div class="hidden-sm hidden-md hidden-lg mini-controls container-fluid"><ul class="audio-controls"><li><i class="fa fa-backward"></i></li><li ng-click="playPause()"><i class="fa fa-play" ng-if="player.playing !== track.src"></i> <i class="fa fa-pause" ng-if="player.playing == track.src"></i></li><li><i class="fa fa-forward"></i></li></ul></div><div class="collapse navbar-collapse" id="audio-player"><ul class="nav navbar-nav container hidden-md hidden-lg hidden-sm mini-audio"><div class="audio-info"><img ng-src="{{track.artwork_url}}" class="image-shadow audio-image" image-shadow><ul><li><h1 class="label">Artist : <span>{{track.user.username}}</span></h1></li><li><h1 class="label">Title : <span>{{track.title}}</span></h1></li></ul></div></ul></div></div></div></div>');
}]);

/**
 * Created by Danny on 12/24/16.
 */
angular.module('freqCultureApp')
    .controller('DashboardCtrl', function($scope, $timeout, ContentService,
                                          $state, ModalService) {

        $scope.selectedView = $state.current.data.stateTitle;
        $scope.errorMessage = null;
        $scope.loading = false;
        $scope.$state = $state;

        console.log('$state: ', $state);
        console.log('current: ', $state.includes('dashboard'))

        $scope.currentUser = undefined;

        $scope.goTo = function(state, changeTitle) {
            if(changeTitle) {
                $scope.selectedView = changeTitle
            }
            $state.go(state);
        }

        $scope.loggedIn = function(loggedInUser) {
            console.log('loggedInUser: ', loggedInUser);
        }

        $scope.showContactModal = function() {
            ModalService.openModal('contact', 'Content Editor Request')
                .then(function(modalData) {
                    console.log('promise to contact!', modalData)
                })
                .catch(function() {
                    console.log(' no value');
                })
        }

        $scope.showLoginModal = function() {
            ModalService.openModal('login')
                .then($scope.loggedIn)
                .catch(function() {
                    console.log(' no value');
                })
        }

        $scope.resetLogin = function() {
            $scope.errorMessage = null;
            $scope.loading = false;
            $scope.loginForm.email = null;
            $scope.loginForm.password = null;
        }



    })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/sidemenu.html',
    '<nav class="mobile-menu" ng-class="{\'show-menu\' : showMenu}"><div class="nav-container"><ul><h1 class="site-list-title">Site</h1><li><a ui-sref="sound" class="site-list-item">Sound</a></li><li><a ui-sref="film" class="site-list-item">Film</a></li><li><a ui-sref="fashion" class="site-list-item">Fashion</a></li><li><a ui-sref="culture" class="site-list-item">Culture</a></li></ul><ul><h1 class="site-list-title">About</h1><li><a href="" class="site-list-item">About</a></li><li><a href="mailto:Danny@FrequencyCulture.com, Ben@FrequencyCulture" class="site-list-item">Contact</a></li><li><a href="mailto:Danny@FrequencyCulture.com, Ben@FrequencyCulture" class="site-list-item">Submissions</a></li><li><a href="mailto:Danny@FrequencyCulture.com, Ben@FrequencyCulture" class="site-list-item">Advertise</a></li></ul></div><div class="social-container"><ul><li><i class="fa fa-facebook"></i></li><li><i class="fa fa-twitter"></i></li><li><i class="fa fa-soundcloud"></i></li></ul></div></nav>');
}]);

/**
 * Created by Danny on 12/25/16.
 */
angular.module('freqCultureApp')
    .controller('DashboardContentCtrl', function($scope, $timeout, ContentService, $state) {
        console.log('scope: ', $scope);

        $scope.selectedView = 'menu';
        $scope.loading = false;

        $scope.currentUser = undefined;

        var contentFields = [
            'author',
            'title',
            'contentType',
            'subTitle',
            'url',
            'headerImage',
            'tags',
            'publishedDate',
            'description',
            'contentSections',
            'quotes',
            'audioUrls',
            'socialMedia',
            'shareUrl',
            'mainContent'
        ]

        ContentService.getContent()
            .then(function(content) {
                $scope.siteContent = content;
            })

        //$timeout(function() {
        //    $scope.selectedView = 'edit';
        //}, 2000)

        $scope.changeView = function() {
            if($scope.selectedView == 'edit') $scope.selectedView = 'menu';
            else $scope.selectedView = 'edit';
        }

        $scope.goTo = function(state) {
            $state.go(state);
        }

        $scope.selectedContent = {};

        $scope.newContent = function() {
            $scope.selectedView = 'create';
            initNewContent()
        }

        $scope.editContent = function(content) {
            $scope.selectedContent = content;
            $scope.selectedView = 'edit';
        }

        $scope.cancel = function() {
            $scope.selectedView = 'menu';
        }

        function initNewContent() {
            contentFields.map(function(field) {
                $scope.selectedContent[field] = null;
            })
        }

        var newItems = {
            'tag' : '',
            'quote' : '',
            'audio' : '',
            'section' : null

        }

        $scope.addItem = function(itemType, key) {
            var newItem = newItems[itemType];
            if(!$scope.selectedContent[key]){
                $scope.selectedContent[key] = [];
            }
            $scope.selectedContent[key].push(newItem);
            console.log('new item: ', newItem);
        }

        $scope.removeItem = function(key, index) {
            $scope.selectedContent[key].splice(index, 1);
        }

        $scope.showConfirm = false;

        $scope.confirm = function(confirm) {
            $scope.showConfirm = confirm;
        }

        $scope.confirmDelete = function(content, index) {

            if(!$scope.loading) {
                $scope.loading = true;
                ContentService.deleteContent(content)
                    .then(function(res){
                        $scope.selectedView = 'menu';
                        $scope.siteContent.splice(index, 1);
                    })
                    .finally(function() {
                        $scope.loading = false;
                    })
            }
        }


        $scope.save = function() {
            console.log('selected: ', $scope.selectedContent);
            //if(!$scope.loading) {
            //    $scope.loading = true;
            //    console.log('selected', $scope.selectedContent);
            //    $scope.loading = false;
            //    if(!$scope.selectedContent._id) {
            //        ContentService.newContent($scope.selectedContent)
            //            .then(function(res) {
            //                console.log('res: ', res);
            //            })
            //            .catch(function(err) {
            //                console.log('err: ', err);
            //            })
            //            .finally(function() {
            //                $scope.loading = false;
            //                $scope.selectedView = 'menu';
            //            })
            //    } else {
            //        ContentService.updateContent($scope.selectedContent)
            //            .then(function(res) {
            //                console.log('res: ', res);
            //            })
            //            .catch(function(err) {
            //                console.log('err: ', err);
            //            })
            //            .finally(function() {
            //                $scope.loading = false;
            //                $scope.selectedView = 'menu';
            //            })
            //    }
            //}

        }

        $scope.formatUrl = function() {
            if($scope.selectedContent.title) {
                $scope.selectedContent.url = $scope.selectedContent.title.toLowerCase().replace(/\s/g, "_");
            }
        }
    })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/section-header.html',
    '<header class="section-header" id="sectionHeader"><img src="../images/kinetik_logo_purple.svg" class="logo"><ul class="header-menu"><li ng-click="goTo(\'sound\')" ng-class="{\'active-link\' : isActive(\'sound\')}"><h1 class="title">Sound</h1></li><li ng-click="goTo(\'film\')" ng-class="{\'active-link\' : isActive(\'film\')}"><h1 class="title">Film</h1></li><li ng-click="goTo(\'fashion\')" ng-class="{\'active-link\' : isActive(\'fashion\')}"><h1 class="title">Fashion</h1></li><li ng-click="goTo(\'culture\')" ng-class="{\'active-link\' : isActive(\'culture\')}"><h1 class="title">Culture</h1></li></ul></header>');
}]);

/**
 * Created by Danny on 12/18/16.
 */
angular.module('freqCultureApp')
    .controller('AdminCtrl', function($scope, $timeout, UserService, AdminService, ModalService) {

        $scope.sideMemberCard = null;
        $scope.saving = false;
        $scope.adminErrorMessage = null;

        AdminService.allUsers()
            .then(function(users) {
                console.log('users: ', users);
                $scope.teamMembers = users;
            })
            .catch(function(err) {
                console.log('err: ', err);
            })

        $scope.showMemberCard = function(type) {
            $scope.sideMemberCard = type;
            if(!type) {
                $scope.clearMemberForm();
            }
        }

        $scope.save = function(memberInfo) {
            if(!$scope.saving) {
                $scope.adminErrorMessage = null;
                if(!memberInfo.firstName) {
                    $scope.adminErrorMessage = 'Please include a first name.'
                } else if(!memberInfo.lastName) {
                    $scope.adminErrorMessage = 'Please include a last name (or initial).';
                } else if(!memberInfo.email) {
                    $scope.adminErrorMessage = 'Please include an email.';
                } else if(!memberInfo.role) {
                    $scope.adminErrorMessage = 'Please select a role.';
                } else {
                    $scope.saving = true;
                    if(memberInfo._id) {
                        console.log('update!');
                        UserService.updateUser(memberInfo)
                            .then(function(res) {
                                console.log('res', res);
                                $scope.showMemberCard(null);
                                updateUserInArray(res.data);
                            })
                            .catch(function(err) {
                                console.log('err: ', err);
                            })
                            .finally(function() {
                                $scope.saving = false;
                            })
                    } else {
                        AdminService.newUser(createUserObj(memberInfo))
                            .then(function(res) {
                                console.log('res', res);
                                $scope.teamMembers.push(res.data)
                                $scope.sideMemberCard = null;
                                $scope.clearMemberForm();
                            })
                            .catch(function(err) {
                                console.log('err: ', err);
                            })
                            .finally(function() {
                                $scope.saving = false;
                            })
                    }
                }
            }
        };

        $scope.delete = function(member) {
            console.log('delete: ', member);
            ModalService.openModal('confirm', 'Delete ' + member.firstName + '?')
                .then(function(modalData) {
                    console.log('delete: ', member);
                    $scope.saving = true;
                    AdminService.deleteUser(member._id)
                        .then(function(res) {
                            $scope.showMemberCard(null);
                            removeUserFromArray(member._id)
                        })
                        .catch(function(err) {
                            console.log('err: ', err);
                        })
                        .finally(function() {
                            $scope.saving = false;
                        })
                })
                .catch(function() {
                    console.log(' no value');
                })
        }

        $scope.editMember = function(member) {
            $scope.memberForm = angular.copy(member);
            $scope.saving = false;
            $scope.sideMemberCard = 'edit';
        }


        $scope.clearMemberForm = function() {
            $scope.adminErrorMessage = null;
            $scope.saving = false;
            $scope.memberForm.firstName = null;
            $scope.memberForm.lastName = null;
            $scope.memberForm.email = null;
            $scope.memberForm.role = null;
        };


        function createUserObj(memberInfo) {
            return {
                firstName : memberInfo.firstName,
                lastName : memberInfo.lastName,
                email : memberInfo.email,
                role : memberInfo.role
            }
        }

        function updateUserInArray(updatedUser) {
            var usersLen = $scope.teamMembers.length;
            for(var i=0;i<usersLen;i++) {
                if(updatedUser._id == $scope.teamMembers[i]._id) {
                    $scope.teamMembers[i] = updatedUser;
                    break;
                }
            }
        }

        function removeUserFromArray(userId) {
            var usersLen = $scope.teamMembers.length;
            var idx;
            for(var i=0;i<usersLen;i++) {
                if(userId == $scope.teamMembers[i]._id) {
                    idx = i;
                    break;
                }
            }
            if(idx < usersLen) {
                $scope.teamMembers.splice(idx,1);
            }
        }

    })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/navbar.html',
    '<div class="header"><nav class="navbar navbar-default navbar-inverse navbar-fixed-top main-navbar" role="navigation" ng-class="{\'visible-nav\' : showNavbar}"><div class="container"><div class="menu-logo hidden-xs" ng-click="goTo(\'home\')"><img src="../images/kinetik_name.svg"></div><ul class="full-nav hidden-xs"><li ng-click="goTo(\'sound\')" ng-class="{\'active-link\' : isActive(\'sound\')}" class="navbar-link"><h1>Sound</h1></li><li ng-click="goTo(\'film\')" class="navbar-link" ng-class="{\'active-link\' : isActive(\'film\')}"><h1>Film</h1></li><li ng-click="goTo(\'fashion\')" class="navbar-link" ng-class="{\'active-link\' : isActive(\'fashion\')}"><h1>Fashion</h1></li><li ng-click="goTo(\'culture\')" class="navbar-link" ng-class="{\'active-link\' : isActive(\'culture\')}"><h1>Culture</h1></li></ul><div class="visible-xs mobile-navbar"><img src="../images/kinetik_name.svg" ng-click="goTo(\'home\')"><hamburger-menu state="showMenu" ng-click="toggleLinks()"></hamburger-menu></div></div></nav></div>');
}]);

/**
 * Created by Danny on 12/24/16.
 */
angular.module('freqCultureApp')
    .directive('siteModal', function($rootScope) {
        return {
            restrict : 'E',
            templateUrl : 'partials/site-modal.html',
            link : function(scope, elem, attrs) {
                scope.modalTemplate = $rootScope.modalTemplate;
                scope.modalConfirm = $rootScope.modalConfirm;
            }
        }
    })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/modal-signup.html',
    '<div><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h1 class="title">Kinetik Mag Early Access</h1></div><div class="modal-body"><form role="form" novalidate name="signupForm"><div class="row"><div class="col-xs-10 col-xs-offset-1 col-sm-6 col-sm-offset-0 form-group"><label for="userEmail" class="label">Email</label><input type="email" class="form-control" id="userEmail" placeholder="Email" ng-model="signupForm.email"></div><div class="col-xs-10 col-xs-offset-1 col-sm-6 col-sm-offset-0 form-group"><label for="firstName" class="label">First Name</label><input type="text" class="form-control" id="firstName" placeholder="First Name" ng-model="signupForm.firstName"></div></div></form></div><div class="modal-footer"><div class="modal-footer-extras"><h1 class="title modal-error">{{errorMessage}}</h1><i class="fa fa-spinner fa-spin" ng-if="!errorMessage && loggingIn"></i></div><button type="button" class="btn btn-default" data-dismiss="modal"><h1 class="button">Cancel</h1></button> <button type="submit" class="btn purple-button" ng-click="$parent.modalConfirm(signupForm)"><h1 class="button">Submit</h1></button></div></div>');
}]);

/**
 * Created by Danny on 11/6/16.
 */
angular.module('freqCultureApp')
  .directive('siteFooter', function() {
    return {
      restrict : 'E',
      templateUrl : 'partials/site-footer.html'
    }
  })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/modal-login.html',
    '<div ng-controller="LoginModalCtrl" ng-init="resetLogin()"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h1 class="title">Login</h1></div><div class="modal-body"><form role="form" novalidate name="loginForm"><div class="row"><div class="col-xs-6 col-xs-offset-3 col-sm-6 col-sm-offset-0 form-group"><label for="userEmail" class="label">Email</label><input type="email" class="form-control" id="userEmail" placeholder="Email" ng-model="loginForm.email"></div><div class="col-xs-6 col-xs-offset-3 col-sm-6 col-sm-offset-0 form-group"><label for="userPassword" class="label">Password</label><input type="password" class="form-control" id="userPassword" placeholder="Password" ng-model="loginForm.password"></div></div></form></div><div class="modal-footer"><div class="modal-footer-extras"><h1 class="title modal-error">{{errorMessage}}</h1><i class="fa fa-spinner fa-spin" ng-if="!errorMessage && loggingIn"></i></div><button type="button" class="btn btn-default" data-dismiss="modal"><h1 class="button">Cancel</h1></button> <button type="submit" class="btn purple-button" ng-click="login(loginForm)"><h1 class="button">Login</h1></button></div></div>');
}]);

/**
 * Created by Danny on 11/6/16.
 */

angular.module('freqCultureApp')
  .directive('siteAudio', function() {
    return {
      restrict : 'E',
      templateUrl : 'partials/site-audio.html',
      link : function(scope, elem, attrs) {

        var clientId = 'oerXf6nBcDu5CoNdaOrIGutVCKXPYvSB';
        scope.trackUrl = 'https://soundcloud.com/itzaia/mix-machine-297-16-nov-2016-with-itzaia';

        SC.initialize({
          client_id: clientId
        });
        SC.resolve('https://soundcloud.com/itzaia/mix-machine-297-16-nov-2016-with-itzaia')
          .then(function(track) {
            //console.log('track: ', track);
          })
      }
    }
  })


angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/modal-contact.html',
    '<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h1 class="title">{{$parent.modalTitle ? $parent.modalTitle : \'Contact\'}}</h1></div><div class="modal-body"><p class="site-body-text center-block">Please fill out some details so we can get back to you.</p><form role="form" novalidate name="contactForm" class="center-block"><div class="row"><div class="col-xs-6 col-xs-offset-3 col-sm-5 col-sm-offset-1 form-group"><label for="contactFirstName" class="label">First Name</label><input type="text" class="form-control" id="contactFirstName" placeholder="First Name" ng-model="contactForm.firstName"></div><div class="col-xs-6 col-xs-offset-3 col-sm-5 col-sm-offset-0 form-group"><label for="contactLastName" class="label">Last Name</label><input type="text" class="form-control" id="contactLastName" placeholder="Last Name" ng-model="contactForm.lastName"></div></div><div class="row"><div class="col-xs-6 col-xs-offset-3 col-sm-5 col-sm-offset-1 form-group"><label for="contactEmail" class="label">Email</label><input type="email" class="form-control" id="contactEmail" placeholder="Email" ng-model="contactForm.email"></div><div class="col-xs-6 col-xs-offset-3 col-sm-5 col-sm-offset-0 form-group"><label for="contactCompany" class="label">(Optional) Company</label><input type="text" class="form-control" id="contactCompany" placeholder="Company" ng-model="contactForm.company"></div></div><div class="row"><div class="col-xs-10 col-xs-offset-1 col-sm-8 col-sm-offset-2 form-group"><label for="contactMessage" class="label">(Optional) Message</label><textarea class="form-control" id="contactMessage" rows="3" ng-model="contactForm.message"></textarea></div></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal"><h1 class="button">Cancel</h1></button> <button type="submit" class="btn purple-button" ng-click="$parent.modalConfirm(contactForm)"><h1 class="button">Submit</h1></button></div>');
}]);

/**
 * Created by Danny on 11/5/16.
 */
angular.module('freqCultureApp')
  .directive('sidemenu', function($rootScope) {
    return {
      scope: 'E',
      templateUrl : 'partials/sidemenu.html',
      link : function(scope, elem, attrs) {

        scope.showMenu = false;
        scope.toggleLinks = function() {
          var link = document.querySelector('.mobile-menu').querySelectorAll('li');
          for (var i = 0; i < link.length; i++) {
            link[i].classList.toggle('active');
          }
        }
        $rootScope.$on("$stateChangeSuccess", function(event, toState) {
          if(scope.showMenu) {
            scope.toggleLinks()
            scope.showMenu = false;
          }
        });
      }
    }
  })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/modal-confirm.html',
    '<div class="modal-header red-modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h1 class="title">{{$parent.modalTitle ? $parent.modalTitle : \'Please Confirm\'}}</h1></div><div class="modal-body">Are you sure you wish to continue? This action is permanent and cannot be undone.</div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal"><h1 class="button">Cancel</h1></button> <button type="submit" class="btn btn-danger" ng-click="$parent.modalConfirm(contactForm)">Confirm</button></div>');
}]);

/**
 * Created by Danny on 11/8/16.
 */
angular.module('freqCultureApp')
  .directive('sectionHeader', function($state, $window, $rootScope) {
    return {
      restrict : 'E',
      templateUrl : 'partials/section-header.html',
      link : function(scope, elem, attrs) {
        //scope.headerStyle = {
        //  'background-repeat' : 'no-repeat',
        //  'background-position' : 'center',
        //  'background-size' : 'cover'
        //
        //};
        //scope.state = $state;
        //var windowWidth = $window.innerWidth,
        //  stateName;
        //
        //// In case of screen resizes, make sure we use correct background image
        //angular.element($window).bind('resize', function () {
        //  windowWidth = $window.innerWidth;
        //  if(stateName != 'home') getHeaderImage();
        //});
        //
        //$rootScope.$on("$stateChangeSuccess", function(event, toState) {
        //  stateName = toState.name;
        //  if(stateName != 'home') getHeaderImage();
        //});
        //function getHeaderImage() {
        //  var imageLocation = stateName + '-header.png';
        //  if(windowWidth < 768) imageLocation = 'mobile-' + imageLocation;
        //  imageLocation = 'url(../images/' + imageLocation + ')';
        //  scope.headerStyle['background-image'] = imageLocation;
        //}
        scope.isActive = function(state) {
          return $state.current.name == state;
        }
        scope.goTo = function(state) {
          $state.go(state);
        }
      }
    }
  })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/main-section.partial.html',
    '<section class="section-with-top-nav container"><h1 class="display-2">{{sectionTitle}}</h1><h2 class="subhead-1">{{sectionSubTitle}}</h2><content-container content-type="{{contentType}}"></content-container></section>');
}]);

/**
 * Created by Danny on 10/10/16.
 */
angular.module('freqCultureApp')
  .directive('navbar', function($window, $rootScope, $state, $timeout) {
    return {
      scope: 'E',
      templateUrl : 'partials/navbar.html',
      link : function(scope, elem, attrs) {

        /*
         Always Show Navbar on mobile screens

         Monitor Width in case of screen resizers!

         Hide navbar on home view non-mobile
          */
        scope.state = $state;

        var windowWidth = $window.innerWidth;
        scope.showNavbar = true;

        angular.element($window).bind('resize', function () {
          windowWidth = $window.innerWidth;
          scope.showNavbar = (windowWidth < 768);
          if(scope.state.current.name == 'home'&& windowWidth >= 768 ) watchHomeScroll();

        });
        $rootScope.$on("$stateChangeSuccess", function(event, toState) {
          if(windowWidth < 768) {
            scope.showNavbar = true;
          } else {
            scope.showNavbar = (toState.name !== 'home' && windowWidth >= 768);
          }
          if(toState.name == 'home' && windowWidth >= 768) watchHomeScroll()
          else angular.element($window).unbind('scroll');

          if(scope.state.includes('dashboard')) scope.showNavbar = false;
        });

        scope.goTo = function(state) {
          $state.go(state);
        }

        var headerHeight;
        function watchHomeScroll() {
          $timeout(function() {
            headerHeight = document.getElementById('sectionHeader').clientHeight;
          }, 100);

          angular.element($window).bind("scroll", function(e) {
            scope.$apply(function() {
              scope.showNavbar = ($window.scrollY > headerHeight)
            });
          })
        }

        scope.isActive = function(state) {
          return $state.current.name == state;
        }
      }
    }
  })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/home.html',
    '<section-header class="hidden-xs"></section-header><section class="section-with-top-nav container"><content-container content-type="home"></content-container></section>');
}]);

/**
 * Created by Danny on 12/25/16.
 */
angular.module('freqCultureApp')
    .controller('LoginModalCtrl', function($scope, $timeout) {

        $scope.errorMessage = null;
        $scope.loggingIn = false;
        $scope.loginForm = {};


        $scope.login = function(loginForm) {
            if(!$scope.loggingIn) {
                $scope.loggingIn = false;
                if(!loginForm.email) {
                    $scope.errorMessage = 'Please enter your email.'
                } else if(!loginForm.password) {
                    $scope.errorMessage = 'Please enter your password.'
                } else {
                    $scope.errorMessage = undefined;
                    $scope.loggingIn = true;
                    $timeout(function() {
                        $scope.modalConfirm(loginForm);
                    }, 3000);
                }
            }
        }

        $scope.resetLogin = function() {
            $scope.errorMessage = null;
            $scope.loading = false;
            $scope.loginForm.email = null;
            $scope.loginForm.password = null;
        }
        $scope.resetLogin();

    })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/hamburger-menu.html',
    '<div class="material-design-hamburger" ng-click="toggleState()"><button class="material-design-hamburger__icon"><span class="material-design-hamburger__layer" ng-class="\'material-design-hamburger__icon--\' + (state ? \'to\' : \'from\') + \'-arrow\'"></span></button></div>');
}]);

/**
 * Created by Danny on 11/6/16.
 */
angular.module('freqCultureApp')
  .directive('imageShadow', function() {
    return {
      restrict : 'A',
      link : function(scope, elem, attrs) {
        var img = elem[0];
        var style;
        var imgSrc;

        elem.bind('error', function() {
          attrs.$set('src', '../images/logo-backup.png');
          imgSrc = '../images/logo-backup.png';
        })

        attrs.$observe('src', function(value) {
          imgSrc = attrs.src;
          if(imgSrc != '../images/logo-backup.png') addShadow();
        })

        function addShadow() {
          var container = document.createElement('div');
          container.className = 'image-shadow-container image-shadow';
          container.id = "image-shadow-0";
          img.classList.remove('image-shadow');
          img.parentNode.insertBefore(container, img);
          container.appendChild(img);
          style = "#image-shadow-0"+"::after {"+
            "  background-image: url('"+imgSrc+"');"+
            "  content: '';"+
            "}";
          var $style = document.createElement("style");
          $style.appendChild(document.createTextNode(style));
          document.head.appendChild($style);
        }
      }
    }
  })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/dashboard.welcome.html',
    '<div class="container-fluid dashboard-welcome"><img src="../images/frequency_culture_name_and_logo_gray.png"><div class="welcome-text"><h1 class="display-1">Content Editor</h1><p class="site-body-text center-block">To begin contributing content to Frequency Culture, please login or request access.</p><ul class="welcome-list"><li ng-click="showLoginModal()"><a>Login</a></li><li ng-click="showContactModal()"><a>Request Access</a></li></ul></div></div>');
}]);

/**
 * Created by Danny on 11/8/16.
 */
angular.module('freqCultureApp')
  .directive('hamburgerMenu', function() {
    return {
      restrict: 'E',
      scope: {
        state: '='
      },
      templateUrl: 'partials/hamburger-menu.html',
      link: function($scope, $element, $attrs) {

        /**
         * @ngdoc object
         * @name toggleState
         * @methodOf ngHamburger.directive:hamburgerToggle
         * @description Toggles two way bound model.
         */
        $scope.toggleState = function() {
          return $scope.state = !$scope.state;
        };
      }
    };
  })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/dashboard.profile.html',
    '<div class="container-fluid"><div class="col-xs-12"><h1 class="headline">Profile</h1></div></div>');
}]);

/**
 * Created by Danny on 11/28/16.
 */
angular.module('freqCultureApp')
  .directive('contentHeader', function() {
    return {
      restrict : 'E',
      templateUrl : 'partials/content-header.html',
      scope : {
        selectedContent : '='
      },
      link : function(scope, elem, attrs) {
      }
    }
  })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/dashboard.content.html',
    '<div class="container-fluid"><div class="col-xs-12"><h1 class="headline">Content</h1></div></div>');
}]);

/**
 * Created by Danny on 11/22/16.
 */
angular.module('freqCultureApp')
  .directive('contentContainer', function(ContentService, $rootScope,
                                          $timeout, $state) {
    return {
      restrict : 'E',
      scope : {
        contentType : '@'
      },
      templateUrl : 'partials/content-container.html',
      link : function(scope, elem, attrs) {
        ContentService.getContent()
          .then(function(content) {
            buildContent(content)
          })

        //scope.showHero = false;
        //$timeout(function() {
        //  console.log('show hero!');
        //  scope.showHero = true;
        //},100);
          console.log('scope: ', scope.contentType);
        function buildContent(allContent) {
          if(scope.contentType == 'home') {
            scope.content = allContent;
            buildHero();
          } else {
            scope.content = [];
            for(var c=0;c<allContent.length;c++) {
              if(allContent[c].contentType == scope.contentType) {
                scope.content.push(allContent[c])
              }
            }
            buildHero();
          }
        }


        function buildHero() {
          scope.heroContent = [];
          var limit = 3;
          if(scope.content.length < 3) {
            limit = scope.content.length;
          }
          for(var c=0;c<limit;c++) {
            scope.heroContent.push(scope.content[c]);
          }
          scope.showHero = (scope.heroContent.length > 0)
        }

        $rootScope.$on("$stateChangeStart", function() {
          scope.showHero = false;
        })

        $rootScope.$on("$stateChangeSuccess", function() {
          $timeout(function() {
            console.log('show hero!');
            scope.showHero = true;
          },200)
        })

        scope.goTo = function(content) {
            console.log('content: ', content);
          if(content.class == 'creator-series') {
            content.class = 'view-creator-series'
          }
          ContentService.setSelected(content);
          $state.go('content', {contentType: content.contentType, contentUrl : content.url})
        }
      }

    }
  })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/dashboard.admin.html',
    '<div class="container-fluid dashboard-admin"><div class="site-card admin-card col-xs-5 list-card"><header><h1 class="subhead-2">Team Members</h1><i class="fa fa-plus-circle" ng-click="showMemberCard(\'new\')"></i></header><ul class="team-list"><li ng-repeat="member in teamMembers" ng-click="editMember(member)"><figure class="member-initals"><h1 class="subhead-2">{{member.firstName.charAt(0)}}{{member.lastName.charAt(0)}}</h1></figure><div class="member-info"><h1 class="subhead-2">{{member.firstName}} {{member.lastName}}</h1><h2 class="body-1">{{member.email}}</h2><h3 class="caption">Role: <span>{{member.role}}</span></h3></div><div class="member-edit"><i class="fa fa-pencil"></i></div></li></ul><div class="team-list-cover" ng-if="teamMembers.length > 8"></div></div><div class="site-card admin-card col-xs-6 col-xs-offset-1" ng-show="sideMemberCard"><header><h1 class="subhead-2">{{sideMemberCard == \'new\' ? \'New\' : \'Edit\'}} Member</h1><i class="fa fa-times-circle-o" ng-click="showMemberCard(null)"></i></header><form role="form" novalidate name="memberForm"><div class="form-group"><label for="firstName" class="label">First Name</label><input type="text" class="form-control" id="firstName" placeholder="First Name" ng-model="memberForm.firstName"></div><div class="form-group"><label for="lastName" class="label">Last Name</label><input type="text" class="form-control" placeholder="Last Name" id="lastName" ng-model="memberForm.lastName"></div><div class="form-group"><label for="email" class="label">Email</label><input type="email" class="form-control" id="email" placeholder="Email" ng-model="memberForm.email"></div><div class="form-group"><label for="memberRoles" class="label">Role</label><ul class="admin-roles" id="memberRoles"><li ng-click="memberForm.role = \'SuperAdmin\'" ng-class="{\'selected\' : memberForm.role == \'SuperAdmin\'}"><h1 class="body-2">Super</h1></li><li ng-click="memberForm.role = \'Admin\'" ng-class="{\'selected\' : memberForm.role == \'Admin\'}"><h1 class="body-2">Admin</h1></li><li ng-click="memberForm.role = \'Editor\'" ng-class="{\'selected\' : memberForm.role == \'Editor\'}"><h1 class="body-2">Editor</h1></li></ul></div></form><footer><div class="admin-footer-extras"><h1 class="title" ng-if="adminErrorMessage">{{adminErrorMessage}}</h1><i class="fa fa-spinner fa-spin" ng-if="!adminErrorMessage && saving"></i></div><div><button type="button" class="btn btn-danger" ng-if="sideMemberCard == \'edit\'" ng-click="delete(memberForm)">Delete</button> <button type="submit" class="btn purple-button" ng-click="save(memberForm)"><h1 class="button">{{sideMemberCard == \'new\' ? \'Create\' : \'Save\'}}</h1></button></div></footer></div></div>');
}]);

/**
 * Created by Danny on 12/15/16.
 */
'use strict';
angular.module('freqCultureApp')
    .config(function ($locationProvider, $stateProvider,  $urlRouterProvider,
                      $urlMatcherFactoryProvider) {

        $urlMatcherFactoryProvider.caseInsensitive(true);
        $urlMatcherFactoryProvider.strictMode(false);
        $urlRouterProvider.otherwise('/');

        $stateProvider
            .state('home', {
                url : '/',
                controller : 'HomeCtrl',
                templateUrl : 'partials/home.html'
            })

            .state('sound', {
                url : '/sound',
                controller : 'MainSectionCtrl',
                templateUrl : 'partials/main-section.partial.html',
                resolve : {
                    sectionTitle : function() {
                        return 'Sound';
                    },
                    sectionSubTitle : function() {
                        return 'Sound section'
                    },
                    contentType : function() {
                        return 'sound'
                    }
                }
            })

            .state('film', {
                url : '/film',
                controller : 'MainSectionCtrl',
                templateUrl : 'partials/main-section.partial.html',
                resolve : {
                    sectionTitle : function() {
                        return 'Film';
                    },
                    sectionSubTitle : function() {
                        return 'Film section'
                    },
                    contentType : function() {
                        return 'film'
                    }
                }
            })

            .state('fashion', {
                url : '/fashion',
                controller : 'MainSectionCtrl',
                templateUrl : 'partials/main-section.partial.html',
                resolve : {
                    sectionTitle : function() {
                        return 'Fashion';
                    },
                    sectionSubTitle : function() {
                        return 'Fashion section'
                    },
                    contentType : function() {
                        return 'fashion'
                    }
                }
            })

            .state('culture', {
                url : '/culture',
                controller : 'MainSectionCtrl',
                templateUrl : 'partials/main-section.partial.html',
                resolve : {
                    sectionTitle : function() {
                        return 'Culture';
                    },
                    sectionSubTitle : function() {
                        return 'Culture section'
                    },
                    contentType : function() {
                        return 'culture'
                    }
                }
            })



            .state('admin', {
                url : '/admin',
                templateUrl : 'partials/view.admin.html',
                controller : 'AdminCtrl'
            })

            .state('dashboard', {
                url : '/dashboard',
                templateUrl : 'partials/view.dashboard.html',
                controller : 'DashboardCtrl',
                abstract : true
            })

            .state('dashboard.welcome', {
                url : '',
                templateUrl : 'partials/dashboard.welcome.html',
                data : {
                    stateTitle : 'Welcome'
                }
            })

            .state('dashboard.admin', {
                url : '/admin',
                templateUrl : 'partials/dashboard.admin.html',
                controller : 'AdminCtrl',
                data : {
                    stateTitle : 'Admin'
                }
            })

            .state('dashboard.profile', {
                url : '/profile',
                templateUrl : 'partials/dashboard.profile.html',
                data : {
                    stateTitle : 'Profile'
                }
            })

            .state('dashboard.content', {
                url : '/content',
                templateUrl : 'partials/dashboard.content.html',
                data : {
                    stateTitle : 'Content'
                }
            })

            .state('about', {
                url : '/about',
                templateUrl : 'partials/about.html'
            })



            .state('content', {
                url : '/:contentType/:contentUrl',
                templateUrl : 'partials/view.content.html',
                controller : 'ViewContentCtrl'
            })


        $locationProvider.html5Mode(true).hashPrefix('!');

    });

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/content-header.html',
    '<header class="content-header"><h1 class="display-2">{{selectedContent.title}}</h1><h1 class="subhead-2" ng-if="selectedContent.author">By {{selectedContent.author}}</h1><div class="header-image" ng-style="{\'background-image\' : \'url(\' + selectedContent.headerImage + \')\'}"></div><ul class="header-info"><li><h2 class="text-capitalize subhead-1">{{selectedContent.contentType}}</h2></li><li><h2 class="caption">{{selectedContent.publishedDate | date : \'EEEE, MMMM d, y\'}}</h2></li></ul></header>');
}]);

/**
 * Created by Danny on 12/15/16.
 */
angular.module('freqCultureApp')
    .config(function(plangularConfigProvider) {
        plangularConfigProvider.clientId = 'oerXf6nBcDu5CoNdaOrIGutVCKXPYvSB'
    });

/**
 * Created by Danny on 1/29/17.
 */
angular.module('freqCultureApp')
    .run(function($rootScope, $state, ModalService, SignupService) {
        $rootScope.showSite = false;
        $rootScope.$state = $state;
        $rootScope.showSignup = function() {
            ModalService.openModal('signup', 'Kinetik Mag Early Access')
                .then(function(modalData) {
                    console.log('promise to contact!', modalData)
                    var formData = {
                        firstName : modalData.firstName,
                        email : modalData.email,
                        type : 'EarlyAccess'
                    }
                    SignupService.newSignup(formData)
                        .then(function(response) {
                            console.log('response: ', response);
                        })
                        .catch(function(err) {
                            console.log('err: ', err);
                        })
                })
                .catch(function() {
                    console.log(' no value');
                })
        }

    })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/content-container.html',
    '<section class="content-container"><div class="hero-container"><slick infinite="true" slides-to-show="1" slides-to-scroll="1" arrows="false" autoplay="true" class="col-xs-12 hero-content" pause-on-hover="true" autoplay-speed="3000" ng-class="{\'show-hero\' : showHero}"><div class="hero-slide" ng-repeat="heroItem in heroContent track by $index" ng-style="{\'background-image\' : \'url(\' + heroItem.headerImage + \')\'}" ng-click="goTo(heroItem)"><div class="hero-footer"><div class="hero-info"><h1>{{heroItem.title}}</h1><p class="site-body-text">{{heroItem.subTitle}}</p></div><ul><li>Read Now</li><li class="{{heroItem.contentType}}-content">{{heroItem.contentType}}</li></ul></div></div></slick></div><div ng-repeat="subContent in content track by $index" class="sub-content col-xs-12 col-md-6" ng-style="{\'background-image\' : \'url(\' +subContent.headerImage + \')\'}" ng-if="$index > 2" ng-click="goTo(subContent)"><div class="content-footer"><div class="content-info"><h1>{{subContent.title}}</h1></div><ul><li>Read Now</li><li class="{{subContent.contentType}}-content">{{subContent.contentType}}</li></ul></div></div></section>');
}]);

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/about.html',
    '<section class="section-with-top-nav container"><h2 class="site-body-title">About Content</h2><p class="site-body-text">Well, the way they make shows is, they make one show. That show\'s called a pilot. Then they show that show to the people who make shows, and on the strength of that one show they decide if they\'re going to make more shows. Some pilots get picked and become television programs. Some don\'t, become nothing. She starred in one of the ones that became nothing.</p></section>');
}]);

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('404.html',
    '<!doctype html><html lang="en"><head><meta charset="utf-8"><title>Page Not Found :(</title><style>::-moz-selection {\n' +
    '    background: #b3d4fc;\n' +
    '    text-shadow: none;\n' +
    '}\n' +
    '\n' +
    '::selection {\n' +
    '    background: #b3d4fc;\n' +
    '    text-shadow: none;\n' +
    '}\n' +
    '\n' +
    'html {\n' +
    '    padding: 30px 10px;\n' +
    '    font-size: 20px;\n' +
    '    line-height: 1.4;\n' +
    '    color: #737373;\n' +
    '    background: #f0f0f0;\n' +
    '    -webkit-text-size-adjust: 100%;\n' +
    '    -ms-text-size-adjust: 100%;\n' +
    '}\n' +
    '\n' +
    'html,\n' +
    'input {\n' +
    '    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n' +
    '}\n' +
    '\n' +
    'body {\n' +
    '    max-width: 500px;\n' +
    '    padding: 30px 20px 50px;\n' +
    '    border: 1px solid #b3b3b3;\n' +
    '    border-radius: 4px;\n' +
    '    margin: 0 auto;\n' +
    '    box-shadow: 0 1px 10px #a7a7a7, inset 0 1px 0 #fff;\n' +
    '    background: #fcfcfc;\n' +
    '}\n' +
    '\n' +
    'h1 {\n' +
    '    margin: 0 10px;\n' +
    '    font-size: 50px;\n' +
    '    text-align: center;\n' +
    '}\n' +
    '\n' +
    'h1 span {\n' +
    '    color: #bbb;\n' +
    '}\n' +
    '\n' +
    'h3 {\n' +
    '    margin: 1.5em 0 0.5em;\n' +
    '}\n' +
    '\n' +
    'p {\n' +
    '    margin: 1em 0;\n' +
    '}\n' +
    '\n' +
    'ul {\n' +
    '    padding: 0 0 0 40px;\n' +
    '    margin: 1em 0;\n' +
    '}\n' +
    '\n' +
    '.container {\n' +
    '    max-width: 380px;\n' +
    '    margin: 0 auto;\n' +
    '}\n' +
    '\n' +
    '/* google possessions-search */\n' +
    '\n' +
    '#goog-fixurl ul {\n' +
    '    list-style: none;\n' +
    '    padding: 0;\n' +
    '    margin: 0;\n' +
    '}\n' +
    '\n' +
    '#goog-fixurl form {\n' +
    '    margin: 0;\n' +
    '}\n' +
    '\n' +
    '#goog-wm-qt,\n' +
    '#goog-wm-sb {\n' +
    '    border: 1px solid #bbb;\n' +
    '    font-size: 16px;\n' +
    '    line-height: normal;\n' +
    '    vertical-align: top;\n' +
    '    color: #444;\n' +
    '    border-radius: 2px;\n' +
    '}\n' +
    '\n' +
    '#goog-wm-qt {\n' +
    '    width: 220px;\n' +
    '    height: 20px;\n' +
    '    padding: 5px;\n' +
    '    margin: 5px 10px 0 0;\n' +
    '    box-shadow: inset 0 1px 1px #ccc;\n' +
    '}\n' +
    '\n' +
    '#goog-wm-sb {\n' +
    '    display: inline-block;\n' +
    '    height: 32px;\n' +
    '    padding: 0 10px;\n' +
    '    margin: 5px 0 0;\n' +
    '    white-space: nowrap;\n' +
    '    cursor: pointer;\n' +
    '    background-color: #f5f5f5;\n' +
    '    background-image: -webkit-linear-gradient(rgba(255,255,255,0), #f1f1f1);\n' +
    '    background-image: -moz-linear-gradient(rgba(255,255,255,0), #f1f1f1);\n' +
    '    background-image: -ms-linear-gradient(rgba(255,255,255,0), #f1f1f1);\n' +
    '    background-image: -o-linear-gradient(rgba(255,255,255,0), #f1f1f1);\n' +
    '    -webkit-appearance: none;\n' +
    '    -moz-appearance: none;\n' +
    '    appearance: none;\n' +
    '}\n' +
    '\n' +
    '#goog-wm-sb:hover,\n' +
    '#goog-wm-sb:focus {\n' +
    '    border-color: #aaa;\n' +
    '    box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);\n' +
    '    background-color: #f8f8f8;\n' +
    '}\n' +
    '\n' +
    '#goog-wm-qt:hover,\n' +
    '#goog-wm-qt:focus {\n' +
    '    border-color: #105cb6;\n' +
    '    outline: 0;\n' +
    '    color: #222;\n' +
    '}\n' +
    '\n' +
    'input::-moz-focus-inner {\n' +
    '    padding: 0;\n' +
    '    border: 0;\n' +
    '}</style></head><body><div class="container"><h1>Not found <span>:(</span></h1><p>Sorry, but the page you were trying to view does not exist.</p><p>It looks like this was the result of either:</p><ul><li>a mistyped address</li><li>an out-of-date link</li></ul><script>var GOOG_FIXURL_LANG = (navigator.language || \'\').slice(0,2),GOOG_FIXURL_SITE = location.host;</script><script src="//linkhelp.clients.google.com/tbproxy/lh/wm/fixurl.js"></script></div></body></html>');
}]);

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsInNjcmlwdHMvc2VydmljZXMvdXNlci5zZXJ2aWNlLmpzIiwic2NyaXB0cy9zZXJ2aWNlcy9zaWdudXAuc2VydmljZS5qcyIsInNjcmlwdHMvc2VydmljZXMvbW9kYWwuc2VydmljZS5qcyIsInBhcnRpYWxzL3ZpZXcuZGFzaGJvYXJkLmpzIiwic2NyaXB0cy9zZXJ2aWNlcy9jb250ZW50LnNlcnZpY2UuanMiLCJwYXJ0aWFscy92aWV3LmNvbnRlbnQuanMiLCJzY3JpcHRzL3NlcnZpY2VzL2FkbWluLnNlcnZpY2UuanMiLCJwYXJ0aWFscy92aWV3LmFkbWluLmpzIiwic2NyaXB0cy9yb3V0ZXMvdmlldy1jb250ZW50LmNvbnRyb2xsZXIuanMiLCJwYXJ0aWFscy9zaXRlLW1vZGFsLmpzIiwic2NyaXB0cy9yb3V0ZXMvbWFpbi1zZWN0aW9uLmNvbnRyb2xsZXIuanMiLCJwYXJ0aWFscy9zaXRlLWZvb3Rlci5qcyIsInNjcmlwdHMvcm91dGVzL2hvbWUuY29udHJvbGxlci5qcyIsInBhcnRpYWxzL3NpdGUtYXVkaW8uanMiLCJzY3JpcHRzL3JvdXRlcy9kYXNoYm9hcmQuY29udHJvbGxlci5qcyIsInBhcnRpYWxzL3NpZGVtZW51LmpzIiwic2NyaXB0cy9yb3V0ZXMvZGFzaGJvYXJkLmNvbnRlbnQuY29udHJvbGxlci5qcyIsInBhcnRpYWxzL3NlY3Rpb24taGVhZGVyLmpzIiwic2NyaXB0cy9yb3V0ZXMvYWRtaW4uY29udHJvbGxlci5qcyIsInBhcnRpYWxzL25hdmJhci5qcyIsInNjcmlwdHMvZGlyZWN0aXZlcy9zaXRlLW1vZGFsLmRpcmVjdGl2ZS5qcyIsInBhcnRpYWxzL21vZGFsLXNpZ251cC5qcyIsInNjcmlwdHMvZGlyZWN0aXZlcy9zaXRlLWZvb3Rlci5kaXJlY3RpdmUuanMiLCJwYXJ0aWFscy9tb2RhbC1sb2dpbi5qcyIsInNjcmlwdHMvZGlyZWN0aXZlcy9zaXRlLWF1ZGlvLmRpcmVjdGl2ZS5qcyIsInBhcnRpYWxzL21vZGFsLWNvbnRhY3QuanMiLCJzY3JpcHRzL2RpcmVjdGl2ZXMvc2lkZS1tZW51LmRpcmVjdGl2ZS5qcyIsInBhcnRpYWxzL21vZGFsLWNvbmZpcm0uanMiLCJzY3JpcHRzL2RpcmVjdGl2ZXMvc2VjdGlvbi1oZWFkZXIuZGlyZWN0aXZlLmpzIiwicGFydGlhbHMvbWFpbi1zZWN0aW9uLnBhcnRpYWwuanMiLCJzY3JpcHRzL2RpcmVjdGl2ZXMvbmF2YmFyLmRpcmVjdGl2ZS5qcyIsInBhcnRpYWxzL2hvbWUuanMiLCJzY3JpcHRzL2RpcmVjdGl2ZXMvbG9naW5Nb2RhbC5jb250cm9sbGVyLmpzIiwicGFydGlhbHMvaGFtYnVyZ2VyLW1lbnUuanMiLCJzY3JpcHRzL2RpcmVjdGl2ZXMvaW1hZ2Utc2hhZG93LmpzIiwicGFydGlhbHMvZGFzaGJvYXJkLndlbGNvbWUuanMiLCJzY3JpcHRzL2RpcmVjdGl2ZXMvaGFtYnVyZ2VyLW1lbnUuZGlyZWN0aXZlLmpzIiwicGFydGlhbHMvZGFzaGJvYXJkLnByb2ZpbGUuanMiLCJzY3JpcHRzL2RpcmVjdGl2ZXMvY29udGVudC1oZWFkZXIuZGlyZWN0aXZlLmpzIiwicGFydGlhbHMvZGFzaGJvYXJkLmNvbnRlbnQuanMiLCJzY3JpcHRzL2RpcmVjdGl2ZXMvY29udGVudC1jb250YWluZXIuZGlyZWN0aXZlLmpzIiwicGFydGlhbHMvZGFzaGJvYXJkLmFkbWluLmpzIiwic2NyaXB0cy9jb25maWcvcm91dGVzLmpzIiwicGFydGlhbHMvY29udGVudC1oZWFkZXIuanMiLCJzY3JpcHRzL2NvbmZpZy9jb25maWcuanMiLCJzY3JpcHRzL2NvbmZpZy9hcHBSdW4uanMiLCJwYXJ0aWFscy9jb250ZW50LWNvbnRhaW5lci5qcyIsInBhcnRpYWxzL2Fib3V0LmpzIiwiNDA0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDbEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2pCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2hEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNySEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDN0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDbkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3hEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzFKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDbEpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNkQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDekJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMxQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzVDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMvREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNyQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN4Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN6QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDM0VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN4SkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzlCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDcmVhdGVkIGJ5IERhbm55IG9uIDEyLzE1LzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnLCBbXG4gICAgJ25nQW5pbWF0ZScsXG4gICAgJ25nQ29va2llcycsXG4gICAgJ25nUmVzb3VyY2UnLFxuICAgICd1aS5yb3V0ZXInLFxuICAgICduZ1RvdWNoJyxcbiAgICAnbmctZmFzdGNsaWNrJyxcbiAgICAnc2xpY2tDYXJvdXNlbCcsXG4gICAgJ3BsYW5ndWxhcicsXG4gICAgJ3RleHRBbmd1bGFyJ1xuXSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgRGFubnkgb24gMTIvMjQvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpXG4gICAgLnNlcnZpY2UoJ1VzZXJTZXJ2aWNlJywgZnVuY3Rpb24oJGh0dHApIHtcblxuICAgICAgICB2YXIgdXBkYXRlVXNlciA9IGZ1bmN0aW9uKHVwZGF0ZXMpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cCh7XG4gICAgICAgICAgICAgICAgbWV0aG9kIDogJ1BVVCcsXG4gICAgICAgICAgICAgICAgdXJsIDogJ2FwaS91c2VyL3VwZGF0ZVVzZXIvJyArIHVwZGF0ZXMuX2lkLFxuICAgICAgICAgICAgICAgIGRhdGEgOiB1cGRhdGVzXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHVwZGF0ZVVzZXIgOiB1cGRhdGVVc2VyXG4gICAgICAgIH1cbiAgICB9KVxuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IERhbm55IG9uIDEvMjkvMTcuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpXG4gICAgLnNlcnZpY2UoJ1NpZ251cFNlcnZpY2UnLCBmdW5jdGlvbigkaHR0cCkge1xuICAgICAgICB2YXIgbmV3U2lnbnVwID0gZnVuY3Rpb24oc2lnbnVwRGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgICAgICBtZXRob2QgOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgdXJsIDogJ2FwaS9zaWdudXAvbmV3U2lnbnVwJyxcbiAgICAgICAgICAgICAgICBkYXRhIDogc2lnbnVwRGF0YVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuZXdTaWdudXAgOiBuZXdTaWdudXBcbiAgICAgICAgfVxuICAgIH0pXG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgRGFubnkgb24gMTIvMjQvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpXG4gICAgLnNlcnZpY2UoJ01vZGFsU2VydmljZScsIGZ1bmN0aW9uKCRyb290U2NvcGUsICRxLCAkdGltZW91dCkge1xuXG4gICAgICAgIHZhciBwYXJ0aWFsVXJscyA9IHtcbiAgICAgICAgICAgICdsb2dpbicgOiAncGFydGlhbHMvbW9kYWwtbG9naW4uaHRtbCcsXG4gICAgICAgICAgICAnY29udGFjdCcgOiAncGFydGlhbHMvbW9kYWwtY29udGFjdC5odG1sJyxcbiAgICAgICAgICAgICdjb25maXJtJyA6ICdwYXJ0aWFscy9tb2RhbC1jb25maXJtLmh0bWwnLFxuICAgICAgICAgICAgJ3NpZ251cCcgOiAncGFydGlhbHMvbW9kYWwtc2lnbnVwLmh0bWwnXG4gICAgICAgIH1cblxuICAgICAgICB2YXIgX21vZGFsO1xuICAgICAgICB2YXIgY2xvc2VNb2RhbDtcblxuICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIF9tb2RhbCA9ICQoJyNzaXRlTW9kYWwnKTtcbiAgICAgICAgICAgIF9tb2RhbC5vbignaGlkZS5icy5tb2RhbCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICBjbG9zZU1vZGFsKGUpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfSwxMDApXG5cbiAgICAgICAgLy8gR2xvYmFsIGhpZGUgbW9kYWwgbGlzdGVuZXJcblxuXG4gICAgICAgIHJldHVybiB7XG5cbiAgICAgICAgICAgIC8vIFJldHVybnMgYSBwcm9taXNlIHdoaWNoIGlzIHJlc29sdmVkIHdoZW4gdGhlIG1vZGFsIGNsb3Nlcy5cbiAgICAgICAgICAgIG9wZW5Nb2RhbCA6IGZ1bmN0aW9uKHR5cGUsIG1vZGFsVGl0bGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAgICAgICAgICRyb290U2NvcGUubW9kYWxUZW1wbGF0ZSA9IHBhcnRpYWxVcmxzW3R5cGVdO1xuICAgICAgICAgICAgICAgICRyb290U2NvcGUubW9kYWxUaXRsZSA9IG1vZGFsVGl0bGU7XG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS5tb2RhbENvbmZpcm0gPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIF9tb2RhbC5tb2RhbCgnaGlkZScpO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnbW9kYWw6ICcsIF9tb2RhbClcbiAgICAgICAgICAgICAgICBfbW9kYWwubW9kYWwoJ3Nob3cnKTtcblxuICAgICAgICAgICAgICAgIGNsb3NlTW9kYWwgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgncGFydGlhbHMvdmlldy5kYXNoYm9hcmQuaHRtbCcsXG4gICAgJzxzZWN0aW9uIGNsYXNzPVwiZmx1aWQtY29udGFpbmVyIGRhc2hib2FyZC12aWV3XCI+PG5hdiBjbGFzcz1cImRhc2hib2FyZC1uYXZcIj48ZGl2IGNsYXNzPVwibmF2LWxvZ29cIiBuZy1jbGljaz1cImdvVG8oXFwnaG9tZVxcJylcIj48aW1nIHNyYz1cIi4uL2ltYWdlcy9mcmVxdWVuY3lfY3VsdHVyZV93aGl0ZV90cmFucy5wbmdcIj48L2Rpdj48ZGl2IGNsYXNzPVwiZGFzaGJvYXJkLXVzZXJcIj48ZGl2IGNsYXNzPVwidXNlci1jb250YWluZXJcIj48ZmlndXJlIGNsYXNzPVwidXNlci1pbml0aWFsc1wiPjxoMSBjbGFzcz1cInN1YmhlYWQtMlwiIG5nLWlmPVwiZmFsc2VcIj5ERjwvaDE+PGkgY2xhc3M9XCJmYSBmYS1leGNsYW1hdGlvbi10cmlhbmdsZVwiPjwvaT48L2ZpZ3VyZT48ZGl2IGNsYXNzPVwidXNlci1pbmZvXCI+PGgxIGNsYXNzPVwic3ViaGVhZC0yXCIgbmctaWY9XCJjdXJyZW50VXNlclwiPnt7Y3VycmVudFVzZXIuZmlyc3ROYW1lICsgXFwnIFxcJyArIGN1cnJlbnRVc2VyLmxhc3ROYW1lfX08L2gxPjxoMSBjbGFzcz1cInN1YmhlYWQtMlwiIG5nLWlmPVwiIWN1cnJlbnRVc2VyXCIgbmctY2xpY2s9XCJzaG93TG9naW5Nb2RhbCgpXCI+UGxlYXNlIGxvZ2luLjwvaDE+PHVsPjxsaSBuZy1pZj1cImN1cnJlbnRVc2VyXCI+PGE+U2V0dGluZ3M8L2E+PC9saT48bGkgbmctaWY9XCJjdXJyZW50VXNlclwiPjxhPkxvZ291dDwvYT48L2xpPjxsaSBuZy1pZj1cIiFjdXJyZW50VXNlclwiIG5nLWNsaWNrPVwic2hvd0xvZ2luTW9kYWwoKVwiPjxhPkxvZ2luPC9hPjwvbGk+PC91bD48L2Rpdj48L2Rpdj48L2Rpdj48dWwgY2xhc3M9XCJkYXNoYm9hcmQtbWVudVwiPjxsaSBuZy1jbGFzcz1cInthY3RpdmU6ICRzdGF0ZS5pbmNsdWRlcyhcXCdkYXNoYm9hcmQuYWRtaW5cXCcpfVwiIG5nLWNsaWNrPVwiZ29UbyhcXCdkYXNoYm9hcmQuYWRtaW5cXCcsIFxcJ0FkbWluXFwnKVwiPjxpIGNsYXNzPVwiZmEgZmEtdXNlcnNcIj48L2k+IDxhIGNsYXNzPVwic3ViaGVhZC0yXCI+QWRtaW48L2E+PC9saT48bGkgbmctY2xhc3M9XCJ7YWN0aXZlOiAkc3RhdGUuaW5jbHVkZXMoXFwnZGFzaGJvYXJkLnByb2ZpbGVcXCcpfVwiIG5nLWNsaWNrPVwiZ29UbyhcXCdkYXNoYm9hcmQucHJvZmlsZVxcJywgXFwnUHJvZmlsZVxcJylcIj48aSBjbGFzcz1cImZhIGZhLWFkZHJlc3MtY2FyZFwiPjwvaT4gPGEgY2xhc3M9XCJzdWJoZWFkLTJcIj5Qcm9maWxlPC9hPjwvbGk+PGxpIG5nLWNsYXNzPVwie2FjdGl2ZTogJHN0YXRlLmluY2x1ZGVzKFxcJ2Rhc2hib2FyZC5jb250ZW50XFwnKX1cIiBuZy1jbGljaz1cImdvVG8oXFwnZGFzaGJvYXJkLmNvbnRlbnRcXCcsIFxcJ0NvbnRlbnRcXCcpXCI+PGkgY2xhc3M9XCJmYSBmYS1saXN0XCI+PC9pPiA8YSBjbGFzcz1cInN1YmhlYWQtMlwiPkNvbnRlbnQ8L2E+PC9saT48L3VsPjxmb290ZXIgY2xhc3M9XCJhZG1pbi1tZW51LWZvb3RlclwiIG5nLWNsaWNrPVwiZ29UbyhcXCdob21lXFwnKVwiPjxpIGNsYXNzPVwiZmEgZmEtYXJyb3ctbGVmdFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4gPGEgY2xhc3M9XCJzdWJoZWFkLTJcIj5CYWNrIFRvIFNpdGU8L2E+PC9mb290ZXI+PC9uYXY+PGhlYWRlciBjbGFzcz1cImRhc2hib2FyZC1oZWFkZXJcIj48aDEgY2xhc3M9XCJoZWFkbGluZVwiIG5nLWNsaWNrPVwiZ29UbyhcXCdkYXNoYm9hcmQud2VsY29tZVxcJywgXFwnV2VsY29tZVxcJylcIj5EYXNoYm9hcmQ8L2gxPjxoMiBjbGFzcz1cImhlYWRsaW5lXCIgaWQ9XCJtdXRlZC10ZXh0XCIgbmctY2xpY2s9XCJnb1RvKFxcJ2Rhc2hib2FyZC5wcm9maWxlXFwnLCBcXCdQcm9maWxlXFwnKVwiPi8ge3tzZWxlY3RlZFZpZXd9fTwvaDI+PC9oZWFkZXI+PGRpdiBjbGFzcz1cImRhc2hib2FyZC1ib2R5XCIgbmctY2xhc3M9XCJ7XFwnZ3JheS1ib2R5XFwnIDogISRzdGF0ZS5pbmNsdWRlcyhcXCdkYXNoYm9hcmQud2VsY29tZVxcJyl9XCI+PGRpdiBjbGFzcz1cInVpLXZpZXdcIj48L2Rpdj48L2Rpdj48L3NlY3Rpb24+Jyk7XG59XSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgRGFubnkgb24gMTEvNi8xNi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJylcbiAgLnNlcnZpY2UoJ0NvbnRlbnRTZXJ2aWNlJywgZnVuY3Rpb24oJGh0dHAsICRxKSB7XG4gICAgdmFyIF9zaXRlQ29udGVudCxcbiAgICAgIF9zZWxlY3RlZENvbnRlbnQ7XG5cblxuICAgIHZhciBzZXRDb250ZW50ID0gZnVuY3Rpb24oY29udGVudCwgY2FsbGJhY2spIHtcbiAgICAgIF9zaXRlQ29udGVudCA9IGNvbnRlbnQ7XG4gICAgICBpZihjYWxsYmFjaykge1xuICAgICAgICBjYWxsYmFjayhjb250ZW50KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgZ2V0Q29udGVudCA9IGZ1bmN0aW9uKGNvbnRlbnQpIHtcbiAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICBpZighX3NpdGVDb250ZW50KSB7XG4gICAgICAgIGluaXRDb250ZW50KGZ1bmN0aW9uKGNvbnRlbnQpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnY29udGVudDogJywgY29udGVudCk7XG4gICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShjb250ZW50KTtcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlZmVycmVkLnJlc29sdmUoX3NpdGVDb250ZW50KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfVxuXG4gICAgdmFyIGluaXRDb250ZW50ID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICRodHRwLmdldCgnYXBpL3NpdGVDb250ZW50L2FsbENvbnRlbnQnKVxuICAgICAgICAudGhlbihmdW5jdGlvbihyZXN1bHRzKXtcbiAgICAgICAgICBzZXRDb250ZW50KHJlc3VsdHMuZGF0YSwgY2FsbGJhY2spO1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZvcm1hdENvbnRlbnQoY29udGVudCwgY2FsbGJhY2spIHtcbiAgICAgIHZhciBmb3JtYXR0ZWRDb250ZW50ID0gW107XG4gICAgICAgIGNvbnNvbGUubG9nKCdjb250ZW50OiAnLCBjb250ZW50KTtcbiAgICAgIC8vZm9yKHZhciBrZXkgaW4gY29udGVudCkge1xuICAgICAgLy8gIGFuZ3VsYXIuZm9yRWFjaChjb250ZW50W2tleV0sIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAvLyAgICBpdGVtLnN0YXRlTmFtZSA9IChpdGVtLnN0YXRlTmFtZSB8fCBpdGVtLnVybCkudG9Mb3dlckNhc2UoKTtcbiAgICAgIC8vICAgIGl0ZW0udXJsUHJlZml4ID0gJy8nICsga2V5ICsgJy8nICsgaXRlbS51cmw7XG4gICAgICAvLyAgICBpdGVtLmhyZWYgPSBpdGVtLnVybDtcbiAgICAgIC8vICAgIGlmKGtleSA9PSAnYXJ0aWNsZXMnKSB7XG4gICAgICAvLyAgICAgIGl0ZW0uc3JjID0gJ3ZpZXdzL3ZpZXcuYXJ0aWNsZS5odG1sJztcbiAgICAgIC8vICAgIH0gZWxzZSBpZihrZXkgPT0gJ2NyZWF0b3Itc2VyaWVzJykge1xuICAgICAgLy8gICAgICBpdGVtLnNyYyA9IFwidmlld3Mvdmlldy5jcmVhdG9yLXNlcmllcy5odG1sXCI7XG4gICAgICAvLyAgICB9XG4gICAgICAvLyAgICBmb3JtYXR0ZWRDb250ZW50LnB1c2goaXRlbSk7XG4gICAgICAvLyAgfSk7XG4gICAgICAvL31cbiAgICAgIHNldENvbnRlbnQoZm9ybWF0dGVkQ29udGVudCwgY2FsbGJhY2spO1xuICAgIH1cblxuICAgIHZhciBzZXRTZWxlY3RlZCA9IGZ1bmN0aW9uKGNvbnRlbnQpIHtcbiAgICAgIF9zZWxlY3RlZENvbnRlbnQgPSBjb250ZW50O1xuICAgIH1cblxuICAgIHZhciBnZXRTZWxlY3RlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIF9zZWxlY3RlZENvbnRlbnQ7XG4gICAgfVxuXG4gICAgdmFyIGZpbmRDb250ZW50ID0gZnVuY3Rpb24oc2VsZWN0ZWRIcmVmKSB7XG4gICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgaWYoIV9zZWxlY3RlZENvbnRlbnQpIHtcbiAgICAgICAgaW5pdENvbnRlbnQoZnVuY3Rpb24oY29udGVudCkge1xuICAgICAgICAgIGZvcih2YXIgYz0wO2M8Y29udGVudC5sZW5ndGg7YysrKSB7XG4gICAgICAgICAgICBpZihjb250ZW50W2NdLmhyZWYgPT0gc2VsZWN0ZWRIcmVmKSB7XG4gICAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5yZXNvbHZlKGNvbnRlbnRbY10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5yZXNvbHZlKF9zZWxlY3RlZENvbnRlbnQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfVxuXG5cblxuICAgICAgdmFyIG5ld0NvbnRlbnQgPSBmdW5jdGlvbihuZXdDb250ZW50KSB7XG4gICAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgICAgbWV0aG9kIDogJ1BPU1QnLFxuICAgICAgICAgICAgICB1cmwgOiAnYXBpL3NpdGVDb250ZW50LycsXG4gICAgICAgICAgICAgIGRhdGEgOiBuZXdDb250ZW50XG4gICAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgdmFyIHVwZGF0ZUNvbnRlbnQgPSBmdW5jdGlvbihjb250ZW50KSB7XG4gICAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgICAgbWV0aG9kIDogJ1BVVCcsXG4gICAgICAgICAgICAgIHVybCA6ICdhcGkvc2l0ZUNvbnRlbnQvJyArIGNvbnRlbnQuX2lkLFxuICAgICAgICAgICAgICBkYXRhIDogY29udGVudFxuICAgICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIHZhciBkZWxldGVDb250ZW50ID0gZnVuY3Rpb24oY29udGVudCkge1xuICAgICAgICAgIHJldHVybiAkaHR0cCh7XG4gICAgICAgICAgICAgIG1ldGhvZCA6ICdERUxFVEUnLFxuICAgICAgICAgICAgICB1cmwgOiAnYXBpL3NpdGVDb250ZW50LycgKyBjb250ZW50Ll9pZFxuICAgICAgICAgIH0pXG4gICAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgc2V0Q29udGVudCA6IHNldENvbnRlbnQsXG4gICAgICBnZXRDb250ZW50IDogZ2V0Q29udGVudCxcbiAgICAgIGluaXRDb250ZW50IDogaW5pdENvbnRlbnQsXG4gICAgICBzZXRTZWxlY3RlZCA6IHNldFNlbGVjdGVkLFxuICAgICAgZ2V0U2VsZWN0ZWQgOiBnZXRTZWxlY3RlZCxcbiAgICAgIGZpbmRDb250ZW50IDogZmluZENvbnRlbnQsXG4gICAgICBuZXdDb250ZW50IDogbmV3Q29udGVudCxcbiAgICAgIHVwZGF0ZUNvbnRlbnQgOiB1cGRhdGVDb250ZW50LFxuICAgICAgZGVsZXRlQ29udGVudCA6IGRlbGV0ZUNvbnRlbnRcbiAgICB9XG4gIH0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgncGFydGlhbHMvdmlldy5jb250ZW50Lmh0bWwnLFxuICAgICc8c2VjdGlvbiBjbGFzcz1cInNlY3Rpb24td2l0aC10b3AtbmF2IGNvbnRhaW5lclwiPjxjb250ZW50LWhlYWRlciBzZWxlY3RlZC1jb250ZW50PVwic2VsZWN0ZWRDb250ZW50XCI+PC9jb250ZW50LWhlYWRlcj48ZGl2IGNsYXNzPVwiY29udGVudC1zZWN0aW9uXCIgbmctcmVwZWF0PVwiY29udGVudFNlY3Rpb24gaW4gc2VsZWN0ZWRDb250ZW50LmNvbnRlbnRTZWN0aW9uc1wiPjxpbWcgY2xhc3M9XCJjb250ZW50LWltYWdlXCIgbmctaWY9XCJjb250ZW50U2VjdGlvbi5oZWFkZXJJbWFnZSBcIiBuZy1zcmM9XCJ7e2NvbnRlbnRTZWN0aW9uLmhlYWRlckltYWdlfX1cIj48cCBjbGFzcz1cInNpdGUtYm9keS10ZXh0IGNlbnRlci1ibG9ja1wiIG5nLWNsYXNzPVwie1xcJ2luZGVudC1wYXJhZ3JhcGhcXCcgOiAkZmlyc3QsIFxcJ3N1Yi1wYXJhZ3JhcGhcXCcgOiAhJGZpcnN0fVwiPnt7Y29udGVudFNlY3Rpb24uY29udGVudH19PC9wPjxpbWcgY2xhc3M9XCJjb250ZW50LWltYWdlXCIgbmctaWY9XCJjb250ZW50U2VjdGlvbi5mb290ZXJJbWFnZSBcIiBuZy1zcmM9XCJ7e2NvbnRlbnRTZWN0aW9uLmZvb3RlckltYWdlfX1cIj48L2Rpdj48L3NlY3Rpb24+Jyk7XG59XSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgRGFubnkgb24gMTIvMjUvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpXG4gICAgLnNlcnZpY2UoJ0FkbWluU2VydmljZScsIGZ1bmN0aW9uKCRodHRwLCAkcSkge1xuXG4gICAgICAgIHZhciBfYWxsVXNlcnM7XG4gICAgICAgIHZhciBuZXdVc2VyID0gZnVuY3Rpb24obmV3VXNlcikge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgICAgICBtZXRob2QgOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgdXJsIDogJ2FwaS91c2VyL25ld1VzZXInLFxuICAgICAgICAgICAgICAgIGRhdGEgOiBuZXdVc2VyXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGFsbFVzZXJzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZighX2FsbFVzZXJzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICAgICAgdXJsIDogJ2FwaS91c2VyL2FsbFVzZXJzJ1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYWxsVXNlcnMgPSByZXNwb25zZS5kYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9hbGxVc2Vyc1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoX2FsbFVzZXJzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkZWxldGVVc2VyID0gZnVuY3Rpb24odXNlcklkKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICAgICAgICAgICAgdXJsIDogJ2FwaS91c2VyLycgKyB1c2VySWRcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmV3VXNlciA6IG5ld1VzZXIsXG4gICAgICAgICAgICBhbGxVc2VycyA6IGFsbFVzZXJzLFxuICAgICAgICAgICAgZGVsZXRlVXNlciA6IGRlbGV0ZVVzZXJcbiAgICAgICAgfVxuICAgIH0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgncGFydGlhbHMvdmlldy5hZG1pbi5odG1sJyxcbiAgICAnPHNlY3Rpb24gY2xhc3M9XCJmbHVpZC1jb250YWluZXIgYWRtaW4tdmlld1wiPjxuYXYgY2xhc3M9XCJhZG1pbi1uYXZcIj48ZGl2IGNsYXNzPVwibmF2LWxvZ29cIiBuZy1jbGljaz1cImdvVG8oXFwnaG9tZVxcJylcIj48aW1nIHNyYz1cIi4uL2ltYWdlcy9mcmVxdWVuY3lfY3VsdHVyZV93aGl0ZV90cmFucy5wbmdcIj48L2Rpdj48ZGl2IGNsYXNzPVwiYWRtaW4tdXNlclwiPjxkaXYgY2xhc3M9XCJ1c2VyLWNvbnRhaW5lclwiPjxmaWd1cmUgY2xhc3M9XCJ1c2VyLWluaXRpYWxzXCI+PGgxIGNsYXNzPVwic3ViaGVhZC0yXCIgbmctaWY9XCJmYWxzZVwiPkRGPC9oMT48aSBjbGFzcz1cImZhIGZhLWV4Y2xhbWF0aW9uLXRyaWFuZ2xlXCI+PC9pPjwvZmlndXJlPjxkaXYgY2xhc3M9XCJ1c2VyLWluZm9cIj48aDEgY2xhc3M9XCJzdWJoZWFkLTJcIiBuZy1pZj1cImN1cnJlbnRVc2VyXCI+e3tjdXJyZW50VXNlci5maXJzdE5hbWUgKyBcXCcgXFwnICsgY3VycmVudFVzZXIubGFzdE5hbWV9fTwvaDE+PGgxIGNsYXNzPVwic3ViaGVhZC0yXCIgbmctaWY9XCIhY3VycmVudFVzZXJcIiBkYXRhLXRvZ2dsZT1cIm1vZGFsXCIgZGF0YS10YXJnZXQ9XCIjbG9naW5Nb2RhbFwiPlBsZWFzZSBsb2dpbi48L2gxPjx1bD48bGkgbmctaWY9XCJjdXJyZW50VXNlclwiPjxhPlNldHRpbmdzPC9hPjwvbGk+PGxpIG5nLWlmPVwiY3VycmVudFVzZXJcIj48YT5Mb2dvdXQ8L2E+PC9saT48bGkgbmctaWY9XCIhY3VycmVudFVzZXJcIiBkYXRhLXRvZ2dsZT1cIm1vZGFsXCIgZGF0YS10YXJnZXQ9XCIjbG9naW5Nb2RhbFwiPjxhPkxvZ2luPC9hPjwvbGk+PC91bD48L2Rpdj48L2Rpdj48L2Rpdj48L25hdj48aGVhZGVyIGNsYXNzPVwiYWRtaW4taGVhZGVyXCI+PGgxIGNsYXNzPVwiaGVhZGxpbmVcIj5EYXNoYm9hcmQ8L2gxPjwvaGVhZGVyPjwvc2VjdGlvbj48ZGl2IGNsYXNzPVwibW9kYWwgZmFkZSBhZG1pbi1tb2RhbFwiIGlkPVwibG9naW5Nb2RhbFwiIHRhYmluZGV4PVwiLTFcIiByb2xlPVwiZGlhbG9nXCIgYXJpYS1sYWJlbGxlZGJ5PVwibXlNb2RhbExhYmVsXCI+PGRpdiBjbGFzcz1cIm1vZGFsLWRpYWxvZ1wiIHJvbGU9XCJkb2N1bWVudFwiPjxkaXYgY2xhc3M9XCJtb2RhbC1jb250ZW50XCI+PGRpdiBjbGFzcz1cIm1vZGFsLWhlYWRlclwiPjxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiY2xvc2VcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiIGFyaWEtbGFiZWw9XCJDbG9zZVwiPjxzcGFuIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPiZ0aW1lczs8L3NwYW4+PC9idXR0b24+PGgxIGNsYXNzPVwidGl0bGVcIj5Mb2dpbjwvaDE+PC9kaXY+PGRpdiBjbGFzcz1cIm1vZGFsLWJvZHlcIj48ZGl2IGNsYXNzPVwicm93XCI+PGRpdiBjbGFzcz1cImNvbC14cy02IGNvbC14cy1vZmZzZXQtMyBjb2wtc20tNiBjb2wtc20tb2Zmc2V0LTAgZm9ybS1ncm91cFwiPjxsYWJlbCBmb3I9XCJ1c2VyRW1haWxcIiBjbGFzcz1cImxhYmVsXCI+RW1haWw8L2xhYmVsPjxpbnB1dCB0eXBlPVwiZW1haWxcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIGlkPVwidXNlckVtYWlsXCIgcGxhY2Vob2xkZXI9XCJFbWFpbFwiPjwvZGl2PjxkaXYgY2xhc3M9XCJjb2wteHMtNiBjb2wteHMtb2Zmc2V0LTMgY29sLXNtLTYgY29sLXNtLW9mZnNldC0wIGZvcm0tZ3JvdXBcIj48bGFiZWwgZm9yPVwidXNlclBhc3N3b3JkXCIgY2xhc3M9XCJsYWJlbFwiPlBhc3N3b3JkPC9sYWJlbD48aW5wdXQgdHlwZT1cInBhc3N3b3JkXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBpZD1cInVzZXJQYXNzd29yZFwiIHBsYWNlaG9sZGVyPVwiUGFzc3dvcmRcIj48L2Rpdj48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPVwibW9kYWwtZm9vdGVyXCI+PGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHRcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiPjxoMSBjbGFzcz1cImJ1dHRvblwiPkNhbmNlbDwvaDE+PC9idXR0b24+IDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIHB1cnBsZS1idXR0b25cIj48aDEgY2xhc3M9XCJidXR0b25cIj5Mb2dpbjwvaDE+PC9idXR0b24+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+Jyk7XG59XSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgRGFubnkgb24gMTEvMjcvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpXG4gIC5jb250cm9sbGVyKCdWaWV3Q29udGVudEN0cmwnLCBmdW5jdGlvbigkc2NvcGUsIENvbnRlbnRTZXJ2aWNlLCAkc3RhdGVQYXJhbXMsICR3aW5kb3cpIHtcblxuXG4gICAgJHNjb3BlLnNlbGVjdGVkQ29udGVudCA9IENvbnRlbnRTZXJ2aWNlLmdldFNlbGVjdGVkKCk7XG5cbiAgICBpZighJHNjb3BlLnNlbGVjdGVkQ29udGVudCkge1xuICAgICAgQ29udGVudFNlcnZpY2UuZmluZENvbnRlbnQoJHN0YXRlUGFyYW1zLmNvbnRlbnRIcmVmKVxuICAgICAgICAudGhlbihmdW5jdGlvbihzZWxlY3RlZCkge1xuICAgICAgICAgICRzY29wZS5zZWxlY3RlZENvbnRlbnQgPSBzZWxlY3RlZDtcbiAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRDb250ZW50LnB1Ymxpc2hEYXRlID0gbmV3IERhdGUoJHNjb3BlLnNlbGVjdGVkQ29udGVudC5kYXRlKTtcbiAgICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgJHNjb3BlLnNlbGVjdGVkQ29udGVudC5wdWJsaXNoRGF0ZSA9IG5ldyBEYXRlKCRzY29wZS5zZWxlY3RlZENvbnRlbnQuZGF0ZSk7XG4gICAgfVxuICB9KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3BhcnRpYWxzL3NpdGUtbW9kYWwuaHRtbCcsXG4gICAgJzxkaXYgY2xhc3M9XCJtb2RhbCBmYWRlIGRhc2hib2FyZC1tb2RhbFwiIGlkPVwic2l0ZU1vZGFsXCIgdGFiaW5kZXg9XCItMVwiIHJvbGU9XCJkaWFsb2dcIj48ZGl2IGNsYXNzPVwibW9kYWwtZGlhbG9nXCIgcm9sZT1cImRvY3VtZW50XCI+PGRpdiBjbGFzcz1cIm1vZGFsLWNvbnRlbnRcIj48ZGl2IG5nLWluY2x1ZGU9XCJtb2RhbFRlbXBsYXRlXCI+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+Jyk7XG59XSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgRGFubnkgb24gMTIvMTkvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ01haW5TZWN0aW9uQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSwgc2VjdGlvblRpdGxlLCBzZWN0aW9uU3ViVGl0bGUsIGNvbnRlbnRUeXBlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdtYWluIHNlY3Rpb24nKTtcbiAgICAgICAgJHNjb3BlLnNlY3Rpb25UaXRsZSA9IHNlY3Rpb25UaXRsZTtcbiAgICAgICAgJHNjb3BlLnNlY3Rpb25TdWJUaXRsZSA9IHNlY3Rpb25TdWJUaXRsZTtcbiAgICAgICAgJHNjb3BlLmNvbnRlbnRUeXBlID0gY29udGVudFR5cGU7XG4gICAgfSlcbiIsImFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdwYXJ0aWFscy9zaXRlLWZvb3Rlci5odG1sJyxcbiAgICAnPGZvb3RlciBjbGFzcz1cImZvb3RlclwiIG5nLWlmPVwiIXN0YXRlLmluY2x1ZGVzKFxcJ2Rhc2hib2FyZFxcJylcIj48ZGl2IGNsYXNzPVwiZm9vdGVyLWNvbnRhaW5lclwiPjxuYXYgY2xhc3M9XCJmb290ZXItbGlua3NcIj48ZGl2IGNsYXNzPVwibGlua3MtY29udGFpbmVyXCI+PGgxIGNsYXNzPVwic2l0ZS1saXN0LXRpdGxlXCI+U2l0ZTwvaDE+PHVsPjxsaT48YSB1aS1zcmVmPVwiaG9tZVwiIGNsYXNzPVwic2l0ZS1saXN0LWl0ZW1cIj5Ib21lPC9hPjwvbGk+PGxpPjxhIHVpLXNyZWY9XCJzb3VuZFwiIGNsYXNzPVwic2l0ZS1saXN0LWl0ZW1cIj5Tb3VuZDwvYT48L2xpPjxsaT48YSB1aS1zcmVmPVwiZmlsbVwiIGNsYXNzPVwic2l0ZS1saXN0LWl0ZW1cIj5GaWxtPC9hPjwvbGk+PGxpPjxhIHVpLXNyZWY9XCJmYXNoaW9uXCIgY2xhc3M9XCJzaXRlLWxpc3QtaXRlbVwiPkZhc2hpb248L2E+PC9saT48bGk+PGEgdWktc3JlZj1cImN1bHR1cmVcIiBjbGFzcz1cInNpdGUtbGlzdC1pdGVtXCI+Q3VsdHVyZTwvYT48L2xpPjwvdWw+PC9kaXY+PGRpdiBjbGFzcz1cImxpbmtzLWNvbnRhaW5lclwiPjxoMSBjbGFzcz1cInNpdGUtbGlzdC10aXRsZVwiPkFib3V0PC9oMT48dWw+PGxpIHVpLXNyZWY9XCJhYm91dFwiIGNsYXNzPVwic2l0ZS1saXN0LWl0ZW1cIj48YT5BYm91dDwvYT48L2xpPjxsaT48YSBocmVmPVwibWFpbHRvOkRhbm55QEZyZXF1ZW5jeUN1bHR1cmUuY29tLCBCZW5ARnJlcXVlbmN5Q3VsdHVyZVwiIGNsYXNzPVwic2l0ZS1saXN0LWl0ZW1cIj5Db250YWN0PC9hPjwvbGk+PGxpPjxhIGhyZWY9XCJtYWlsdG86RGFubnlARnJlcXVlbmN5Q3VsdHVyZS5jb20sIEJlbkBGcmVxdWVuY3lDdWx0dXJlXCIgY2xhc3M9XCJzaXRlLWxpc3QtaXRlbVwiPlN1Ym1pc3Npb25zPC9hPjwvbGk+PGxpPjxhIGhyZWY9XCJtYWlsdG86RGFubnlARnJlcXVlbmN5Q3VsdHVyZS5jb20sIEJlbkBGcmVxdWVuY3lDdWx0dXJlXCIgY2xhc3M9XCJzaXRlLWxpc3QtaXRlbVwiPkFkdmVydGlzZTwvYT48L2xpPjwvdWw+PC9kaXY+PGRpdiBjbGFzcz1cInNvY2lhbC1mb290ZXJcIj48dWw+PGxpPjxpIGNsYXNzPVwiZmEgZmEtZmFjZWJvb2tcIj48L2k+PC9saT48bGk+PGkgY2xhc3M9XCJmYSBmYS10d2l0dGVyXCI+PC9pPjwvbGk+PGxpPjxpIGNsYXNzPVwiZmEgZmEtc291bmRjbG91ZFwiPjwvaT48L2xpPjwvdWw+PC9kaXY+PC9uYXY+PGRpdiBjbGFzcz1cImJvdHRvbS1mb290ZXJcIj48aDIgY2xhc3M9XCJsYWJlbFwiPiZjb3B5OyAyMDE2IEZyZXF1ZW5jeSBDdWx0dXJlPC9oMj48L2Rpdj48L2Rpdj48L2Zvb3Rlcj4nKTtcbn1dKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBEYW5ueSBvbiAxMS83LzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKVxuICAuY29udHJvbGxlcignSG9tZUN0cmwnLCBmdW5jdGlvbigkc2NvcGUsIENvbnRlbnRTZXJ2aWNlLCAkc3RhdGUpIHtcblxuICAgICRzY29wZS5nb1RvID0gZnVuY3Rpb24oc3RhdGUsIHN0YXRlUGFyYW1zKSB7XG4gICAgICAkc3RhdGUuZ28oc3RhdGUsIHN0YXRlUGFyYW1zKTtcbiAgICB9XG5cblxuICAgICRzY29wZS5zaG93U2lnbnVwID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdzaWdudXAhJyk7XG4gICAgfVxuICB9KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3BhcnRpYWxzL3NpdGUtYXVkaW8uaHRtbCcsXG4gICAgJzxkaXYgY2xhc3M9XCJzaXRlLWF1ZGlvXCIgbmctaWY9XCIhc3RhdGUuaW5jbHVkZXMoXFwnZGFzaGJvYXJkXFwnKVwiPjxkaXYgY2xhc3M9XCJuYXZiYXIgbmF2YmFyLWRlZmF1bHQgbmF2YmFyLWZpeGVkLWJvdHRvbVwiIHJvbGU9XCJuYXZpZ2F0aW9uXCI+PGRpdiBjbGFzcz1cImNvbnRhaW5lci1mbHVpZFwiIHBsYW5ndWxhcj1cInt7dHJhY2tVcmx9fVwiIG5nLWlmPVwidHJhY2tVcmxcIj48ZGl2IGNsYXNzPVwibmF2YmFyLWhlYWRlclwiPjxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwibmF2YmFyLXRvZ2dsZSBjb2xsYXBzZWQgYnV0dG9uLWRlZmF1bHRcIiBkYXRhLXRvZ2dsZT1cImNvbGxhcHNlXCIgZGF0YS10YXJnZXQ9XCIjYXVkaW8tcGxheWVyXCI+PGkgY2xhc3M9XCJmYSBmYS1tdXNpY1wiPjwvaT48L2J1dHRvbj48L2Rpdj48ZGl2IGNsYXNzPVwiZnVsbC1jb250cm9scyBjb250YWluZXIgaGlkZGVuLXhzXCI+PHVsIGNsYXNzPVwiYXVkaW8tY29udHJvbHNcIj48bGk+PGkgY2xhc3M9XCJmYSBmYS1iYWNrd2FyZFwiPjwvaT48L2xpPjxsaSBuZy1jbGljaz1cInBsYXlQYXVzZSgpXCI+PGkgY2xhc3M9XCJmYSBmYS1wbGF5XCIgbmctaWY9XCJwbGF5ZXIucGxheWluZyAhPT0gdHJhY2suc3JjXCI+PC9pPiA8aSBjbGFzcz1cImZhIGZhLXBhdXNlXCIgbmctaWY9XCJwbGF5ZXIucGxheWluZyA9PSB0cmFjay5zcmNcIj48L2k+PC9saT48bGk+PGkgY2xhc3M9XCJmYSBmYS1mb3J3YXJkXCI+PC9pPjwvbGk+PC91bD48aW1nIG5nLXNyYz1cInt7dHJhY2suYXJ0d29ya191cmx9fVwiIGNsYXNzPVwiaW1hZ2Utc2hhZG93IGF1ZGlvLWltYWdlXCIgaW1hZ2Utc2hhZG93Pjx1bCBjbGFzcz1cImF1ZGlvLWluZm8tZnVsbFwiPjxsaT48aDEgY2xhc3M9XCJsYWJlbFwiPkFydGlzdCA6IDxzcGFuPnt7dHJhY2sudXNlci51c2VybmFtZX19PC9zcGFuPjwvaDE+PC9saT48bGk+PGgxIGNsYXNzPVwibGFiZWxcIj5UcmFjayA6IDxzcGFuPnt7dHJhY2sudGl0bGV9fTwvc3Bhbj48L2gxPjwvbGk+PC91bD48L2Rpdj48ZGl2IGNsYXNzPVwiaGlkZGVuLXNtIGhpZGRlbi1tZCBoaWRkZW4tbGcgbWluaS1jb250cm9scyBjb250YWluZXItZmx1aWRcIj48dWwgY2xhc3M9XCJhdWRpby1jb250cm9sc1wiPjxsaT48aSBjbGFzcz1cImZhIGZhLWJhY2t3YXJkXCI+PC9pPjwvbGk+PGxpIG5nLWNsaWNrPVwicGxheVBhdXNlKClcIj48aSBjbGFzcz1cImZhIGZhLXBsYXlcIiBuZy1pZj1cInBsYXllci5wbGF5aW5nICE9PSB0cmFjay5zcmNcIj48L2k+IDxpIGNsYXNzPVwiZmEgZmEtcGF1c2VcIiBuZy1pZj1cInBsYXllci5wbGF5aW5nID09IHRyYWNrLnNyY1wiPjwvaT48L2xpPjxsaT48aSBjbGFzcz1cImZhIGZhLWZvcndhcmRcIj48L2k+PC9saT48L3VsPjwvZGl2PjxkaXYgY2xhc3M9XCJjb2xsYXBzZSBuYXZiYXItY29sbGFwc2VcIiBpZD1cImF1ZGlvLXBsYXllclwiPjx1bCBjbGFzcz1cIm5hdiBuYXZiYXItbmF2IGNvbnRhaW5lciBoaWRkZW4tbWQgaGlkZGVuLWxnIGhpZGRlbi1zbSBtaW5pLWF1ZGlvXCI+PGRpdiBjbGFzcz1cImF1ZGlvLWluZm9cIj48aW1nIG5nLXNyYz1cInt7dHJhY2suYXJ0d29ya191cmx9fVwiIGNsYXNzPVwiaW1hZ2Utc2hhZG93IGF1ZGlvLWltYWdlXCIgaW1hZ2Utc2hhZG93Pjx1bD48bGk+PGgxIGNsYXNzPVwibGFiZWxcIj5BcnRpc3QgOiA8c3Bhbj57e3RyYWNrLnVzZXIudXNlcm5hbWV9fTwvc3Bhbj48L2gxPjwvbGk+PGxpPjxoMSBjbGFzcz1cImxhYmVsXCI+VGl0bGUgOiA8c3Bhbj57e3RyYWNrLnRpdGxlfX08L3NwYW4+PC9oMT48L2xpPjwvdWw+PC9kaXY+PC91bD48L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj4nKTtcbn1dKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBEYW5ueSBvbiAxMi8yNC8xNi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJylcbiAgICAuY29udHJvbGxlcignRGFzaGJvYXJkQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSwgJHRpbWVvdXQsIENvbnRlbnRTZXJ2aWNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHN0YXRlLCBNb2RhbFNlcnZpY2UpIHtcblxuICAgICAgICAkc2NvcGUuc2VsZWN0ZWRWaWV3ID0gJHN0YXRlLmN1cnJlbnQuZGF0YS5zdGF0ZVRpdGxlO1xuICAgICAgICAkc2NvcGUuZXJyb3JNZXNzYWdlID0gbnVsbDtcbiAgICAgICAgJHNjb3BlLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgJHNjb3BlLiRzdGF0ZSA9ICRzdGF0ZTtcblxuICAgICAgICBjb25zb2xlLmxvZygnJHN0YXRlOiAnLCAkc3RhdGUpO1xuICAgICAgICBjb25zb2xlLmxvZygnY3VycmVudDogJywgJHN0YXRlLmluY2x1ZGVzKCdkYXNoYm9hcmQnKSlcblxuICAgICAgICAkc2NvcGUuY3VycmVudFVzZXIgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgJHNjb3BlLmdvVG8gPSBmdW5jdGlvbihzdGF0ZSwgY2hhbmdlVGl0bGUpIHtcbiAgICAgICAgICAgIGlmKGNoYW5nZVRpdGxlKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkVmlldyA9IGNoYW5nZVRpdGxlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkc3RhdGUuZ28oc3RhdGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgJHNjb3BlLmxvZ2dlZEluID0gZnVuY3Rpb24obG9nZ2VkSW5Vc2VyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbG9nZ2VkSW5Vc2VyOiAnLCBsb2dnZWRJblVzZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgJHNjb3BlLnNob3dDb250YWN0TW9kYWwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIE1vZGFsU2VydmljZS5vcGVuTW9kYWwoJ2NvbnRhY3QnLCAnQ29udGVudCBFZGl0b3IgUmVxdWVzdCcpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24obW9kYWxEYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdwcm9taXNlIHRvIGNvbnRhY3QhJywgbW9kYWxEYXRhKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnIG5vIHZhbHVlJyk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5zaG93TG9naW5Nb2RhbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgTW9kYWxTZXJ2aWNlLm9wZW5Nb2RhbCgnbG9naW4nKVxuICAgICAgICAgICAgICAgIC50aGVuKCRzY29wZS5sb2dnZWRJbilcbiAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCcgbm8gdmFsdWUnKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgJHNjb3BlLnJlc2V0TG9naW4gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRzY29wZS5lcnJvck1lc3NhZ2UgPSBudWxsO1xuICAgICAgICAgICAgJHNjb3BlLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICRzY29wZS5sb2dpbkZvcm0uZW1haWwgPSBudWxsO1xuICAgICAgICAgICAgJHNjb3BlLmxvZ2luRm9ybS5wYXNzd29yZCA9IG51bGw7XG4gICAgICAgIH1cblxuXG5cbiAgICB9KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3BhcnRpYWxzL3NpZGVtZW51Lmh0bWwnLFxuICAgICc8bmF2IGNsYXNzPVwibW9iaWxlLW1lbnVcIiBuZy1jbGFzcz1cIntcXCdzaG93LW1lbnVcXCcgOiBzaG93TWVudX1cIj48ZGl2IGNsYXNzPVwibmF2LWNvbnRhaW5lclwiPjx1bD48aDEgY2xhc3M9XCJzaXRlLWxpc3QtdGl0bGVcIj5TaXRlPC9oMT48bGk+PGEgdWktc3JlZj1cInNvdW5kXCIgY2xhc3M9XCJzaXRlLWxpc3QtaXRlbVwiPlNvdW5kPC9hPjwvbGk+PGxpPjxhIHVpLXNyZWY9XCJmaWxtXCIgY2xhc3M9XCJzaXRlLWxpc3QtaXRlbVwiPkZpbG08L2E+PC9saT48bGk+PGEgdWktc3JlZj1cImZhc2hpb25cIiBjbGFzcz1cInNpdGUtbGlzdC1pdGVtXCI+RmFzaGlvbjwvYT48L2xpPjxsaT48YSB1aS1zcmVmPVwiY3VsdHVyZVwiIGNsYXNzPVwic2l0ZS1saXN0LWl0ZW1cIj5DdWx0dXJlPC9hPjwvbGk+PC91bD48dWw+PGgxIGNsYXNzPVwic2l0ZS1saXN0LXRpdGxlXCI+QWJvdXQ8L2gxPjxsaT48YSBocmVmPVwiXCIgY2xhc3M9XCJzaXRlLWxpc3QtaXRlbVwiPkFib3V0PC9hPjwvbGk+PGxpPjxhIGhyZWY9XCJtYWlsdG86RGFubnlARnJlcXVlbmN5Q3VsdHVyZS5jb20sIEJlbkBGcmVxdWVuY3lDdWx0dXJlXCIgY2xhc3M9XCJzaXRlLWxpc3QtaXRlbVwiPkNvbnRhY3Q8L2E+PC9saT48bGk+PGEgaHJlZj1cIm1haWx0bzpEYW5ueUBGcmVxdWVuY3lDdWx0dXJlLmNvbSwgQmVuQEZyZXF1ZW5jeUN1bHR1cmVcIiBjbGFzcz1cInNpdGUtbGlzdC1pdGVtXCI+U3VibWlzc2lvbnM8L2E+PC9saT48bGk+PGEgaHJlZj1cIm1haWx0bzpEYW5ueUBGcmVxdWVuY3lDdWx0dXJlLmNvbSwgQmVuQEZyZXF1ZW5jeUN1bHR1cmVcIiBjbGFzcz1cInNpdGUtbGlzdC1pdGVtXCI+QWR2ZXJ0aXNlPC9hPjwvbGk+PC91bD48L2Rpdj48ZGl2IGNsYXNzPVwic29jaWFsLWNvbnRhaW5lclwiPjx1bD48bGk+PGkgY2xhc3M9XCJmYSBmYS1mYWNlYm9va1wiPjwvaT48L2xpPjxsaT48aSBjbGFzcz1cImZhIGZhLXR3aXR0ZXJcIj48L2k+PC9saT48bGk+PGkgY2xhc3M9XCJmYSBmYS1zb3VuZGNsb3VkXCI+PC9pPjwvbGk+PC91bD48L2Rpdj48L25hdj4nKTtcbn1dKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBEYW5ueSBvbiAxMi8yNS8xNi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJylcbiAgICAuY29udHJvbGxlcignRGFzaGJvYXJkQ29udGVudEN0cmwnLCBmdW5jdGlvbigkc2NvcGUsICR0aW1lb3V0LCBDb250ZW50U2VydmljZSwgJHN0YXRlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdzY29wZTogJywgJHNjb3BlKTtcblxuICAgICAgICAkc2NvcGUuc2VsZWN0ZWRWaWV3ID0gJ21lbnUnO1xuICAgICAgICAkc2NvcGUubG9hZGluZyA9IGZhbHNlO1xuXG4gICAgICAgICRzY29wZS5jdXJyZW50VXNlciA9IHVuZGVmaW5lZDtcblxuICAgICAgICB2YXIgY29udGVudEZpZWxkcyA9IFtcbiAgICAgICAgICAgICdhdXRob3InLFxuICAgICAgICAgICAgJ3RpdGxlJyxcbiAgICAgICAgICAgICdjb250ZW50VHlwZScsXG4gICAgICAgICAgICAnc3ViVGl0bGUnLFxuICAgICAgICAgICAgJ3VybCcsXG4gICAgICAgICAgICAnaGVhZGVySW1hZ2UnLFxuICAgICAgICAgICAgJ3RhZ3MnLFxuICAgICAgICAgICAgJ3B1Ymxpc2hlZERhdGUnLFxuICAgICAgICAgICAgJ2Rlc2NyaXB0aW9uJyxcbiAgICAgICAgICAgICdjb250ZW50U2VjdGlvbnMnLFxuICAgICAgICAgICAgJ3F1b3RlcycsXG4gICAgICAgICAgICAnYXVkaW9VcmxzJyxcbiAgICAgICAgICAgICdzb2NpYWxNZWRpYScsXG4gICAgICAgICAgICAnc2hhcmVVcmwnLFxuICAgICAgICAgICAgJ21haW5Db250ZW50J1xuICAgICAgICBdXG5cbiAgICAgICAgQ29udGVudFNlcnZpY2UuZ2V0Q29udGVudCgpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihjb250ZW50KSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNpdGVDb250ZW50ID0gY29udGVudDtcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgLy8kdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gICAgJHNjb3BlLnNlbGVjdGVkVmlldyA9ICdlZGl0JztcbiAgICAgICAgLy99LCAyMDAwKVxuXG4gICAgICAgICRzY29wZS5jaGFuZ2VWaWV3ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZigkc2NvcGUuc2VsZWN0ZWRWaWV3ID09ICdlZGl0JykgJHNjb3BlLnNlbGVjdGVkVmlldyA9ICdtZW51JztcbiAgICAgICAgICAgIGVsc2UgJHNjb3BlLnNlbGVjdGVkVmlldyA9ICdlZGl0JztcbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5nb1RvID0gZnVuY3Rpb24oc3RhdGUpIHtcbiAgICAgICAgICAgICRzdGF0ZS5nbyhzdGF0ZSk7XG4gICAgICAgIH1cblxuICAgICAgICAkc2NvcGUuc2VsZWN0ZWRDb250ZW50ID0ge307XG5cbiAgICAgICAgJHNjb3BlLm5ld0NvbnRlbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZFZpZXcgPSAnY3JlYXRlJztcbiAgICAgICAgICAgIGluaXROZXdDb250ZW50KClcbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5lZGl0Q29udGVudCA9IGZ1bmN0aW9uKGNvbnRlbnQpIHtcbiAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZENvbnRlbnQgPSBjb250ZW50O1xuICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkVmlldyA9ICdlZGl0JztcbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZFZpZXcgPSAnbWVudSc7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBpbml0TmV3Q29udGVudCgpIHtcbiAgICAgICAgICAgIGNvbnRlbnRGaWVsZHMubWFwKGZ1bmN0aW9uKGZpZWxkKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkQ29udGVudFtmaWVsZF0gPSBudWxsO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBuZXdJdGVtcyA9IHtcbiAgICAgICAgICAgICd0YWcnIDogJycsXG4gICAgICAgICAgICAncXVvdGUnIDogJycsXG4gICAgICAgICAgICAnYXVkaW8nIDogJycsXG4gICAgICAgICAgICAnc2VjdGlvbicgOiBudWxsXG5cbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5hZGRJdGVtID0gZnVuY3Rpb24oaXRlbVR5cGUsIGtleSkge1xuICAgICAgICAgICAgdmFyIG5ld0l0ZW0gPSBuZXdJdGVtc1tpdGVtVHlwZV07XG4gICAgICAgICAgICBpZighJHNjb3BlLnNlbGVjdGVkQ29udGVudFtrZXldKXtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRDb250ZW50W2tleV0gPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZENvbnRlbnRba2V5XS5wdXNoKG5ld0l0ZW0pO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ25ldyBpdGVtOiAnLCBuZXdJdGVtKTtcbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5yZW1vdmVJdGVtID0gZnVuY3Rpb24oa2V5LCBpbmRleCkge1xuICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkQ29udGVudFtrZXldLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH1cblxuICAgICAgICAkc2NvcGUuc2hvd0NvbmZpcm0gPSBmYWxzZTtcblxuICAgICAgICAkc2NvcGUuY29uZmlybSA9IGZ1bmN0aW9uKGNvbmZpcm0pIHtcbiAgICAgICAgICAgICRzY29wZS5zaG93Q29uZmlybSA9IGNvbmZpcm07XG4gICAgICAgIH1cblxuICAgICAgICAkc2NvcGUuY29uZmlybURlbGV0ZSA9IGZ1bmN0aW9uKGNvbnRlbnQsIGluZGV4KSB7XG5cbiAgICAgICAgICAgIGlmKCEkc2NvcGUubG9hZGluZykge1xuICAgICAgICAgICAgICAgICRzY29wZS5sb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBDb250ZW50U2VydmljZS5kZWxldGVDb250ZW50KGNvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlcyl7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRWaWV3ID0gJ21lbnUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNpdGVDb250ZW50LnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5maW5hbGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG5cbiAgICAgICAgJHNjb3BlLnNhdmUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzZWxlY3RlZDogJywgJHNjb3BlLnNlbGVjdGVkQ29udGVudCk7XG4gICAgICAgICAgICAvL2lmKCEkc2NvcGUubG9hZGluZykge1xuICAgICAgICAgICAgLy8gICAgJHNjb3BlLmxvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgLy8gICAgY29uc29sZS5sb2coJ3NlbGVjdGVkJywgJHNjb3BlLnNlbGVjdGVkQ29udGVudCk7XG4gICAgICAgICAgICAvLyAgICAkc2NvcGUubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgLy8gICAgaWYoISRzY29wZS5zZWxlY3RlZENvbnRlbnQuX2lkKSB7XG4gICAgICAgICAgICAvLyAgICAgICAgQ29udGVudFNlcnZpY2UubmV3Q29udGVudCgkc2NvcGUuc2VsZWN0ZWRDb250ZW50KVxuICAgICAgICAgICAgLy8gICAgICAgICAgICAudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZXM6ICcsIHJlcyk7XG4gICAgICAgICAgICAvLyAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAvLyAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnI6ICcsIGVycik7XG4gICAgICAgICAgICAvLyAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAvLyAgICAgICAgICAgIC5maW5hbGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgJHNjb3BlLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZFZpZXcgPSAnbWVudSc7XG4gICAgICAgICAgICAvLyAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAvLyAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gICAgICAgIENvbnRlbnRTZXJ2aWNlLnVwZGF0ZUNvbnRlbnQoJHNjb3BlLnNlbGVjdGVkQ29udGVudClcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVzOiAnLCByZXMpO1xuICAgICAgICAgICAgLy8gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLy8gICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyOiAnLCBlcnIpO1xuICAgICAgICAgICAgLy8gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLy8gICAgICAgICAgICAuZmluYWxseShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICRzY29wZS5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRWaWV3ID0gJ21lbnUnO1xuICAgICAgICAgICAgLy8gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLy8gICAgfVxuICAgICAgICAgICAgLy99XG5cbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5mb3JtYXRVcmwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmKCRzY29wZS5zZWxlY3RlZENvbnRlbnQudGl0bGUpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRDb250ZW50LnVybCA9ICRzY29wZS5zZWxlY3RlZENvbnRlbnQudGl0bGUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMvZywgXCJfXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSlcbiIsImFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdwYXJ0aWFscy9zZWN0aW9uLWhlYWRlci5odG1sJyxcbiAgICAnPGhlYWRlciBjbGFzcz1cInNlY3Rpb24taGVhZGVyXCIgaWQ9XCJzZWN0aW9uSGVhZGVyXCI+PGltZyBzcmM9XCIuLi9pbWFnZXMva2luZXRpa19sb2dvX3B1cnBsZS5zdmdcIiBjbGFzcz1cImxvZ29cIj48dWwgY2xhc3M9XCJoZWFkZXItbWVudVwiPjxsaSBuZy1jbGljaz1cImdvVG8oXFwnc291bmRcXCcpXCIgbmctY2xhc3M9XCJ7XFwnYWN0aXZlLWxpbmtcXCcgOiBpc0FjdGl2ZShcXCdzb3VuZFxcJyl9XCI+PGgxIGNsYXNzPVwidGl0bGVcIj5Tb3VuZDwvaDE+PC9saT48bGkgbmctY2xpY2s9XCJnb1RvKFxcJ2ZpbG1cXCcpXCIgbmctY2xhc3M9XCJ7XFwnYWN0aXZlLWxpbmtcXCcgOiBpc0FjdGl2ZShcXCdmaWxtXFwnKX1cIj48aDEgY2xhc3M9XCJ0aXRsZVwiPkZpbG08L2gxPjwvbGk+PGxpIG5nLWNsaWNrPVwiZ29UbyhcXCdmYXNoaW9uXFwnKVwiIG5nLWNsYXNzPVwie1xcJ2FjdGl2ZS1saW5rXFwnIDogaXNBY3RpdmUoXFwnZmFzaGlvblxcJyl9XCI+PGgxIGNsYXNzPVwidGl0bGVcIj5GYXNoaW9uPC9oMT48L2xpPjxsaSBuZy1jbGljaz1cImdvVG8oXFwnY3VsdHVyZVxcJylcIiBuZy1jbGFzcz1cIntcXCdhY3RpdmUtbGlua1xcJyA6IGlzQWN0aXZlKFxcJ2N1bHR1cmVcXCcpfVwiPjxoMSBjbGFzcz1cInRpdGxlXCI+Q3VsdHVyZTwvaDE+PC9saT48L3VsPjwvaGVhZGVyPicpO1xufV0pO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IERhbm55IG9uIDEyLzE4LzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKVxuICAgIC5jb250cm9sbGVyKCdBZG1pbkN0cmwnLCBmdW5jdGlvbigkc2NvcGUsICR0aW1lb3V0LCBVc2VyU2VydmljZSwgQWRtaW5TZXJ2aWNlLCBNb2RhbFNlcnZpY2UpIHtcblxuICAgICAgICAkc2NvcGUuc2lkZU1lbWJlckNhcmQgPSBudWxsO1xuICAgICAgICAkc2NvcGUuc2F2aW5nID0gZmFsc2U7XG4gICAgICAgICRzY29wZS5hZG1pbkVycm9yTWVzc2FnZSA9IG51bGw7XG5cbiAgICAgICAgQWRtaW5TZXJ2aWNlLmFsbFVzZXJzKClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHVzZXJzKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3VzZXJzOiAnLCB1c2Vycyk7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnRlYW1NZW1iZXJzID0gdXNlcnM7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnI6ICcsIGVycik7XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICRzY29wZS5zaG93TWVtYmVyQ2FyZCA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgICAgICAgICAgICRzY29wZS5zaWRlTWVtYmVyQ2FyZCA9IHR5cGU7XG4gICAgICAgICAgICBpZighdHlwZSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5jbGVhck1lbWJlckZvcm0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5zYXZlID0gZnVuY3Rpb24obWVtYmVySW5mbykge1xuICAgICAgICAgICAgaWYoISRzY29wZS5zYXZpbmcpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuYWRtaW5FcnJvck1lc3NhZ2UgPSBudWxsO1xuICAgICAgICAgICAgICAgIGlmKCFtZW1iZXJJbmZvLmZpcnN0TmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRtaW5FcnJvck1lc3NhZ2UgPSAnUGxlYXNlIGluY2x1ZGUgYSBmaXJzdCBuYW1lLidcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYoIW1lbWJlckluZm8ubGFzdE5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFkbWluRXJyb3JNZXNzYWdlID0gJ1BsZWFzZSBpbmNsdWRlIGEgbGFzdCBuYW1lIChvciBpbml0aWFsKS4nO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZighbWVtYmVySW5mby5lbWFpbCkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRtaW5FcnJvck1lc3NhZ2UgPSAnUGxlYXNlIGluY2x1ZGUgYW4gZW1haWwuJztcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYoIW1lbWJlckluZm8ucm9sZSkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRtaW5FcnJvck1lc3NhZ2UgPSAnUGxlYXNlIHNlbGVjdCBhIHJvbGUuJztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2F2aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYobWVtYmVySW5mby5faWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd1cGRhdGUhJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBVc2VyU2VydmljZS51cGRhdGVVc2VyKG1lbWJlckluZm8pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZXMnLCByZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd01lbWJlckNhcmQobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVVzZXJJbkFycmF5KHJlcy5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2VycjogJywgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maW5hbGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2F2aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEFkbWluU2VydmljZS5uZXdVc2VyKGNyZWF0ZVVzZXJPYmoobWVtYmVySW5mbykpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZXMnLCByZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudGVhbU1lbWJlcnMucHVzaChyZXMuZGF0YSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNpZGVNZW1iZXJDYXJkID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsZWFyTWVtYmVyRm9ybSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyOiAnLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmFsbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zYXZpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5kZWxldGUgPSBmdW5jdGlvbihtZW1iZXIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkZWxldGU6ICcsIG1lbWJlcik7XG4gICAgICAgICAgICBNb2RhbFNlcnZpY2Uub3Blbk1vZGFsKCdjb25maXJtJywgJ0RlbGV0ZSAnICsgbWVtYmVyLmZpcnN0TmFtZSArICc/JylcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihtb2RhbERhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2RlbGV0ZTogJywgbWVtYmVyKTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNhdmluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIEFkbWluU2VydmljZS5kZWxldGVVc2VyKG1lbWJlci5faWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd01lbWJlckNhcmQobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlVXNlckZyb21BcnJheShtZW1iZXIuX2lkKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyOiAnLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5maW5hbGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zYXZpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCcgbm8gdmFsdWUnKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgJHNjb3BlLmVkaXRNZW1iZXIgPSBmdW5jdGlvbihtZW1iZXIpIHtcbiAgICAgICAgICAgICRzY29wZS5tZW1iZXJGb3JtID0gYW5ndWxhci5jb3B5KG1lbWJlcik7XG4gICAgICAgICAgICAkc2NvcGUuc2F2aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAkc2NvcGUuc2lkZU1lbWJlckNhcmQgPSAnZWRpdCc7XG4gICAgICAgIH1cblxuXG4gICAgICAgICRzY29wZS5jbGVhck1lbWJlckZvcm0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRzY29wZS5hZG1pbkVycm9yTWVzc2FnZSA9IG51bGw7XG4gICAgICAgICAgICAkc2NvcGUuc2F2aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAkc2NvcGUubWVtYmVyRm9ybS5maXJzdE5hbWUgPSBudWxsO1xuICAgICAgICAgICAgJHNjb3BlLm1lbWJlckZvcm0ubGFzdE5hbWUgPSBudWxsO1xuICAgICAgICAgICAgJHNjb3BlLm1lbWJlckZvcm0uZW1haWwgPSBudWxsO1xuICAgICAgICAgICAgJHNjb3BlLm1lbWJlckZvcm0ucm9sZSA9IG51bGw7XG4gICAgICAgIH07XG5cblxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVVc2VyT2JqKG1lbWJlckluZm8pIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZmlyc3ROYW1lIDogbWVtYmVySW5mby5maXJzdE5hbWUsXG4gICAgICAgICAgICAgICAgbGFzdE5hbWUgOiBtZW1iZXJJbmZvLmxhc3ROYW1lLFxuICAgICAgICAgICAgICAgIGVtYWlsIDogbWVtYmVySW5mby5lbWFpbCxcbiAgICAgICAgICAgICAgICByb2xlIDogbWVtYmVySW5mby5yb2xlXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVVc2VySW5BcnJheSh1cGRhdGVkVXNlcikge1xuICAgICAgICAgICAgdmFyIHVzZXJzTGVuID0gJHNjb3BlLnRlYW1NZW1iZXJzLmxlbmd0aDtcbiAgICAgICAgICAgIGZvcih2YXIgaT0wO2k8dXNlcnNMZW47aSsrKSB7XG4gICAgICAgICAgICAgICAgaWYodXBkYXRlZFVzZXIuX2lkID09ICRzY29wZS50ZWFtTWVtYmVyc1tpXS5faWQpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRlYW1NZW1iZXJzW2ldID0gdXBkYXRlZFVzZXI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHJlbW92ZVVzZXJGcm9tQXJyYXkodXNlcklkKSB7XG4gICAgICAgICAgICB2YXIgdXNlcnNMZW4gPSAkc2NvcGUudGVhbU1lbWJlcnMubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIGlkeDtcbiAgICAgICAgICAgIGZvcih2YXIgaT0wO2k8dXNlcnNMZW47aSsrKSB7XG4gICAgICAgICAgICAgICAgaWYodXNlcklkID09ICRzY29wZS50ZWFtTWVtYmVyc1tpXS5faWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWR4ID0gaTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoaWR4IDwgdXNlcnNMZW4pIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUudGVhbU1lbWJlcnMuc3BsaWNlKGlkeCwxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgfSlcbiIsImFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdwYXJ0aWFscy9uYXZiYXIuaHRtbCcsXG4gICAgJzxkaXYgY2xhc3M9XCJoZWFkZXJcIj48bmF2IGNsYXNzPVwibmF2YmFyIG5hdmJhci1kZWZhdWx0IG5hdmJhci1pbnZlcnNlIG5hdmJhci1maXhlZC10b3AgbWFpbi1uYXZiYXJcIiByb2xlPVwibmF2aWdhdGlvblwiIG5nLWNsYXNzPVwie1xcJ3Zpc2libGUtbmF2XFwnIDogc2hvd05hdmJhcn1cIj48ZGl2IGNsYXNzPVwiY29udGFpbmVyXCI+PGRpdiBjbGFzcz1cIm1lbnUtbG9nbyBoaWRkZW4teHNcIiBuZy1jbGljaz1cImdvVG8oXFwnaG9tZVxcJylcIj48aW1nIHNyYz1cIi4uL2ltYWdlcy9raW5ldGlrX25hbWUuc3ZnXCI+PC9kaXY+PHVsIGNsYXNzPVwiZnVsbC1uYXYgaGlkZGVuLXhzXCI+PGxpIG5nLWNsaWNrPVwiZ29UbyhcXCdzb3VuZFxcJylcIiBuZy1jbGFzcz1cIntcXCdhY3RpdmUtbGlua1xcJyA6IGlzQWN0aXZlKFxcJ3NvdW5kXFwnKX1cIiBjbGFzcz1cIm5hdmJhci1saW5rXCI+PGgxPlNvdW5kPC9oMT48L2xpPjxsaSBuZy1jbGljaz1cImdvVG8oXFwnZmlsbVxcJylcIiBjbGFzcz1cIm5hdmJhci1saW5rXCIgbmctY2xhc3M9XCJ7XFwnYWN0aXZlLWxpbmtcXCcgOiBpc0FjdGl2ZShcXCdmaWxtXFwnKX1cIj48aDE+RmlsbTwvaDE+PC9saT48bGkgbmctY2xpY2s9XCJnb1RvKFxcJ2Zhc2hpb25cXCcpXCIgY2xhc3M9XCJuYXZiYXItbGlua1wiIG5nLWNsYXNzPVwie1xcJ2FjdGl2ZS1saW5rXFwnIDogaXNBY3RpdmUoXFwnZmFzaGlvblxcJyl9XCI+PGgxPkZhc2hpb248L2gxPjwvbGk+PGxpIG5nLWNsaWNrPVwiZ29UbyhcXCdjdWx0dXJlXFwnKVwiIGNsYXNzPVwibmF2YmFyLWxpbmtcIiBuZy1jbGFzcz1cIntcXCdhY3RpdmUtbGlua1xcJyA6IGlzQWN0aXZlKFxcJ2N1bHR1cmVcXCcpfVwiPjxoMT5DdWx0dXJlPC9oMT48L2xpPjwvdWw+PGRpdiBjbGFzcz1cInZpc2libGUteHMgbW9iaWxlLW5hdmJhclwiPjxpbWcgc3JjPVwiLi4vaW1hZ2VzL2tpbmV0aWtfbmFtZS5zdmdcIiBuZy1jbGljaz1cImdvVG8oXFwnaG9tZVxcJylcIj48aGFtYnVyZ2VyLW1lbnUgc3RhdGU9XCJzaG93TWVudVwiIG5nLWNsaWNrPVwidG9nZ2xlTGlua3MoKVwiPjwvaGFtYnVyZ2VyLW1lbnU+PC9kaXY+PC9kaXY+PC9uYXY+PC9kaXY+Jyk7XG59XSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgRGFubnkgb24gMTIvMjQvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpXG4gICAgLmRpcmVjdGl2ZSgnc2l0ZU1vZGFsJywgZnVuY3Rpb24oJHJvb3RTY29wZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3QgOiAnRScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybCA6ICdwYXJ0aWFscy9zaXRlLW1vZGFsLmh0bWwnLFxuICAgICAgICAgICAgbGluayA6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtLCBhdHRycykge1xuICAgICAgICAgICAgICAgIHNjb3BlLm1vZGFsVGVtcGxhdGUgPSAkcm9vdFNjb3BlLm1vZGFsVGVtcGxhdGU7XG4gICAgICAgICAgICAgICAgc2NvcGUubW9kYWxDb25maXJtID0gJHJvb3RTY29wZS5tb2RhbENvbmZpcm07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3BhcnRpYWxzL21vZGFsLXNpZ251cC5odG1sJyxcbiAgICAnPGRpdj48ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyXCI+PGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJjbG9zZVwiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCIgYXJpYS1sYWJlbD1cIkNsb3NlXCI+PHNwYW4gYXJpYS1oaWRkZW49XCJ0cnVlXCI+JnRpbWVzOzwvc3Bhbj48L2J1dHRvbj48aDEgY2xhc3M9XCJ0aXRsZVwiPktpbmV0aWsgTWFnIEVhcmx5IEFjY2VzczwvaDE+PC9kaXY+PGRpdiBjbGFzcz1cIm1vZGFsLWJvZHlcIj48Zm9ybSByb2xlPVwiZm9ybVwiIG5vdmFsaWRhdGUgbmFtZT1cInNpZ251cEZvcm1cIj48ZGl2IGNsYXNzPVwicm93XCI+PGRpdiBjbGFzcz1cImNvbC14cy0xMCBjb2wteHMtb2Zmc2V0LTEgY29sLXNtLTYgY29sLXNtLW9mZnNldC0wIGZvcm0tZ3JvdXBcIj48bGFiZWwgZm9yPVwidXNlckVtYWlsXCIgY2xhc3M9XCJsYWJlbFwiPkVtYWlsPC9sYWJlbD48aW5wdXQgdHlwZT1cImVtYWlsXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBpZD1cInVzZXJFbWFpbFwiIHBsYWNlaG9sZGVyPVwiRW1haWxcIiBuZy1tb2RlbD1cInNpZ251cEZvcm0uZW1haWxcIj48L2Rpdj48ZGl2IGNsYXNzPVwiY29sLXhzLTEwIGNvbC14cy1vZmZzZXQtMSBjb2wtc20tNiBjb2wtc20tb2Zmc2V0LTAgZm9ybS1ncm91cFwiPjxsYWJlbCBmb3I9XCJmaXJzdE5hbWVcIiBjbGFzcz1cImxhYmVsXCI+Rmlyc3QgTmFtZTwvbGFiZWw+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBpZD1cImZpcnN0TmFtZVwiIHBsYWNlaG9sZGVyPVwiRmlyc3QgTmFtZVwiIG5nLW1vZGVsPVwic2lnbnVwRm9ybS5maXJzdE5hbWVcIj48L2Rpdj48L2Rpdj48L2Zvcm0+PC9kaXY+PGRpdiBjbGFzcz1cIm1vZGFsLWZvb3RlclwiPjxkaXYgY2xhc3M9XCJtb2RhbC1mb290ZXItZXh0cmFzXCI+PGgxIGNsYXNzPVwidGl0bGUgbW9kYWwtZXJyb3JcIj57e2Vycm9yTWVzc2FnZX19PC9oMT48aSBjbGFzcz1cImZhIGZhLXNwaW5uZXIgZmEtc3BpblwiIG5nLWlmPVwiIWVycm9yTWVzc2FnZSAmJiBsb2dnaW5nSW5cIj48L2k+PC9kaXY+PGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHRcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiPjxoMSBjbGFzcz1cImJ1dHRvblwiPkNhbmNlbDwvaDE+PC9idXR0b24+IDxidXR0b24gdHlwZT1cInN1Ym1pdFwiIGNsYXNzPVwiYnRuIHB1cnBsZS1idXR0b25cIiBuZy1jbGljaz1cIiRwYXJlbnQubW9kYWxDb25maXJtKHNpZ251cEZvcm0pXCI+PGgxIGNsYXNzPVwiYnV0dG9uXCI+U3VibWl0PC9oMT48L2J1dHRvbj48L2Rpdj48L2Rpdj4nKTtcbn1dKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBEYW5ueSBvbiAxMS82LzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKVxuICAuZGlyZWN0aXZlKCdzaXRlRm9vdGVyJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0IDogJ0UnLFxuICAgICAgdGVtcGxhdGVVcmwgOiAncGFydGlhbHMvc2l0ZS1mb290ZXIuaHRtbCdcbiAgICB9XG4gIH0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgncGFydGlhbHMvbW9kYWwtbG9naW4uaHRtbCcsXG4gICAgJzxkaXYgbmctY29udHJvbGxlcj1cIkxvZ2luTW9kYWxDdHJsXCIgbmctaW5pdD1cInJlc2V0TG9naW4oKVwiPjxkaXYgY2xhc3M9XCJtb2RhbC1oZWFkZXJcIj48YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImNsb3NlXCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIiBhcmlhLWxhYmVsPVwiQ2xvc2VcIj48c3BhbiBhcmlhLWhpZGRlbj1cInRydWVcIj4mdGltZXM7PC9zcGFuPjwvYnV0dG9uPjxoMSBjbGFzcz1cInRpdGxlXCI+TG9naW48L2gxPjwvZGl2PjxkaXYgY2xhc3M9XCJtb2RhbC1ib2R5XCI+PGZvcm0gcm9sZT1cImZvcm1cIiBub3ZhbGlkYXRlIG5hbWU9XCJsb2dpbkZvcm1cIj48ZGl2IGNsYXNzPVwicm93XCI+PGRpdiBjbGFzcz1cImNvbC14cy02IGNvbC14cy1vZmZzZXQtMyBjb2wtc20tNiBjb2wtc20tb2Zmc2V0LTAgZm9ybS1ncm91cFwiPjxsYWJlbCBmb3I9XCJ1c2VyRW1haWxcIiBjbGFzcz1cImxhYmVsXCI+RW1haWw8L2xhYmVsPjxpbnB1dCB0eXBlPVwiZW1haWxcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIGlkPVwidXNlckVtYWlsXCIgcGxhY2Vob2xkZXI9XCJFbWFpbFwiIG5nLW1vZGVsPVwibG9naW5Gb3JtLmVtYWlsXCI+PC9kaXY+PGRpdiBjbGFzcz1cImNvbC14cy02IGNvbC14cy1vZmZzZXQtMyBjb2wtc20tNiBjb2wtc20tb2Zmc2V0LTAgZm9ybS1ncm91cFwiPjxsYWJlbCBmb3I9XCJ1c2VyUGFzc3dvcmRcIiBjbGFzcz1cImxhYmVsXCI+UGFzc3dvcmQ8L2xhYmVsPjxpbnB1dCB0eXBlPVwicGFzc3dvcmRcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIGlkPVwidXNlclBhc3N3b3JkXCIgcGxhY2Vob2xkZXI9XCJQYXNzd29yZFwiIG5nLW1vZGVsPVwibG9naW5Gb3JtLnBhc3N3b3JkXCI+PC9kaXY+PC9kaXY+PC9mb3JtPjwvZGl2PjxkaXYgY2xhc3M9XCJtb2RhbC1mb290ZXJcIj48ZGl2IGNsYXNzPVwibW9kYWwtZm9vdGVyLWV4dHJhc1wiPjxoMSBjbGFzcz1cInRpdGxlIG1vZGFsLWVycm9yXCI+e3tlcnJvck1lc3NhZ2V9fTwvaDE+PGkgY2xhc3M9XCJmYSBmYS1zcGlubmVyIGZhLXNwaW5cIiBuZy1pZj1cIiFlcnJvck1lc3NhZ2UgJiYgbG9nZ2luZ0luXCI+PC9pPjwvZGl2PjxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0XCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIj48aDEgY2xhc3M9XCJidXR0b25cIj5DYW5jZWw8L2gxPjwvYnV0dG9uPiA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIiBjbGFzcz1cImJ0biBwdXJwbGUtYnV0dG9uXCIgbmctY2xpY2s9XCJsb2dpbihsb2dpbkZvcm0pXCI+PGgxIGNsYXNzPVwiYnV0dG9uXCI+TG9naW48L2gxPjwvYnV0dG9uPjwvZGl2PjwvZGl2PicpO1xufV0pO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IERhbm55IG9uIDExLzYvMTYuXG4gKi9cblxuYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJylcbiAgLmRpcmVjdGl2ZSgnc2l0ZUF1ZGlvJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0IDogJ0UnLFxuICAgICAgdGVtcGxhdGVVcmwgOiAncGFydGlhbHMvc2l0ZS1hdWRpby5odG1sJyxcbiAgICAgIGxpbmsgOiBmdW5jdGlvbihzY29wZSwgZWxlbSwgYXR0cnMpIHtcblxuICAgICAgICB2YXIgY2xpZW50SWQgPSAnb2VyWGY2bkJjRHU1Q29OZGFPcklHdXRWQ0tYUFl2U0InO1xuICAgICAgICBzY29wZS50cmFja1VybCA9ICdodHRwczovL3NvdW5kY2xvdWQuY29tL2l0emFpYS9taXgtbWFjaGluZS0yOTctMTYtbm92LTIwMTYtd2l0aC1pdHphaWEnO1xuXG4gICAgICAgIFNDLmluaXRpYWxpemUoe1xuICAgICAgICAgIGNsaWVudF9pZDogY2xpZW50SWRcbiAgICAgICAgfSk7XG4gICAgICAgIFNDLnJlc29sdmUoJ2h0dHBzOi8vc291bmRjbG91ZC5jb20vaXR6YWlhL21peC1tYWNoaW5lLTI5Ny0xNi1ub3YtMjAxNi13aXRoLWl0emFpYScpXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24odHJhY2spIHtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3RyYWNrOiAnLCB0cmFjayk7XG4gICAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiIsImFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdwYXJ0aWFscy9tb2RhbC1jb250YWN0Lmh0bWwnLFxuICAgICc8ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyXCI+PGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJjbG9zZVwiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCIgYXJpYS1sYWJlbD1cIkNsb3NlXCI+PHNwYW4gYXJpYS1oaWRkZW49XCJ0cnVlXCI+JnRpbWVzOzwvc3Bhbj48L2J1dHRvbj48aDEgY2xhc3M9XCJ0aXRsZVwiPnt7JHBhcmVudC5tb2RhbFRpdGxlID8gJHBhcmVudC5tb2RhbFRpdGxlIDogXFwnQ29udGFjdFxcJ319PC9oMT48L2Rpdj48ZGl2IGNsYXNzPVwibW9kYWwtYm9keVwiPjxwIGNsYXNzPVwic2l0ZS1ib2R5LXRleHQgY2VudGVyLWJsb2NrXCI+UGxlYXNlIGZpbGwgb3V0IHNvbWUgZGV0YWlscyBzbyB3ZSBjYW4gZ2V0IGJhY2sgdG8geW91LjwvcD48Zm9ybSByb2xlPVwiZm9ybVwiIG5vdmFsaWRhdGUgbmFtZT1cImNvbnRhY3RGb3JtXCIgY2xhc3M9XCJjZW50ZXItYmxvY2tcIj48ZGl2IGNsYXNzPVwicm93XCI+PGRpdiBjbGFzcz1cImNvbC14cy02IGNvbC14cy1vZmZzZXQtMyBjb2wtc20tNSBjb2wtc20tb2Zmc2V0LTEgZm9ybS1ncm91cFwiPjxsYWJlbCBmb3I9XCJjb250YWN0Rmlyc3ROYW1lXCIgY2xhc3M9XCJsYWJlbFwiPkZpcnN0IE5hbWU8L2xhYmVsPjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgaWQ9XCJjb250YWN0Rmlyc3ROYW1lXCIgcGxhY2Vob2xkZXI9XCJGaXJzdCBOYW1lXCIgbmctbW9kZWw9XCJjb250YWN0Rm9ybS5maXJzdE5hbWVcIj48L2Rpdj48ZGl2IGNsYXNzPVwiY29sLXhzLTYgY29sLXhzLW9mZnNldC0zIGNvbC1zbS01IGNvbC1zbS1vZmZzZXQtMCBmb3JtLWdyb3VwXCI+PGxhYmVsIGZvcj1cImNvbnRhY3RMYXN0TmFtZVwiIGNsYXNzPVwibGFiZWxcIj5MYXN0IE5hbWU8L2xhYmVsPjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgaWQ9XCJjb250YWN0TGFzdE5hbWVcIiBwbGFjZWhvbGRlcj1cIkxhc3QgTmFtZVwiIG5nLW1vZGVsPVwiY29udGFjdEZvcm0ubGFzdE5hbWVcIj48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPVwicm93XCI+PGRpdiBjbGFzcz1cImNvbC14cy02IGNvbC14cy1vZmZzZXQtMyBjb2wtc20tNSBjb2wtc20tb2Zmc2V0LTEgZm9ybS1ncm91cFwiPjxsYWJlbCBmb3I9XCJjb250YWN0RW1haWxcIiBjbGFzcz1cImxhYmVsXCI+RW1haWw8L2xhYmVsPjxpbnB1dCB0eXBlPVwiZW1haWxcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIGlkPVwiY29udGFjdEVtYWlsXCIgcGxhY2Vob2xkZXI9XCJFbWFpbFwiIG5nLW1vZGVsPVwiY29udGFjdEZvcm0uZW1haWxcIj48L2Rpdj48ZGl2IGNsYXNzPVwiY29sLXhzLTYgY29sLXhzLW9mZnNldC0zIGNvbC1zbS01IGNvbC1zbS1vZmZzZXQtMCBmb3JtLWdyb3VwXCI+PGxhYmVsIGZvcj1cImNvbnRhY3RDb21wYW55XCIgY2xhc3M9XCJsYWJlbFwiPihPcHRpb25hbCkgQ29tcGFueTwvbGFiZWw+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBpZD1cImNvbnRhY3RDb21wYW55XCIgcGxhY2Vob2xkZXI9XCJDb21wYW55XCIgbmctbW9kZWw9XCJjb250YWN0Rm9ybS5jb21wYW55XCI+PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz1cInJvd1wiPjxkaXYgY2xhc3M9XCJjb2wteHMtMTAgY29sLXhzLW9mZnNldC0xIGNvbC1zbS04IGNvbC1zbS1vZmZzZXQtMiBmb3JtLWdyb3VwXCI+PGxhYmVsIGZvcj1cImNvbnRhY3RNZXNzYWdlXCIgY2xhc3M9XCJsYWJlbFwiPihPcHRpb25hbCkgTWVzc2FnZTwvbGFiZWw+PHRleHRhcmVhIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgaWQ9XCJjb250YWN0TWVzc2FnZVwiIHJvd3M9XCIzXCIgbmctbW9kZWw9XCJjb250YWN0Rm9ybS5tZXNzYWdlXCI+PC90ZXh0YXJlYT48L2Rpdj48L2Rpdj48L2Zvcm0+PC9kaXY+PGRpdiBjbGFzcz1cIm1vZGFsLWZvb3RlclwiPjxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0XCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIj48aDEgY2xhc3M9XCJidXR0b25cIj5DYW5jZWw8L2gxPjwvYnV0dG9uPiA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIiBjbGFzcz1cImJ0biBwdXJwbGUtYnV0dG9uXCIgbmctY2xpY2s9XCIkcGFyZW50Lm1vZGFsQ29uZmlybShjb250YWN0Rm9ybSlcIj48aDEgY2xhc3M9XCJidXR0b25cIj5TdWJtaXQ8L2gxPjwvYnV0dG9uPjwvZGl2PicpO1xufV0pO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IERhbm55IG9uIDExLzUvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpXG4gIC5kaXJlY3RpdmUoJ3NpZGVtZW51JywgZnVuY3Rpb24oJHJvb3RTY29wZSkge1xuICAgIHJldHVybiB7XG4gICAgICBzY29wZTogJ0UnLFxuICAgICAgdGVtcGxhdGVVcmwgOiAncGFydGlhbHMvc2lkZW1lbnUuaHRtbCcsXG4gICAgICBsaW5rIDogZnVuY3Rpb24oc2NvcGUsIGVsZW0sIGF0dHJzKSB7XG5cbiAgICAgICAgc2NvcGUuc2hvd01lbnUgPSBmYWxzZTtcbiAgICAgICAgc2NvcGUudG9nZ2xlTGlua3MgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgbGluayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2JpbGUtbWVudScpLnF1ZXJ5U2VsZWN0b3JBbGwoJ2xpJyk7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5rLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsaW5rW2ldLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAkcm9vdFNjb3BlLiRvbihcIiRzdGF0ZUNoYW5nZVN1Y2Nlc3NcIiwgZnVuY3Rpb24oZXZlbnQsIHRvU3RhdGUpIHtcbiAgICAgICAgICBpZihzY29wZS5zaG93TWVudSkge1xuICAgICAgICAgICAgc2NvcGUudG9nZ2xlTGlua3MoKVxuICAgICAgICAgICAgc2NvcGUuc2hvd01lbnUgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfSlcbiIsImFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdwYXJ0aWFscy9tb2RhbC1jb25maXJtLmh0bWwnLFxuICAgICc8ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyIHJlZC1tb2RhbC1oZWFkZXJcIj48YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImNsb3NlXCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIiBhcmlhLWxhYmVsPVwiQ2xvc2VcIj48c3BhbiBhcmlhLWhpZGRlbj1cInRydWVcIj4mdGltZXM7PC9zcGFuPjwvYnV0dG9uPjxoMSBjbGFzcz1cInRpdGxlXCI+e3skcGFyZW50Lm1vZGFsVGl0bGUgPyAkcGFyZW50Lm1vZGFsVGl0bGUgOiBcXCdQbGVhc2UgQ29uZmlybVxcJ319PC9oMT48L2Rpdj48ZGl2IGNsYXNzPVwibW9kYWwtYm9keVwiPkFyZSB5b3Ugc3VyZSB5b3Ugd2lzaCB0byBjb250aW51ZT8gVGhpcyBhY3Rpb24gaXMgcGVybWFuZW50IGFuZCBjYW5ub3QgYmUgdW5kb25lLjwvZGl2PjxkaXYgY2xhc3M9XCJtb2RhbC1mb290ZXJcIj48YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdFwiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCI+PGgxIGNsYXNzPVwiYnV0dG9uXCI+Q2FuY2VsPC9oMT48L2J1dHRvbj4gPGJ1dHRvbiB0eXBlPVwic3VibWl0XCIgY2xhc3M9XCJidG4gYnRuLWRhbmdlclwiIG5nLWNsaWNrPVwiJHBhcmVudC5tb2RhbENvbmZpcm0oY29udGFjdEZvcm0pXCI+Q29uZmlybTwvYnV0dG9uPjwvZGl2PicpO1xufV0pO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IERhbm55IG9uIDExLzgvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpXG4gIC5kaXJlY3RpdmUoJ3NlY3Rpb25IZWFkZXInLCBmdW5jdGlvbigkc3RhdGUsICR3aW5kb3csICRyb290U2NvcGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3QgOiAnRScsXG4gICAgICB0ZW1wbGF0ZVVybCA6ICdwYXJ0aWFscy9zZWN0aW9uLWhlYWRlci5odG1sJyxcbiAgICAgIGxpbmsgOiBmdW5jdGlvbihzY29wZSwgZWxlbSwgYXR0cnMpIHtcbiAgICAgICAgLy9zY29wZS5oZWFkZXJTdHlsZSA9IHtcbiAgICAgICAgLy8gICdiYWNrZ3JvdW5kLXJlcGVhdCcgOiAnbm8tcmVwZWF0JyxcbiAgICAgICAgLy8gICdiYWNrZ3JvdW5kLXBvc2l0aW9uJyA6ICdjZW50ZXInLFxuICAgICAgICAvLyAgJ2JhY2tncm91bmQtc2l6ZScgOiAnY292ZXInXG4gICAgICAgIC8vXG4gICAgICAgIC8vfTtcbiAgICAgICAgLy9zY29wZS5zdGF0ZSA9ICRzdGF0ZTtcbiAgICAgICAgLy92YXIgd2luZG93V2lkdGggPSAkd2luZG93LmlubmVyV2lkdGgsXG4gICAgICAgIC8vICBzdGF0ZU5hbWU7XG4gICAgICAgIC8vXG4gICAgICAgIC8vLy8gSW4gY2FzZSBvZiBzY3JlZW4gcmVzaXplcywgbWFrZSBzdXJlIHdlIHVzZSBjb3JyZWN0IGJhY2tncm91bmQgaW1hZ2VcbiAgICAgICAgLy9hbmd1bGFyLmVsZW1lbnQoJHdpbmRvdykuYmluZCgncmVzaXplJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyAgd2luZG93V2lkdGggPSAkd2luZG93LmlubmVyV2lkdGg7XG4gICAgICAgIC8vICBpZihzdGF0ZU5hbWUgIT0gJ2hvbWUnKSBnZXRIZWFkZXJJbWFnZSgpO1xuICAgICAgICAvL30pO1xuICAgICAgICAvL1xuICAgICAgICAvLyRyb290U2NvcGUuJG9uKFwiJHN0YXRlQ2hhbmdlU3VjY2Vzc1wiLCBmdW5jdGlvbihldmVudCwgdG9TdGF0ZSkge1xuICAgICAgICAvLyAgc3RhdGVOYW1lID0gdG9TdGF0ZS5uYW1lO1xuICAgICAgICAvLyAgaWYoc3RhdGVOYW1lICE9ICdob21lJykgZ2V0SGVhZGVySW1hZ2UoKTtcbiAgICAgICAgLy99KTtcbiAgICAgICAgLy9mdW5jdGlvbiBnZXRIZWFkZXJJbWFnZSgpIHtcbiAgICAgICAgLy8gIHZhciBpbWFnZUxvY2F0aW9uID0gc3RhdGVOYW1lICsgJy1oZWFkZXIucG5nJztcbiAgICAgICAgLy8gIGlmKHdpbmRvd1dpZHRoIDwgNzY4KSBpbWFnZUxvY2F0aW9uID0gJ21vYmlsZS0nICsgaW1hZ2VMb2NhdGlvbjtcbiAgICAgICAgLy8gIGltYWdlTG9jYXRpb24gPSAndXJsKC4uL2ltYWdlcy8nICsgaW1hZ2VMb2NhdGlvbiArICcpJztcbiAgICAgICAgLy8gIHNjb3BlLmhlYWRlclN0eWxlWydiYWNrZ3JvdW5kLWltYWdlJ10gPSBpbWFnZUxvY2F0aW9uO1xuICAgICAgICAvL31cbiAgICAgICAgc2NvcGUuaXNBY3RpdmUgPSBmdW5jdGlvbihzdGF0ZSkge1xuICAgICAgICAgIHJldHVybiAkc3RhdGUuY3VycmVudC5uYW1lID09IHN0YXRlO1xuICAgICAgICB9XG4gICAgICAgIHNjb3BlLmdvVG8gPSBmdW5jdGlvbihzdGF0ZSkge1xuICAgICAgICAgICRzdGF0ZS5nbyhzdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgncGFydGlhbHMvbWFpbi1zZWN0aW9uLnBhcnRpYWwuaHRtbCcsXG4gICAgJzxzZWN0aW9uIGNsYXNzPVwic2VjdGlvbi13aXRoLXRvcC1uYXYgY29udGFpbmVyXCI+PGgxIGNsYXNzPVwiZGlzcGxheS0yXCI+e3tzZWN0aW9uVGl0bGV9fTwvaDE+PGgyIGNsYXNzPVwic3ViaGVhZC0xXCI+e3tzZWN0aW9uU3ViVGl0bGV9fTwvaDI+PGNvbnRlbnQtY29udGFpbmVyIGNvbnRlbnQtdHlwZT1cInt7Y29udGVudFR5cGV9fVwiPjwvY29udGVudC1jb250YWluZXI+PC9zZWN0aW9uPicpO1xufV0pO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IERhbm55IG9uIDEwLzEwLzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKVxuICAuZGlyZWN0aXZlKCduYXZiYXInLCBmdW5jdGlvbigkd2luZG93LCAkcm9vdFNjb3BlLCAkc3RhdGUsICR0aW1lb3V0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNjb3BlOiAnRScsXG4gICAgICB0ZW1wbGF0ZVVybCA6ICdwYXJ0aWFscy9uYXZiYXIuaHRtbCcsXG4gICAgICBsaW5rIDogZnVuY3Rpb24oc2NvcGUsIGVsZW0sIGF0dHJzKSB7XG5cbiAgICAgICAgLypcbiAgICAgICAgIEFsd2F5cyBTaG93IE5hdmJhciBvbiBtb2JpbGUgc2NyZWVuc1xuXG4gICAgICAgICBNb25pdG9yIFdpZHRoIGluIGNhc2Ugb2Ygc2NyZWVuIHJlc2l6ZXJzIVxuXG4gICAgICAgICBIaWRlIG5hdmJhciBvbiBob21lIHZpZXcgbm9uLW1vYmlsZVxuICAgICAgICAgICovXG4gICAgICAgIHNjb3BlLnN0YXRlID0gJHN0YXRlO1xuXG4gICAgICAgIHZhciB3aW5kb3dXaWR0aCA9ICR3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgc2NvcGUuc2hvd05hdmJhciA9IHRydWU7XG5cbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCR3aW5kb3cpLmJpbmQoJ3Jlc2l6ZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB3aW5kb3dXaWR0aCA9ICR3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgICBzY29wZS5zaG93TmF2YmFyID0gKHdpbmRvd1dpZHRoIDwgNzY4KTtcbiAgICAgICAgICBpZihzY29wZS5zdGF0ZS5jdXJyZW50Lm5hbWUgPT0gJ2hvbWUnJiYgd2luZG93V2lkdGggPj0gNzY4ICkgd2F0Y2hIb21lU2Nyb2xsKCk7XG5cbiAgICAgICAgfSk7XG4gICAgICAgICRyb290U2NvcGUuJG9uKFwiJHN0YXRlQ2hhbmdlU3VjY2Vzc1wiLCBmdW5jdGlvbihldmVudCwgdG9TdGF0ZSkge1xuICAgICAgICAgIGlmKHdpbmRvd1dpZHRoIDwgNzY4KSB7XG4gICAgICAgICAgICBzY29wZS5zaG93TmF2YmFyID0gdHJ1ZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2NvcGUuc2hvd05hdmJhciA9ICh0b1N0YXRlLm5hbWUgIT09ICdob21lJyAmJiB3aW5kb3dXaWR0aCA+PSA3NjgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZih0b1N0YXRlLm5hbWUgPT0gJ2hvbWUnICYmIHdpbmRvd1dpZHRoID49IDc2OCkgd2F0Y2hIb21lU2Nyb2xsKClcbiAgICAgICAgICBlbHNlIGFuZ3VsYXIuZWxlbWVudCgkd2luZG93KS51bmJpbmQoJ3Njcm9sbCcpO1xuXG4gICAgICAgICAgaWYoc2NvcGUuc3RhdGUuaW5jbHVkZXMoJ2Rhc2hib2FyZCcpKSBzY29wZS5zaG93TmF2YmFyID0gZmFsc2U7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNjb3BlLmdvVG8gPSBmdW5jdGlvbihzdGF0ZSkge1xuICAgICAgICAgICRzdGF0ZS5nbyhzdGF0ZSk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaGVhZGVySGVpZ2h0O1xuICAgICAgICBmdW5jdGlvbiB3YXRjaEhvbWVTY3JvbGwoKSB7XG4gICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBoZWFkZXJIZWlnaHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VjdGlvbkhlYWRlcicpLmNsaWVudEhlaWdodDtcbiAgICAgICAgICB9LCAxMDApO1xuXG4gICAgICAgICAgYW5ndWxhci5lbGVtZW50KCR3aW5kb3cpLmJpbmQoXCJzY3JvbGxcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBzY29wZS5zaG93TmF2YmFyID0gKCR3aW5kb3cuc2Nyb2xsWSA+IGhlYWRlckhlaWdodClcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICBzY29wZS5pc0FjdGl2ZSA9IGZ1bmN0aW9uKHN0YXRlKSB7XG4gICAgICAgICAgcmV0dXJuICRzdGF0ZS5jdXJyZW50Lm5hbWUgPT0gc3RhdGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgncGFydGlhbHMvaG9tZS5odG1sJyxcbiAgICAnPHNlY3Rpb24taGVhZGVyIGNsYXNzPVwiaGlkZGVuLXhzXCI+PC9zZWN0aW9uLWhlYWRlcj48c2VjdGlvbiBjbGFzcz1cInNlY3Rpb24td2l0aC10b3AtbmF2IGNvbnRhaW5lclwiPjxjb250ZW50LWNvbnRhaW5lciBjb250ZW50LXR5cGU9XCJob21lXCI+PC9jb250ZW50LWNvbnRhaW5lcj48L3NlY3Rpb24+Jyk7XG59XSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgRGFubnkgb24gMTIvMjUvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ0xvZ2luTW9kYWxDdHJsJywgZnVuY3Rpb24oJHNjb3BlLCAkdGltZW91dCkge1xuXG4gICAgICAgICRzY29wZS5lcnJvck1lc3NhZ2UgPSBudWxsO1xuICAgICAgICAkc2NvcGUubG9nZ2luZ0luID0gZmFsc2U7XG4gICAgICAgICRzY29wZS5sb2dpbkZvcm0gPSB7fTtcblxuXG4gICAgICAgICRzY29wZS5sb2dpbiA9IGZ1bmN0aW9uKGxvZ2luRm9ybSkge1xuICAgICAgICAgICAgaWYoISRzY29wZS5sb2dnaW5nSW4pIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUubG9nZ2luZ0luID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYoIWxvZ2luRm9ybS5lbWFpbCkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3JNZXNzYWdlID0gJ1BsZWFzZSBlbnRlciB5b3VyIGVtYWlsLidcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYoIWxvZ2luRm9ybS5wYXNzd29yZCkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3JNZXNzYWdlID0gJ1BsZWFzZSBlbnRlciB5b3VyIHBhc3N3b3JkLidcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3JNZXNzYWdlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubG9nZ2luZ0luID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubW9kYWxDb25maXJtKGxvZ2luRm9ybSk7XG4gICAgICAgICAgICAgICAgICAgIH0sIDMwMDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5yZXNldExvZ2luID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkc2NvcGUuZXJyb3JNZXNzYWdlID0gbnVsbDtcbiAgICAgICAgICAgICRzY29wZS5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAkc2NvcGUubG9naW5Gb3JtLmVtYWlsID0gbnVsbDtcbiAgICAgICAgICAgICRzY29wZS5sb2dpbkZvcm0ucGFzc3dvcmQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgICRzY29wZS5yZXNldExvZ2luKCk7XG5cbiAgICB9KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3BhcnRpYWxzL2hhbWJ1cmdlci1tZW51Lmh0bWwnLFxuICAgICc8ZGl2IGNsYXNzPVwibWF0ZXJpYWwtZGVzaWduLWhhbWJ1cmdlclwiIG5nLWNsaWNrPVwidG9nZ2xlU3RhdGUoKVwiPjxidXR0b24gY2xhc3M9XCJtYXRlcmlhbC1kZXNpZ24taGFtYnVyZ2VyX19pY29uXCI+PHNwYW4gY2xhc3M9XCJtYXRlcmlhbC1kZXNpZ24taGFtYnVyZ2VyX19sYXllclwiIG5nLWNsYXNzPVwiXFwnbWF0ZXJpYWwtZGVzaWduLWhhbWJ1cmdlcl9faWNvbi0tXFwnICsgKHN0YXRlID8gXFwndG9cXCcgOiBcXCdmcm9tXFwnKSArIFxcJy1hcnJvd1xcJ1wiPjwvc3Bhbj48L2J1dHRvbj48L2Rpdj4nKTtcbn1dKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBEYW5ueSBvbiAxMS82LzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKVxuICAuZGlyZWN0aXZlKCdpbWFnZVNoYWRvdycsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdCA6ICdBJyxcbiAgICAgIGxpbmsgOiBmdW5jdGlvbihzY29wZSwgZWxlbSwgYXR0cnMpIHtcbiAgICAgICAgdmFyIGltZyA9IGVsZW1bMF07XG4gICAgICAgIHZhciBzdHlsZTtcbiAgICAgICAgdmFyIGltZ1NyYztcblxuICAgICAgICBlbGVtLmJpbmQoJ2Vycm9yJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgYXR0cnMuJHNldCgnc3JjJywgJy4uL2ltYWdlcy9sb2dvLWJhY2t1cC5wbmcnKTtcbiAgICAgICAgICBpbWdTcmMgPSAnLi4vaW1hZ2VzL2xvZ28tYmFja3VwLnBuZyc7XG4gICAgICAgIH0pXG5cbiAgICAgICAgYXR0cnMuJG9ic2VydmUoJ3NyYycsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgaW1nU3JjID0gYXR0cnMuc3JjO1xuICAgICAgICAgIGlmKGltZ1NyYyAhPSAnLi4vaW1hZ2VzL2xvZ28tYmFja3VwLnBuZycpIGFkZFNoYWRvdygpO1xuICAgICAgICB9KVxuXG4gICAgICAgIGZ1bmN0aW9uIGFkZFNoYWRvdygpIHtcbiAgICAgICAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgY29udGFpbmVyLmNsYXNzTmFtZSA9ICdpbWFnZS1zaGFkb3ctY29udGFpbmVyIGltYWdlLXNoYWRvdyc7XG4gICAgICAgICAgY29udGFpbmVyLmlkID0gXCJpbWFnZS1zaGFkb3ctMFwiO1xuICAgICAgICAgIGltZy5jbGFzc0xpc3QucmVtb3ZlKCdpbWFnZS1zaGFkb3cnKTtcbiAgICAgICAgICBpbWcucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoY29udGFpbmVyLCBpbWcpO1xuICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChpbWcpO1xuICAgICAgICAgIHN0eWxlID0gXCIjaW1hZ2Utc2hhZG93LTBcIitcIjo6YWZ0ZXIge1wiK1xuICAgICAgICAgICAgXCIgIGJhY2tncm91bmQtaW1hZ2U6IHVybCgnXCIraW1nU3JjK1wiJyk7XCIrXG4gICAgICAgICAgICBcIiAgY29udGVudDogJyc7XCIrXG4gICAgICAgICAgICBcIn1cIjtcbiAgICAgICAgICB2YXIgJHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuICAgICAgICAgICRzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShzdHlsZSkpO1xuICAgICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoJHN0eWxlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSlcbiIsImFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdwYXJ0aWFscy9kYXNoYm9hcmQud2VsY29tZS5odG1sJyxcbiAgICAnPGRpdiBjbGFzcz1cImNvbnRhaW5lci1mbHVpZCBkYXNoYm9hcmQtd2VsY29tZVwiPjxpbWcgc3JjPVwiLi4vaW1hZ2VzL2ZyZXF1ZW5jeV9jdWx0dXJlX25hbWVfYW5kX2xvZ29fZ3JheS5wbmdcIj48ZGl2IGNsYXNzPVwid2VsY29tZS10ZXh0XCI+PGgxIGNsYXNzPVwiZGlzcGxheS0xXCI+Q29udGVudCBFZGl0b3I8L2gxPjxwIGNsYXNzPVwic2l0ZS1ib2R5LXRleHQgY2VudGVyLWJsb2NrXCI+VG8gYmVnaW4gY29udHJpYnV0aW5nIGNvbnRlbnQgdG8gRnJlcXVlbmN5IEN1bHR1cmUsIHBsZWFzZSBsb2dpbiBvciByZXF1ZXN0IGFjY2Vzcy48L3A+PHVsIGNsYXNzPVwid2VsY29tZS1saXN0XCI+PGxpIG5nLWNsaWNrPVwic2hvd0xvZ2luTW9kYWwoKVwiPjxhPkxvZ2luPC9hPjwvbGk+PGxpIG5nLWNsaWNrPVwic2hvd0NvbnRhY3RNb2RhbCgpXCI+PGE+UmVxdWVzdCBBY2Nlc3M8L2E+PC9saT48L3VsPjwvZGl2PjwvZGl2PicpO1xufV0pO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IERhbm55IG9uIDExLzgvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpXG4gIC5kaXJlY3RpdmUoJ2hhbWJ1cmdlck1lbnUnLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgIHNjb3BlOiB7XG4gICAgICAgIHN0YXRlOiAnPSdcbiAgICAgIH0sXG4gICAgICB0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL2hhbWJ1cmdlci1tZW51Lmh0bWwnLFxuICAgICAgbGluazogZnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCwgJGF0dHJzKSB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBuZ2RvYyBvYmplY3RcbiAgICAgICAgICogQG5hbWUgdG9nZ2xlU3RhdGVcbiAgICAgICAgICogQG1ldGhvZE9mIG5nSGFtYnVyZ2VyLmRpcmVjdGl2ZTpoYW1idXJnZXJUb2dnbGVcbiAgICAgICAgICogQGRlc2NyaXB0aW9uIFRvZ2dsZXMgdHdvIHdheSBib3VuZCBtb2RlbC5cbiAgICAgICAgICovXG4gICAgICAgICRzY29wZS50b2dnbGVTdGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiAkc2NvcGUuc3RhdGUgPSAhJHNjb3BlLnN0YXRlO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH07XG4gIH0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgncGFydGlhbHMvZGFzaGJvYXJkLnByb2ZpbGUuaHRtbCcsXG4gICAgJzxkaXYgY2xhc3M9XCJjb250YWluZXItZmx1aWRcIj48ZGl2IGNsYXNzPVwiY29sLXhzLTEyXCI+PGgxIGNsYXNzPVwiaGVhZGxpbmVcIj5Qcm9maWxlPC9oMT48L2Rpdj48L2Rpdj4nKTtcbn1dKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBEYW5ueSBvbiAxMS8yOC8xNi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJylcbiAgLmRpcmVjdGl2ZSgnY29udGVudEhlYWRlcicsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdCA6ICdFJyxcbiAgICAgIHRlbXBsYXRlVXJsIDogJ3BhcnRpYWxzL2NvbnRlbnQtaGVhZGVyLmh0bWwnLFxuICAgICAgc2NvcGUgOiB7XG4gICAgICAgIHNlbGVjdGVkQ29udGVudCA6ICc9J1xuICAgICAgfSxcbiAgICAgIGxpbmsgOiBmdW5jdGlvbihzY29wZSwgZWxlbSwgYXR0cnMpIHtcbiAgICAgIH1cbiAgICB9XG4gIH0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgncGFydGlhbHMvZGFzaGJvYXJkLmNvbnRlbnQuaHRtbCcsXG4gICAgJzxkaXYgY2xhc3M9XCJjb250YWluZXItZmx1aWRcIj48ZGl2IGNsYXNzPVwiY29sLXhzLTEyXCI+PGgxIGNsYXNzPVwiaGVhZGxpbmVcIj5Db250ZW50PC9oMT48L2Rpdj48L2Rpdj4nKTtcbn1dKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBEYW5ueSBvbiAxMS8yMi8xNi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJylcbiAgLmRpcmVjdGl2ZSgnY29udGVudENvbnRhaW5lcicsIGZ1bmN0aW9uKENvbnRlbnRTZXJ2aWNlLCAkcm9vdFNjb3BlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQsICRzdGF0ZSkge1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdCA6ICdFJyxcbiAgICAgIHNjb3BlIDoge1xuICAgICAgICBjb250ZW50VHlwZSA6ICdAJ1xuICAgICAgfSxcbiAgICAgIHRlbXBsYXRlVXJsIDogJ3BhcnRpYWxzL2NvbnRlbnQtY29udGFpbmVyLmh0bWwnLFxuICAgICAgbGluayA6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtLCBhdHRycykge1xuICAgICAgICBDb250ZW50U2VydmljZS5nZXRDb250ZW50KClcbiAgICAgICAgICAudGhlbihmdW5jdGlvbihjb250ZW50KSB7XG4gICAgICAgICAgICBidWlsZENvbnRlbnQoY29udGVudClcbiAgICAgICAgICB9KVxuXG4gICAgICAgIC8vc2NvcGUuc2hvd0hlcm8gPSBmYWxzZTtcbiAgICAgICAgLy8kdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gIGNvbnNvbGUubG9nKCdzaG93IGhlcm8hJyk7XG4gICAgICAgIC8vICBzY29wZS5zaG93SGVybyA9IHRydWU7XG4gICAgICAgIC8vfSwxMDApO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdzY29wZTogJywgc2NvcGUuY29udGVudFR5cGUpO1xuICAgICAgICBmdW5jdGlvbiBidWlsZENvbnRlbnQoYWxsQ29udGVudCkge1xuICAgICAgICAgIGlmKHNjb3BlLmNvbnRlbnRUeXBlID09ICdob21lJykge1xuICAgICAgICAgICAgc2NvcGUuY29udGVudCA9IGFsbENvbnRlbnQ7XG4gICAgICAgICAgICBidWlsZEhlcm8oKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2NvcGUuY29udGVudCA9IFtdO1xuICAgICAgICAgICAgZm9yKHZhciBjPTA7YzxhbGxDb250ZW50Lmxlbmd0aDtjKyspIHtcbiAgICAgICAgICAgICAgaWYoYWxsQ29udGVudFtjXS5jb250ZW50VHlwZSA9PSBzY29wZS5jb250ZW50VHlwZSkge1xuICAgICAgICAgICAgICAgIHNjb3BlLmNvbnRlbnQucHVzaChhbGxDb250ZW50W2NdKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBidWlsZEhlcm8oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuXG4gICAgICAgIGZ1bmN0aW9uIGJ1aWxkSGVybygpIHtcbiAgICAgICAgICBzY29wZS5oZXJvQ29udGVudCA9IFtdO1xuICAgICAgICAgIHZhciBsaW1pdCA9IDM7XG4gICAgICAgICAgaWYoc2NvcGUuY29udGVudC5sZW5ndGggPCAzKSB7XG4gICAgICAgICAgICBsaW1pdCA9IHNjb3BlLmNvbnRlbnQubGVuZ3RoO1xuICAgICAgICAgIH1cbiAgICAgICAgICBmb3IodmFyIGM9MDtjPGxpbWl0O2MrKykge1xuICAgICAgICAgICAgc2NvcGUuaGVyb0NvbnRlbnQucHVzaChzY29wZS5jb250ZW50W2NdKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2NvcGUuc2hvd0hlcm8gPSAoc2NvcGUuaGVyb0NvbnRlbnQubGVuZ3RoID4gMClcbiAgICAgICAgfVxuXG4gICAgICAgICRyb290U2NvcGUuJG9uKFwiJHN0YXRlQ2hhbmdlU3RhcnRcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2NvcGUuc2hvd0hlcm8gPSBmYWxzZTtcbiAgICAgICAgfSlcblxuICAgICAgICAkcm9vdFNjb3BlLiRvbihcIiRzdGF0ZUNoYW5nZVN1Y2Nlc3NcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnc2hvdyBoZXJvIScpO1xuICAgICAgICAgICAgc2NvcGUuc2hvd0hlcm8gPSB0cnVlO1xuICAgICAgICAgIH0sMjAwKVxuICAgICAgICB9KVxuXG4gICAgICAgIHNjb3BlLmdvVG8gPSBmdW5jdGlvbihjb250ZW50KSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnY29udGVudDogJywgY29udGVudCk7XG4gICAgICAgICAgaWYoY29udGVudC5jbGFzcyA9PSAnY3JlYXRvci1zZXJpZXMnKSB7XG4gICAgICAgICAgICBjb250ZW50LmNsYXNzID0gJ3ZpZXctY3JlYXRvci1zZXJpZXMnXG4gICAgICAgICAgfVxuICAgICAgICAgIENvbnRlbnRTZXJ2aWNlLnNldFNlbGVjdGVkKGNvbnRlbnQpO1xuICAgICAgICAgICRzdGF0ZS5nbygnY29udGVudCcsIHtjb250ZW50VHlwZTogY29udGVudC5jb250ZW50VHlwZSwgY29udGVudFVybCA6IGNvbnRlbnQudXJsfSlcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgfVxuICB9KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3BhcnRpYWxzL2Rhc2hib2FyZC5hZG1pbi5odG1sJyxcbiAgICAnPGRpdiBjbGFzcz1cImNvbnRhaW5lci1mbHVpZCBkYXNoYm9hcmQtYWRtaW5cIj48ZGl2IGNsYXNzPVwic2l0ZS1jYXJkIGFkbWluLWNhcmQgY29sLXhzLTUgbGlzdC1jYXJkXCI+PGhlYWRlcj48aDEgY2xhc3M9XCJzdWJoZWFkLTJcIj5UZWFtIE1lbWJlcnM8L2gxPjxpIGNsYXNzPVwiZmEgZmEtcGx1cy1jaXJjbGVcIiBuZy1jbGljaz1cInNob3dNZW1iZXJDYXJkKFxcJ25ld1xcJylcIj48L2k+PC9oZWFkZXI+PHVsIGNsYXNzPVwidGVhbS1saXN0XCI+PGxpIG5nLXJlcGVhdD1cIm1lbWJlciBpbiB0ZWFtTWVtYmVyc1wiIG5nLWNsaWNrPVwiZWRpdE1lbWJlcihtZW1iZXIpXCI+PGZpZ3VyZSBjbGFzcz1cIm1lbWJlci1pbml0YWxzXCI+PGgxIGNsYXNzPVwic3ViaGVhZC0yXCI+e3ttZW1iZXIuZmlyc3ROYW1lLmNoYXJBdCgwKX19e3ttZW1iZXIubGFzdE5hbWUuY2hhckF0KDApfX08L2gxPjwvZmlndXJlPjxkaXYgY2xhc3M9XCJtZW1iZXItaW5mb1wiPjxoMSBjbGFzcz1cInN1YmhlYWQtMlwiPnt7bWVtYmVyLmZpcnN0TmFtZX19IHt7bWVtYmVyLmxhc3ROYW1lfX08L2gxPjxoMiBjbGFzcz1cImJvZHktMVwiPnt7bWVtYmVyLmVtYWlsfX08L2gyPjxoMyBjbGFzcz1cImNhcHRpb25cIj5Sb2xlOiA8c3Bhbj57e21lbWJlci5yb2xlfX08L3NwYW4+PC9oMz48L2Rpdj48ZGl2IGNsYXNzPVwibWVtYmVyLWVkaXRcIj48aSBjbGFzcz1cImZhIGZhLXBlbmNpbFwiPjwvaT48L2Rpdj48L2xpPjwvdWw+PGRpdiBjbGFzcz1cInRlYW0tbGlzdC1jb3ZlclwiIG5nLWlmPVwidGVhbU1lbWJlcnMubGVuZ3RoID4gOFwiPjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XCJzaXRlLWNhcmQgYWRtaW4tY2FyZCBjb2wteHMtNiBjb2wteHMtb2Zmc2V0LTFcIiBuZy1zaG93PVwic2lkZU1lbWJlckNhcmRcIj48aGVhZGVyPjxoMSBjbGFzcz1cInN1YmhlYWQtMlwiPnt7c2lkZU1lbWJlckNhcmQgPT0gXFwnbmV3XFwnID8gXFwnTmV3XFwnIDogXFwnRWRpdFxcJ319IE1lbWJlcjwvaDE+PGkgY2xhc3M9XCJmYSBmYS10aW1lcy1jaXJjbGUtb1wiIG5nLWNsaWNrPVwic2hvd01lbWJlckNhcmQobnVsbClcIj48L2k+PC9oZWFkZXI+PGZvcm0gcm9sZT1cImZvcm1cIiBub3ZhbGlkYXRlIG5hbWU9XCJtZW1iZXJGb3JtXCI+PGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj48bGFiZWwgZm9yPVwiZmlyc3ROYW1lXCIgY2xhc3M9XCJsYWJlbFwiPkZpcnN0IE5hbWU8L2xhYmVsPjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgaWQ9XCJmaXJzdE5hbWVcIiBwbGFjZWhvbGRlcj1cIkZpcnN0IE5hbWVcIiBuZy1tb2RlbD1cIm1lbWJlckZvcm0uZmlyc3ROYW1lXCI+PC9kaXY+PGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj48bGFiZWwgZm9yPVwibGFzdE5hbWVcIiBjbGFzcz1cImxhYmVsXCI+TGFzdCBOYW1lPC9sYWJlbD48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIHBsYWNlaG9sZGVyPVwiTGFzdCBOYW1lXCIgaWQ9XCJsYXN0TmFtZVwiIG5nLW1vZGVsPVwibWVtYmVyRm9ybS5sYXN0TmFtZVwiPjwvZGl2PjxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+PGxhYmVsIGZvcj1cImVtYWlsXCIgY2xhc3M9XCJsYWJlbFwiPkVtYWlsPC9sYWJlbD48aW5wdXQgdHlwZT1cImVtYWlsXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBpZD1cImVtYWlsXCIgcGxhY2Vob2xkZXI9XCJFbWFpbFwiIG5nLW1vZGVsPVwibWVtYmVyRm9ybS5lbWFpbFwiPjwvZGl2PjxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+PGxhYmVsIGZvcj1cIm1lbWJlclJvbGVzXCIgY2xhc3M9XCJsYWJlbFwiPlJvbGU8L2xhYmVsPjx1bCBjbGFzcz1cImFkbWluLXJvbGVzXCIgaWQ9XCJtZW1iZXJSb2xlc1wiPjxsaSBuZy1jbGljaz1cIm1lbWJlckZvcm0ucm9sZSA9IFxcJ1N1cGVyQWRtaW5cXCdcIiBuZy1jbGFzcz1cIntcXCdzZWxlY3RlZFxcJyA6IG1lbWJlckZvcm0ucm9sZSA9PSBcXCdTdXBlckFkbWluXFwnfVwiPjxoMSBjbGFzcz1cImJvZHktMlwiPlN1cGVyPC9oMT48L2xpPjxsaSBuZy1jbGljaz1cIm1lbWJlckZvcm0ucm9sZSA9IFxcJ0FkbWluXFwnXCIgbmctY2xhc3M9XCJ7XFwnc2VsZWN0ZWRcXCcgOiBtZW1iZXJGb3JtLnJvbGUgPT0gXFwnQWRtaW5cXCd9XCI+PGgxIGNsYXNzPVwiYm9keS0yXCI+QWRtaW48L2gxPjwvbGk+PGxpIG5nLWNsaWNrPVwibWVtYmVyRm9ybS5yb2xlID0gXFwnRWRpdG9yXFwnXCIgbmctY2xhc3M9XCJ7XFwnc2VsZWN0ZWRcXCcgOiBtZW1iZXJGb3JtLnJvbGUgPT0gXFwnRWRpdG9yXFwnfVwiPjxoMSBjbGFzcz1cImJvZHktMlwiPkVkaXRvcjwvaDE+PC9saT48L3VsPjwvZGl2PjwvZm9ybT48Zm9vdGVyPjxkaXYgY2xhc3M9XCJhZG1pbi1mb290ZXItZXh0cmFzXCI+PGgxIGNsYXNzPVwidGl0bGVcIiBuZy1pZj1cImFkbWluRXJyb3JNZXNzYWdlXCI+e3thZG1pbkVycm9yTWVzc2FnZX19PC9oMT48aSBjbGFzcz1cImZhIGZhLXNwaW5uZXIgZmEtc3BpblwiIG5nLWlmPVwiIWFkbWluRXJyb3JNZXNzYWdlICYmIHNhdmluZ1wiPjwvaT48L2Rpdj48ZGl2PjxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kYW5nZXJcIiBuZy1pZj1cInNpZGVNZW1iZXJDYXJkID09IFxcJ2VkaXRcXCdcIiBuZy1jbGljaz1cImRlbGV0ZShtZW1iZXJGb3JtKVwiPkRlbGV0ZTwvYnV0dG9uPiA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIiBjbGFzcz1cImJ0biBwdXJwbGUtYnV0dG9uXCIgbmctY2xpY2s9XCJzYXZlKG1lbWJlckZvcm0pXCI+PGgxIGNsYXNzPVwiYnV0dG9uXCI+e3tzaWRlTWVtYmVyQ2FyZCA9PSBcXCduZXdcXCcgPyBcXCdDcmVhdGVcXCcgOiBcXCdTYXZlXFwnfX08L2gxPjwvYnV0dG9uPjwvZGl2PjwvZm9vdGVyPjwvZGl2PjwvZGl2PicpO1xufV0pO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IERhbm55IG9uIDEyLzE1LzE2LlxuICovXG4ndXNlIHN0cmljdCc7XG5hbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKVxuICAgIC5jb25maWcoZnVuY3Rpb24gKCRsb2NhdGlvblByb3ZpZGVyLCAkc3RhdGVQcm92aWRlciwgICR1cmxSb3V0ZXJQcm92aWRlcixcbiAgICAgICAgICAgICAgICAgICAgICAkdXJsTWF0Y2hlckZhY3RvcnlQcm92aWRlcikge1xuXG4gICAgICAgICR1cmxNYXRjaGVyRmFjdG9yeVByb3ZpZGVyLmNhc2VJbnNlbnNpdGl2ZSh0cnVlKTtcbiAgICAgICAgJHVybE1hdGNoZXJGYWN0b3J5UHJvdmlkZXIuc3RyaWN0TW9kZShmYWxzZSk7XG4gICAgICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy8nKTtcblxuICAgICAgICAkc3RhdGVQcm92aWRlclxuICAgICAgICAgICAgLnN0YXRlKCdob21lJywge1xuICAgICAgICAgICAgICAgIHVybCA6ICcvJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyIDogJ0hvbWVDdHJsJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybCA6ICdwYXJ0aWFscy9ob21lLmh0bWwnXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAuc3RhdGUoJ3NvdW5kJywge1xuICAgICAgICAgICAgICAgIHVybCA6ICcvc291bmQnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIgOiAnTWFpblNlY3Rpb25DdHJsJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybCA6ICdwYXJ0aWFscy9tYWluLXNlY3Rpb24ucGFydGlhbC5odG1sJyxcbiAgICAgICAgICAgICAgICByZXNvbHZlIDoge1xuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uVGl0bGUgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnU291bmQnO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uU3ViVGl0bGUgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnU291bmQgc2VjdGlvbidcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGUgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnc291bmQnXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAuc3RhdGUoJ2ZpbG0nLCB7XG4gICAgICAgICAgICAgICAgdXJsIDogJy9maWxtJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyIDogJ01haW5TZWN0aW9uQ3RybCcsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiAncGFydGlhbHMvbWFpbi1zZWN0aW9uLnBhcnRpYWwuaHRtbCcsXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSA6IHtcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvblRpdGxlIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ0ZpbG0nO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uU3ViVGl0bGUgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnRmlsbSBzZWN0aW9uJ1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZSA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdmaWxtJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgLnN0YXRlKCdmYXNoaW9uJywge1xuICAgICAgICAgICAgICAgIHVybCA6ICcvZmFzaGlvbicsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlciA6ICdNYWluU2VjdGlvbkN0cmwnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsIDogJ3BhcnRpYWxzL21haW4tc2VjdGlvbi5wYXJ0aWFsLmh0bWwnLFxuICAgICAgICAgICAgICAgIHJlc29sdmUgOiB7XG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb25UaXRsZSA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdGYXNoaW9uJztcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvblN1YlRpdGxlIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ0Zhc2hpb24gc2VjdGlvbidcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGUgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnZmFzaGlvbidcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIC5zdGF0ZSgnY3VsdHVyZScsIHtcbiAgICAgICAgICAgICAgICB1cmwgOiAnL2N1bHR1cmUnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIgOiAnTWFpblNlY3Rpb25DdHJsJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybCA6ICdwYXJ0aWFscy9tYWluLXNlY3Rpb24ucGFydGlhbC5odG1sJyxcbiAgICAgICAgICAgICAgICByZXNvbHZlIDoge1xuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uVGl0bGUgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnQ3VsdHVyZSc7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb25TdWJUaXRsZSA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdDdWx0dXJlIHNlY3Rpb24nXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2N1bHR1cmUnXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuXG5cblxuICAgICAgICAgICAgLnN0YXRlKCdhZG1pbicsIHtcbiAgICAgICAgICAgICAgICB1cmwgOiAnL2FkbWluJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybCA6ICdwYXJ0aWFscy92aWV3LmFkbWluLmh0bWwnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIgOiAnQWRtaW5DdHJsJ1xuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgLnN0YXRlKCdkYXNoYm9hcmQnLCB7XG4gICAgICAgICAgICAgICAgdXJsIDogJy9kYXNoYm9hcmQnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsIDogJ3BhcnRpYWxzL3ZpZXcuZGFzaGJvYXJkLmh0bWwnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIgOiAnRGFzaGJvYXJkQ3RybCcsXG4gICAgICAgICAgICAgICAgYWJzdHJhY3QgOiB0cnVlXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAuc3RhdGUoJ2Rhc2hib2FyZC53ZWxjb21lJywge1xuICAgICAgICAgICAgICAgIHVybCA6ICcnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsIDogJ3BhcnRpYWxzL2Rhc2hib2FyZC53ZWxjb21lLmh0bWwnLFxuICAgICAgICAgICAgICAgIGRhdGEgOiB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlVGl0bGUgOiAnV2VsY29tZSdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAuc3RhdGUoJ2Rhc2hib2FyZC5hZG1pbicsIHtcbiAgICAgICAgICAgICAgICB1cmwgOiAnL2FkbWluJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybCA6ICdwYXJ0aWFscy9kYXNoYm9hcmQuYWRtaW4uaHRtbCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlciA6ICdBZG1pbkN0cmwnLFxuICAgICAgICAgICAgICAgIGRhdGEgOiB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlVGl0bGUgOiAnQWRtaW4nXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgLnN0YXRlKCdkYXNoYm9hcmQucHJvZmlsZScsIHtcbiAgICAgICAgICAgICAgICB1cmwgOiAnL3Byb2ZpbGUnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsIDogJ3BhcnRpYWxzL2Rhc2hib2FyZC5wcm9maWxlLmh0bWwnLFxuICAgICAgICAgICAgICAgIGRhdGEgOiB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlVGl0bGUgOiAnUHJvZmlsZSdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAuc3RhdGUoJ2Rhc2hib2FyZC5jb250ZW50Jywge1xuICAgICAgICAgICAgICAgIHVybCA6ICcvY29udGVudCcsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiAncGFydGlhbHMvZGFzaGJvYXJkLmNvbnRlbnQuaHRtbCcsXG4gICAgICAgICAgICAgICAgZGF0YSA6IHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGVUaXRsZSA6ICdDb250ZW50J1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIC5zdGF0ZSgnYWJvdXQnLCB7XG4gICAgICAgICAgICAgICAgdXJsIDogJy9hYm91dCcsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiAncGFydGlhbHMvYWJvdXQuaHRtbCdcbiAgICAgICAgICAgIH0pXG5cblxuXG4gICAgICAgICAgICAuc3RhdGUoJ2NvbnRlbnQnLCB7XG4gICAgICAgICAgICAgICAgdXJsIDogJy86Y29udGVudFR5cGUvOmNvbnRlbnRVcmwnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsIDogJ3BhcnRpYWxzL3ZpZXcuY29udGVudC5odG1sJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyIDogJ1ZpZXdDb250ZW50Q3RybCdcbiAgICAgICAgICAgIH0pXG5cblxuICAgICAgICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSkuaGFzaFByZWZpeCgnIScpO1xuXG4gICAgfSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgncGFydGlhbHMvY29udGVudC1oZWFkZXIuaHRtbCcsXG4gICAgJzxoZWFkZXIgY2xhc3M9XCJjb250ZW50LWhlYWRlclwiPjxoMSBjbGFzcz1cImRpc3BsYXktMlwiPnt7c2VsZWN0ZWRDb250ZW50LnRpdGxlfX08L2gxPjxoMSBjbGFzcz1cInN1YmhlYWQtMlwiIG5nLWlmPVwic2VsZWN0ZWRDb250ZW50LmF1dGhvclwiPkJ5IHt7c2VsZWN0ZWRDb250ZW50LmF1dGhvcn19PC9oMT48ZGl2IGNsYXNzPVwiaGVhZGVyLWltYWdlXCIgbmctc3R5bGU9XCJ7XFwnYmFja2dyb3VuZC1pbWFnZVxcJyA6IFxcJ3VybChcXCcgKyBzZWxlY3RlZENvbnRlbnQuaGVhZGVySW1hZ2UgKyBcXCcpXFwnfVwiPjwvZGl2Pjx1bCBjbGFzcz1cImhlYWRlci1pbmZvXCI+PGxpPjxoMiBjbGFzcz1cInRleHQtY2FwaXRhbGl6ZSBzdWJoZWFkLTFcIj57e3NlbGVjdGVkQ29udGVudC5jb250ZW50VHlwZX19PC9oMj48L2xpPjxsaT48aDIgY2xhc3M9XCJjYXB0aW9uXCI+e3tzZWxlY3RlZENvbnRlbnQucHVibGlzaGVkRGF0ZSB8IGRhdGUgOiBcXCdFRUVFLCBNTU1NIGQsIHlcXCd9fTwvaDI+PC9saT48L3VsPjwvaGVhZGVyPicpO1xufV0pO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IERhbm55IG9uIDEyLzE1LzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKVxuICAgIC5jb25maWcoZnVuY3Rpb24ocGxhbmd1bGFyQ29uZmlnUHJvdmlkZXIpIHtcbiAgICAgICAgcGxhbmd1bGFyQ29uZmlnUHJvdmlkZXIuY2xpZW50SWQgPSAnb2VyWGY2bkJjRHU1Q29OZGFPcklHdXRWQ0tYUFl2U0InXG4gICAgfSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgRGFubnkgb24gMS8yOS8xNy5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJylcbiAgICAucnVuKGZ1bmN0aW9uKCRyb290U2NvcGUsICRzdGF0ZSwgTW9kYWxTZXJ2aWNlLCBTaWdudXBTZXJ2aWNlKSB7XG4gICAgICAgICRyb290U2NvcGUuc2hvd1NpdGUgPSBmYWxzZTtcbiAgICAgICAgJHJvb3RTY29wZS4kc3RhdGUgPSAkc3RhdGU7XG4gICAgICAgICRyb290U2NvcGUuc2hvd1NpZ251cCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgTW9kYWxTZXJ2aWNlLm9wZW5Nb2RhbCgnc2lnbnVwJywgJ0tpbmV0aWsgTWFnIEVhcmx5IEFjY2VzcycpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24obW9kYWxEYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdwcm9taXNlIHRvIGNvbnRhY3QhJywgbW9kYWxEYXRhKVxuICAgICAgICAgICAgICAgICAgICB2YXIgZm9ybURhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaXJzdE5hbWUgOiBtb2RhbERhdGEuZmlyc3ROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgZW1haWwgOiBtb2RhbERhdGEuZW1haWwsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlIDogJ0Vhcmx5QWNjZXNzJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFNpZ251cFNlcnZpY2UubmV3U2lnbnVwKGZvcm1EYXRhKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVzcG9uc2U6ICcsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2VycjogJywgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCcgbm8gdmFsdWUnKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICB9KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3BhcnRpYWxzL2NvbnRlbnQtY29udGFpbmVyLmh0bWwnLFxuICAgICc8c2VjdGlvbiBjbGFzcz1cImNvbnRlbnQtY29udGFpbmVyXCI+PGRpdiBjbGFzcz1cImhlcm8tY29udGFpbmVyXCI+PHNsaWNrIGluZmluaXRlPVwidHJ1ZVwiIHNsaWRlcy10by1zaG93PVwiMVwiIHNsaWRlcy10by1zY3JvbGw9XCIxXCIgYXJyb3dzPVwiZmFsc2VcIiBhdXRvcGxheT1cInRydWVcIiBjbGFzcz1cImNvbC14cy0xMiBoZXJvLWNvbnRlbnRcIiBwYXVzZS1vbi1ob3Zlcj1cInRydWVcIiBhdXRvcGxheS1zcGVlZD1cIjMwMDBcIiBuZy1jbGFzcz1cIntcXCdzaG93LWhlcm9cXCcgOiBzaG93SGVyb31cIj48ZGl2IGNsYXNzPVwiaGVyby1zbGlkZVwiIG5nLXJlcGVhdD1cImhlcm9JdGVtIGluIGhlcm9Db250ZW50IHRyYWNrIGJ5ICRpbmRleFwiIG5nLXN0eWxlPVwie1xcJ2JhY2tncm91bmQtaW1hZ2VcXCcgOiBcXCd1cmwoXFwnICsgaGVyb0l0ZW0uaGVhZGVySW1hZ2UgKyBcXCcpXFwnfVwiIG5nLWNsaWNrPVwiZ29UbyhoZXJvSXRlbSlcIj48ZGl2IGNsYXNzPVwiaGVyby1mb290ZXJcIj48ZGl2IGNsYXNzPVwiaGVyby1pbmZvXCI+PGgxPnt7aGVyb0l0ZW0udGl0bGV9fTwvaDE+PHAgY2xhc3M9XCJzaXRlLWJvZHktdGV4dFwiPnt7aGVyb0l0ZW0uc3ViVGl0bGV9fTwvcD48L2Rpdj48dWw+PGxpPlJlYWQgTm93PC9saT48bGkgY2xhc3M9XCJ7e2hlcm9JdGVtLmNvbnRlbnRUeXBlfX0tY29udGVudFwiPnt7aGVyb0l0ZW0uY29udGVudFR5cGV9fTwvbGk+PC91bD48L2Rpdj48L2Rpdj48L3NsaWNrPjwvZGl2PjxkaXYgbmctcmVwZWF0PVwic3ViQ29udGVudCBpbiBjb250ZW50IHRyYWNrIGJ5ICRpbmRleFwiIGNsYXNzPVwic3ViLWNvbnRlbnQgY29sLXhzLTEyIGNvbC1tZC02XCIgbmctc3R5bGU9XCJ7XFwnYmFja2dyb3VuZC1pbWFnZVxcJyA6IFxcJ3VybChcXCcgK3N1YkNvbnRlbnQuaGVhZGVySW1hZ2UgKyBcXCcpXFwnfVwiIG5nLWlmPVwiJGluZGV4ID4gMlwiIG5nLWNsaWNrPVwiZ29UbyhzdWJDb250ZW50KVwiPjxkaXYgY2xhc3M9XCJjb250ZW50LWZvb3RlclwiPjxkaXYgY2xhc3M9XCJjb250ZW50LWluZm9cIj48aDE+e3tzdWJDb250ZW50LnRpdGxlfX08L2gxPjwvZGl2Pjx1bD48bGk+UmVhZCBOb3c8L2xpPjxsaSBjbGFzcz1cInt7c3ViQ29udGVudC5jb250ZW50VHlwZX19LWNvbnRlbnRcIj57e3N1YkNvbnRlbnQuY29udGVudFR5cGV9fTwvbGk+PC91bD48L2Rpdj48L2Rpdj48L3NlY3Rpb24+Jyk7XG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgncGFydGlhbHMvYWJvdXQuaHRtbCcsXG4gICAgJzxzZWN0aW9uIGNsYXNzPVwic2VjdGlvbi13aXRoLXRvcC1uYXYgY29udGFpbmVyXCI+PGgyIGNsYXNzPVwic2l0ZS1ib2R5LXRpdGxlXCI+QWJvdXQgQ29udGVudDwvaDI+PHAgY2xhc3M9XCJzaXRlLWJvZHktdGV4dFwiPldlbGwsIHRoZSB3YXkgdGhleSBtYWtlIHNob3dzIGlzLCB0aGV5IG1ha2Ugb25lIHNob3cuIFRoYXQgc2hvd1xcJ3MgY2FsbGVkIGEgcGlsb3QuIFRoZW4gdGhleSBzaG93IHRoYXQgc2hvdyB0byB0aGUgcGVvcGxlIHdobyBtYWtlIHNob3dzLCBhbmQgb24gdGhlIHN0cmVuZ3RoIG9mIHRoYXQgb25lIHNob3cgdGhleSBkZWNpZGUgaWYgdGhleVxcJ3JlIGdvaW5nIHRvIG1ha2UgbW9yZSBzaG93cy4gU29tZSBwaWxvdHMgZ2V0IHBpY2tlZCBhbmQgYmVjb21lIHRlbGV2aXNpb24gcHJvZ3JhbXMuIFNvbWUgZG9uXFwndCwgYmVjb21lIG5vdGhpbmcuIFNoZSBzdGFycmVkIGluIG9uZSBvZiB0aGUgb25lcyB0aGF0IGJlY2FtZSBub3RoaW5nLjwvcD48L3NlY3Rpb24+Jyk7XG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgnNDA0Lmh0bWwnLFxuICAgICc8IWRvY3R5cGUgaHRtbD48aHRtbCBsYW5nPVwiZW5cIj48aGVhZD48bWV0YSBjaGFyc2V0PVwidXRmLThcIj48dGl0bGU+UGFnZSBOb3QgRm91bmQgOig8L3RpdGxlPjxzdHlsZT46Oi1tb3otc2VsZWN0aW9uIHtcXG4nICtcbiAgICAnICAgIGJhY2tncm91bmQ6ICNiM2Q0ZmM7XFxuJyArXG4gICAgJyAgICB0ZXh0LXNoYWRvdzogbm9uZTtcXG4nICtcbiAgICAnfVxcbicgK1xuICAgICdcXG4nICtcbiAgICAnOjpzZWxlY3Rpb24ge1xcbicgK1xuICAgICcgICAgYmFja2dyb3VuZDogI2IzZDRmYztcXG4nICtcbiAgICAnICAgIHRleHQtc2hhZG93OiBub25lO1xcbicgK1xuICAgICd9XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICdodG1sIHtcXG4nICtcbiAgICAnICAgIHBhZGRpbmc6IDMwcHggMTBweDtcXG4nICtcbiAgICAnICAgIGZvbnQtc2l6ZTogMjBweDtcXG4nICtcbiAgICAnICAgIGxpbmUtaGVpZ2h0OiAxLjQ7XFxuJyArXG4gICAgJyAgICBjb2xvcjogIzczNzM3MztcXG4nICtcbiAgICAnICAgIGJhY2tncm91bmQ6ICNmMGYwZjA7XFxuJyArXG4gICAgJyAgICAtd2Via2l0LXRleHQtc2l6ZS1hZGp1c3Q6IDEwMCU7XFxuJyArXG4gICAgJyAgICAtbXMtdGV4dC1zaXplLWFkanVzdDogMTAwJTtcXG4nICtcbiAgICAnfVxcbicgK1xuICAgICdcXG4nICtcbiAgICAnaHRtbCxcXG4nICtcbiAgICAnaW5wdXQge1xcbicgK1xuICAgICcgICAgZm9udC1mYW1pbHk6IFwiSGVsdmV0aWNhIE5ldWVcIiwgSGVsdmV0aWNhLCBBcmlhbCwgc2Fucy1zZXJpZjtcXG4nICtcbiAgICAnfVxcbicgK1xuICAgICdcXG4nICtcbiAgICAnYm9keSB7XFxuJyArXG4gICAgJyAgICBtYXgtd2lkdGg6IDUwMHB4O1xcbicgK1xuICAgICcgICAgcGFkZGluZzogMzBweCAyMHB4IDUwcHg7XFxuJyArXG4gICAgJyAgICBib3JkZXI6IDFweCBzb2xpZCAjYjNiM2IzO1xcbicgK1xuICAgICcgICAgYm9yZGVyLXJhZGl1czogNHB4O1xcbicgK1xuICAgICcgICAgbWFyZ2luOiAwIGF1dG87XFxuJyArXG4gICAgJyAgICBib3gtc2hhZG93OiAwIDFweCAxMHB4ICNhN2E3YTcsIGluc2V0IDAgMXB4IDAgI2ZmZjtcXG4nICtcbiAgICAnICAgIGJhY2tncm91bmQ6ICNmY2ZjZmM7XFxuJyArXG4gICAgJ31cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJ2gxIHtcXG4nICtcbiAgICAnICAgIG1hcmdpbjogMCAxMHB4O1xcbicgK1xuICAgICcgICAgZm9udC1zaXplOiA1MHB4O1xcbicgK1xuICAgICcgICAgdGV4dC1hbGlnbjogY2VudGVyO1xcbicgK1xuICAgICd9XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICdoMSBzcGFuIHtcXG4nICtcbiAgICAnICAgIGNvbG9yOiAjYmJiO1xcbicgK1xuICAgICd9XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICdoMyB7XFxuJyArXG4gICAgJyAgICBtYXJnaW46IDEuNWVtIDAgMC41ZW07XFxuJyArXG4gICAgJ31cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJ3Age1xcbicgK1xuICAgICcgICAgbWFyZ2luOiAxZW0gMDtcXG4nICtcbiAgICAnfVxcbicgK1xuICAgICdcXG4nICtcbiAgICAndWwge1xcbicgK1xuICAgICcgICAgcGFkZGluZzogMCAwIDAgNDBweDtcXG4nICtcbiAgICAnICAgIG1hcmdpbjogMWVtIDA7XFxuJyArXG4gICAgJ31cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJy5jb250YWluZXIge1xcbicgK1xuICAgICcgICAgbWF4LXdpZHRoOiAzODBweDtcXG4nICtcbiAgICAnICAgIG1hcmdpbjogMCBhdXRvO1xcbicgK1xuICAgICd9XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcvKiBnb29nbGUgcG9zc2Vzc2lvbnMtc2VhcmNoICovXFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcjZ29vZy1maXh1cmwgdWwge1xcbicgK1xuICAgICcgICAgbGlzdC1zdHlsZTogbm9uZTtcXG4nICtcbiAgICAnICAgIHBhZGRpbmc6IDA7XFxuJyArXG4gICAgJyAgICBtYXJnaW46IDA7XFxuJyArXG4gICAgJ31cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyNnb29nLWZpeHVybCBmb3JtIHtcXG4nICtcbiAgICAnICAgIG1hcmdpbjogMDtcXG4nICtcbiAgICAnfVxcbicgK1xuICAgICdcXG4nICtcbiAgICAnI2dvb2ctd20tcXQsXFxuJyArXG4gICAgJyNnb29nLXdtLXNiIHtcXG4nICtcbiAgICAnICAgIGJvcmRlcjogMXB4IHNvbGlkICNiYmI7XFxuJyArXG4gICAgJyAgICBmb250LXNpemU6IDE2cHg7XFxuJyArXG4gICAgJyAgICBsaW5lLWhlaWdodDogbm9ybWFsO1xcbicgK1xuICAgICcgICAgdmVydGljYWwtYWxpZ246IHRvcDtcXG4nICtcbiAgICAnICAgIGNvbG9yOiAjNDQ0O1xcbicgK1xuICAgICcgICAgYm9yZGVyLXJhZGl1czogMnB4O1xcbicgK1xuICAgICd9XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcjZ29vZy13bS1xdCB7XFxuJyArXG4gICAgJyAgICB3aWR0aDogMjIwcHg7XFxuJyArXG4gICAgJyAgICBoZWlnaHQ6IDIwcHg7XFxuJyArXG4gICAgJyAgICBwYWRkaW5nOiA1cHg7XFxuJyArXG4gICAgJyAgICBtYXJnaW46IDVweCAxMHB4IDAgMDtcXG4nICtcbiAgICAnICAgIGJveC1zaGFkb3c6IGluc2V0IDAgMXB4IDFweCAjY2NjO1xcbicgK1xuICAgICd9XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcjZ29vZy13bS1zYiB7XFxuJyArXG4gICAgJyAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxuJyArXG4gICAgJyAgICBoZWlnaHQ6IDMycHg7XFxuJyArXG4gICAgJyAgICBwYWRkaW5nOiAwIDEwcHg7XFxuJyArXG4gICAgJyAgICBtYXJnaW46IDVweCAwIDA7XFxuJyArXG4gICAgJyAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xcbicgK1xuICAgICcgICAgY3Vyc29yOiBwb2ludGVyO1xcbicgK1xuICAgICcgICAgYmFja2dyb3VuZC1jb2xvcjogI2Y1ZjVmNTtcXG4nICtcbiAgICAnICAgIGJhY2tncm91bmQtaW1hZ2U6IC13ZWJraXQtbGluZWFyLWdyYWRpZW50KHJnYmEoMjU1LDI1NSwyNTUsMCksICNmMWYxZjEpO1xcbicgK1xuICAgICcgICAgYmFja2dyb3VuZC1pbWFnZTogLW1vei1saW5lYXItZ3JhZGllbnQocmdiYSgyNTUsMjU1LDI1NSwwKSwgI2YxZjFmMSk7XFxuJyArXG4gICAgJyAgICBiYWNrZ3JvdW5kLWltYWdlOiAtbXMtbGluZWFyLWdyYWRpZW50KHJnYmEoMjU1LDI1NSwyNTUsMCksICNmMWYxZjEpO1xcbicgK1xuICAgICcgICAgYmFja2dyb3VuZC1pbWFnZTogLW8tbGluZWFyLWdyYWRpZW50KHJnYmEoMjU1LDI1NSwyNTUsMCksICNmMWYxZjEpO1xcbicgK1xuICAgICcgICAgLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lO1xcbicgK1xuICAgICcgICAgLW1vei1hcHBlYXJhbmNlOiBub25lO1xcbicgK1xuICAgICcgICAgYXBwZWFyYW5jZTogbm9uZTtcXG4nICtcbiAgICAnfVxcbicgK1xuICAgICdcXG4nICtcbiAgICAnI2dvb2ctd20tc2I6aG92ZXIsXFxuJyArXG4gICAgJyNnb29nLXdtLXNiOmZvY3VzIHtcXG4nICtcbiAgICAnICAgIGJvcmRlci1jb2xvcjogI2FhYTtcXG4nICtcbiAgICAnICAgIGJveC1zaGFkb3c6IDAgMXB4IDFweCByZ2JhKDAsIDAsIDAsIDAuMSk7XFxuJyArXG4gICAgJyAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjhmOGY4O1xcbicgK1xuICAgICd9XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcjZ29vZy13bS1xdDpob3ZlcixcXG4nICtcbiAgICAnI2dvb2ctd20tcXQ6Zm9jdXMge1xcbicgK1xuICAgICcgICAgYm9yZGVyLWNvbG9yOiAjMTA1Y2I2O1xcbicgK1xuICAgICcgICAgb3V0bGluZTogMDtcXG4nICtcbiAgICAnICAgIGNvbG9yOiAjMjIyO1xcbicgK1xuICAgICd9XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICdpbnB1dDo6LW1vei1mb2N1cy1pbm5lciB7XFxuJyArXG4gICAgJyAgICBwYWRkaW5nOiAwO1xcbicgK1xuICAgICcgICAgYm9yZGVyOiAwO1xcbicgK1xuICAgICd9PC9zdHlsZT48L2hlYWQ+PGJvZHk+PGRpdiBjbGFzcz1cImNvbnRhaW5lclwiPjxoMT5Ob3QgZm91bmQgPHNwYW4+Oig8L3NwYW4+PC9oMT48cD5Tb3JyeSwgYnV0IHRoZSBwYWdlIHlvdSB3ZXJlIHRyeWluZyB0byB2aWV3IGRvZXMgbm90IGV4aXN0LjwvcD48cD5JdCBsb29rcyBsaWtlIHRoaXMgd2FzIHRoZSByZXN1bHQgb2YgZWl0aGVyOjwvcD48dWw+PGxpPmEgbWlzdHlwZWQgYWRkcmVzczwvbGk+PGxpPmFuIG91dC1vZi1kYXRlIGxpbms8L2xpPjwvdWw+PHNjcmlwdD52YXIgR09PR19GSVhVUkxfTEFORyA9IChuYXZpZ2F0b3IubGFuZ3VhZ2UgfHwgXFwnXFwnKS5zbGljZSgwLDIpLEdPT0dfRklYVVJMX1NJVEUgPSBsb2NhdGlvbi5ob3N0Ozwvc2NyaXB0PjxzY3JpcHQgc3JjPVwiLy9saW5raGVscC5jbGllbnRzLmdvb2dsZS5jb20vdGJwcm94eS9saC93bS9maXh1cmwuanNcIj48L3NjcmlwdD48L2Rpdj48L2JvZHk+PC9odG1sPicpO1xufV0pO1xuIl19
