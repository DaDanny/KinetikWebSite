/**
 * Created by Danny on 12/15/16.
 */
angular.module('freqCultureApp', [
    'ngAnimate',
    'ngCookies',
    'ngResource',
    'ui.router',
    'ngTouch',
    'ng-fastclick',
    'slickCarousel',
    'plangular',
    'textAngular'
]);

/**
 * Created by Danny on 11/27/16.
 */
angular.module('freqCultureApp')
  .controller('ViewContentCtrl', function($scope, ContentService, $stateParams, $window) {


    $scope.selectedContent = ContentService.getSelected();

    if(!$scope.selectedContent) {
      ContentService.findContent($stateParams.contentHref)
        .then(function(selected) {
          $scope.selectedContent = selected;
          $scope.selectedContent.publishDate = new Date($scope.selectedContent.date);
        })
    } else {
      $scope.selectedContent.publishDate = new Date($scope.selectedContent.date);
    }
  })

/**
 * Created by Danny on 12/19/16.
 */
angular.module('freqCultureApp')
    .controller('MainSectionCtrl', function($scope, sectionTitle, sectionSubTitle, contentType) {
        console.log('main section');
        $scope.sectionTitle = sectionTitle;
        $scope.sectionSubTitle = sectionSubTitle;
        $scope.contentType = contentType;
    })

/**
 * Created by Danny on 11/7/16.
 */
angular.module('freqCultureApp')
  .controller('HomeCtrl', function($scope, ContentService, $state) {

    $scope.goTo = function(state, stateParams) {
      $state.go(state, stateParams);
    }


    $scope.showSignup = function() {
        console.log('signup!');
    }
  })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/view.dashboard.html',
    '<section class="fluid-container dashboard-view"><nav class="dashboard-nav"><div class="nav-logo" ng-click="goTo(\'home\')"><img src="../images/frequency_culture_white_trans.png"></div><div class="dashboard-user"><div class="user-container"><figure class="user-initials"><h1 class="subhead-2" ng-if="false">DF</h1><i class="fa fa-exclamation-triangle"></i></figure><div class="user-info"><h1 class="subhead-2" ng-if="currentUser">{{currentUser.firstName + \' \' + currentUser.lastName}}</h1><h1 class="subhead-2" ng-if="!currentUser" ng-click="showLoginModal()">Please login.</h1><ul><li ng-if="currentUser"><a>Settings</a></li><li ng-if="currentUser"><a>Logout</a></li><li ng-if="!currentUser" ng-click="showLoginModal()"><a>Login</a></li></ul></div></div></div><ul class="dashboard-menu"><li ng-class="{active: $state.includes(\'dashboard.admin\')}" ng-click="goTo(\'dashboard.admin\', \'Admin\')"><i class="fa fa-users"></i> <a class="subhead-2">Admin</a></li><li ng-class="{active: $state.includes(\'dashboard.profile\')}" ng-click="goTo(\'dashboard.profile\', \'Profile\')"><i class="fa fa-address-card"></i> <a class="subhead-2">Profile</a></li><li ng-class="{active: $state.includes(\'dashboard.content\')}" ng-click="goTo(\'dashboard.content\', \'Content\')"><i class="fa fa-list"></i> <a class="subhead-2">Content</a></li></ul><footer class="admin-menu-footer" ng-click="goTo(\'home\')"><i class="fa fa-arrow-left" aria-hidden="true"></i> <a class="subhead-2">Back To Site</a></footer></nav><header class="dashboard-header"><h1 class="headline" ng-click="goTo(\'dashboard.welcome\', \'Welcome\')">Dashboard</h1><h2 class="headline" id="muted-text" ng-click="goTo(\'dashboard.profile\', \'Profile\')">/ {{selectedView}}</h2></header><div class="dashboard-body" ng-class="{\'gray-body\' : !$state.includes(\'dashboard.welcome\')}"><div class="ui-view"></div></div></section>');
}]);

/**
 * Created by Danny on 12/24/16.
 */
angular.module('freqCultureApp')
    .controller('DashboardCtrl', function($scope, $timeout, ContentService,
                                          $state, ModalService) {

        $scope.selectedView = $state.current.data.stateTitle;
        $scope.errorMessage = null;
        $scope.loading = false;
        $scope.$state = $state;

        console.log('$state: ', $state);
        console.log('current: ', $state.includes('dashboard'))

        $scope.currentUser = undefined;

        $scope.goTo = function(state, changeTitle) {
            if(changeTitle) {
                $scope.selectedView = changeTitle
            }
            $state.go(state);
        }

        $scope.loggedIn = function(loggedInUser) {
            console.log('loggedInUser: ', loggedInUser);
        }

        $scope.showContactModal = function() {
            ModalService.openModal('contact', 'Content Editor Request')
                .then(function(modalData) {
                    console.log('promise to contact!', modalData)
                })
                .catch(function() {
                    console.log(' no value');
                })
        }

        $scope.showLoginModal = function() {
            ModalService.openModal('login')
                .then($scope.loggedIn)
                .catch(function() {
                    console.log(' no value');
                })
        }

        $scope.resetLogin = function() {
            $scope.errorMessage = null;
            $scope.loading = false;
            $scope.loginForm.email = null;
            $scope.loginForm.password = null;
        }



    })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/view.content.html',
    '<section class="section-with-top-nav container"><content-header selected-content="selectedContent"></content-header><div class="content-section" ng-repeat="contentSection in selectedContent.contentSections"><img class="content-image" ng-if="contentSection.headerImage " ng-src="{{contentSection.headerImage}}"><p class="site-body-text center-block" ng-class="{\'indent-paragraph\' : $first, \'sub-paragraph\' : !$first}">{{contentSection.content}}</p><img class="content-image" ng-if="contentSection.footerImage " ng-src="{{contentSection.footerImage}}"></div></section>');
}]);

/**
 * Created by Danny on 12/25/16.
 */
angular.module('freqCultureApp')
    .controller('DashboardContentCtrl', function($scope, $timeout, ContentService, $state) {
        console.log('scope: ', $scope);

        $scope.selectedView = 'menu';
        $scope.loading = false;

        $scope.currentUser = undefined;

        var contentFields = [
            'author',
            'title',
            'contentType',
            'subTitle',
            'url',
            'headerImage',
            'tags',
            'publishedDate',
            'description',
            'contentSections',
            'quotes',
            'audioUrls',
            'socialMedia',
            'shareUrl',
            'mainContent'
        ]

        ContentService.getContent()
            .then(function(content) {
                $scope.siteContent = content;
            })

        //$timeout(function() {
        //    $scope.selectedView = 'edit';
        //}, 2000)

        $scope.changeView = function() {
            if($scope.selectedView == 'edit') $scope.selectedView = 'menu';
            else $scope.selectedView = 'edit';
        }

        $scope.goTo = function(state) {
            $state.go(state);
        }

        $scope.selectedContent = {};

        $scope.newContent = function() {
            $scope.selectedView = 'create';
            initNewContent()
        }

        $scope.editContent = function(content) {
            $scope.selectedContent = content;
            $scope.selectedView = 'edit';
        }

        $scope.cancel = function() {
            $scope.selectedView = 'menu';
        }

        function initNewContent() {
            contentFields.map(function(field) {
                $scope.selectedContent[field] = null;
            })
        }

        var newItems = {
            'tag' : '',
            'quote' : '',
            'audio' : '',
            'section' : null

        }

        $scope.addItem = function(itemType, key) {
            var newItem = newItems[itemType];
            if(!$scope.selectedContent[key]){
                $scope.selectedContent[key] = [];
            }
            $scope.selectedContent[key].push(newItem);
            console.log('new item: ', newItem);
        }

        $scope.removeItem = function(key, index) {
            $scope.selectedContent[key].splice(index, 1);
        }

        $scope.showConfirm = false;

        $scope.confirm = function(confirm) {
            $scope.showConfirm = confirm;
        }

        $scope.confirmDelete = function(content, index) {

            if(!$scope.loading) {
                $scope.loading = true;
                ContentService.deleteContent(content)
                    .then(function(res){
                        $scope.selectedView = 'menu';
                        $scope.siteContent.splice(index, 1);
                    })
                    .finally(function() {
                        $scope.loading = false;
                    })
            }
        }


        $scope.save = function() {
            console.log('selected: ', $scope.selectedContent);
            //if(!$scope.loading) {
            //    $scope.loading = true;
            //    console.log('selected', $scope.selectedContent);
            //    $scope.loading = false;
            //    if(!$scope.selectedContent._id) {
            //        ContentService.newContent($scope.selectedContent)
            //            .then(function(res) {
            //                console.log('res: ', res);
            //            })
            //            .catch(function(err) {
            //                console.log('err: ', err);
            //            })
            //            .finally(function() {
            //                $scope.loading = false;
            //                $scope.selectedView = 'menu';
            //            })
            //    } else {
            //        ContentService.updateContent($scope.selectedContent)
            //            .then(function(res) {
            //                console.log('res: ', res);
            //            })
            //            .catch(function(err) {
            //                console.log('err: ', err);
            //            })
            //            .finally(function() {
            //                $scope.loading = false;
            //                $scope.selectedView = 'menu';
            //            })
            //    }
            //}

        }

        $scope.formatUrl = function() {
            if($scope.selectedContent.title) {
                $scope.selectedContent.url = $scope.selectedContent.title.toLowerCase().replace(/\s/g, "_");
            }
        }
    })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/view.admin.html',
    '<section class="fluid-container admin-view"><nav class="admin-nav"><div class="nav-logo" ng-click="goTo(\'home\')"><img src="../images/frequency_culture_white_trans.png"></div><div class="admin-user"><div class="user-container"><figure class="user-initials"><h1 class="subhead-2" ng-if="false">DF</h1><i class="fa fa-exclamation-triangle"></i></figure><div class="user-info"><h1 class="subhead-2" ng-if="currentUser">{{currentUser.firstName + \' \' + currentUser.lastName}}</h1><h1 class="subhead-2" ng-if="!currentUser" data-toggle="modal" data-target="#loginModal">Please login.</h1><ul><li ng-if="currentUser"><a>Settings</a></li><li ng-if="currentUser"><a>Logout</a></li><li ng-if="!currentUser" data-toggle="modal" data-target="#loginModal"><a>Login</a></li></ul></div></div></div></nav><header class="admin-header"><h1 class="headline">Dashboard</h1></header></section><div class="modal fade admin-modal" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h1 class="title">Login</h1></div><div class="modal-body"><div class="row"><div class="col-xs-6 col-xs-offset-3 col-sm-6 col-sm-offset-0 form-group"><label for="userEmail" class="label">Email</label><input type="email" class="form-control" id="userEmail" placeholder="Email"></div><div class="col-xs-6 col-xs-offset-3 col-sm-6 col-sm-offset-0 form-group"><label for="userPassword" class="label">Password</label><input type="password" class="form-control" id="userPassword" placeholder="Password"></div></div></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal"><h1 class="button">Cancel</h1></button> <button type="button" class="btn purple-button"><h1 class="button">Login</h1></button></div></div></div></div>');
}]);

/**
 * Created by Danny on 12/18/16.
 */
angular.module('freqCultureApp')
    .controller('AdminCtrl', function($scope, $timeout, UserService, AdminService, ModalService) {

        $scope.sideMemberCard = null;
        $scope.saving = false;
        $scope.adminErrorMessage = null;

        AdminService.allUsers()
            .then(function(users) {
                console.log('users: ', users);
                $scope.teamMembers = users;
            })
            .catch(function(err) {
                console.log('err: ', err);
            })

        $scope.showMemberCard = function(type) {
            $scope.sideMemberCard = type;
            if(!type) {
                $scope.clearMemberForm();
            }
        }

        $scope.save = function(memberInfo) {
            if(!$scope.saving) {
                $scope.adminErrorMessage = null;
                if(!memberInfo.firstName) {
                    $scope.adminErrorMessage = 'Please include a first name.'
                } else if(!memberInfo.lastName) {
                    $scope.adminErrorMessage = 'Please include a last name (or initial).';
                } else if(!memberInfo.email) {
                    $scope.adminErrorMessage = 'Please include an email.';
                } else if(!memberInfo.role) {
                    $scope.adminErrorMessage = 'Please select a role.';
                } else {
                    $scope.saving = true;
                    if(memberInfo._id) {
                        console.log('update!');
                        UserService.updateUser(memberInfo)
                            .then(function(res) {
                                console.log('res', res);
                                $scope.showMemberCard(null);
                                updateUserInArray(res.data);
                            })
                            .catch(function(err) {
                                console.log('err: ', err);
                            })
                            .finally(function() {
                                $scope.saving = false;
                            })
                    } else {
                        AdminService.newUser(createUserObj(memberInfo))
                            .then(function(res) {
                                console.log('res', res);
                                $scope.teamMembers.push(res.data)
                                $scope.sideMemberCard = null;
                                $scope.clearMemberForm();
                            })
                            .catch(function(err) {
                                console.log('err: ', err);
                            })
                            .finally(function() {
                                $scope.saving = false;
                            })
                    }
                }
            }
        };

        $scope.delete = function(member) {
            console.log('delete: ', member);
            ModalService.openModal('confirm', 'Delete ' + member.firstName + '?')
                .then(function(modalData) {
                    console.log('delete: ', member);
                    $scope.saving = true;
                    AdminService.deleteUser(member._id)
                        .then(function(res) {
                            $scope.showMemberCard(null);
                            removeUserFromArray(member._id)
                        })
                        .catch(function(err) {
                            console.log('err: ', err);
                        })
                        .finally(function() {
                            $scope.saving = false;
                        })
                })
                .catch(function() {
                    console.log(' no value');
                })
        }

        $scope.editMember = function(member) {
            $scope.memberForm = angular.copy(member);
            $scope.saving = false;
            $scope.sideMemberCard = 'edit';
        }


        $scope.clearMemberForm = function() {
            $scope.adminErrorMessage = null;
            $scope.saving = false;
            $scope.memberForm.firstName = null;
            $scope.memberForm.lastName = null;
            $scope.memberForm.email = null;
            $scope.memberForm.role = null;
        };


        function createUserObj(memberInfo) {
            return {
                firstName : memberInfo.firstName,
                lastName : memberInfo.lastName,
                email : memberInfo.email,
                role : memberInfo.role
            }
        }

        function updateUserInArray(updatedUser) {
            var usersLen = $scope.teamMembers.length;
            for(var i=0;i<usersLen;i++) {
                if(updatedUser._id == $scope.teamMembers[i]._id) {
                    $scope.teamMembers[i] = updatedUser;
                    break;
                }
            }
        }

        function removeUserFromArray(userId) {
            var usersLen = $scope.teamMembers.length;
            var idx;
            for(var i=0;i<usersLen;i++) {
                if(userId == $scope.teamMembers[i]._id) {
                    idx = i;
                    break;
                }
            }
            if(idx < usersLen) {
                $scope.teamMembers.splice(idx,1);
            }
        }

    })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/site-modal.html',
    '<div class="modal fade dashboard-modal" id="siteModal" tabindex="-1" role="dialog"><div class="modal-dialog" role="document"><div class="modal-content"><div ng-include="modalTemplate"></div></div></div></div>');
}]);

/**
 * Created by Danny on 12/24/16.
 */
angular.module('freqCultureApp')
    .service('UserService', function($http) {

        var updateUser = function(updates) {
            return $http({
                method : 'PUT',
                url : 'api/user/updateUser/' + updates._id,
                data : updates
            })
        }

        return {
            updateUser : updateUser
        }
    })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/site-footer.html',
    '<footer class="footer" ng-if="!state.includes(\'dashboard\')"><div class="footer-container"><nav class="footer-links"><div class="links-container"><h1 class="site-list-title">Site</h1><ul><li><a ui-sref="home" class="site-list-item">Home</a></li><li><a ui-sref="sound" class="site-list-item">Sound</a></li><li><a ui-sref="film" class="site-list-item">Film</a></li><li><a ui-sref="fashion" class="site-list-item">Fashion</a></li><li><a ui-sref="culture" class="site-list-item">Culture</a></li></ul></div><div class="links-container"><h1 class="site-list-title">About</h1><ul><li ui-sref="about" class="site-list-item"><a>About</a></li><li><a href="mailto:Danny@FrequencyCulture.com, Ben@FrequencyCulture" class="site-list-item">Contact</a></li><li><a href="mailto:Danny@FrequencyCulture.com, Ben@FrequencyCulture" class="site-list-item">Submissions</a></li><li><a href="mailto:Danny@FrequencyCulture.com, Ben@FrequencyCulture" class="site-list-item">Advertise</a></li></ul></div><div class="social-footer"><ul><li><i class="fa fa-facebook"></i></li><li><i class="fa fa-twitter"></i></li><li><i class="fa fa-soundcloud"></i></li></ul></div></nav><div class="bottom-footer"><h2 class="label">&copy; 2016 Frequency Culture</h2></div></div></footer>');
}]);

/**
 * Created by Danny on 1/29/17.
 */
angular.module('freqCultureApp')
    .service('SignupService', function($http) {
        var newSignup = function(signupData) {
            return $http({
                method : 'POST',
                url : 'api/signup/newSignup',
                data : signupData
            })
        }

        return {
            newSignup : newSignup
        }
    })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/site-audio.html',
    '<div class="site-audio" ng-if="!state.includes(\'dashboard\')"><div class="navbar navbar-default navbar-fixed-bottom" role="navigation"><div class="container-fluid" plangular="{{trackUrl}}" ng-if="trackUrl"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed button-default" data-toggle="collapse" data-target="#audio-player"><i class="fa fa-music"></i></button></div><div class="full-controls container hidden-xs"><ul class="audio-controls"><li><i class="fa fa-backward"></i></li><li ng-click="playPause()"><i class="fa fa-play" ng-if="player.playing !== track.src"></i> <i class="fa fa-pause" ng-if="player.playing == track.src"></i></li><li><i class="fa fa-forward"></i></li></ul><img ng-src="{{track.artwork_url}}" class="image-shadow audio-image" image-shadow><ul class="audio-info-full"><li><h1 class="label">Artist : <span>{{track.user.username}}</span></h1></li><li><h1 class="label">Track : <span>{{track.title}}</span></h1></li></ul></div><div class="hidden-sm hidden-md hidden-lg mini-controls container-fluid"><ul class="audio-controls"><li><i class="fa fa-backward"></i></li><li ng-click="playPause()"><i class="fa fa-play" ng-if="player.playing !== track.src"></i> <i class="fa fa-pause" ng-if="player.playing == track.src"></i></li><li><i class="fa fa-forward"></i></li></ul></div><div class="collapse navbar-collapse" id="audio-player"><ul class="nav navbar-nav container hidden-md hidden-lg hidden-sm mini-audio"><div class="audio-info"><img ng-src="{{track.artwork_url}}" class="image-shadow audio-image" image-shadow><ul><li><h1 class="label">Artist : <span>{{track.user.username}}</span></h1></li><li><h1 class="label">Title : <span>{{track.title}}</span></h1></li></ul></div></ul></div></div></div></div>');
}]);

/**
 * Created by Danny on 12/24/16.
 */
angular.module('freqCultureApp')
    .service('ModalService', function($rootScope, $q, $timeout) {

        var partialUrls = {
            'login' : 'partials/modal-login.html',
            'contact' : 'partials/modal-contact.html',
            'confirm' : 'partials/modal-confirm.html',
            'signup' : 'partials/modal-signup.html'
        }

        var _modal;
        var closeModal;

        $timeout(function() {
            _modal = $('#siteModal');
            _modal.on('hide.bs.modal', function(e) {
                closeModal(e);
            })
        },100)

        // Global hide modal listener


        return {

            // Returns a promise which is resolved when the modal closes.
            openModal : function(type, modalTitle) {
                var deferred = $q.defer();
                $rootScope.modalTemplate = partialUrls[type];
                $rootScope.modalTitle = modalTitle;
                $rootScope.modalConfirm = function(data) {
                    deferred.resolve(data);
                    _modal.modal('hide');
                };

                console.log('modal: ', _modal)
                _modal.modal('show');

                closeModal = function(e) {
                    deferred.reject();
                }
                return deferred.promise;
            }
        }
    })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/sidemenu.html',
    '<nav class="mobile-menu" ng-class="{\'show-menu\' : showMenu}"><div class="nav-container"><ul><h1 class="site-list-title">Site</h1><li><a ui-sref="sound" class="site-list-item">Sound</a></li><li><a ui-sref="film" class="site-list-item">Film</a></li><li><a ui-sref="fashion" class="site-list-item">Fashion</a></li><li><a ui-sref="culture" class="site-list-item">Culture</a></li></ul><ul><h1 class="site-list-title">About</h1><li><a href="" class="site-list-item">About</a></li><li><a href="mailto:Danny@FrequencyCulture.com, Ben@FrequencyCulture" class="site-list-item">Contact</a></li><li><a href="mailto:Danny@FrequencyCulture.com, Ben@FrequencyCulture" class="site-list-item">Submissions</a></li><li><a href="mailto:Danny@FrequencyCulture.com, Ben@FrequencyCulture" class="site-list-item">Advertise</a></li></ul></div><div class="social-container"><ul><li><i class="fa fa-facebook"></i></li><li><i class="fa fa-twitter"></i></li><li><i class="fa fa-soundcloud"></i></li></ul></div></nav>');
}]);

/**
 * Created by Danny on 11/6/16.
 */
angular.module('freqCultureApp')
  .service('ContentService', function($http, $q) {
    var _siteContent,
      _selectedContent;


    var setContent = function(content, callback) {
      _siteContent = content;
      if(callback) {
        callback(content);
      }
    }

    var getContent = function(content) {
      var deferred = $q.defer();
      if(!_siteContent) {
        initContent(function(content) {
          console.log('content: ', content);
          deferred.resolve(content);
        })
      } else {
        deferred.resolve(_siteContent);
      }

      return deferred.promise;
    }

    var initContent = function(callback) {
      $http.get('api/siteContent/allContent')
        .then(function(results){
          setContent(results.data, callback);
        })
    }

    function formatContent(content, callback) {
      var formattedContent = [];
        console.log('content: ', content);
      //for(var key in content) {
      //  angular.forEach(content[key], function (item) {
      //    item.stateName = (item.stateName || item.url).toLowerCase();
      //    item.urlPrefix = '/' + key + '/' + item.url;
      //    item.href = item.url;
      //    if(key == 'articles') {
      //      item.src = 'views/view.article.html';
      //    } else if(key == 'creator-series') {
      //      item.src = "views/view.creator-series.html";
      //    }
      //    formattedContent.push(item);
      //  });
      //}
      setContent(formattedContent, callback);
    }

    var setSelected = function(content) {
      _selectedContent = content;
    }

    var getSelected = function() {
      return _selectedContent;
    }

    var findContent = function(selectedHref) {
      var deferred = $q.defer();
      if(!_selectedContent) {
        initContent(function(content) {
          for(var c=0;c<content.length;c++) {
            if(content[c].href == selectedHref) {
              return deferred.resolve(content[c]);
            }
          }
        })
      } else {
        return deferred.resolve(_selectedContent);
      }
      return deferred.promise;
    }



      var newContent = function(newContent) {
          return $http({
              method : 'POST',
              url : 'api/siteContent/',
              data : newContent
          })
      }

      var updateContent = function(content) {
          return $http({
              method : 'PUT',
              url : 'api/siteContent/' + content._id,
              data : content
          })
      }

      var deleteContent = function(content) {
          return $http({
              method : 'DELETE',
              url : 'api/siteContent/' + content._id
          })
      }

    return {
      setContent : setContent,
      getContent : getContent,
      initContent : initContent,
      setSelected : setSelected,
      getSelected : getSelected,
      findContent : findContent,
      newContent : newContent,
      updateContent : updateContent,
      deleteContent : deleteContent
    }
  })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/section-header.html',
    '<header class="section-header" id="sectionHeader"><img src="../images/kinetik_logo_purple.svg" class="logo"><ul class="header-menu"><li ng-click="goTo(\'sound\')" ng-class="{\'active-link\' : isActive(\'sound\')}"><h1 class="title">Sound</h1></li><li ng-click="goTo(\'film\')" ng-class="{\'active-link\' : isActive(\'film\')}"><h1 class="title">Film</h1></li><li ng-click="goTo(\'fashion\')" ng-class="{\'active-link\' : isActive(\'fashion\')}"><h1 class="title">Fashion</h1></li><li ng-click="goTo(\'culture\')" ng-class="{\'active-link\' : isActive(\'culture\')}"><h1 class="title">Culture</h1></li></ul></header>');
}]);

/**
 * Created by Danny on 12/25/16.
 */
angular.module('freqCultureApp')
    .service('AdminService', function($http, $q) {

        var _allUsers;
        var newUser = function(newUser) {
            return $http({
                method : 'POST',
                url : 'api/user/newUser',
                data : newUser
            })
        }

        var allUsers = function() {
            if(!_allUsers) {
                return $http({
                    method: 'GET',
                    url : 'api/user/allUsers'
                })
                    .then(function(response) {
                        _allUsers = response.data;
                        return _allUsers
                    })
            } else {
                var deferred = $q.defer();
                deferred.resolve(_allUsers);
                return deferred.promise;
            }
        }

        var deleteUser = function(userId) {
            return $http({
                method: 'DELETE',
                url : 'api/user/' + userId
            })
        }

        return {
            newUser : newUser,
            allUsers : allUsers,
            deleteUser : deleteUser
        }
    })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/navbar.html',
    '<div class="header"><nav class="navbar navbar-default navbar-inverse navbar-fixed-top main-navbar" role="navigation" ng-class="{\'visible-nav\' : showNavbar}"><div class="container"><div class="menu-logo hidden-xs" ng-click="goTo(\'home\')"><img src="../images/kinetik_name.svg"></div><ul class="full-nav hidden-xs"><li ng-click="goTo(\'sound\')" ng-class="{\'active-link\' : isActive(\'sound\')}" class="navbar-link"><h1>Sound</h1></li><li ng-click="goTo(\'film\')" class="navbar-link" ng-class="{\'active-link\' : isActive(\'film\')}"><h1>Film</h1></li><li ng-click="goTo(\'fashion\')" class="navbar-link" ng-class="{\'active-link\' : isActive(\'fashion\')}"><h1>Fashion</h1></li><li ng-click="goTo(\'culture\')" class="navbar-link" ng-class="{\'active-link\' : isActive(\'culture\')}"><h1>Culture</h1></li></ul><div class="visible-xs mobile-navbar"><img src="../images/kinetik_name.svg" ng-click="goTo(\'home\')"><hamburger-menu state="showMenu" ng-click="toggleLinks()"></hamburger-menu></div></div></nav></div>');
}]);

/**
 * Created by Danny on 12/24/16.
 */
angular.module('freqCultureApp')
    .directive('siteModal', function($rootScope) {
        return {
            restrict : 'E',
            templateUrl : 'partials/site-modal.html',
            link : function(scope, elem, attrs) {
                scope.modalTemplate = $rootScope.modalTemplate;
                scope.modalConfirm = $rootScope.modalConfirm;
            }
        }
    })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/modal-signup.html',
    '<div><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h1 class="title">Kinetik Mag Early Access</h1></div><div class="modal-body"><form role="form" novalidate name="signupForm"><div class="row"><div class="col-xs-6 col-xs-offset-3 col-sm-6 col-sm-offset-0 form-group"><label for="userEmail" class="label">Email</label><input type="email" class="form-control" id="userEmail" placeholder="Email" ng-model="signupForm.email"></div><div class="col-xs-6 col-xs-offset-3 col-sm-6 col-sm-offset-0 form-group"><label for="firstName" class="label">First Name</label><input type="text" class="form-control" id="firstName" placeholder="First Name" ng-model="signupForm.firstName"></div></div></form></div><div class="modal-footer"><div class="modal-footer-extras"><h1 class="title modal-error">{{errorMessage}}</h1><i class="fa fa-spinner fa-spin" ng-if="!errorMessage && loggingIn"></i></div><button type="button" class="btn btn-default" data-dismiss="modal"><h1 class="button">Cancel</h1></button> <button type="submit" class="btn purple-button" ng-click="$parent.modalConfirm(signupForm)"><h1 class="button">Submit</h1></button></div></div>');
}]);

/**
 * Created by Danny on 11/6/16.
 */
angular.module('freqCultureApp')
  .directive('siteFooter', function() {
    return {
      restrict : 'E',
      templateUrl : 'partials/site-footer.html'
    }
  })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/modal-login.html',
    '<div ng-controller="LoginModalCtrl" ng-init="resetLogin()"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h1 class="title">Login</h1></div><div class="modal-body"><form role="form" novalidate name="loginForm"><div class="row"><div class="col-xs-6 col-xs-offset-3 col-sm-6 col-sm-offset-0 form-group"><label for="userEmail" class="label">Email</label><input type="email" class="form-control" id="userEmail" placeholder="Email" ng-model="loginForm.email"></div><div class="col-xs-6 col-xs-offset-3 col-sm-6 col-sm-offset-0 form-group"><label for="userPassword" class="label">Password</label><input type="password" class="form-control" id="userPassword" placeholder="Password" ng-model="loginForm.password"></div></div></form></div><div class="modal-footer"><div class="modal-footer-extras"><h1 class="title modal-error">{{errorMessage}}</h1><i class="fa fa-spinner fa-spin" ng-if="!errorMessage && loggingIn"></i></div><button type="button" class="btn btn-default" data-dismiss="modal"><h1 class="button">Cancel</h1></button> <button type="submit" class="btn purple-button" ng-click="login(loginForm)"><h1 class="button">Login</h1></button></div></div>');
}]);

/**
 * Created by Danny on 11/6/16.
 */

angular.module('freqCultureApp')
  .directive('siteAudio', function() {
    return {
      restrict : 'E',
      templateUrl : 'partials/site-audio.html',
      link : function(scope, elem, attrs) {

        var clientId = 'oerXf6nBcDu5CoNdaOrIGutVCKXPYvSB';
        scope.trackUrl = 'https://soundcloud.com/itzaia/mix-machine-297-16-nov-2016-with-itzaia';

        SC.initialize({
          client_id: clientId
        });
        SC.resolve('https://soundcloud.com/itzaia/mix-machine-297-16-nov-2016-with-itzaia')
          .then(function(track) {
            //console.log('track: ', track);
          })
      }
    }
  })


angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/modal-contact.html',
    '<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h1 class="title">{{$parent.modalTitle ? $parent.modalTitle : \'Contact\'}}</h1></div><div class="modal-body"><p class="site-body-text center-block">Please fill out some details so we can get back to you.</p><form role="form" novalidate name="contactForm" class="center-block"><div class="row"><div class="col-xs-6 col-xs-offset-3 col-sm-5 col-sm-offset-1 form-group"><label for="contactFirstName" class="label">First Name</label><input type="text" class="form-control" id="contactFirstName" placeholder="First Name" ng-model="contactForm.firstName"></div><div class="col-xs-6 col-xs-offset-3 col-sm-5 col-sm-offset-0 form-group"><label for="contactLastName" class="label">Last Name</label><input type="text" class="form-control" id="contactLastName" placeholder="Last Name" ng-model="contactForm.lastName"></div></div><div class="row"><div class="col-xs-6 col-xs-offset-3 col-sm-5 col-sm-offset-1 form-group"><label for="contactEmail" class="label">Email</label><input type="email" class="form-control" id="contactEmail" placeholder="Email" ng-model="contactForm.email"></div><div class="col-xs-6 col-xs-offset-3 col-sm-5 col-sm-offset-0 form-group"><label for="contactCompany" class="label">(Optional) Company</label><input type="text" class="form-control" id="contactCompany" placeholder="Company" ng-model="contactForm.company"></div></div><div class="row"><div class="col-xs-10 col-xs-offset-1 col-sm-8 col-sm-offset-2 form-group"><label for="contactMessage" class="label">(Optional) Message</label><textarea class="form-control" id="contactMessage" rows="3" ng-model="contactForm.message"></textarea></div></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal"><h1 class="button">Cancel</h1></button> <button type="submit" class="btn purple-button" ng-click="$parent.modalConfirm(contactForm)"><h1 class="button">Submit</h1></button></div>');
}]);

/**
 * Created by Danny on 11/5/16.
 */
angular.module('freqCultureApp')
  .directive('sidemenu', function($rootScope) {
    return {
      scope: 'E',
      templateUrl : 'partials/sidemenu.html',
      link : function(scope, elem, attrs) {

        scope.showMenu = false;
        scope.toggleLinks = function() {
          var link = document.querySelector('.mobile-menu').querySelectorAll('li');
          for (var i = 0; i < link.length; i++) {
            link[i].classList.toggle('active');
          }
        }
        $rootScope.$on("$stateChangeSuccess", function(event, toState) {
          if(scope.showMenu) {
            scope.toggleLinks()
            scope.showMenu = false;
          }
        });
      }
    }
  })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/modal-confirm.html',
    '<div class="modal-header red-modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h1 class="title">{{$parent.modalTitle ? $parent.modalTitle : \'Please Confirm\'}}</h1></div><div class="modal-body">Are you sure you wish to continue? This action is permanent and cannot be undone.</div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal"><h1 class="button">Cancel</h1></button> <button type="submit" class="btn btn-danger" ng-click="$parent.modalConfirm(contactForm)">Confirm</button></div>');
}]);

/**
 * Created by Danny on 11/8/16.
 */
angular.module('freqCultureApp')
  .directive('sectionHeader', function($state, $window, $rootScope) {
    return {
      restrict : 'E',
      templateUrl : 'partials/section-header.html',
      link : function(scope, elem, attrs) {
        //scope.headerStyle = {
        //  'background-repeat' : 'no-repeat',
        //  'background-position' : 'center',
        //  'background-size' : 'cover'
        //
        //};
        //scope.state = $state;
        //var windowWidth = $window.innerWidth,
        //  stateName;
        //
        //// In case of screen resizes, make sure we use correct background image
        //angular.element($window).bind('resize', function () {
        //  windowWidth = $window.innerWidth;
        //  if(stateName != 'home') getHeaderImage();
        //});
        //
        //$rootScope.$on("$stateChangeSuccess", function(event, toState) {
        //  stateName = toState.name;
        //  if(stateName != 'home') getHeaderImage();
        //});
        //function getHeaderImage() {
        //  var imageLocation = stateName + '-header.png';
        //  if(windowWidth < 768) imageLocation = 'mobile-' + imageLocation;
        //  imageLocation = 'url(../images/' + imageLocation + ')';
        //  scope.headerStyle['background-image'] = imageLocation;
        //}
        scope.isActive = function(state) {
          return $state.current.name == state;
        }
        scope.goTo = function(state) {
          $state.go(state);
        }
      }
    }
  })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/main-section.partial.html',
    '<section class="section-with-top-nav container"><h1 class="display-2">{{sectionTitle}}</h1><h2 class="subhead-1">{{sectionSubTitle}}</h2><content-container content-type="{{contentType}}"></content-container></section>');
}]);

/**
 * Created by Danny on 10/10/16.
 */
angular.module('freqCultureApp')
  .directive('navbar', function($window, $rootScope, $state, $timeout) {
    return {
      scope: 'E',
      templateUrl : 'partials/navbar.html',
      link : function(scope, elem, attrs) {

        /*
         Always Show Navbar on mobile screens

         Monitor Width in case of screen resizers!

         Hide navbar on home view non-mobile
          */
        scope.state = $state;

        var windowWidth = $window.innerWidth;
        scope.showNavbar = true;

        angular.element($window).bind('resize', function () {
          windowWidth = $window.innerWidth;
          scope.showNavbar = (windowWidth < 768);
          if(scope.state.current.name == 'home'&& windowWidth >= 768 ) watchHomeScroll();

        });
        $rootScope.$on("$stateChangeSuccess", function(event, toState) {
          if(windowWidth < 768) {
            scope.showNavbar = true;
          } else {
            scope.showNavbar = (toState.name !== 'home' && windowWidth >= 768);
          }
          if(toState.name == 'home' && windowWidth >= 768) watchHomeScroll()
          else angular.element($window).unbind('scroll');

          if(scope.state.includes('dashboard')) scope.showNavbar = false;
        });

        scope.goTo = function(state) {
          $state.go(state);
        }

        var headerHeight;
        function watchHomeScroll() {
          $timeout(function() {
            headerHeight = document.getElementById('sectionHeader').clientHeight;
          }, 100);

          angular.element($window).bind("scroll", function(e) {
            scope.$apply(function() {
              scope.showNavbar = ($window.scrollY > headerHeight)
            });
          })
        }

        scope.isActive = function(state) {
          return $state.current.name == state;
        }
      }
    }
  })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/home.html',
    '<section-header class="hidden-xs"></section-header><section class="section-with-top-nav container"><content-container content-type="home"></content-container></section>');
}]);

/**
 * Created by Danny on 12/25/16.
 */
angular.module('freqCultureApp')
    .controller('LoginModalCtrl', function($scope, $timeout) {

        $scope.errorMessage = null;
        $scope.loggingIn = false;
        $scope.loginForm = {};


        $scope.login = function(loginForm) {
            if(!$scope.loggingIn) {
                $scope.loggingIn = false;
                if(!loginForm.email) {
                    $scope.errorMessage = 'Please enter your email.'
                } else if(!loginForm.password) {
                    $scope.errorMessage = 'Please enter your password.'
                } else {
                    $scope.errorMessage = undefined;
                    $scope.loggingIn = true;
                    $timeout(function() {
                        $scope.modalConfirm(loginForm);
                    }, 3000);
                }
            }
        }

        $scope.resetLogin = function() {
            $scope.errorMessage = null;
            $scope.loading = false;
            $scope.loginForm.email = null;
            $scope.loginForm.password = null;
        }
        $scope.resetLogin();

    })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/hamburger-menu.html',
    '<div class="material-design-hamburger" ng-click="toggleState()"><button class="material-design-hamburger__icon"><span class="material-design-hamburger__layer" ng-class="\'material-design-hamburger__icon--\' + (state ? \'to\' : \'from\') + \'-arrow\'"></span></button></div>');
}]);

/**
 * Created by Danny on 11/6/16.
 */
angular.module('freqCultureApp')
  .directive('imageShadow', function() {
    return {
      restrict : 'A',
      link : function(scope, elem, attrs) {
        var img = elem[0];
        var style;
        var imgSrc;

        elem.bind('error', function() {
          attrs.$set('src', '../images/logo-backup.png');
          imgSrc = '../images/logo-backup.png';
        })

        attrs.$observe('src', function(value) {
          imgSrc = attrs.src;
          if(imgSrc != '../images/logo-backup.png') addShadow();
        })

        function addShadow() {
          var container = document.createElement('div');
          container.className = 'image-shadow-container image-shadow';
          container.id = "image-shadow-0";
          img.classList.remove('image-shadow');
          img.parentNode.insertBefore(container, img);
          container.appendChild(img);
          style = "#image-shadow-0"+"::after {"+
            "  background-image: url('"+imgSrc+"');"+
            "  content: '';"+
            "}";
          var $style = document.createElement("style");
          $style.appendChild(document.createTextNode(style));
          document.head.appendChild($style);
        }
      }
    }
  })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/dashboard.welcome.html',
    '<div class="container-fluid dashboard-welcome"><img src="../images/frequency_culture_name_and_logo_gray.png"><div class="welcome-text"><h1 class="display-1">Content Editor</h1><p class="site-body-text center-block">To begin contributing content to Frequency Culture, please login or request access.</p><ul class="welcome-list"><li ng-click="showLoginModal()"><a>Login</a></li><li ng-click="showContactModal()"><a>Request Access</a></li></ul></div></div>');
}]);

/**
 * Created by Danny on 11/8/16.
 */
angular.module('freqCultureApp')
  .directive('hamburgerMenu', function() {
    return {
      restrict: 'E',
      scope: {
        state: '='
      },
      templateUrl: 'partials/hamburger-menu.html',
      link: function($scope, $element, $attrs) {

        /**
         * @ngdoc object
         * @name toggleState
         * @methodOf ngHamburger.directive:hamburgerToggle
         * @description Toggles two way bound model.
         */
        $scope.toggleState = function() {
          return $scope.state = !$scope.state;
        };
      }
    };
  })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/dashboard.profile.html',
    '<div class="container-fluid"><div class="col-xs-12"><h1 class="headline">Profile</h1></div></div>');
}]);

/**
 * Created by Danny on 11/28/16.
 */
angular.module('freqCultureApp')
  .directive('contentHeader', function() {
    return {
      restrict : 'E',
      templateUrl : 'partials/content-header.html',
      scope : {
        selectedContent : '='
      },
      link : function(scope, elem, attrs) {
      }
    }
  })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/dashboard.content.html',
    '<div class="container-fluid"><div class="col-xs-12"><h1 class="headline">Content</h1></div></div>');
}]);

/**
 * Created by Danny on 11/22/16.
 */
angular.module('freqCultureApp')
  .directive('contentContainer', function(ContentService, $rootScope,
                                          $timeout, $state) {
    return {
      restrict : 'E',
      scope : {
        contentType : '@'
      },
      templateUrl : 'partials/content-container.html',
      link : function(scope, elem, attrs) {
        ContentService.getContent()
          .then(function(content) {
            buildContent(content)
          })

        //scope.showHero = false;
        //$timeout(function() {
        //  console.log('show hero!');
        //  scope.showHero = true;
        //},100);
          console.log('scope: ', scope.contentType);
        function buildContent(allContent) {
          if(scope.contentType == 'home') {
            scope.content = allContent;
            buildHero();
          } else {
            scope.content = [];
            for(var c=0;c<allContent.length;c++) {
              if(allContent[c].contentType == scope.contentType) {
                scope.content.push(allContent[c])
              }
            }
            buildHero();
          }
        }


        function buildHero() {
          scope.heroContent = [];
          var limit = 3;
          if(scope.content.length < 3) {
            limit = scope.content.length;
          }
          for(var c=0;c<limit;c++) {
            scope.heroContent.push(scope.content[c]);
          }
          scope.showHero = (scope.heroContent.length > 0)
        }

        $rootScope.$on("$stateChangeStart", function() {
          scope.showHero = false;
        })

        $rootScope.$on("$stateChangeSuccess", function() {
          $timeout(function() {
            console.log('show hero!');
            scope.showHero = true;
          },200)
        })

        scope.goTo = function(content) {
            console.log('content: ', content);
          if(content.class == 'creator-series') {
            content.class = 'view-creator-series'
          }
          ContentService.setSelected(content);
          $state.go('content', {contentType: content.contentType, contentUrl : content.url})
        }
      }

    }
  })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/dashboard.admin.html',
    '<div class="container-fluid dashboard-admin"><div class="site-card admin-card col-xs-5 list-card"><header><h1 class="subhead-2">Team Members</h1><i class="fa fa-plus-circle" ng-click="showMemberCard(\'new\')"></i></header><ul class="team-list"><li ng-repeat="member in teamMembers" ng-click="editMember(member)"><figure class="member-initals"><h1 class="subhead-2">{{member.firstName.charAt(0)}}{{member.lastName.charAt(0)}}</h1></figure><div class="member-info"><h1 class="subhead-2">{{member.firstName}} {{member.lastName}}</h1><h2 class="body-1">{{member.email}}</h2><h3 class="caption">Role: <span>{{member.role}}</span></h3></div><div class="member-edit"><i class="fa fa-pencil"></i></div></li></ul><div class="team-list-cover" ng-if="teamMembers.length > 8"></div></div><div class="site-card admin-card col-xs-6 col-xs-offset-1" ng-show="sideMemberCard"><header><h1 class="subhead-2">{{sideMemberCard == \'new\' ? \'New\' : \'Edit\'}} Member</h1><i class="fa fa-times-circle-o" ng-click="showMemberCard(null)"></i></header><form role="form" novalidate name="memberForm"><div class="form-group"><label for="firstName" class="label">First Name</label><input type="text" class="form-control" id="firstName" placeholder="First Name" ng-model="memberForm.firstName"></div><div class="form-group"><label for="lastName" class="label">Last Name</label><input type="text" class="form-control" placeholder="Last Name" id="lastName" ng-model="memberForm.lastName"></div><div class="form-group"><label for="email" class="label">Email</label><input type="email" class="form-control" id="email" placeholder="Email" ng-model="memberForm.email"></div><div class="form-group"><label for="memberRoles" class="label">Role</label><ul class="admin-roles" id="memberRoles"><li ng-click="memberForm.role = \'SuperAdmin\'" ng-class="{\'selected\' : memberForm.role == \'SuperAdmin\'}"><h1 class="body-2">Super</h1></li><li ng-click="memberForm.role = \'Admin\'" ng-class="{\'selected\' : memberForm.role == \'Admin\'}"><h1 class="body-2">Admin</h1></li><li ng-click="memberForm.role = \'Editor\'" ng-class="{\'selected\' : memberForm.role == \'Editor\'}"><h1 class="body-2">Editor</h1></li></ul></div></form><footer><div class="admin-footer-extras"><h1 class="title" ng-if="adminErrorMessage">{{adminErrorMessage}}</h1><i class="fa fa-spinner fa-spin" ng-if="!adminErrorMessage && saving"></i></div><div><button type="button" class="btn btn-danger" ng-if="sideMemberCard == \'edit\'" ng-click="delete(memberForm)">Delete</button> <button type="submit" class="btn purple-button" ng-click="save(memberForm)"><h1 class="button">{{sideMemberCard == \'new\' ? \'Create\' : \'Save\'}}</h1></button></div></footer></div></div>');
}]);

/**
 * Created by Danny on 12/15/16.
 */
'use strict';
angular.module('freqCultureApp')
    .config(function ($locationProvider, $stateProvider,  $urlRouterProvider,
                      $urlMatcherFactoryProvider) {

        $urlMatcherFactoryProvider.caseInsensitive(true);
        $urlMatcherFactoryProvider.strictMode(false);
        $urlRouterProvider.otherwise('/');

        $stateProvider
            .state('home', {
                url : '/',
                controller : 'HomeCtrl',
                templateUrl : 'partials/home.html'
            })

            .state('sound', {
                url : '/sound',
                controller : 'MainSectionCtrl',
                templateUrl : 'partials/main-section.partial.html',
                resolve : {
                    sectionTitle : function() {
                        return 'Sound';
                    },
                    sectionSubTitle : function() {
                        return 'Sound section'
                    },
                    contentType : function() {
                        return 'sound'
                    }
                }
            })

            .state('film', {
                url : '/film',
                controller : 'MainSectionCtrl',
                templateUrl : 'partials/main-section.partial.html',
                resolve : {
                    sectionTitle : function() {
                        return 'Film';
                    },
                    sectionSubTitle : function() {
                        return 'Film section'
                    },
                    contentType : function() {
                        return 'film'
                    }
                }
            })

            .state('fashion', {
                url : '/fashion',
                controller : 'MainSectionCtrl',
                templateUrl : 'partials/main-section.partial.html',
                resolve : {
                    sectionTitle : function() {
                        return 'Fashion';
                    },
                    sectionSubTitle : function() {
                        return 'Fashion section'
                    },
                    contentType : function() {
                        return 'fashion'
                    }
                }
            })

            .state('culture', {
                url : '/culture',
                controller : 'MainSectionCtrl',
                templateUrl : 'partials/main-section.partial.html',
                resolve : {
                    sectionTitle : function() {
                        return 'Culture';
                    },
                    sectionSubTitle : function() {
                        return 'Culture section'
                    },
                    contentType : function() {
                        return 'culture'
                    }
                }
            })



            .state('admin', {
                url : '/admin',
                templateUrl : 'partials/view.admin.html',
                controller : 'AdminCtrl'
            })

            .state('dashboard', {
                url : '/dashboard',
                templateUrl : 'partials/view.dashboard.html',
                controller : 'DashboardCtrl',
                abstract : true
            })

            .state('dashboard.welcome', {
                url : '',
                templateUrl : 'partials/dashboard.welcome.html',
                data : {
                    stateTitle : 'Welcome'
                }
            })

            .state('dashboard.admin', {
                url : '/admin',
                templateUrl : 'partials/dashboard.admin.html',
                controller : 'AdminCtrl',
                data : {
                    stateTitle : 'Admin'
                }
            })

            .state('dashboard.profile', {
                url : '/profile',
                templateUrl : 'partials/dashboard.profile.html',
                data : {
                    stateTitle : 'Profile'
                }
            })

            .state('dashboard.content', {
                url : '/content',
                templateUrl : 'partials/dashboard.content.html',
                data : {
                    stateTitle : 'Content'
                }
            })

            .state('about', {
                url : '/about',
                templateUrl : 'partials/about.html'
            })



            .state('content', {
                url : '/:contentType/:contentUrl',
                templateUrl : 'partials/view.content.html',
                controller : 'ViewContentCtrl'
            })


        $locationProvider.html5Mode(true).hashPrefix('!');

    });

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/content-header.html',
    '<header class="content-header"><h1 class="display-2">{{selectedContent.title}}</h1><h1 class="subhead-2" ng-if="selectedContent.author">By {{selectedContent.author}}</h1><div class="header-image" ng-style="{\'background-image\' : \'url(\' + selectedContent.headerImage + \')\'}"></div><ul class="header-info"><li><h2 class="text-capitalize subhead-1">{{selectedContent.contentType}}</h2></li><li><h2 class="caption">{{selectedContent.publishedDate | date : \'EEEE, MMMM d, y\'}}</h2></li></ul></header>');
}]);

/**
 * Created by Danny on 12/15/16.
 */
angular.module('freqCultureApp')
    .config(function(plangularConfigProvider) {
        plangularConfigProvider.clientId = 'oerXf6nBcDu5CoNdaOrIGutVCKXPYvSB'
    });

/**
 * Created by Danny on 1/29/17.
 */
angular.module('freqCultureApp')
    .run(function($rootScope, $state, ModalService, SignupService) {
        $rootScope.showSite = false;
        $rootScope.$state = $state;
        $rootScope.showSignup = function() {
            ModalService.openModal('signup', 'Kinetik Mag Early Access')
                .then(function(modalData) {
                    console.log('promise to contact!', modalData)
                    var formData = {
                        firstName : modalData.firstName,
                        email : modalData.email,
                        type : 'EarlyAccess'
                    }
                    SignupService.newSignup(formData)
                        .then(function(response) {
                            console.log('response: ', response);
                        })
                        .catch(function(err) {
                            console.log('err: ', err);
                        })
                })
                .catch(function() {
                    console.log(' no value');
                })
        }

    })

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/content-container.html',
    '<section class="content-container"><div class="hero-container"><slick infinite="true" slides-to-show="1" slides-to-scroll="1" arrows="false" autoplay="true" class="col-xs-12 hero-content" pause-on-hover="true" autoplay-speed="3000" ng-class="{\'show-hero\' : showHero}"><div class="hero-slide" ng-repeat="heroItem in heroContent track by $index" ng-style="{\'background-image\' : \'url(\' + heroItem.headerImage + \')\'}" ng-click="goTo(heroItem)"><div class="hero-footer"><div class="hero-info"><h1>{{heroItem.title}}</h1><p class="site-body-text">{{heroItem.subTitle}}</p></div><ul><li>Read Now</li><li class="{{heroItem.contentType}}-content">{{heroItem.contentType}}</li></ul></div></div></slick></div><div ng-repeat="subContent in content track by $index" class="sub-content col-xs-12 col-md-6" ng-style="{\'background-image\' : \'url(\' +subContent.headerImage + \')\'}" ng-if="$index > 2" ng-click="goTo(subContent)"><div class="content-footer"><div class="content-info"><h1>{{subContent.title}}</h1></div><ul><li>Read Now</li><li class="{{subContent.contentType}}-content">{{subContent.contentType}}</li></ul></div></div></section>');
}]);

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('partials/about.html',
    '<section class="section-with-top-nav container"><h2 class="site-body-title">About Content</h2><p class="site-body-text">Well, the way they make shows is, they make one show. That show\'s called a pilot. Then they show that show to the people who make shows, and on the strength of that one show they decide if they\'re going to make more shows. Some pilots get picked and become television programs. Some don\'t, become nothing. She starred in one of the ones that became nothing.</p></section>');
}]);

angular.module('freqCultureApp').run(['$templateCache', function($templateCache) {
  $templateCache.put('404.html',
    '<!doctype html><html lang="en"><head><meta charset="utf-8"><title>Page Not Found :(</title><style>::-moz-selection {\n' +
    '    background: #b3d4fc;\n' +
    '    text-shadow: none;\n' +
    '}\n' +
    '\n' +
    '::selection {\n' +
    '    background: #b3d4fc;\n' +
    '    text-shadow: none;\n' +
    '}\n' +
    '\n' +
    'html {\n' +
    '    padding: 30px 10px;\n' +
    '    font-size: 20px;\n' +
    '    line-height: 1.4;\n' +
    '    color: #737373;\n' +
    '    background: #f0f0f0;\n' +
    '    -webkit-text-size-adjust: 100%;\n' +
    '    -ms-text-size-adjust: 100%;\n' +
    '}\n' +
    '\n' +
    'html,\n' +
    'input {\n' +
    '    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n' +
    '}\n' +
    '\n' +
    'body {\n' +
    '    max-width: 500px;\n' +
    '    padding: 30px 20px 50px;\n' +
    '    border: 1px solid #b3b3b3;\n' +
    '    border-radius: 4px;\n' +
    '    margin: 0 auto;\n' +
    '    box-shadow: 0 1px 10px #a7a7a7, inset 0 1px 0 #fff;\n' +
    '    background: #fcfcfc;\n' +
    '}\n' +
    '\n' +
    'h1 {\n' +
    '    margin: 0 10px;\n' +
    '    font-size: 50px;\n' +
    '    text-align: center;\n' +
    '}\n' +
    '\n' +
    'h1 span {\n' +
    '    color: #bbb;\n' +
    '}\n' +
    '\n' +
    'h3 {\n' +
    '    margin: 1.5em 0 0.5em;\n' +
    '}\n' +
    '\n' +
    'p {\n' +
    '    margin: 1em 0;\n' +
    '}\n' +
    '\n' +
    'ul {\n' +
    '    padding: 0 0 0 40px;\n' +
    '    margin: 1em 0;\n' +
    '}\n' +
    '\n' +
    '.container {\n' +
    '    max-width: 380px;\n' +
    '    margin: 0 auto;\n' +
    '}\n' +
    '\n' +
    '/* google possessions-search */\n' +
    '\n' +
    '#goog-fixurl ul {\n' +
    '    list-style: none;\n' +
    '    padding: 0;\n' +
    '    margin: 0;\n' +
    '}\n' +
    '\n' +
    '#goog-fixurl form {\n' +
    '    margin: 0;\n' +
    '}\n' +
    '\n' +
    '#goog-wm-qt,\n' +
    '#goog-wm-sb {\n' +
    '    border: 1px solid #bbb;\n' +
    '    font-size: 16px;\n' +
    '    line-height: normal;\n' +
    '    vertical-align: top;\n' +
    '    color: #444;\n' +
    '    border-radius: 2px;\n' +
    '}\n' +
    '\n' +
    '#goog-wm-qt {\n' +
    '    width: 220px;\n' +
    '    height: 20px;\n' +
    '    padding: 5px;\n' +
    '    margin: 5px 10px 0 0;\n' +
    '    box-shadow: inset 0 1px 1px #ccc;\n' +
    '}\n' +
    '\n' +
    '#goog-wm-sb {\n' +
    '    display: inline-block;\n' +
    '    height: 32px;\n' +
    '    padding: 0 10px;\n' +
    '    margin: 5px 0 0;\n' +
    '    white-space: nowrap;\n' +
    '    cursor: pointer;\n' +
    '    background-color: #f5f5f5;\n' +
    '    background-image: -webkit-linear-gradient(rgba(255,255,255,0), #f1f1f1);\n' +
    '    background-image: -moz-linear-gradient(rgba(255,255,255,0), #f1f1f1);\n' +
    '    background-image: -ms-linear-gradient(rgba(255,255,255,0), #f1f1f1);\n' +
    '    background-image: -o-linear-gradient(rgba(255,255,255,0), #f1f1f1);\n' +
    '    -webkit-appearance: none;\n' +
    '    -moz-appearance: none;\n' +
    '    appearance: none;\n' +
    '}\n' +
    '\n' +
    '#goog-wm-sb:hover,\n' +
    '#goog-wm-sb:focus {\n' +
    '    border-color: #aaa;\n' +
    '    box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);\n' +
    '    background-color: #f8f8f8;\n' +
    '}\n' +
    '\n' +
    '#goog-wm-qt:hover,\n' +
    '#goog-wm-qt:focus {\n' +
    '    border-color: #105cb6;\n' +
    '    outline: 0;\n' +
    '    color: #222;\n' +
    '}\n' +
    '\n' +
    'input::-moz-focus-inner {\n' +
    '    padding: 0;\n' +
    '    border: 0;\n' +
    '}</style></head><body><div class="container"><h1>Not found <span>:(</span></h1><p>Sorry, but the page you were trying to view does not exist.</p><p>It looks like this was the result of either:</p><ul><li>a mistyped address</li><li>an out-of-date link</li></ul><script>var GOOG_FIXURL_LANG = (navigator.language || \'\').slice(0,2),GOOG_FIXURL_SITE = location.host;</script><script src="//linkhelp.clients.google.com/tbproxy/lh/wm/fixurl.js"></script></div></body></html>');
}]);

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsInNjcmlwdHMvcm91dGVzL3ZpZXctY29udGVudC5jb250cm9sbGVyLmpzIiwic2NyaXB0cy9yb3V0ZXMvbWFpbi1zZWN0aW9uLmNvbnRyb2xsZXIuanMiLCJzY3JpcHRzL3JvdXRlcy9ob21lLmNvbnRyb2xsZXIuanMiLCJwYXJ0aWFscy92aWV3LmRhc2hib2FyZC5qcyIsInNjcmlwdHMvcm91dGVzL2Rhc2hib2FyZC5jb250cm9sbGVyLmpzIiwicGFydGlhbHMvdmlldy5jb250ZW50LmpzIiwic2NyaXB0cy9yb3V0ZXMvZGFzaGJvYXJkLmNvbnRlbnQuY29udHJvbGxlci5qcyIsInBhcnRpYWxzL3ZpZXcuYWRtaW4uanMiLCJzY3JpcHRzL3JvdXRlcy9hZG1pbi5jb250cm9sbGVyLmpzIiwicGFydGlhbHMvc2l0ZS1tb2RhbC5qcyIsInNjcmlwdHMvc2VydmljZXMvdXNlci5zZXJ2aWNlLmpzIiwicGFydGlhbHMvc2l0ZS1mb290ZXIuanMiLCJzY3JpcHRzL3NlcnZpY2VzL3NpZ251cC5zZXJ2aWNlLmpzIiwicGFydGlhbHMvc2l0ZS1hdWRpby5qcyIsInNjcmlwdHMvc2VydmljZXMvbW9kYWwuc2VydmljZS5qcyIsInBhcnRpYWxzL3NpZGVtZW51LmpzIiwic2NyaXB0cy9zZXJ2aWNlcy9jb250ZW50LnNlcnZpY2UuanMiLCJwYXJ0aWFscy9zZWN0aW9uLWhlYWRlci5qcyIsInNjcmlwdHMvc2VydmljZXMvYWRtaW4uc2VydmljZS5qcyIsInBhcnRpYWxzL25hdmJhci5qcyIsInNjcmlwdHMvZGlyZWN0aXZlcy9zaXRlLW1vZGFsLmRpcmVjdGl2ZS5qcyIsInBhcnRpYWxzL21vZGFsLXNpZ251cC5qcyIsInNjcmlwdHMvZGlyZWN0aXZlcy9zaXRlLWZvb3Rlci5kaXJlY3RpdmUuanMiLCJwYXJ0aWFscy9tb2RhbC1sb2dpbi5qcyIsInNjcmlwdHMvZGlyZWN0aXZlcy9zaXRlLWF1ZGlvLmRpcmVjdGl2ZS5qcyIsInBhcnRpYWxzL21vZGFsLWNvbnRhY3QuanMiLCJzY3JpcHRzL2RpcmVjdGl2ZXMvc2lkZS1tZW51LmRpcmVjdGl2ZS5qcyIsInBhcnRpYWxzL21vZGFsLWNvbmZpcm0uanMiLCJzY3JpcHRzL2RpcmVjdGl2ZXMvc2VjdGlvbi1oZWFkZXIuZGlyZWN0aXZlLmpzIiwicGFydGlhbHMvbWFpbi1zZWN0aW9uLnBhcnRpYWwuanMiLCJzY3JpcHRzL2RpcmVjdGl2ZXMvbmF2YmFyLmRpcmVjdGl2ZS5qcyIsInBhcnRpYWxzL2hvbWUuanMiLCJzY3JpcHRzL2RpcmVjdGl2ZXMvbG9naW5Nb2RhbC5jb250cm9sbGVyLmpzIiwicGFydGlhbHMvaGFtYnVyZ2VyLW1lbnUuanMiLCJzY3JpcHRzL2RpcmVjdGl2ZXMvaW1hZ2Utc2hhZG93LmpzIiwicGFydGlhbHMvZGFzaGJvYXJkLndlbGNvbWUuanMiLCJzY3JpcHRzL2RpcmVjdGl2ZXMvaGFtYnVyZ2VyLW1lbnUuZGlyZWN0aXZlLmpzIiwicGFydGlhbHMvZGFzaGJvYXJkLnByb2ZpbGUuanMiLCJzY3JpcHRzL2RpcmVjdGl2ZXMvY29udGVudC1oZWFkZXIuZGlyZWN0aXZlLmpzIiwicGFydGlhbHMvZGFzaGJvYXJkLmNvbnRlbnQuanMiLCJzY3JpcHRzL2RpcmVjdGl2ZXMvY29udGVudC1jb250YWluZXIuZGlyZWN0aXZlLmpzIiwicGFydGlhbHMvZGFzaGJvYXJkLmFkbWluLmpzIiwic2NyaXB0cy9jb25maWcvcm91dGVzLmpzIiwicGFydGlhbHMvY29udGVudC1oZWFkZXIuanMiLCJzY3JpcHRzL2NvbmZpZy9jb25maWcuanMiLCJzY3JpcHRzL2NvbmZpZy9hcHBSdW4uanMiLCJwYXJ0aWFscy9jb250ZW50LWNvbnRhaW5lci5qcyIsInBhcnRpYWxzL2Fib3V0LmpzIiwiNDA0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNuQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3hEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzFKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDbEpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2xCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDakJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2hEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNySEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDN0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNkQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDekJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMxQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzVDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMvREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNyQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN4Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN6QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDM0VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN4SkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzlCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDcmVhdGVkIGJ5IERhbm55IG9uIDEyLzE1LzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnLCBbXG4gICAgJ25nQW5pbWF0ZScsXG4gICAgJ25nQ29va2llcycsXG4gICAgJ25nUmVzb3VyY2UnLFxuICAgICd1aS5yb3V0ZXInLFxuICAgICduZ1RvdWNoJyxcbiAgICAnbmctZmFzdGNsaWNrJyxcbiAgICAnc2xpY2tDYXJvdXNlbCcsXG4gICAgJ3BsYW5ndWxhcicsXG4gICAgJ3RleHRBbmd1bGFyJ1xuXSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgRGFubnkgb24gMTEvMjcvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpXG4gIC5jb250cm9sbGVyKCdWaWV3Q29udGVudEN0cmwnLCBmdW5jdGlvbigkc2NvcGUsIENvbnRlbnRTZXJ2aWNlLCAkc3RhdGVQYXJhbXMsICR3aW5kb3cpIHtcblxuXG4gICAgJHNjb3BlLnNlbGVjdGVkQ29udGVudCA9IENvbnRlbnRTZXJ2aWNlLmdldFNlbGVjdGVkKCk7XG5cbiAgICBpZighJHNjb3BlLnNlbGVjdGVkQ29udGVudCkge1xuICAgICAgQ29udGVudFNlcnZpY2UuZmluZENvbnRlbnQoJHN0YXRlUGFyYW1zLmNvbnRlbnRIcmVmKVxuICAgICAgICAudGhlbihmdW5jdGlvbihzZWxlY3RlZCkge1xuICAgICAgICAgICRzY29wZS5zZWxlY3RlZENvbnRlbnQgPSBzZWxlY3RlZDtcbiAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRDb250ZW50LnB1Ymxpc2hEYXRlID0gbmV3IERhdGUoJHNjb3BlLnNlbGVjdGVkQ29udGVudC5kYXRlKTtcbiAgICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgJHNjb3BlLnNlbGVjdGVkQ29udGVudC5wdWJsaXNoRGF0ZSA9IG5ldyBEYXRlKCRzY29wZS5zZWxlY3RlZENvbnRlbnQuZGF0ZSk7XG4gICAgfVxuICB9KVxuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IERhbm55IG9uIDEyLzE5LzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKVxuICAgIC5jb250cm9sbGVyKCdNYWluU2VjdGlvbkN0cmwnLCBmdW5jdGlvbigkc2NvcGUsIHNlY3Rpb25UaXRsZSwgc2VjdGlvblN1YlRpdGxlLCBjb250ZW50VHlwZSkge1xuICAgICAgICBjb25zb2xlLmxvZygnbWFpbiBzZWN0aW9uJyk7XG4gICAgICAgICRzY29wZS5zZWN0aW9uVGl0bGUgPSBzZWN0aW9uVGl0bGU7XG4gICAgICAgICRzY29wZS5zZWN0aW9uU3ViVGl0bGUgPSBzZWN0aW9uU3ViVGl0bGU7XG4gICAgICAgICRzY29wZS5jb250ZW50VHlwZSA9IGNvbnRlbnRUeXBlO1xuICAgIH0pXG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgRGFubnkgb24gMTEvNy8xNi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJylcbiAgLmNvbnRyb2xsZXIoJ0hvbWVDdHJsJywgZnVuY3Rpb24oJHNjb3BlLCBDb250ZW50U2VydmljZSwgJHN0YXRlKSB7XG5cbiAgICAkc2NvcGUuZ29UbyA9IGZ1bmN0aW9uKHN0YXRlLCBzdGF0ZVBhcmFtcykge1xuICAgICAgJHN0YXRlLmdvKHN0YXRlLCBzdGF0ZVBhcmFtcyk7XG4gICAgfVxuXG5cbiAgICAkc2NvcGUuc2hvd1NpZ251cCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBjb25zb2xlLmxvZygnc2lnbnVwIScpO1xuICAgIH1cbiAgfSlcbiIsImFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdwYXJ0aWFscy92aWV3LmRhc2hib2FyZC5odG1sJyxcbiAgICAnPHNlY3Rpb24gY2xhc3M9XCJmbHVpZC1jb250YWluZXIgZGFzaGJvYXJkLXZpZXdcIj48bmF2IGNsYXNzPVwiZGFzaGJvYXJkLW5hdlwiPjxkaXYgY2xhc3M9XCJuYXYtbG9nb1wiIG5nLWNsaWNrPVwiZ29UbyhcXCdob21lXFwnKVwiPjxpbWcgc3JjPVwiLi4vaW1hZ2VzL2ZyZXF1ZW5jeV9jdWx0dXJlX3doaXRlX3RyYW5zLnBuZ1wiPjwvZGl2PjxkaXYgY2xhc3M9XCJkYXNoYm9hcmQtdXNlclwiPjxkaXYgY2xhc3M9XCJ1c2VyLWNvbnRhaW5lclwiPjxmaWd1cmUgY2xhc3M9XCJ1c2VyLWluaXRpYWxzXCI+PGgxIGNsYXNzPVwic3ViaGVhZC0yXCIgbmctaWY9XCJmYWxzZVwiPkRGPC9oMT48aSBjbGFzcz1cImZhIGZhLWV4Y2xhbWF0aW9uLXRyaWFuZ2xlXCI+PC9pPjwvZmlndXJlPjxkaXYgY2xhc3M9XCJ1c2VyLWluZm9cIj48aDEgY2xhc3M9XCJzdWJoZWFkLTJcIiBuZy1pZj1cImN1cnJlbnRVc2VyXCI+e3tjdXJyZW50VXNlci5maXJzdE5hbWUgKyBcXCcgXFwnICsgY3VycmVudFVzZXIubGFzdE5hbWV9fTwvaDE+PGgxIGNsYXNzPVwic3ViaGVhZC0yXCIgbmctaWY9XCIhY3VycmVudFVzZXJcIiBuZy1jbGljaz1cInNob3dMb2dpbk1vZGFsKClcIj5QbGVhc2UgbG9naW4uPC9oMT48dWw+PGxpIG5nLWlmPVwiY3VycmVudFVzZXJcIj48YT5TZXR0aW5nczwvYT48L2xpPjxsaSBuZy1pZj1cImN1cnJlbnRVc2VyXCI+PGE+TG9nb3V0PC9hPjwvbGk+PGxpIG5nLWlmPVwiIWN1cnJlbnRVc2VyXCIgbmctY2xpY2s9XCJzaG93TG9naW5Nb2RhbCgpXCI+PGE+TG9naW48L2E+PC9saT48L3VsPjwvZGl2PjwvZGl2PjwvZGl2Pjx1bCBjbGFzcz1cImRhc2hib2FyZC1tZW51XCI+PGxpIG5nLWNsYXNzPVwie2FjdGl2ZTogJHN0YXRlLmluY2x1ZGVzKFxcJ2Rhc2hib2FyZC5hZG1pblxcJyl9XCIgbmctY2xpY2s9XCJnb1RvKFxcJ2Rhc2hib2FyZC5hZG1pblxcJywgXFwnQWRtaW5cXCcpXCI+PGkgY2xhc3M9XCJmYSBmYS11c2Vyc1wiPjwvaT4gPGEgY2xhc3M9XCJzdWJoZWFkLTJcIj5BZG1pbjwvYT48L2xpPjxsaSBuZy1jbGFzcz1cInthY3RpdmU6ICRzdGF0ZS5pbmNsdWRlcyhcXCdkYXNoYm9hcmQucHJvZmlsZVxcJyl9XCIgbmctY2xpY2s9XCJnb1RvKFxcJ2Rhc2hib2FyZC5wcm9maWxlXFwnLCBcXCdQcm9maWxlXFwnKVwiPjxpIGNsYXNzPVwiZmEgZmEtYWRkcmVzcy1jYXJkXCI+PC9pPiA8YSBjbGFzcz1cInN1YmhlYWQtMlwiPlByb2ZpbGU8L2E+PC9saT48bGkgbmctY2xhc3M9XCJ7YWN0aXZlOiAkc3RhdGUuaW5jbHVkZXMoXFwnZGFzaGJvYXJkLmNvbnRlbnRcXCcpfVwiIG5nLWNsaWNrPVwiZ29UbyhcXCdkYXNoYm9hcmQuY29udGVudFxcJywgXFwnQ29udGVudFxcJylcIj48aSBjbGFzcz1cImZhIGZhLWxpc3RcIj48L2k+IDxhIGNsYXNzPVwic3ViaGVhZC0yXCI+Q29udGVudDwvYT48L2xpPjwvdWw+PGZvb3RlciBjbGFzcz1cImFkbWluLW1lbnUtZm9vdGVyXCIgbmctY2xpY2s9XCJnb1RvKFxcJ2hvbWVcXCcpXCI+PGkgY2xhc3M9XCJmYSBmYS1hcnJvdy1sZWZ0XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPiA8YSBjbGFzcz1cInN1YmhlYWQtMlwiPkJhY2sgVG8gU2l0ZTwvYT48L2Zvb3Rlcj48L25hdj48aGVhZGVyIGNsYXNzPVwiZGFzaGJvYXJkLWhlYWRlclwiPjxoMSBjbGFzcz1cImhlYWRsaW5lXCIgbmctY2xpY2s9XCJnb1RvKFxcJ2Rhc2hib2FyZC53ZWxjb21lXFwnLCBcXCdXZWxjb21lXFwnKVwiPkRhc2hib2FyZDwvaDE+PGgyIGNsYXNzPVwiaGVhZGxpbmVcIiBpZD1cIm11dGVkLXRleHRcIiBuZy1jbGljaz1cImdvVG8oXFwnZGFzaGJvYXJkLnByb2ZpbGVcXCcsIFxcJ1Byb2ZpbGVcXCcpXCI+LyB7e3NlbGVjdGVkVmlld319PC9oMj48L2hlYWRlcj48ZGl2IGNsYXNzPVwiZGFzaGJvYXJkLWJvZHlcIiBuZy1jbGFzcz1cIntcXCdncmF5LWJvZHlcXCcgOiAhJHN0YXRlLmluY2x1ZGVzKFxcJ2Rhc2hib2FyZC53ZWxjb21lXFwnKX1cIj48ZGl2IGNsYXNzPVwidWktdmlld1wiPjwvZGl2PjwvZGl2Pjwvc2VjdGlvbj4nKTtcbn1dKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBEYW5ueSBvbiAxMi8yNC8xNi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJylcbiAgICAuY29udHJvbGxlcignRGFzaGJvYXJkQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSwgJHRpbWVvdXQsIENvbnRlbnRTZXJ2aWNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHN0YXRlLCBNb2RhbFNlcnZpY2UpIHtcblxuICAgICAgICAkc2NvcGUuc2VsZWN0ZWRWaWV3ID0gJHN0YXRlLmN1cnJlbnQuZGF0YS5zdGF0ZVRpdGxlO1xuICAgICAgICAkc2NvcGUuZXJyb3JNZXNzYWdlID0gbnVsbDtcbiAgICAgICAgJHNjb3BlLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgJHNjb3BlLiRzdGF0ZSA9ICRzdGF0ZTtcblxuICAgICAgICBjb25zb2xlLmxvZygnJHN0YXRlOiAnLCAkc3RhdGUpO1xuICAgICAgICBjb25zb2xlLmxvZygnY3VycmVudDogJywgJHN0YXRlLmluY2x1ZGVzKCdkYXNoYm9hcmQnKSlcblxuICAgICAgICAkc2NvcGUuY3VycmVudFVzZXIgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgJHNjb3BlLmdvVG8gPSBmdW5jdGlvbihzdGF0ZSwgY2hhbmdlVGl0bGUpIHtcbiAgICAgICAgICAgIGlmKGNoYW5nZVRpdGxlKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkVmlldyA9IGNoYW5nZVRpdGxlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkc3RhdGUuZ28oc3RhdGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgJHNjb3BlLmxvZ2dlZEluID0gZnVuY3Rpb24obG9nZ2VkSW5Vc2VyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbG9nZ2VkSW5Vc2VyOiAnLCBsb2dnZWRJblVzZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgJHNjb3BlLnNob3dDb250YWN0TW9kYWwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIE1vZGFsU2VydmljZS5vcGVuTW9kYWwoJ2NvbnRhY3QnLCAnQ29udGVudCBFZGl0b3IgUmVxdWVzdCcpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24obW9kYWxEYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdwcm9taXNlIHRvIGNvbnRhY3QhJywgbW9kYWxEYXRhKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnIG5vIHZhbHVlJyk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5zaG93TG9naW5Nb2RhbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgTW9kYWxTZXJ2aWNlLm9wZW5Nb2RhbCgnbG9naW4nKVxuICAgICAgICAgICAgICAgIC50aGVuKCRzY29wZS5sb2dnZWRJbilcbiAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCcgbm8gdmFsdWUnKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgJHNjb3BlLnJlc2V0TG9naW4gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRzY29wZS5lcnJvck1lc3NhZ2UgPSBudWxsO1xuICAgICAgICAgICAgJHNjb3BlLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICRzY29wZS5sb2dpbkZvcm0uZW1haWwgPSBudWxsO1xuICAgICAgICAgICAgJHNjb3BlLmxvZ2luRm9ybS5wYXNzd29yZCA9IG51bGw7XG4gICAgICAgIH1cblxuXG5cbiAgICB9KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3BhcnRpYWxzL3ZpZXcuY29udGVudC5odG1sJyxcbiAgICAnPHNlY3Rpb24gY2xhc3M9XCJzZWN0aW9uLXdpdGgtdG9wLW5hdiBjb250YWluZXJcIj48Y29udGVudC1oZWFkZXIgc2VsZWN0ZWQtY29udGVudD1cInNlbGVjdGVkQ29udGVudFwiPjwvY29udGVudC1oZWFkZXI+PGRpdiBjbGFzcz1cImNvbnRlbnQtc2VjdGlvblwiIG5nLXJlcGVhdD1cImNvbnRlbnRTZWN0aW9uIGluIHNlbGVjdGVkQ29udGVudC5jb250ZW50U2VjdGlvbnNcIj48aW1nIGNsYXNzPVwiY29udGVudC1pbWFnZVwiIG5nLWlmPVwiY29udGVudFNlY3Rpb24uaGVhZGVySW1hZ2UgXCIgbmctc3JjPVwie3tjb250ZW50U2VjdGlvbi5oZWFkZXJJbWFnZX19XCI+PHAgY2xhc3M9XCJzaXRlLWJvZHktdGV4dCBjZW50ZXItYmxvY2tcIiBuZy1jbGFzcz1cIntcXCdpbmRlbnQtcGFyYWdyYXBoXFwnIDogJGZpcnN0LCBcXCdzdWItcGFyYWdyYXBoXFwnIDogISRmaXJzdH1cIj57e2NvbnRlbnRTZWN0aW9uLmNvbnRlbnR9fTwvcD48aW1nIGNsYXNzPVwiY29udGVudC1pbWFnZVwiIG5nLWlmPVwiY29udGVudFNlY3Rpb24uZm9vdGVySW1hZ2UgXCIgbmctc3JjPVwie3tjb250ZW50U2VjdGlvbi5mb290ZXJJbWFnZX19XCI+PC9kaXY+PC9zZWN0aW9uPicpO1xufV0pO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IERhbm55IG9uIDEyLzI1LzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKVxuICAgIC5jb250cm9sbGVyKCdEYXNoYm9hcmRDb250ZW50Q3RybCcsIGZ1bmN0aW9uKCRzY29wZSwgJHRpbWVvdXQsIENvbnRlbnRTZXJ2aWNlLCAkc3RhdGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ3Njb3BlOiAnLCAkc2NvcGUpO1xuXG4gICAgICAgICRzY29wZS5zZWxlY3RlZFZpZXcgPSAnbWVudSc7XG4gICAgICAgICRzY29wZS5sb2FkaW5nID0gZmFsc2U7XG5cbiAgICAgICAgJHNjb3BlLmN1cnJlbnRVc2VyID0gdW5kZWZpbmVkO1xuXG4gICAgICAgIHZhciBjb250ZW50RmllbGRzID0gW1xuICAgICAgICAgICAgJ2F1dGhvcicsXG4gICAgICAgICAgICAndGl0bGUnLFxuICAgICAgICAgICAgJ2NvbnRlbnRUeXBlJyxcbiAgICAgICAgICAgICdzdWJUaXRsZScsXG4gICAgICAgICAgICAndXJsJyxcbiAgICAgICAgICAgICdoZWFkZXJJbWFnZScsXG4gICAgICAgICAgICAndGFncycsXG4gICAgICAgICAgICAncHVibGlzaGVkRGF0ZScsXG4gICAgICAgICAgICAnZGVzY3JpcHRpb24nLFxuICAgICAgICAgICAgJ2NvbnRlbnRTZWN0aW9ucycsXG4gICAgICAgICAgICAncXVvdGVzJyxcbiAgICAgICAgICAgICdhdWRpb1VybHMnLFxuICAgICAgICAgICAgJ3NvY2lhbE1lZGlhJyxcbiAgICAgICAgICAgICdzaGFyZVVybCcsXG4gICAgICAgICAgICAnbWFpbkNvbnRlbnQnXG4gICAgICAgIF1cblxuICAgICAgICBDb250ZW50U2VydmljZS5nZXRDb250ZW50KClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2l0ZUNvbnRlbnQgPSBjb250ZW50O1xuICAgICAgICAgICAgfSlcblxuICAgICAgICAvLyR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyAgICAkc2NvcGUuc2VsZWN0ZWRWaWV3ID0gJ2VkaXQnO1xuICAgICAgICAvL30sIDIwMDApXG5cbiAgICAgICAgJHNjb3BlLmNoYW5nZVZpZXcgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmKCRzY29wZS5zZWxlY3RlZFZpZXcgPT0gJ2VkaXQnKSAkc2NvcGUuc2VsZWN0ZWRWaWV3ID0gJ21lbnUnO1xuICAgICAgICAgICAgZWxzZSAkc2NvcGUuc2VsZWN0ZWRWaWV3ID0gJ2VkaXQnO1xuICAgICAgICB9XG5cbiAgICAgICAgJHNjb3BlLmdvVG8gPSBmdW5jdGlvbihzdGF0ZSkge1xuICAgICAgICAgICAgJHN0YXRlLmdvKHN0YXRlKTtcbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5zZWxlY3RlZENvbnRlbnQgPSB7fTtcblxuICAgICAgICAkc2NvcGUubmV3Q29udGVudCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkVmlldyA9ICdjcmVhdGUnO1xuICAgICAgICAgICAgaW5pdE5ld0NvbnRlbnQoKVxuICAgICAgICB9XG5cbiAgICAgICAgJHNjb3BlLmVkaXRDb250ZW50ID0gZnVuY3Rpb24oY29udGVudCkge1xuICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkQ29udGVudCA9IGNvbnRlbnQ7XG4gICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRWaWV3ID0gJ2VkaXQnO1xuICAgICAgICB9XG5cbiAgICAgICAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkVmlldyA9ICdtZW51JztcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGluaXROZXdDb250ZW50KCkge1xuICAgICAgICAgICAgY29udGVudEZpZWxkcy5tYXAoZnVuY3Rpb24oZmllbGQpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRDb250ZW50W2ZpZWxkXSA9IG51bGw7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG5ld0l0ZW1zID0ge1xuICAgICAgICAgICAgJ3RhZycgOiAnJyxcbiAgICAgICAgICAgICdxdW90ZScgOiAnJyxcbiAgICAgICAgICAgICdhdWRpbycgOiAnJyxcbiAgICAgICAgICAgICdzZWN0aW9uJyA6IG51bGxcblxuICAgICAgICB9XG5cbiAgICAgICAgJHNjb3BlLmFkZEl0ZW0gPSBmdW5jdGlvbihpdGVtVHlwZSwga2V5KSB7XG4gICAgICAgICAgICB2YXIgbmV3SXRlbSA9IG5ld0l0ZW1zW2l0ZW1UeXBlXTtcbiAgICAgICAgICAgIGlmKCEkc2NvcGUuc2VsZWN0ZWRDb250ZW50W2tleV0pe1xuICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZENvbnRlbnRba2V5XSA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkQ29udGVudFtrZXldLnB1c2gobmV3SXRlbSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbmV3IGl0ZW06ICcsIG5ld0l0ZW0pO1xuICAgICAgICB9XG5cbiAgICAgICAgJHNjb3BlLnJlbW92ZUl0ZW0gPSBmdW5jdGlvbihrZXksIGluZGV4KSB7XG4gICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRDb250ZW50W2tleV0uc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5zaG93Q29uZmlybSA9IGZhbHNlO1xuXG4gICAgICAgICRzY29wZS5jb25maXJtID0gZnVuY3Rpb24oY29uZmlybSkge1xuICAgICAgICAgICAgJHNjb3BlLnNob3dDb25maXJtID0gY29uZmlybTtcbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5jb25maXJtRGVsZXRlID0gZnVuY3Rpb24oY29udGVudCwgaW5kZXgpIHtcblxuICAgICAgICAgICAgaWYoISRzY29wZS5sb2FkaW5nKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmxvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIENvbnRlbnRTZXJ2aWNlLmRlbGV0ZUNvbnRlbnQoY29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZFZpZXcgPSAnbWVudSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2l0ZUNvbnRlbnQuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmZpbmFsbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cblxuICAgICAgICAkc2NvcGUuc2F2ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3NlbGVjdGVkOiAnLCAkc2NvcGUuc2VsZWN0ZWRDb250ZW50KTtcbiAgICAgICAgICAgIC8vaWYoISRzY29wZS5sb2FkaW5nKSB7XG4gICAgICAgICAgICAvLyAgICAkc2NvcGUubG9hZGluZyA9IHRydWU7XG4gICAgICAgICAgICAvLyAgICBjb25zb2xlLmxvZygnc2VsZWN0ZWQnLCAkc2NvcGUuc2VsZWN0ZWRDb250ZW50KTtcbiAgICAgICAgICAgIC8vICAgICRzY29wZS5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAvLyAgICBpZighJHNjb3BlLnNlbGVjdGVkQ29udGVudC5faWQpIHtcbiAgICAgICAgICAgIC8vICAgICAgICBDb250ZW50U2VydmljZS5uZXdDb250ZW50KCRzY29wZS5zZWxlY3RlZENvbnRlbnQpXG4gICAgICAgICAgICAvLyAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlczogJywgcmVzKTtcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2VycjogJywgZXJyKTtcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgLmZpbmFsbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAkc2NvcGUubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkVmlldyA9ICdtZW51JztcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC8vICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyAgICAgICAgQ29udGVudFNlcnZpY2UudXBkYXRlQ29udGVudCgkc2NvcGUuc2VsZWN0ZWRDb250ZW50KVxuICAgICAgICAgICAgLy8gICAgICAgICAgICAudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZXM6ICcsIHJlcyk7XG4gICAgICAgICAgICAvLyAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAvLyAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnI6ICcsIGVycik7XG4gICAgICAgICAgICAvLyAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAvLyAgICAgICAgICAgIC5maW5hbGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgJHNjb3BlLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZFZpZXcgPSAnbWVudSc7XG4gICAgICAgICAgICAvLyAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAvLyAgICB9XG4gICAgICAgICAgICAvL31cblxuICAgICAgICB9XG5cbiAgICAgICAgJHNjb3BlLmZvcm1hdFVybCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYoJHNjb3BlLnNlbGVjdGVkQ29udGVudC50aXRsZSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5zZWxlY3RlZENvbnRlbnQudXJsID0gJHNjb3BlLnNlbGVjdGVkQ29udGVudC50aXRsZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccy9nLCBcIl9cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3BhcnRpYWxzL3ZpZXcuYWRtaW4uaHRtbCcsXG4gICAgJzxzZWN0aW9uIGNsYXNzPVwiZmx1aWQtY29udGFpbmVyIGFkbWluLXZpZXdcIj48bmF2IGNsYXNzPVwiYWRtaW4tbmF2XCI+PGRpdiBjbGFzcz1cIm5hdi1sb2dvXCIgbmctY2xpY2s9XCJnb1RvKFxcJ2hvbWVcXCcpXCI+PGltZyBzcmM9XCIuLi9pbWFnZXMvZnJlcXVlbmN5X2N1bHR1cmVfd2hpdGVfdHJhbnMucG5nXCI+PC9kaXY+PGRpdiBjbGFzcz1cImFkbWluLXVzZXJcIj48ZGl2IGNsYXNzPVwidXNlci1jb250YWluZXJcIj48ZmlndXJlIGNsYXNzPVwidXNlci1pbml0aWFsc1wiPjxoMSBjbGFzcz1cInN1YmhlYWQtMlwiIG5nLWlmPVwiZmFsc2VcIj5ERjwvaDE+PGkgY2xhc3M9XCJmYSBmYS1leGNsYW1hdGlvbi10cmlhbmdsZVwiPjwvaT48L2ZpZ3VyZT48ZGl2IGNsYXNzPVwidXNlci1pbmZvXCI+PGgxIGNsYXNzPVwic3ViaGVhZC0yXCIgbmctaWY9XCJjdXJyZW50VXNlclwiPnt7Y3VycmVudFVzZXIuZmlyc3ROYW1lICsgXFwnIFxcJyArIGN1cnJlbnRVc2VyLmxhc3ROYW1lfX08L2gxPjxoMSBjbGFzcz1cInN1YmhlYWQtMlwiIG5nLWlmPVwiIWN1cnJlbnRVc2VyXCIgZGF0YS10b2dnbGU9XCJtb2RhbFwiIGRhdGEtdGFyZ2V0PVwiI2xvZ2luTW9kYWxcIj5QbGVhc2UgbG9naW4uPC9oMT48dWw+PGxpIG5nLWlmPVwiY3VycmVudFVzZXJcIj48YT5TZXR0aW5nczwvYT48L2xpPjxsaSBuZy1pZj1cImN1cnJlbnRVc2VyXCI+PGE+TG9nb3V0PC9hPjwvbGk+PGxpIG5nLWlmPVwiIWN1cnJlbnRVc2VyXCIgZGF0YS10b2dnbGU9XCJtb2RhbFwiIGRhdGEtdGFyZ2V0PVwiI2xvZ2luTW9kYWxcIj48YT5Mb2dpbjwvYT48L2xpPjwvdWw+PC9kaXY+PC9kaXY+PC9kaXY+PC9uYXY+PGhlYWRlciBjbGFzcz1cImFkbWluLWhlYWRlclwiPjxoMSBjbGFzcz1cImhlYWRsaW5lXCI+RGFzaGJvYXJkPC9oMT48L2hlYWRlcj48L3NlY3Rpb24+PGRpdiBjbGFzcz1cIm1vZGFsIGZhZGUgYWRtaW4tbW9kYWxcIiBpZD1cImxvZ2luTW9kYWxcIiB0YWJpbmRleD1cIi0xXCIgcm9sZT1cImRpYWxvZ1wiIGFyaWEtbGFiZWxsZWRieT1cIm15TW9kYWxMYWJlbFwiPjxkaXYgY2xhc3M9XCJtb2RhbC1kaWFsb2dcIiByb2xlPVwiZG9jdW1lbnRcIj48ZGl2IGNsYXNzPVwibW9kYWwtY29udGVudFwiPjxkaXYgY2xhc3M9XCJtb2RhbC1oZWFkZXJcIj48YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImNsb3NlXCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIiBhcmlhLWxhYmVsPVwiQ2xvc2VcIj48c3BhbiBhcmlhLWhpZGRlbj1cInRydWVcIj4mdGltZXM7PC9zcGFuPjwvYnV0dG9uPjxoMSBjbGFzcz1cInRpdGxlXCI+TG9naW48L2gxPjwvZGl2PjxkaXYgY2xhc3M9XCJtb2RhbC1ib2R5XCI+PGRpdiBjbGFzcz1cInJvd1wiPjxkaXYgY2xhc3M9XCJjb2wteHMtNiBjb2wteHMtb2Zmc2V0LTMgY29sLXNtLTYgY29sLXNtLW9mZnNldC0wIGZvcm0tZ3JvdXBcIj48bGFiZWwgZm9yPVwidXNlckVtYWlsXCIgY2xhc3M9XCJsYWJlbFwiPkVtYWlsPC9sYWJlbD48aW5wdXQgdHlwZT1cImVtYWlsXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBpZD1cInVzZXJFbWFpbFwiIHBsYWNlaG9sZGVyPVwiRW1haWxcIj48L2Rpdj48ZGl2IGNsYXNzPVwiY29sLXhzLTYgY29sLXhzLW9mZnNldC0zIGNvbC1zbS02IGNvbC1zbS1vZmZzZXQtMCBmb3JtLWdyb3VwXCI+PGxhYmVsIGZvcj1cInVzZXJQYXNzd29yZFwiIGNsYXNzPVwibGFiZWxcIj5QYXNzd29yZDwvbGFiZWw+PGlucHV0IHR5cGU9XCJwYXNzd29yZFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgaWQ9XCJ1c2VyUGFzc3dvcmRcIiBwbGFjZWhvbGRlcj1cIlBhc3N3b3JkXCI+PC9kaXY+PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz1cIm1vZGFsLWZvb3RlclwiPjxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0XCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIj48aDEgY2xhc3M9XCJidXR0b25cIj5DYW5jZWw8L2gxPjwvYnV0dG9uPiA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBwdXJwbGUtYnV0dG9uXCI+PGgxIGNsYXNzPVwiYnV0dG9uXCI+TG9naW48L2gxPjwvYnV0dG9uPjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PicpO1xufV0pO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IERhbm55IG9uIDEyLzE4LzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKVxuICAgIC5jb250cm9sbGVyKCdBZG1pbkN0cmwnLCBmdW5jdGlvbigkc2NvcGUsICR0aW1lb3V0LCBVc2VyU2VydmljZSwgQWRtaW5TZXJ2aWNlLCBNb2RhbFNlcnZpY2UpIHtcblxuICAgICAgICAkc2NvcGUuc2lkZU1lbWJlckNhcmQgPSBudWxsO1xuICAgICAgICAkc2NvcGUuc2F2aW5nID0gZmFsc2U7XG4gICAgICAgICRzY29wZS5hZG1pbkVycm9yTWVzc2FnZSA9IG51bGw7XG5cbiAgICAgICAgQWRtaW5TZXJ2aWNlLmFsbFVzZXJzKClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHVzZXJzKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3VzZXJzOiAnLCB1c2Vycyk7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnRlYW1NZW1iZXJzID0gdXNlcnM7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnI6ICcsIGVycik7XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICRzY29wZS5zaG93TWVtYmVyQ2FyZCA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgICAgICAgICAgICRzY29wZS5zaWRlTWVtYmVyQ2FyZCA9IHR5cGU7XG4gICAgICAgICAgICBpZighdHlwZSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5jbGVhck1lbWJlckZvcm0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5zYXZlID0gZnVuY3Rpb24obWVtYmVySW5mbykge1xuICAgICAgICAgICAgaWYoISRzY29wZS5zYXZpbmcpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuYWRtaW5FcnJvck1lc3NhZ2UgPSBudWxsO1xuICAgICAgICAgICAgICAgIGlmKCFtZW1iZXJJbmZvLmZpcnN0TmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRtaW5FcnJvck1lc3NhZ2UgPSAnUGxlYXNlIGluY2x1ZGUgYSBmaXJzdCBuYW1lLidcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYoIW1lbWJlckluZm8ubGFzdE5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFkbWluRXJyb3JNZXNzYWdlID0gJ1BsZWFzZSBpbmNsdWRlIGEgbGFzdCBuYW1lIChvciBpbml0aWFsKS4nO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZighbWVtYmVySW5mby5lbWFpbCkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRtaW5FcnJvck1lc3NhZ2UgPSAnUGxlYXNlIGluY2x1ZGUgYW4gZW1haWwuJztcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYoIW1lbWJlckluZm8ucm9sZSkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWRtaW5FcnJvck1lc3NhZ2UgPSAnUGxlYXNlIHNlbGVjdCBhIHJvbGUuJztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2F2aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYobWVtYmVySW5mby5faWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd1cGRhdGUhJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBVc2VyU2VydmljZS51cGRhdGVVc2VyKG1lbWJlckluZm8pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZXMnLCByZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd01lbWJlckNhcmQobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVVzZXJJbkFycmF5KHJlcy5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2VycjogJywgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maW5hbGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2F2aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEFkbWluU2VydmljZS5uZXdVc2VyKGNyZWF0ZVVzZXJPYmoobWVtYmVySW5mbykpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZXMnLCByZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUudGVhbU1lbWJlcnMucHVzaChyZXMuZGF0YSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNpZGVNZW1iZXJDYXJkID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsZWFyTWVtYmVyRm9ybSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyOiAnLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmFsbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zYXZpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5kZWxldGUgPSBmdW5jdGlvbihtZW1iZXIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkZWxldGU6ICcsIG1lbWJlcik7XG4gICAgICAgICAgICBNb2RhbFNlcnZpY2Uub3Blbk1vZGFsKCdjb25maXJtJywgJ0RlbGV0ZSAnICsgbWVtYmVyLmZpcnN0TmFtZSArICc/JylcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihtb2RhbERhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2RlbGV0ZTogJywgbWVtYmVyKTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNhdmluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIEFkbWluU2VydmljZS5kZWxldGVVc2VyKG1lbWJlci5faWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd01lbWJlckNhcmQobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlVXNlckZyb21BcnJheShtZW1iZXIuX2lkKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyOiAnLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5maW5hbGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zYXZpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCcgbm8gdmFsdWUnKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgJHNjb3BlLmVkaXRNZW1iZXIgPSBmdW5jdGlvbihtZW1iZXIpIHtcbiAgICAgICAgICAgICRzY29wZS5tZW1iZXJGb3JtID0gYW5ndWxhci5jb3B5KG1lbWJlcik7XG4gICAgICAgICAgICAkc2NvcGUuc2F2aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAkc2NvcGUuc2lkZU1lbWJlckNhcmQgPSAnZWRpdCc7XG4gICAgICAgIH1cblxuXG4gICAgICAgICRzY29wZS5jbGVhck1lbWJlckZvcm0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRzY29wZS5hZG1pbkVycm9yTWVzc2FnZSA9IG51bGw7XG4gICAgICAgICAgICAkc2NvcGUuc2F2aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAkc2NvcGUubWVtYmVyRm9ybS5maXJzdE5hbWUgPSBudWxsO1xuICAgICAgICAgICAgJHNjb3BlLm1lbWJlckZvcm0ubGFzdE5hbWUgPSBudWxsO1xuICAgICAgICAgICAgJHNjb3BlLm1lbWJlckZvcm0uZW1haWwgPSBudWxsO1xuICAgICAgICAgICAgJHNjb3BlLm1lbWJlckZvcm0ucm9sZSA9IG51bGw7XG4gICAgICAgIH07XG5cblxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVVc2VyT2JqKG1lbWJlckluZm8pIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZmlyc3ROYW1lIDogbWVtYmVySW5mby5maXJzdE5hbWUsXG4gICAgICAgICAgICAgICAgbGFzdE5hbWUgOiBtZW1iZXJJbmZvLmxhc3ROYW1lLFxuICAgICAgICAgICAgICAgIGVtYWlsIDogbWVtYmVySW5mby5lbWFpbCxcbiAgICAgICAgICAgICAgICByb2xlIDogbWVtYmVySW5mby5yb2xlXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVVc2VySW5BcnJheSh1cGRhdGVkVXNlcikge1xuICAgICAgICAgICAgdmFyIHVzZXJzTGVuID0gJHNjb3BlLnRlYW1NZW1iZXJzLmxlbmd0aDtcbiAgICAgICAgICAgIGZvcih2YXIgaT0wO2k8dXNlcnNMZW47aSsrKSB7XG4gICAgICAgICAgICAgICAgaWYodXBkYXRlZFVzZXIuX2lkID09ICRzY29wZS50ZWFtTWVtYmVyc1tpXS5faWQpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRlYW1NZW1iZXJzW2ldID0gdXBkYXRlZFVzZXI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHJlbW92ZVVzZXJGcm9tQXJyYXkodXNlcklkKSB7XG4gICAgICAgICAgICB2YXIgdXNlcnNMZW4gPSAkc2NvcGUudGVhbU1lbWJlcnMubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIGlkeDtcbiAgICAgICAgICAgIGZvcih2YXIgaT0wO2k8dXNlcnNMZW47aSsrKSB7XG4gICAgICAgICAgICAgICAgaWYodXNlcklkID09ICRzY29wZS50ZWFtTWVtYmVyc1tpXS5faWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWR4ID0gaTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoaWR4IDwgdXNlcnNMZW4pIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUudGVhbU1lbWJlcnMuc3BsaWNlKGlkeCwxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgfSlcbiIsImFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdwYXJ0aWFscy9zaXRlLW1vZGFsLmh0bWwnLFxuICAgICc8ZGl2IGNsYXNzPVwibW9kYWwgZmFkZSBkYXNoYm9hcmQtbW9kYWxcIiBpZD1cInNpdGVNb2RhbFwiIHRhYmluZGV4PVwiLTFcIiByb2xlPVwiZGlhbG9nXCI+PGRpdiBjbGFzcz1cIm1vZGFsLWRpYWxvZ1wiIHJvbGU9XCJkb2N1bWVudFwiPjxkaXYgY2xhc3M9XCJtb2RhbC1jb250ZW50XCI+PGRpdiBuZy1pbmNsdWRlPVwibW9kYWxUZW1wbGF0ZVwiPjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PicpO1xufV0pO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IERhbm55IG9uIDEyLzI0LzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKVxuICAgIC5zZXJ2aWNlKCdVc2VyU2VydmljZScsIGZ1bmN0aW9uKCRodHRwKSB7XG5cbiAgICAgICAgdmFyIHVwZGF0ZVVzZXIgPSBmdW5jdGlvbih1cGRhdGVzKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgICAgICAgICAgIG1ldGhvZCA6ICdQVVQnLFxuICAgICAgICAgICAgICAgIHVybCA6ICdhcGkvdXNlci91cGRhdGVVc2VyLycgKyB1cGRhdGVzLl9pZCxcbiAgICAgICAgICAgICAgICBkYXRhIDogdXBkYXRlc1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB1cGRhdGVVc2VyIDogdXBkYXRlVXNlclxuICAgICAgICB9XG4gICAgfSlcbiIsImFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdwYXJ0aWFscy9zaXRlLWZvb3Rlci5odG1sJyxcbiAgICAnPGZvb3RlciBjbGFzcz1cImZvb3RlclwiIG5nLWlmPVwiIXN0YXRlLmluY2x1ZGVzKFxcJ2Rhc2hib2FyZFxcJylcIj48ZGl2IGNsYXNzPVwiZm9vdGVyLWNvbnRhaW5lclwiPjxuYXYgY2xhc3M9XCJmb290ZXItbGlua3NcIj48ZGl2IGNsYXNzPVwibGlua3MtY29udGFpbmVyXCI+PGgxIGNsYXNzPVwic2l0ZS1saXN0LXRpdGxlXCI+U2l0ZTwvaDE+PHVsPjxsaT48YSB1aS1zcmVmPVwiaG9tZVwiIGNsYXNzPVwic2l0ZS1saXN0LWl0ZW1cIj5Ib21lPC9hPjwvbGk+PGxpPjxhIHVpLXNyZWY9XCJzb3VuZFwiIGNsYXNzPVwic2l0ZS1saXN0LWl0ZW1cIj5Tb3VuZDwvYT48L2xpPjxsaT48YSB1aS1zcmVmPVwiZmlsbVwiIGNsYXNzPVwic2l0ZS1saXN0LWl0ZW1cIj5GaWxtPC9hPjwvbGk+PGxpPjxhIHVpLXNyZWY9XCJmYXNoaW9uXCIgY2xhc3M9XCJzaXRlLWxpc3QtaXRlbVwiPkZhc2hpb248L2E+PC9saT48bGk+PGEgdWktc3JlZj1cImN1bHR1cmVcIiBjbGFzcz1cInNpdGUtbGlzdC1pdGVtXCI+Q3VsdHVyZTwvYT48L2xpPjwvdWw+PC9kaXY+PGRpdiBjbGFzcz1cImxpbmtzLWNvbnRhaW5lclwiPjxoMSBjbGFzcz1cInNpdGUtbGlzdC10aXRsZVwiPkFib3V0PC9oMT48dWw+PGxpIHVpLXNyZWY9XCJhYm91dFwiIGNsYXNzPVwic2l0ZS1saXN0LWl0ZW1cIj48YT5BYm91dDwvYT48L2xpPjxsaT48YSBocmVmPVwibWFpbHRvOkRhbm55QEZyZXF1ZW5jeUN1bHR1cmUuY29tLCBCZW5ARnJlcXVlbmN5Q3VsdHVyZVwiIGNsYXNzPVwic2l0ZS1saXN0LWl0ZW1cIj5Db250YWN0PC9hPjwvbGk+PGxpPjxhIGhyZWY9XCJtYWlsdG86RGFubnlARnJlcXVlbmN5Q3VsdHVyZS5jb20sIEJlbkBGcmVxdWVuY3lDdWx0dXJlXCIgY2xhc3M9XCJzaXRlLWxpc3QtaXRlbVwiPlN1Ym1pc3Npb25zPC9hPjwvbGk+PGxpPjxhIGhyZWY9XCJtYWlsdG86RGFubnlARnJlcXVlbmN5Q3VsdHVyZS5jb20sIEJlbkBGcmVxdWVuY3lDdWx0dXJlXCIgY2xhc3M9XCJzaXRlLWxpc3QtaXRlbVwiPkFkdmVydGlzZTwvYT48L2xpPjwvdWw+PC9kaXY+PGRpdiBjbGFzcz1cInNvY2lhbC1mb290ZXJcIj48dWw+PGxpPjxpIGNsYXNzPVwiZmEgZmEtZmFjZWJvb2tcIj48L2k+PC9saT48bGk+PGkgY2xhc3M9XCJmYSBmYS10d2l0dGVyXCI+PC9pPjwvbGk+PGxpPjxpIGNsYXNzPVwiZmEgZmEtc291bmRjbG91ZFwiPjwvaT48L2xpPjwvdWw+PC9kaXY+PC9uYXY+PGRpdiBjbGFzcz1cImJvdHRvbS1mb290ZXJcIj48aDIgY2xhc3M9XCJsYWJlbFwiPiZjb3B5OyAyMDE2IEZyZXF1ZW5jeSBDdWx0dXJlPC9oMj48L2Rpdj48L2Rpdj48L2Zvb3Rlcj4nKTtcbn1dKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBEYW5ueSBvbiAxLzI5LzE3LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKVxuICAgIC5zZXJ2aWNlKCdTaWdudXBTZXJ2aWNlJywgZnVuY3Rpb24oJGh0dHApIHtcbiAgICAgICAgdmFyIG5ld1NpZ251cCA9IGZ1bmN0aW9uKHNpZ251cERhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cCh7XG4gICAgICAgICAgICAgICAgbWV0aG9kIDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIHVybCA6ICdhcGkvc2lnbnVwL25ld1NpZ251cCcsXG4gICAgICAgICAgICAgICAgZGF0YSA6IHNpZ251cERhdGFcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmV3U2lnbnVwIDogbmV3U2lnbnVwXG4gICAgICAgIH1cbiAgICB9KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3BhcnRpYWxzL3NpdGUtYXVkaW8uaHRtbCcsXG4gICAgJzxkaXYgY2xhc3M9XCJzaXRlLWF1ZGlvXCIgbmctaWY9XCIhc3RhdGUuaW5jbHVkZXMoXFwnZGFzaGJvYXJkXFwnKVwiPjxkaXYgY2xhc3M9XCJuYXZiYXIgbmF2YmFyLWRlZmF1bHQgbmF2YmFyLWZpeGVkLWJvdHRvbVwiIHJvbGU9XCJuYXZpZ2F0aW9uXCI+PGRpdiBjbGFzcz1cImNvbnRhaW5lci1mbHVpZFwiIHBsYW5ndWxhcj1cInt7dHJhY2tVcmx9fVwiIG5nLWlmPVwidHJhY2tVcmxcIj48ZGl2IGNsYXNzPVwibmF2YmFyLWhlYWRlclwiPjxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwibmF2YmFyLXRvZ2dsZSBjb2xsYXBzZWQgYnV0dG9uLWRlZmF1bHRcIiBkYXRhLXRvZ2dsZT1cImNvbGxhcHNlXCIgZGF0YS10YXJnZXQ9XCIjYXVkaW8tcGxheWVyXCI+PGkgY2xhc3M9XCJmYSBmYS1tdXNpY1wiPjwvaT48L2J1dHRvbj48L2Rpdj48ZGl2IGNsYXNzPVwiZnVsbC1jb250cm9scyBjb250YWluZXIgaGlkZGVuLXhzXCI+PHVsIGNsYXNzPVwiYXVkaW8tY29udHJvbHNcIj48bGk+PGkgY2xhc3M9XCJmYSBmYS1iYWNrd2FyZFwiPjwvaT48L2xpPjxsaSBuZy1jbGljaz1cInBsYXlQYXVzZSgpXCI+PGkgY2xhc3M9XCJmYSBmYS1wbGF5XCIgbmctaWY9XCJwbGF5ZXIucGxheWluZyAhPT0gdHJhY2suc3JjXCI+PC9pPiA8aSBjbGFzcz1cImZhIGZhLXBhdXNlXCIgbmctaWY9XCJwbGF5ZXIucGxheWluZyA9PSB0cmFjay5zcmNcIj48L2k+PC9saT48bGk+PGkgY2xhc3M9XCJmYSBmYS1mb3J3YXJkXCI+PC9pPjwvbGk+PC91bD48aW1nIG5nLXNyYz1cInt7dHJhY2suYXJ0d29ya191cmx9fVwiIGNsYXNzPVwiaW1hZ2Utc2hhZG93IGF1ZGlvLWltYWdlXCIgaW1hZ2Utc2hhZG93Pjx1bCBjbGFzcz1cImF1ZGlvLWluZm8tZnVsbFwiPjxsaT48aDEgY2xhc3M9XCJsYWJlbFwiPkFydGlzdCA6IDxzcGFuPnt7dHJhY2sudXNlci51c2VybmFtZX19PC9zcGFuPjwvaDE+PC9saT48bGk+PGgxIGNsYXNzPVwibGFiZWxcIj5UcmFjayA6IDxzcGFuPnt7dHJhY2sudGl0bGV9fTwvc3Bhbj48L2gxPjwvbGk+PC91bD48L2Rpdj48ZGl2IGNsYXNzPVwiaGlkZGVuLXNtIGhpZGRlbi1tZCBoaWRkZW4tbGcgbWluaS1jb250cm9scyBjb250YWluZXItZmx1aWRcIj48dWwgY2xhc3M9XCJhdWRpby1jb250cm9sc1wiPjxsaT48aSBjbGFzcz1cImZhIGZhLWJhY2t3YXJkXCI+PC9pPjwvbGk+PGxpIG5nLWNsaWNrPVwicGxheVBhdXNlKClcIj48aSBjbGFzcz1cImZhIGZhLXBsYXlcIiBuZy1pZj1cInBsYXllci5wbGF5aW5nICE9PSB0cmFjay5zcmNcIj48L2k+IDxpIGNsYXNzPVwiZmEgZmEtcGF1c2VcIiBuZy1pZj1cInBsYXllci5wbGF5aW5nID09IHRyYWNrLnNyY1wiPjwvaT48L2xpPjxsaT48aSBjbGFzcz1cImZhIGZhLWZvcndhcmRcIj48L2k+PC9saT48L3VsPjwvZGl2PjxkaXYgY2xhc3M9XCJjb2xsYXBzZSBuYXZiYXItY29sbGFwc2VcIiBpZD1cImF1ZGlvLXBsYXllclwiPjx1bCBjbGFzcz1cIm5hdiBuYXZiYXItbmF2IGNvbnRhaW5lciBoaWRkZW4tbWQgaGlkZGVuLWxnIGhpZGRlbi1zbSBtaW5pLWF1ZGlvXCI+PGRpdiBjbGFzcz1cImF1ZGlvLWluZm9cIj48aW1nIG5nLXNyYz1cInt7dHJhY2suYXJ0d29ya191cmx9fVwiIGNsYXNzPVwiaW1hZ2Utc2hhZG93IGF1ZGlvLWltYWdlXCIgaW1hZ2Utc2hhZG93Pjx1bD48bGk+PGgxIGNsYXNzPVwibGFiZWxcIj5BcnRpc3QgOiA8c3Bhbj57e3RyYWNrLnVzZXIudXNlcm5hbWV9fTwvc3Bhbj48L2gxPjwvbGk+PGxpPjxoMSBjbGFzcz1cImxhYmVsXCI+VGl0bGUgOiA8c3Bhbj57e3RyYWNrLnRpdGxlfX08L3NwYW4+PC9oMT48L2xpPjwvdWw+PC9kaXY+PC91bD48L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj4nKTtcbn1dKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBEYW5ueSBvbiAxMi8yNC8xNi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJylcbiAgICAuc2VydmljZSgnTW9kYWxTZXJ2aWNlJywgZnVuY3Rpb24oJHJvb3RTY29wZSwgJHEsICR0aW1lb3V0KSB7XG5cbiAgICAgICAgdmFyIHBhcnRpYWxVcmxzID0ge1xuICAgICAgICAgICAgJ2xvZ2luJyA6ICdwYXJ0aWFscy9tb2RhbC1sb2dpbi5odG1sJyxcbiAgICAgICAgICAgICdjb250YWN0JyA6ICdwYXJ0aWFscy9tb2RhbC1jb250YWN0Lmh0bWwnLFxuICAgICAgICAgICAgJ2NvbmZpcm0nIDogJ3BhcnRpYWxzL21vZGFsLWNvbmZpcm0uaHRtbCcsXG4gICAgICAgICAgICAnc2lnbnVwJyA6ICdwYXJ0aWFscy9tb2RhbC1zaWdudXAuaHRtbCdcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBfbW9kYWw7XG4gICAgICAgIHZhciBjbG9zZU1vZGFsO1xuXG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgX21vZGFsID0gJCgnI3NpdGVNb2RhbCcpO1xuICAgICAgICAgICAgX21vZGFsLm9uKCdoaWRlLmJzLm1vZGFsJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIGNsb3NlTW9kYWwoZSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9LDEwMClcblxuICAgICAgICAvLyBHbG9iYWwgaGlkZSBtb2RhbCBsaXN0ZW5lclxuXG5cbiAgICAgICAgcmV0dXJuIHtcblxuICAgICAgICAgICAgLy8gUmV0dXJucyBhIHByb21pc2Ugd2hpY2ggaXMgcmVzb2x2ZWQgd2hlbiB0aGUgbW9kYWwgY2xvc2VzLlxuICAgICAgICAgICAgb3Blbk1vZGFsIDogZnVuY3Rpb24odHlwZSwgbW9kYWxUaXRsZSkge1xuICAgICAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS5tb2RhbFRlbXBsYXRlID0gcGFydGlhbFVybHNbdHlwZV07XG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS5tb2RhbFRpdGxlID0gbW9kYWxUaXRsZTtcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLm1vZGFsQ29uZmlybSA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgX21vZGFsLm1vZGFsKCdoaWRlJyk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdtb2RhbDogJywgX21vZGFsKVxuICAgICAgICAgICAgICAgIF9tb2RhbC5tb2RhbCgnc2hvdycpO1xuXG4gICAgICAgICAgICAgICAgY2xvc2VNb2RhbCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSlcbiIsImFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdwYXJ0aWFscy9zaWRlbWVudS5odG1sJyxcbiAgICAnPG5hdiBjbGFzcz1cIm1vYmlsZS1tZW51XCIgbmctY2xhc3M9XCJ7XFwnc2hvdy1tZW51XFwnIDogc2hvd01lbnV9XCI+PGRpdiBjbGFzcz1cIm5hdi1jb250YWluZXJcIj48dWw+PGgxIGNsYXNzPVwic2l0ZS1saXN0LXRpdGxlXCI+U2l0ZTwvaDE+PGxpPjxhIHVpLXNyZWY9XCJzb3VuZFwiIGNsYXNzPVwic2l0ZS1saXN0LWl0ZW1cIj5Tb3VuZDwvYT48L2xpPjxsaT48YSB1aS1zcmVmPVwiZmlsbVwiIGNsYXNzPVwic2l0ZS1saXN0LWl0ZW1cIj5GaWxtPC9hPjwvbGk+PGxpPjxhIHVpLXNyZWY9XCJmYXNoaW9uXCIgY2xhc3M9XCJzaXRlLWxpc3QtaXRlbVwiPkZhc2hpb248L2E+PC9saT48bGk+PGEgdWktc3JlZj1cImN1bHR1cmVcIiBjbGFzcz1cInNpdGUtbGlzdC1pdGVtXCI+Q3VsdHVyZTwvYT48L2xpPjwvdWw+PHVsPjxoMSBjbGFzcz1cInNpdGUtbGlzdC10aXRsZVwiPkFib3V0PC9oMT48bGk+PGEgaHJlZj1cIlwiIGNsYXNzPVwic2l0ZS1saXN0LWl0ZW1cIj5BYm91dDwvYT48L2xpPjxsaT48YSBocmVmPVwibWFpbHRvOkRhbm55QEZyZXF1ZW5jeUN1bHR1cmUuY29tLCBCZW5ARnJlcXVlbmN5Q3VsdHVyZVwiIGNsYXNzPVwic2l0ZS1saXN0LWl0ZW1cIj5Db250YWN0PC9hPjwvbGk+PGxpPjxhIGhyZWY9XCJtYWlsdG86RGFubnlARnJlcXVlbmN5Q3VsdHVyZS5jb20sIEJlbkBGcmVxdWVuY3lDdWx0dXJlXCIgY2xhc3M9XCJzaXRlLWxpc3QtaXRlbVwiPlN1Ym1pc3Npb25zPC9hPjwvbGk+PGxpPjxhIGhyZWY9XCJtYWlsdG86RGFubnlARnJlcXVlbmN5Q3VsdHVyZS5jb20sIEJlbkBGcmVxdWVuY3lDdWx0dXJlXCIgY2xhc3M9XCJzaXRlLWxpc3QtaXRlbVwiPkFkdmVydGlzZTwvYT48L2xpPjwvdWw+PC9kaXY+PGRpdiBjbGFzcz1cInNvY2lhbC1jb250YWluZXJcIj48dWw+PGxpPjxpIGNsYXNzPVwiZmEgZmEtZmFjZWJvb2tcIj48L2k+PC9saT48bGk+PGkgY2xhc3M9XCJmYSBmYS10d2l0dGVyXCI+PC9pPjwvbGk+PGxpPjxpIGNsYXNzPVwiZmEgZmEtc291bmRjbG91ZFwiPjwvaT48L2xpPjwvdWw+PC9kaXY+PC9uYXY+Jyk7XG59XSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgRGFubnkgb24gMTEvNi8xNi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJylcbiAgLnNlcnZpY2UoJ0NvbnRlbnRTZXJ2aWNlJywgZnVuY3Rpb24oJGh0dHAsICRxKSB7XG4gICAgdmFyIF9zaXRlQ29udGVudCxcbiAgICAgIF9zZWxlY3RlZENvbnRlbnQ7XG5cblxuICAgIHZhciBzZXRDb250ZW50ID0gZnVuY3Rpb24oY29udGVudCwgY2FsbGJhY2spIHtcbiAgICAgIF9zaXRlQ29udGVudCA9IGNvbnRlbnQ7XG4gICAgICBpZihjYWxsYmFjaykge1xuICAgICAgICBjYWxsYmFjayhjb250ZW50KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgZ2V0Q29udGVudCA9IGZ1bmN0aW9uKGNvbnRlbnQpIHtcbiAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICBpZighX3NpdGVDb250ZW50KSB7XG4gICAgICAgIGluaXRDb250ZW50KGZ1bmN0aW9uKGNvbnRlbnQpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnY29udGVudDogJywgY29udGVudCk7XG4gICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShjb250ZW50KTtcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlZmVycmVkLnJlc29sdmUoX3NpdGVDb250ZW50KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfVxuXG4gICAgdmFyIGluaXRDb250ZW50ID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICRodHRwLmdldCgnYXBpL3NpdGVDb250ZW50L2FsbENvbnRlbnQnKVxuICAgICAgICAudGhlbihmdW5jdGlvbihyZXN1bHRzKXtcbiAgICAgICAgICBzZXRDb250ZW50KHJlc3VsdHMuZGF0YSwgY2FsbGJhY2spO1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZvcm1hdENvbnRlbnQoY29udGVudCwgY2FsbGJhY2spIHtcbiAgICAgIHZhciBmb3JtYXR0ZWRDb250ZW50ID0gW107XG4gICAgICAgIGNvbnNvbGUubG9nKCdjb250ZW50OiAnLCBjb250ZW50KTtcbiAgICAgIC8vZm9yKHZhciBrZXkgaW4gY29udGVudCkge1xuICAgICAgLy8gIGFuZ3VsYXIuZm9yRWFjaChjb250ZW50W2tleV0sIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAvLyAgICBpdGVtLnN0YXRlTmFtZSA9IChpdGVtLnN0YXRlTmFtZSB8fCBpdGVtLnVybCkudG9Mb3dlckNhc2UoKTtcbiAgICAgIC8vICAgIGl0ZW0udXJsUHJlZml4ID0gJy8nICsga2V5ICsgJy8nICsgaXRlbS51cmw7XG4gICAgICAvLyAgICBpdGVtLmhyZWYgPSBpdGVtLnVybDtcbiAgICAgIC8vICAgIGlmKGtleSA9PSAnYXJ0aWNsZXMnKSB7XG4gICAgICAvLyAgICAgIGl0ZW0uc3JjID0gJ3ZpZXdzL3ZpZXcuYXJ0aWNsZS5odG1sJztcbiAgICAgIC8vICAgIH0gZWxzZSBpZihrZXkgPT0gJ2NyZWF0b3Itc2VyaWVzJykge1xuICAgICAgLy8gICAgICBpdGVtLnNyYyA9IFwidmlld3Mvdmlldy5jcmVhdG9yLXNlcmllcy5odG1sXCI7XG4gICAgICAvLyAgICB9XG4gICAgICAvLyAgICBmb3JtYXR0ZWRDb250ZW50LnB1c2goaXRlbSk7XG4gICAgICAvLyAgfSk7XG4gICAgICAvL31cbiAgICAgIHNldENvbnRlbnQoZm9ybWF0dGVkQ29udGVudCwgY2FsbGJhY2spO1xuICAgIH1cblxuICAgIHZhciBzZXRTZWxlY3RlZCA9IGZ1bmN0aW9uKGNvbnRlbnQpIHtcbiAgICAgIF9zZWxlY3RlZENvbnRlbnQgPSBjb250ZW50O1xuICAgIH1cblxuICAgIHZhciBnZXRTZWxlY3RlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIF9zZWxlY3RlZENvbnRlbnQ7XG4gICAgfVxuXG4gICAgdmFyIGZpbmRDb250ZW50ID0gZnVuY3Rpb24oc2VsZWN0ZWRIcmVmKSB7XG4gICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgaWYoIV9zZWxlY3RlZENvbnRlbnQpIHtcbiAgICAgICAgaW5pdENvbnRlbnQoZnVuY3Rpb24oY29udGVudCkge1xuICAgICAgICAgIGZvcih2YXIgYz0wO2M8Y29udGVudC5sZW5ndGg7YysrKSB7XG4gICAgICAgICAgICBpZihjb250ZW50W2NdLmhyZWYgPT0gc2VsZWN0ZWRIcmVmKSB7XG4gICAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5yZXNvbHZlKGNvbnRlbnRbY10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5yZXNvbHZlKF9zZWxlY3RlZENvbnRlbnQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfVxuXG5cblxuICAgICAgdmFyIG5ld0NvbnRlbnQgPSBmdW5jdGlvbihuZXdDb250ZW50KSB7XG4gICAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgICAgbWV0aG9kIDogJ1BPU1QnLFxuICAgICAgICAgICAgICB1cmwgOiAnYXBpL3NpdGVDb250ZW50LycsXG4gICAgICAgICAgICAgIGRhdGEgOiBuZXdDb250ZW50XG4gICAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgdmFyIHVwZGF0ZUNvbnRlbnQgPSBmdW5jdGlvbihjb250ZW50KSB7XG4gICAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgICAgbWV0aG9kIDogJ1BVVCcsXG4gICAgICAgICAgICAgIHVybCA6ICdhcGkvc2l0ZUNvbnRlbnQvJyArIGNvbnRlbnQuX2lkLFxuICAgICAgICAgICAgICBkYXRhIDogY29udGVudFxuICAgICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIHZhciBkZWxldGVDb250ZW50ID0gZnVuY3Rpb24oY29udGVudCkge1xuICAgICAgICAgIHJldHVybiAkaHR0cCh7XG4gICAgICAgICAgICAgIG1ldGhvZCA6ICdERUxFVEUnLFxuICAgICAgICAgICAgICB1cmwgOiAnYXBpL3NpdGVDb250ZW50LycgKyBjb250ZW50Ll9pZFxuICAgICAgICAgIH0pXG4gICAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgc2V0Q29udGVudCA6IHNldENvbnRlbnQsXG4gICAgICBnZXRDb250ZW50IDogZ2V0Q29udGVudCxcbiAgICAgIGluaXRDb250ZW50IDogaW5pdENvbnRlbnQsXG4gICAgICBzZXRTZWxlY3RlZCA6IHNldFNlbGVjdGVkLFxuICAgICAgZ2V0U2VsZWN0ZWQgOiBnZXRTZWxlY3RlZCxcbiAgICAgIGZpbmRDb250ZW50IDogZmluZENvbnRlbnQsXG4gICAgICBuZXdDb250ZW50IDogbmV3Q29udGVudCxcbiAgICAgIHVwZGF0ZUNvbnRlbnQgOiB1cGRhdGVDb250ZW50LFxuICAgICAgZGVsZXRlQ29udGVudCA6IGRlbGV0ZUNvbnRlbnRcbiAgICB9XG4gIH0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgncGFydGlhbHMvc2VjdGlvbi1oZWFkZXIuaHRtbCcsXG4gICAgJzxoZWFkZXIgY2xhc3M9XCJzZWN0aW9uLWhlYWRlclwiIGlkPVwic2VjdGlvbkhlYWRlclwiPjxpbWcgc3JjPVwiLi4vaW1hZ2VzL2tpbmV0aWtfbG9nb19wdXJwbGUuc3ZnXCIgY2xhc3M9XCJsb2dvXCI+PHVsIGNsYXNzPVwiaGVhZGVyLW1lbnVcIj48bGkgbmctY2xpY2s9XCJnb1RvKFxcJ3NvdW5kXFwnKVwiIG5nLWNsYXNzPVwie1xcJ2FjdGl2ZS1saW5rXFwnIDogaXNBY3RpdmUoXFwnc291bmRcXCcpfVwiPjxoMSBjbGFzcz1cInRpdGxlXCI+U291bmQ8L2gxPjwvbGk+PGxpIG5nLWNsaWNrPVwiZ29UbyhcXCdmaWxtXFwnKVwiIG5nLWNsYXNzPVwie1xcJ2FjdGl2ZS1saW5rXFwnIDogaXNBY3RpdmUoXFwnZmlsbVxcJyl9XCI+PGgxIGNsYXNzPVwidGl0bGVcIj5GaWxtPC9oMT48L2xpPjxsaSBuZy1jbGljaz1cImdvVG8oXFwnZmFzaGlvblxcJylcIiBuZy1jbGFzcz1cIntcXCdhY3RpdmUtbGlua1xcJyA6IGlzQWN0aXZlKFxcJ2Zhc2hpb25cXCcpfVwiPjxoMSBjbGFzcz1cInRpdGxlXCI+RmFzaGlvbjwvaDE+PC9saT48bGkgbmctY2xpY2s9XCJnb1RvKFxcJ2N1bHR1cmVcXCcpXCIgbmctY2xhc3M9XCJ7XFwnYWN0aXZlLWxpbmtcXCcgOiBpc0FjdGl2ZShcXCdjdWx0dXJlXFwnKX1cIj48aDEgY2xhc3M9XCJ0aXRsZVwiPkN1bHR1cmU8L2gxPjwvbGk+PC91bD48L2hlYWRlcj4nKTtcbn1dKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBEYW5ueSBvbiAxMi8yNS8xNi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJylcbiAgICAuc2VydmljZSgnQWRtaW5TZXJ2aWNlJywgZnVuY3Rpb24oJGh0dHAsICRxKSB7XG5cbiAgICAgICAgdmFyIF9hbGxVc2VycztcbiAgICAgICAgdmFyIG5ld1VzZXIgPSBmdW5jdGlvbihuZXdVc2VyKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgICAgICAgICAgIG1ldGhvZCA6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICB1cmwgOiAnYXBpL3VzZXIvbmV3VXNlcicsXG4gICAgICAgICAgICAgICAgZGF0YSA6IG5ld1VzZXJcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYWxsVXNlcnMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmKCFfYWxsVXNlcnMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgICAgICB1cmwgOiAnYXBpL3VzZXIvYWxsVXNlcnMnXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hbGxVc2VycyA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2FsbFVzZXJzXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShfYWxsVXNlcnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRlbGV0ZVVzZXIgPSBmdW5jdGlvbih1c2VySWQpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cCh7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgICAgICAgICAgICB1cmwgOiAnYXBpL3VzZXIvJyArIHVzZXJJZFxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuZXdVc2VyIDogbmV3VXNlcixcbiAgICAgICAgICAgIGFsbFVzZXJzIDogYWxsVXNlcnMsXG4gICAgICAgICAgICBkZWxldGVVc2VyIDogZGVsZXRlVXNlclxuICAgICAgICB9XG4gICAgfSlcbiIsImFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdwYXJ0aWFscy9uYXZiYXIuaHRtbCcsXG4gICAgJzxkaXYgY2xhc3M9XCJoZWFkZXJcIj48bmF2IGNsYXNzPVwibmF2YmFyIG5hdmJhci1kZWZhdWx0IG5hdmJhci1pbnZlcnNlIG5hdmJhci1maXhlZC10b3AgbWFpbi1uYXZiYXJcIiByb2xlPVwibmF2aWdhdGlvblwiIG5nLWNsYXNzPVwie1xcJ3Zpc2libGUtbmF2XFwnIDogc2hvd05hdmJhcn1cIj48ZGl2IGNsYXNzPVwiY29udGFpbmVyXCI+PGRpdiBjbGFzcz1cIm1lbnUtbG9nbyBoaWRkZW4teHNcIiBuZy1jbGljaz1cImdvVG8oXFwnaG9tZVxcJylcIj48aW1nIHNyYz1cIi4uL2ltYWdlcy9raW5ldGlrX25hbWUuc3ZnXCI+PC9kaXY+PHVsIGNsYXNzPVwiZnVsbC1uYXYgaGlkZGVuLXhzXCI+PGxpIG5nLWNsaWNrPVwiZ29UbyhcXCdzb3VuZFxcJylcIiBuZy1jbGFzcz1cIntcXCdhY3RpdmUtbGlua1xcJyA6IGlzQWN0aXZlKFxcJ3NvdW5kXFwnKX1cIiBjbGFzcz1cIm5hdmJhci1saW5rXCI+PGgxPlNvdW5kPC9oMT48L2xpPjxsaSBuZy1jbGljaz1cImdvVG8oXFwnZmlsbVxcJylcIiBjbGFzcz1cIm5hdmJhci1saW5rXCIgbmctY2xhc3M9XCJ7XFwnYWN0aXZlLWxpbmtcXCcgOiBpc0FjdGl2ZShcXCdmaWxtXFwnKX1cIj48aDE+RmlsbTwvaDE+PC9saT48bGkgbmctY2xpY2s9XCJnb1RvKFxcJ2Zhc2hpb25cXCcpXCIgY2xhc3M9XCJuYXZiYXItbGlua1wiIG5nLWNsYXNzPVwie1xcJ2FjdGl2ZS1saW5rXFwnIDogaXNBY3RpdmUoXFwnZmFzaGlvblxcJyl9XCI+PGgxPkZhc2hpb248L2gxPjwvbGk+PGxpIG5nLWNsaWNrPVwiZ29UbyhcXCdjdWx0dXJlXFwnKVwiIGNsYXNzPVwibmF2YmFyLWxpbmtcIiBuZy1jbGFzcz1cIntcXCdhY3RpdmUtbGlua1xcJyA6IGlzQWN0aXZlKFxcJ2N1bHR1cmVcXCcpfVwiPjxoMT5DdWx0dXJlPC9oMT48L2xpPjwvdWw+PGRpdiBjbGFzcz1cInZpc2libGUteHMgbW9iaWxlLW5hdmJhclwiPjxpbWcgc3JjPVwiLi4vaW1hZ2VzL2tpbmV0aWtfbmFtZS5zdmdcIiBuZy1jbGljaz1cImdvVG8oXFwnaG9tZVxcJylcIj48aGFtYnVyZ2VyLW1lbnUgc3RhdGU9XCJzaG93TWVudVwiIG5nLWNsaWNrPVwidG9nZ2xlTGlua3MoKVwiPjwvaGFtYnVyZ2VyLW1lbnU+PC9kaXY+PC9kaXY+PC9uYXY+PC9kaXY+Jyk7XG59XSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgRGFubnkgb24gMTIvMjQvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpXG4gICAgLmRpcmVjdGl2ZSgnc2l0ZU1vZGFsJywgZnVuY3Rpb24oJHJvb3RTY29wZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3QgOiAnRScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybCA6ICdwYXJ0aWFscy9zaXRlLW1vZGFsLmh0bWwnLFxuICAgICAgICAgICAgbGluayA6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtLCBhdHRycykge1xuICAgICAgICAgICAgICAgIHNjb3BlLm1vZGFsVGVtcGxhdGUgPSAkcm9vdFNjb3BlLm1vZGFsVGVtcGxhdGU7XG4gICAgICAgICAgICAgICAgc2NvcGUubW9kYWxDb25maXJtID0gJHJvb3RTY29wZS5tb2RhbENvbmZpcm07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3BhcnRpYWxzL21vZGFsLXNpZ251cC5odG1sJyxcbiAgICAnPGRpdj48ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyXCI+PGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJjbG9zZVwiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCIgYXJpYS1sYWJlbD1cIkNsb3NlXCI+PHNwYW4gYXJpYS1oaWRkZW49XCJ0cnVlXCI+JnRpbWVzOzwvc3Bhbj48L2J1dHRvbj48aDEgY2xhc3M9XCJ0aXRsZVwiPktpbmV0aWsgTWFnIEVhcmx5IEFjY2VzczwvaDE+PC9kaXY+PGRpdiBjbGFzcz1cIm1vZGFsLWJvZHlcIj48Zm9ybSByb2xlPVwiZm9ybVwiIG5vdmFsaWRhdGUgbmFtZT1cInNpZ251cEZvcm1cIj48ZGl2IGNsYXNzPVwicm93XCI+PGRpdiBjbGFzcz1cImNvbC14cy02IGNvbC14cy1vZmZzZXQtMyBjb2wtc20tNiBjb2wtc20tb2Zmc2V0LTAgZm9ybS1ncm91cFwiPjxsYWJlbCBmb3I9XCJ1c2VyRW1haWxcIiBjbGFzcz1cImxhYmVsXCI+RW1haWw8L2xhYmVsPjxpbnB1dCB0eXBlPVwiZW1haWxcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIGlkPVwidXNlckVtYWlsXCIgcGxhY2Vob2xkZXI9XCJFbWFpbFwiIG5nLW1vZGVsPVwic2lnbnVwRm9ybS5lbWFpbFwiPjwvZGl2PjxkaXYgY2xhc3M9XCJjb2wteHMtNiBjb2wteHMtb2Zmc2V0LTMgY29sLXNtLTYgY29sLXNtLW9mZnNldC0wIGZvcm0tZ3JvdXBcIj48bGFiZWwgZm9yPVwiZmlyc3ROYW1lXCIgY2xhc3M9XCJsYWJlbFwiPkZpcnN0IE5hbWU8L2xhYmVsPjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgaWQ9XCJmaXJzdE5hbWVcIiBwbGFjZWhvbGRlcj1cIkZpcnN0IE5hbWVcIiBuZy1tb2RlbD1cInNpZ251cEZvcm0uZmlyc3ROYW1lXCI+PC9kaXY+PC9kaXY+PC9mb3JtPjwvZGl2PjxkaXYgY2xhc3M9XCJtb2RhbC1mb290ZXJcIj48ZGl2IGNsYXNzPVwibW9kYWwtZm9vdGVyLWV4dHJhc1wiPjxoMSBjbGFzcz1cInRpdGxlIG1vZGFsLWVycm9yXCI+e3tlcnJvck1lc3NhZ2V9fTwvaDE+PGkgY2xhc3M9XCJmYSBmYS1zcGlubmVyIGZhLXNwaW5cIiBuZy1pZj1cIiFlcnJvck1lc3NhZ2UgJiYgbG9nZ2luZ0luXCI+PC9pPjwvZGl2PjxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0XCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIj48aDEgY2xhc3M9XCJidXR0b25cIj5DYW5jZWw8L2gxPjwvYnV0dG9uPiA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIiBjbGFzcz1cImJ0biBwdXJwbGUtYnV0dG9uXCIgbmctY2xpY2s9XCIkcGFyZW50Lm1vZGFsQ29uZmlybShzaWdudXBGb3JtKVwiPjxoMSBjbGFzcz1cImJ1dHRvblwiPlN1Ym1pdDwvaDE+PC9idXR0b24+PC9kaXY+PC9kaXY+Jyk7XG59XSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgRGFubnkgb24gMTEvNi8xNi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJylcbiAgLmRpcmVjdGl2ZSgnc2l0ZUZvb3RlcicsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdCA6ICdFJyxcbiAgICAgIHRlbXBsYXRlVXJsIDogJ3BhcnRpYWxzL3NpdGUtZm9vdGVyLmh0bWwnXG4gICAgfVxuICB9KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3BhcnRpYWxzL21vZGFsLWxvZ2luLmh0bWwnLFxuICAgICc8ZGl2IG5nLWNvbnRyb2xsZXI9XCJMb2dpbk1vZGFsQ3RybFwiIG5nLWluaXQ9XCJyZXNldExvZ2luKClcIj48ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyXCI+PGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJjbG9zZVwiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCIgYXJpYS1sYWJlbD1cIkNsb3NlXCI+PHNwYW4gYXJpYS1oaWRkZW49XCJ0cnVlXCI+JnRpbWVzOzwvc3Bhbj48L2J1dHRvbj48aDEgY2xhc3M9XCJ0aXRsZVwiPkxvZ2luPC9oMT48L2Rpdj48ZGl2IGNsYXNzPVwibW9kYWwtYm9keVwiPjxmb3JtIHJvbGU9XCJmb3JtXCIgbm92YWxpZGF0ZSBuYW1lPVwibG9naW5Gb3JtXCI+PGRpdiBjbGFzcz1cInJvd1wiPjxkaXYgY2xhc3M9XCJjb2wteHMtNiBjb2wteHMtb2Zmc2V0LTMgY29sLXNtLTYgY29sLXNtLW9mZnNldC0wIGZvcm0tZ3JvdXBcIj48bGFiZWwgZm9yPVwidXNlckVtYWlsXCIgY2xhc3M9XCJsYWJlbFwiPkVtYWlsPC9sYWJlbD48aW5wdXQgdHlwZT1cImVtYWlsXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBpZD1cInVzZXJFbWFpbFwiIHBsYWNlaG9sZGVyPVwiRW1haWxcIiBuZy1tb2RlbD1cImxvZ2luRm9ybS5lbWFpbFwiPjwvZGl2PjxkaXYgY2xhc3M9XCJjb2wteHMtNiBjb2wteHMtb2Zmc2V0LTMgY29sLXNtLTYgY29sLXNtLW9mZnNldC0wIGZvcm0tZ3JvdXBcIj48bGFiZWwgZm9yPVwidXNlclBhc3N3b3JkXCIgY2xhc3M9XCJsYWJlbFwiPlBhc3N3b3JkPC9sYWJlbD48aW5wdXQgdHlwZT1cInBhc3N3b3JkXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBpZD1cInVzZXJQYXNzd29yZFwiIHBsYWNlaG9sZGVyPVwiUGFzc3dvcmRcIiBuZy1tb2RlbD1cImxvZ2luRm9ybS5wYXNzd29yZFwiPjwvZGl2PjwvZGl2PjwvZm9ybT48L2Rpdj48ZGl2IGNsYXNzPVwibW9kYWwtZm9vdGVyXCI+PGRpdiBjbGFzcz1cIm1vZGFsLWZvb3Rlci1leHRyYXNcIj48aDEgY2xhc3M9XCJ0aXRsZSBtb2RhbC1lcnJvclwiPnt7ZXJyb3JNZXNzYWdlfX08L2gxPjxpIGNsYXNzPVwiZmEgZmEtc3Bpbm5lciBmYS1zcGluXCIgbmctaWY9XCIhZXJyb3JNZXNzYWdlICYmIGxvZ2dpbmdJblwiPjwvaT48L2Rpdj48YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdFwiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCI+PGgxIGNsYXNzPVwiYnV0dG9uXCI+Q2FuY2VsPC9oMT48L2J1dHRvbj4gPGJ1dHRvbiB0eXBlPVwic3VibWl0XCIgY2xhc3M9XCJidG4gcHVycGxlLWJ1dHRvblwiIG5nLWNsaWNrPVwibG9naW4obG9naW5Gb3JtKVwiPjxoMSBjbGFzcz1cImJ1dHRvblwiPkxvZ2luPC9oMT48L2J1dHRvbj48L2Rpdj48L2Rpdj4nKTtcbn1dKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBEYW5ueSBvbiAxMS82LzE2LlxuICovXG5cbmFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpXG4gIC5kaXJlY3RpdmUoJ3NpdGVBdWRpbycsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdCA6ICdFJyxcbiAgICAgIHRlbXBsYXRlVXJsIDogJ3BhcnRpYWxzL3NpdGUtYXVkaW8uaHRtbCcsXG4gICAgICBsaW5rIDogZnVuY3Rpb24oc2NvcGUsIGVsZW0sIGF0dHJzKSB7XG5cbiAgICAgICAgdmFyIGNsaWVudElkID0gJ29lclhmNm5CY0R1NUNvTmRhT3JJR3V0VkNLWFBZdlNCJztcbiAgICAgICAgc2NvcGUudHJhY2tVcmwgPSAnaHR0cHM6Ly9zb3VuZGNsb3VkLmNvbS9pdHphaWEvbWl4LW1hY2hpbmUtMjk3LTE2LW5vdi0yMDE2LXdpdGgtaXR6YWlhJztcblxuICAgICAgICBTQy5pbml0aWFsaXplKHtcbiAgICAgICAgICBjbGllbnRfaWQ6IGNsaWVudElkXG4gICAgICAgIH0pO1xuICAgICAgICBTQy5yZXNvbHZlKCdodHRwczovL3NvdW5kY2xvdWQuY29tL2l0emFpYS9taXgtbWFjaGluZS0yOTctMTYtbm92LTIwMTYtd2l0aC1pdHphaWEnKVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHRyYWNrKSB7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCd0cmFjazogJywgdHJhY2spO1xuICAgICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICB9KVxuXG4iLCJhbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgncGFydGlhbHMvbW9kYWwtY29udGFjdC5odG1sJyxcbiAgICAnPGRpdiBjbGFzcz1cIm1vZGFsLWhlYWRlclwiPjxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiY2xvc2VcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiIGFyaWEtbGFiZWw9XCJDbG9zZVwiPjxzcGFuIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPiZ0aW1lczs8L3NwYW4+PC9idXR0b24+PGgxIGNsYXNzPVwidGl0bGVcIj57eyRwYXJlbnQubW9kYWxUaXRsZSA/ICRwYXJlbnQubW9kYWxUaXRsZSA6IFxcJ0NvbnRhY3RcXCd9fTwvaDE+PC9kaXY+PGRpdiBjbGFzcz1cIm1vZGFsLWJvZHlcIj48cCBjbGFzcz1cInNpdGUtYm9keS10ZXh0IGNlbnRlci1ibG9ja1wiPlBsZWFzZSBmaWxsIG91dCBzb21lIGRldGFpbHMgc28gd2UgY2FuIGdldCBiYWNrIHRvIHlvdS48L3A+PGZvcm0gcm9sZT1cImZvcm1cIiBub3ZhbGlkYXRlIG5hbWU9XCJjb250YWN0Rm9ybVwiIGNsYXNzPVwiY2VudGVyLWJsb2NrXCI+PGRpdiBjbGFzcz1cInJvd1wiPjxkaXYgY2xhc3M9XCJjb2wteHMtNiBjb2wteHMtb2Zmc2V0LTMgY29sLXNtLTUgY29sLXNtLW9mZnNldC0xIGZvcm0tZ3JvdXBcIj48bGFiZWwgZm9yPVwiY29udGFjdEZpcnN0TmFtZVwiIGNsYXNzPVwibGFiZWxcIj5GaXJzdCBOYW1lPC9sYWJlbD48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIGlkPVwiY29udGFjdEZpcnN0TmFtZVwiIHBsYWNlaG9sZGVyPVwiRmlyc3QgTmFtZVwiIG5nLW1vZGVsPVwiY29udGFjdEZvcm0uZmlyc3ROYW1lXCI+PC9kaXY+PGRpdiBjbGFzcz1cImNvbC14cy02IGNvbC14cy1vZmZzZXQtMyBjb2wtc20tNSBjb2wtc20tb2Zmc2V0LTAgZm9ybS1ncm91cFwiPjxsYWJlbCBmb3I9XCJjb250YWN0TGFzdE5hbWVcIiBjbGFzcz1cImxhYmVsXCI+TGFzdCBOYW1lPC9sYWJlbD48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIGlkPVwiY29udGFjdExhc3ROYW1lXCIgcGxhY2Vob2xkZXI9XCJMYXN0IE5hbWVcIiBuZy1tb2RlbD1cImNvbnRhY3RGb3JtLmxhc3ROYW1lXCI+PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz1cInJvd1wiPjxkaXYgY2xhc3M9XCJjb2wteHMtNiBjb2wteHMtb2Zmc2V0LTMgY29sLXNtLTUgY29sLXNtLW9mZnNldC0xIGZvcm0tZ3JvdXBcIj48bGFiZWwgZm9yPVwiY29udGFjdEVtYWlsXCIgY2xhc3M9XCJsYWJlbFwiPkVtYWlsPC9sYWJlbD48aW5wdXQgdHlwZT1cImVtYWlsXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBpZD1cImNvbnRhY3RFbWFpbFwiIHBsYWNlaG9sZGVyPVwiRW1haWxcIiBuZy1tb2RlbD1cImNvbnRhY3RGb3JtLmVtYWlsXCI+PC9kaXY+PGRpdiBjbGFzcz1cImNvbC14cy02IGNvbC14cy1vZmZzZXQtMyBjb2wtc20tNSBjb2wtc20tb2Zmc2V0LTAgZm9ybS1ncm91cFwiPjxsYWJlbCBmb3I9XCJjb250YWN0Q29tcGFueVwiIGNsYXNzPVwibGFiZWxcIj4oT3B0aW9uYWwpIENvbXBhbnk8L2xhYmVsPjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgaWQ9XCJjb250YWN0Q29tcGFueVwiIHBsYWNlaG9sZGVyPVwiQ29tcGFueVwiIG5nLW1vZGVsPVwiY29udGFjdEZvcm0uY29tcGFueVwiPjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XCJyb3dcIj48ZGl2IGNsYXNzPVwiY29sLXhzLTEwIGNvbC14cy1vZmZzZXQtMSBjb2wtc20tOCBjb2wtc20tb2Zmc2V0LTIgZm9ybS1ncm91cFwiPjxsYWJlbCBmb3I9XCJjb250YWN0TWVzc2FnZVwiIGNsYXNzPVwibGFiZWxcIj4oT3B0aW9uYWwpIE1lc3NhZ2U8L2xhYmVsPjx0ZXh0YXJlYSBjbGFzcz1cImZvcm0tY29udHJvbFwiIGlkPVwiY29udGFjdE1lc3NhZ2VcIiByb3dzPVwiM1wiIG5nLW1vZGVsPVwiY29udGFjdEZvcm0ubWVzc2FnZVwiPjwvdGV4dGFyZWE+PC9kaXY+PC9kaXY+PC9mb3JtPjwvZGl2PjxkaXYgY2xhc3M9XCJtb2RhbC1mb290ZXJcIj48YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdFwiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCI+PGgxIGNsYXNzPVwiYnV0dG9uXCI+Q2FuY2VsPC9oMT48L2J1dHRvbj4gPGJ1dHRvbiB0eXBlPVwic3VibWl0XCIgY2xhc3M9XCJidG4gcHVycGxlLWJ1dHRvblwiIG5nLWNsaWNrPVwiJHBhcmVudC5tb2RhbENvbmZpcm0oY29udGFjdEZvcm0pXCI+PGgxIGNsYXNzPVwiYnV0dG9uXCI+U3VibWl0PC9oMT48L2J1dHRvbj48L2Rpdj4nKTtcbn1dKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBEYW5ueSBvbiAxMS81LzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKVxuICAuZGlyZWN0aXZlKCdzaWRlbWVudScsIGZ1bmN0aW9uKCRyb290U2NvcGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc2NvcGU6ICdFJyxcbiAgICAgIHRlbXBsYXRlVXJsIDogJ3BhcnRpYWxzL3NpZGVtZW51Lmh0bWwnLFxuICAgICAgbGluayA6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtLCBhdHRycykge1xuXG4gICAgICAgIHNjb3BlLnNob3dNZW51ID0gZmFsc2U7XG4gICAgICAgIHNjb3BlLnRvZ2dsZUxpbmtzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIGxpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9iaWxlLW1lbnUnKS5xdWVyeVNlbGVjdG9yQWxsKCdsaScpO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGluay5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGlua1tpXS5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgJHJvb3RTY29wZS4kb24oXCIkc3RhdGVDaGFuZ2VTdWNjZXNzXCIsIGZ1bmN0aW9uKGV2ZW50LCB0b1N0YXRlKSB7XG4gICAgICAgICAgaWYoc2NvcGUuc2hvd01lbnUpIHtcbiAgICAgICAgICAgIHNjb3BlLnRvZ2dsZUxpbmtzKClcbiAgICAgICAgICAgIHNjb3BlLnNob3dNZW51ID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgncGFydGlhbHMvbW9kYWwtY29uZmlybS5odG1sJyxcbiAgICAnPGRpdiBjbGFzcz1cIm1vZGFsLWhlYWRlciByZWQtbW9kYWwtaGVhZGVyXCI+PGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJjbG9zZVwiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCIgYXJpYS1sYWJlbD1cIkNsb3NlXCI+PHNwYW4gYXJpYS1oaWRkZW49XCJ0cnVlXCI+JnRpbWVzOzwvc3Bhbj48L2J1dHRvbj48aDEgY2xhc3M9XCJ0aXRsZVwiPnt7JHBhcmVudC5tb2RhbFRpdGxlID8gJHBhcmVudC5tb2RhbFRpdGxlIDogXFwnUGxlYXNlIENvbmZpcm1cXCd9fTwvaDE+PC9kaXY+PGRpdiBjbGFzcz1cIm1vZGFsLWJvZHlcIj5BcmUgeW91IHN1cmUgeW91IHdpc2ggdG8gY29udGludWU/IFRoaXMgYWN0aW9uIGlzIHBlcm1hbmVudCBhbmQgY2Fubm90IGJlIHVuZG9uZS48L2Rpdj48ZGl2IGNsYXNzPVwibW9kYWwtZm9vdGVyXCI+PGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHRcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiPjxoMSBjbGFzcz1cImJ1dHRvblwiPkNhbmNlbDwvaDE+PC9idXR0b24+IDxidXR0b24gdHlwZT1cInN1Ym1pdFwiIGNsYXNzPVwiYnRuIGJ0bi1kYW5nZXJcIiBuZy1jbGljaz1cIiRwYXJlbnQubW9kYWxDb25maXJtKGNvbnRhY3RGb3JtKVwiPkNvbmZpcm08L2J1dHRvbj48L2Rpdj4nKTtcbn1dKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBEYW5ueSBvbiAxMS84LzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKVxuICAuZGlyZWN0aXZlKCdzZWN0aW9uSGVhZGVyJywgZnVuY3Rpb24oJHN0YXRlLCAkd2luZG93LCAkcm9vdFNjb3BlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0IDogJ0UnLFxuICAgICAgdGVtcGxhdGVVcmwgOiAncGFydGlhbHMvc2VjdGlvbi1oZWFkZXIuaHRtbCcsXG4gICAgICBsaW5rIDogZnVuY3Rpb24oc2NvcGUsIGVsZW0sIGF0dHJzKSB7XG4gICAgICAgIC8vc2NvcGUuaGVhZGVyU3R5bGUgPSB7XG4gICAgICAgIC8vICAnYmFja2dyb3VuZC1yZXBlYXQnIDogJ25vLXJlcGVhdCcsXG4gICAgICAgIC8vICAnYmFja2dyb3VuZC1wb3NpdGlvbicgOiAnY2VudGVyJyxcbiAgICAgICAgLy8gICdiYWNrZ3JvdW5kLXNpemUnIDogJ2NvdmVyJ1xuICAgICAgICAvL1xuICAgICAgICAvL307XG4gICAgICAgIC8vc2NvcGUuc3RhdGUgPSAkc3RhdGU7XG4gICAgICAgIC8vdmFyIHdpbmRvd1dpZHRoID0gJHdpbmRvdy5pbm5lcldpZHRoLFxuICAgICAgICAvLyAgc3RhdGVOYW1lO1xuICAgICAgICAvL1xuICAgICAgICAvLy8vIEluIGNhc2Ugb2Ygc2NyZWVuIHJlc2l6ZXMsIG1ha2Ugc3VyZSB3ZSB1c2UgY29ycmVjdCBiYWNrZ3JvdW5kIGltYWdlXG4gICAgICAgIC8vYW5ndWxhci5lbGVtZW50KCR3aW5kb3cpLmJpbmQoJ3Jlc2l6ZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gIHdpbmRvd1dpZHRoID0gJHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgICAvLyAgaWYoc3RhdGVOYW1lICE9ICdob21lJykgZ2V0SGVhZGVySW1hZ2UoKTtcbiAgICAgICAgLy99KTtcbiAgICAgICAgLy9cbiAgICAgICAgLy8kcm9vdFNjb3BlLiRvbihcIiRzdGF0ZUNoYW5nZVN1Y2Nlc3NcIiwgZnVuY3Rpb24oZXZlbnQsIHRvU3RhdGUpIHtcbiAgICAgICAgLy8gIHN0YXRlTmFtZSA9IHRvU3RhdGUubmFtZTtcbiAgICAgICAgLy8gIGlmKHN0YXRlTmFtZSAhPSAnaG9tZScpIGdldEhlYWRlckltYWdlKCk7XG4gICAgICAgIC8vfSk7XG4gICAgICAgIC8vZnVuY3Rpb24gZ2V0SGVhZGVySW1hZ2UoKSB7XG4gICAgICAgIC8vICB2YXIgaW1hZ2VMb2NhdGlvbiA9IHN0YXRlTmFtZSArICctaGVhZGVyLnBuZyc7XG4gICAgICAgIC8vICBpZih3aW5kb3dXaWR0aCA8IDc2OCkgaW1hZ2VMb2NhdGlvbiA9ICdtb2JpbGUtJyArIGltYWdlTG9jYXRpb247XG4gICAgICAgIC8vICBpbWFnZUxvY2F0aW9uID0gJ3VybCguLi9pbWFnZXMvJyArIGltYWdlTG9jYXRpb24gKyAnKSc7XG4gICAgICAgIC8vICBzY29wZS5oZWFkZXJTdHlsZVsnYmFja2dyb3VuZC1pbWFnZSddID0gaW1hZ2VMb2NhdGlvbjtcbiAgICAgICAgLy99XG4gICAgICAgIHNjb3BlLmlzQWN0aXZlID0gZnVuY3Rpb24oc3RhdGUpIHtcbiAgICAgICAgICByZXR1cm4gJHN0YXRlLmN1cnJlbnQubmFtZSA9PSBzdGF0ZTtcbiAgICAgICAgfVxuICAgICAgICBzY29wZS5nb1RvID0gZnVuY3Rpb24oc3RhdGUpIHtcbiAgICAgICAgICAkc3RhdGUuZ28oc3RhdGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3BhcnRpYWxzL21haW4tc2VjdGlvbi5wYXJ0aWFsLmh0bWwnLFxuICAgICc8c2VjdGlvbiBjbGFzcz1cInNlY3Rpb24td2l0aC10b3AtbmF2IGNvbnRhaW5lclwiPjxoMSBjbGFzcz1cImRpc3BsYXktMlwiPnt7c2VjdGlvblRpdGxlfX08L2gxPjxoMiBjbGFzcz1cInN1YmhlYWQtMVwiPnt7c2VjdGlvblN1YlRpdGxlfX08L2gyPjxjb250ZW50LWNvbnRhaW5lciBjb250ZW50LXR5cGU9XCJ7e2NvbnRlbnRUeXBlfX1cIj48L2NvbnRlbnQtY29udGFpbmVyPjwvc2VjdGlvbj4nKTtcbn1dKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBEYW5ueSBvbiAxMC8xMC8xNi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJylcbiAgLmRpcmVjdGl2ZSgnbmF2YmFyJywgZnVuY3Rpb24oJHdpbmRvdywgJHJvb3RTY29wZSwgJHN0YXRlLCAkdGltZW91dCkge1xuICAgIHJldHVybiB7XG4gICAgICBzY29wZTogJ0UnLFxuICAgICAgdGVtcGxhdGVVcmwgOiAncGFydGlhbHMvbmF2YmFyLmh0bWwnLFxuICAgICAgbGluayA6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtLCBhdHRycykge1xuXG4gICAgICAgIC8qXG4gICAgICAgICBBbHdheXMgU2hvdyBOYXZiYXIgb24gbW9iaWxlIHNjcmVlbnNcblxuICAgICAgICAgTW9uaXRvciBXaWR0aCBpbiBjYXNlIG9mIHNjcmVlbiByZXNpemVycyFcblxuICAgICAgICAgSGlkZSBuYXZiYXIgb24gaG9tZSB2aWV3IG5vbi1tb2JpbGVcbiAgICAgICAgICAqL1xuICAgICAgICBzY29wZS5zdGF0ZSA9ICRzdGF0ZTtcblxuICAgICAgICB2YXIgd2luZG93V2lkdGggPSAkd2luZG93LmlubmVyV2lkdGg7XG4gICAgICAgIHNjb3BlLnNob3dOYXZiYXIgPSB0cnVlO1xuXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudCgkd2luZG93KS5iaW5kKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgd2luZG93V2lkdGggPSAkd2luZG93LmlubmVyV2lkdGg7XG4gICAgICAgICAgc2NvcGUuc2hvd05hdmJhciA9ICh3aW5kb3dXaWR0aCA8IDc2OCk7XG4gICAgICAgICAgaWYoc2NvcGUuc3RhdGUuY3VycmVudC5uYW1lID09ICdob21lJyYmIHdpbmRvd1dpZHRoID49IDc2OCApIHdhdGNoSG9tZVNjcm9sbCgpO1xuXG4gICAgICAgIH0pO1xuICAgICAgICAkcm9vdFNjb3BlLiRvbihcIiRzdGF0ZUNoYW5nZVN1Y2Nlc3NcIiwgZnVuY3Rpb24oZXZlbnQsIHRvU3RhdGUpIHtcbiAgICAgICAgICBpZih3aW5kb3dXaWR0aCA8IDc2OCkge1xuICAgICAgICAgICAgc2NvcGUuc2hvd05hdmJhciA9IHRydWU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNjb3BlLnNob3dOYXZiYXIgPSAodG9TdGF0ZS5uYW1lICE9PSAnaG9tZScgJiYgd2luZG93V2lkdGggPj0gNzY4KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYodG9TdGF0ZS5uYW1lID09ICdob21lJyAmJiB3aW5kb3dXaWR0aCA+PSA3NjgpIHdhdGNoSG9tZVNjcm9sbCgpXG4gICAgICAgICAgZWxzZSBhbmd1bGFyLmVsZW1lbnQoJHdpbmRvdykudW5iaW5kKCdzY3JvbGwnKTtcblxuICAgICAgICAgIGlmKHNjb3BlLnN0YXRlLmluY2x1ZGVzKCdkYXNoYm9hcmQnKSkgc2NvcGUuc2hvd05hdmJhciA9IGZhbHNlO1xuICAgICAgICB9KTtcblxuICAgICAgICBzY29wZS5nb1RvID0gZnVuY3Rpb24oc3RhdGUpIHtcbiAgICAgICAgICAkc3RhdGUuZ28oc3RhdGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGhlYWRlckhlaWdodDtcbiAgICAgICAgZnVuY3Rpb24gd2F0Y2hIb21lU2Nyb2xsKCkge1xuICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaGVhZGVySGVpZ2h0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlY3Rpb25IZWFkZXInKS5jbGllbnRIZWlnaHQ7XG4gICAgICAgICAgfSwgMTAwKTtcblxuICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgkd2luZG93KS5iaW5kKFwic2Nyb2xsXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgc2NvcGUuc2hvd05hdmJhciA9ICgkd2luZG93LnNjcm9sbFkgPiBoZWFkZXJIZWlnaHQpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgc2NvcGUuaXNBY3RpdmUgPSBmdW5jdGlvbihzdGF0ZSkge1xuICAgICAgICAgIHJldHVybiAkc3RhdGUuY3VycmVudC5uYW1lID09IHN0YXRlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3BhcnRpYWxzL2hvbWUuaHRtbCcsXG4gICAgJzxzZWN0aW9uLWhlYWRlciBjbGFzcz1cImhpZGRlbi14c1wiPjwvc2VjdGlvbi1oZWFkZXI+PHNlY3Rpb24gY2xhc3M9XCJzZWN0aW9uLXdpdGgtdG9wLW5hdiBjb250YWluZXJcIj48Y29udGVudC1jb250YWluZXIgY29udGVudC10eXBlPVwiaG9tZVwiPjwvY29udGVudC1jb250YWluZXI+PC9zZWN0aW9uPicpO1xufV0pO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IERhbm55IG9uIDEyLzI1LzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKVxuICAgIC5jb250cm9sbGVyKCdMb2dpbk1vZGFsQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSwgJHRpbWVvdXQpIHtcblxuICAgICAgICAkc2NvcGUuZXJyb3JNZXNzYWdlID0gbnVsbDtcbiAgICAgICAgJHNjb3BlLmxvZ2dpbmdJbiA9IGZhbHNlO1xuICAgICAgICAkc2NvcGUubG9naW5Gb3JtID0ge307XG5cblxuICAgICAgICAkc2NvcGUubG9naW4gPSBmdW5jdGlvbihsb2dpbkZvcm0pIHtcbiAgICAgICAgICAgIGlmKCEkc2NvcGUubG9nZ2luZ0luKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmxvZ2dpbmdJbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmKCFsb2dpbkZvcm0uZW1haWwpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yTWVzc2FnZSA9ICdQbGVhc2UgZW50ZXIgeW91ciBlbWFpbC4nXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmKCFsb2dpbkZvcm0ucGFzc3dvcmQpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yTWVzc2FnZSA9ICdQbGVhc2UgZW50ZXIgeW91ciBwYXNzd29yZC4nXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yTWVzc2FnZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxvZ2dpbmdJbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1vZGFsQ29uZmlybShsb2dpbkZvcm0pO1xuICAgICAgICAgICAgICAgICAgICB9LCAzMDAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAkc2NvcGUucmVzZXRMb2dpbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJHNjb3BlLmVycm9yTWVzc2FnZSA9IG51bGw7XG4gICAgICAgICAgICAkc2NvcGUubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgJHNjb3BlLmxvZ2luRm9ybS5lbWFpbCA9IG51bGw7XG4gICAgICAgICAgICAkc2NvcGUubG9naW5Gb3JtLnBhc3N3b3JkID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICAkc2NvcGUucmVzZXRMb2dpbigpO1xuXG4gICAgfSlcbiIsImFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdwYXJ0aWFscy9oYW1idXJnZXItbWVudS5odG1sJyxcbiAgICAnPGRpdiBjbGFzcz1cIm1hdGVyaWFsLWRlc2lnbi1oYW1idXJnZXJcIiBuZy1jbGljaz1cInRvZ2dsZVN0YXRlKClcIj48YnV0dG9uIGNsYXNzPVwibWF0ZXJpYWwtZGVzaWduLWhhbWJ1cmdlcl9faWNvblwiPjxzcGFuIGNsYXNzPVwibWF0ZXJpYWwtZGVzaWduLWhhbWJ1cmdlcl9fbGF5ZXJcIiBuZy1jbGFzcz1cIlxcJ21hdGVyaWFsLWRlc2lnbi1oYW1idXJnZXJfX2ljb24tLVxcJyArIChzdGF0ZSA/IFxcJ3RvXFwnIDogXFwnZnJvbVxcJykgKyBcXCctYXJyb3dcXCdcIj48L3NwYW4+PC9idXR0b24+PC9kaXY+Jyk7XG59XSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgRGFubnkgb24gMTEvNi8xNi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJylcbiAgLmRpcmVjdGl2ZSgnaW1hZ2VTaGFkb3cnLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3QgOiAnQScsXG4gICAgICBsaW5rIDogZnVuY3Rpb24oc2NvcGUsIGVsZW0sIGF0dHJzKSB7XG4gICAgICAgIHZhciBpbWcgPSBlbGVtWzBdO1xuICAgICAgICB2YXIgc3R5bGU7XG4gICAgICAgIHZhciBpbWdTcmM7XG5cbiAgICAgICAgZWxlbS5iaW5kKCdlcnJvcicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGF0dHJzLiRzZXQoJ3NyYycsICcuLi9pbWFnZXMvbG9nby1iYWNrdXAucG5nJyk7XG4gICAgICAgICAgaW1nU3JjID0gJy4uL2ltYWdlcy9sb2dvLWJhY2t1cC5wbmcnO1xuICAgICAgICB9KVxuXG4gICAgICAgIGF0dHJzLiRvYnNlcnZlKCdzcmMnLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgIGltZ1NyYyA9IGF0dHJzLnNyYztcbiAgICAgICAgICBpZihpbWdTcmMgIT0gJy4uL2ltYWdlcy9sb2dvLWJhY2t1cC5wbmcnKSBhZGRTaGFkb3coKTtcbiAgICAgICAgfSlcblxuICAgICAgICBmdW5jdGlvbiBhZGRTaGFkb3coKSB7XG4gICAgICAgICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgIGNvbnRhaW5lci5jbGFzc05hbWUgPSAnaW1hZ2Utc2hhZG93LWNvbnRhaW5lciBpbWFnZS1zaGFkb3cnO1xuICAgICAgICAgIGNvbnRhaW5lci5pZCA9IFwiaW1hZ2Utc2hhZG93LTBcIjtcbiAgICAgICAgICBpbWcuY2xhc3NMaXN0LnJlbW92ZSgnaW1hZ2Utc2hhZG93Jyk7XG4gICAgICAgICAgaW1nLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGNvbnRhaW5lciwgaW1nKTtcbiAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoaW1nKTtcbiAgICAgICAgICBzdHlsZSA9IFwiI2ltYWdlLXNoYWRvdy0wXCIrXCI6OmFmdGVyIHtcIitcbiAgICAgICAgICAgIFwiICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ1wiK2ltZ1NyYytcIicpO1wiK1xuICAgICAgICAgICAgXCIgIGNvbnRlbnQ6ICcnO1wiK1xuICAgICAgICAgICAgXCJ9XCI7XG4gICAgICAgICAgdmFyICRzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcbiAgICAgICAgICAkc3R5bGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoc3R5bGUpKTtcbiAgICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKCRzdHlsZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgncGFydGlhbHMvZGFzaGJvYXJkLndlbGNvbWUuaHRtbCcsXG4gICAgJzxkaXYgY2xhc3M9XCJjb250YWluZXItZmx1aWQgZGFzaGJvYXJkLXdlbGNvbWVcIj48aW1nIHNyYz1cIi4uL2ltYWdlcy9mcmVxdWVuY3lfY3VsdHVyZV9uYW1lX2FuZF9sb2dvX2dyYXkucG5nXCI+PGRpdiBjbGFzcz1cIndlbGNvbWUtdGV4dFwiPjxoMSBjbGFzcz1cImRpc3BsYXktMVwiPkNvbnRlbnQgRWRpdG9yPC9oMT48cCBjbGFzcz1cInNpdGUtYm9keS10ZXh0IGNlbnRlci1ibG9ja1wiPlRvIGJlZ2luIGNvbnRyaWJ1dGluZyBjb250ZW50IHRvIEZyZXF1ZW5jeSBDdWx0dXJlLCBwbGVhc2UgbG9naW4gb3IgcmVxdWVzdCBhY2Nlc3MuPC9wPjx1bCBjbGFzcz1cIndlbGNvbWUtbGlzdFwiPjxsaSBuZy1jbGljaz1cInNob3dMb2dpbk1vZGFsKClcIj48YT5Mb2dpbjwvYT48L2xpPjxsaSBuZy1jbGljaz1cInNob3dDb250YWN0TW9kYWwoKVwiPjxhPlJlcXVlc3QgQWNjZXNzPC9hPjwvbGk+PC91bD48L2Rpdj48L2Rpdj4nKTtcbn1dKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBEYW5ueSBvbiAxMS84LzE2LlxuICovXG5hbmd1bGFyLm1vZHVsZSgnZnJlcUN1bHR1cmVBcHAnKVxuICAuZGlyZWN0aXZlKCdoYW1idXJnZXJNZW51JywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICBzY29wZToge1xuICAgICAgICBzdGF0ZTogJz0nXG4gICAgICB9LFxuICAgICAgdGVtcGxhdGVVcmw6ICdwYXJ0aWFscy9oYW1idXJnZXItbWVudS5odG1sJyxcbiAgICAgIGxpbms6IGZ1bmN0aW9uKCRzY29wZSwgJGVsZW1lbnQsICRhdHRycykge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbmdkb2Mgb2JqZWN0XG4gICAgICAgICAqIEBuYW1lIHRvZ2dsZVN0YXRlXG4gICAgICAgICAqIEBtZXRob2RPZiBuZ0hhbWJ1cmdlci5kaXJlY3RpdmU6aGFtYnVyZ2VyVG9nZ2xlXG4gICAgICAgICAqIEBkZXNjcmlwdGlvbiBUb2dnbGVzIHR3byB3YXkgYm91bmQgbW9kZWwuXG4gICAgICAgICAqL1xuICAgICAgICAkc2NvcGUudG9nZ2xlU3RhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gJHNjb3BlLnN0YXRlID0gISRzY29wZS5zdGF0ZTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9O1xuICB9KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3BhcnRpYWxzL2Rhc2hib2FyZC5wcm9maWxlLmh0bWwnLFxuICAgICc8ZGl2IGNsYXNzPVwiY29udGFpbmVyLWZsdWlkXCI+PGRpdiBjbGFzcz1cImNvbC14cy0xMlwiPjxoMSBjbGFzcz1cImhlYWRsaW5lXCI+UHJvZmlsZTwvaDE+PC9kaXY+PC9kaXY+Jyk7XG59XSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgRGFubnkgb24gMTEvMjgvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpXG4gIC5kaXJlY3RpdmUoJ2NvbnRlbnRIZWFkZXInLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3QgOiAnRScsXG4gICAgICB0ZW1wbGF0ZVVybCA6ICdwYXJ0aWFscy9jb250ZW50LWhlYWRlci5odG1sJyxcbiAgICAgIHNjb3BlIDoge1xuICAgICAgICBzZWxlY3RlZENvbnRlbnQgOiAnPSdcbiAgICAgIH0sXG4gICAgICBsaW5rIDogZnVuY3Rpb24oc2NvcGUsIGVsZW0sIGF0dHJzKSB7XG4gICAgICB9XG4gICAgfVxuICB9KVxuIiwiYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3BhcnRpYWxzL2Rhc2hib2FyZC5jb250ZW50Lmh0bWwnLFxuICAgICc8ZGl2IGNsYXNzPVwiY29udGFpbmVyLWZsdWlkXCI+PGRpdiBjbGFzcz1cImNvbC14cy0xMlwiPjxoMSBjbGFzcz1cImhlYWRsaW5lXCI+Q29udGVudDwvaDE+PC9kaXY+PC9kaXY+Jyk7XG59XSk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgRGFubnkgb24gMTEvMjIvMTYuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpXG4gIC5kaXJlY3RpdmUoJ2NvbnRlbnRDb250YWluZXInLCBmdW5jdGlvbihDb250ZW50U2VydmljZSwgJHJvb3RTY29wZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aW1lb3V0LCAkc3RhdGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3QgOiAnRScsXG4gICAgICBzY29wZSA6IHtcbiAgICAgICAgY29udGVudFR5cGUgOiAnQCdcbiAgICAgIH0sXG4gICAgICB0ZW1wbGF0ZVVybCA6ICdwYXJ0aWFscy9jb250ZW50LWNvbnRhaW5lci5odG1sJyxcbiAgICAgIGxpbmsgOiBmdW5jdGlvbihzY29wZSwgZWxlbSwgYXR0cnMpIHtcbiAgICAgICAgQ29udGVudFNlcnZpY2UuZ2V0Q29udGVudCgpXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24oY29udGVudCkge1xuICAgICAgICAgICAgYnVpbGRDb250ZW50KGNvbnRlbnQpXG4gICAgICAgICAgfSlcblxuICAgICAgICAvL3Njb3BlLnNob3dIZXJvID0gZmFsc2U7XG4gICAgICAgIC8vJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vICBjb25zb2xlLmxvZygnc2hvdyBoZXJvIScpO1xuICAgICAgICAvLyAgc2NvcGUuc2hvd0hlcm8gPSB0cnVlO1xuICAgICAgICAvL30sMTAwKTtcbiAgICAgICAgICBjb25zb2xlLmxvZygnc2NvcGU6ICcsIHNjb3BlLmNvbnRlbnRUeXBlKTtcbiAgICAgICAgZnVuY3Rpb24gYnVpbGRDb250ZW50KGFsbENvbnRlbnQpIHtcbiAgICAgICAgICBpZihzY29wZS5jb250ZW50VHlwZSA9PSAnaG9tZScpIHtcbiAgICAgICAgICAgIHNjb3BlLmNvbnRlbnQgPSBhbGxDb250ZW50O1xuICAgICAgICAgICAgYnVpbGRIZXJvKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNjb3BlLmNvbnRlbnQgPSBbXTtcbiAgICAgICAgICAgIGZvcih2YXIgYz0wO2M8YWxsQ29udGVudC5sZW5ndGg7YysrKSB7XG4gICAgICAgICAgICAgIGlmKGFsbENvbnRlbnRbY10uY29udGVudFR5cGUgPT0gc2NvcGUuY29udGVudFR5cGUpIHtcbiAgICAgICAgICAgICAgICBzY29wZS5jb250ZW50LnB1c2goYWxsQ29udGVudFtjXSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnVpbGRIZXJvKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cblxuICAgICAgICBmdW5jdGlvbiBidWlsZEhlcm8oKSB7XG4gICAgICAgICAgc2NvcGUuaGVyb0NvbnRlbnQgPSBbXTtcbiAgICAgICAgICB2YXIgbGltaXQgPSAzO1xuICAgICAgICAgIGlmKHNjb3BlLmNvbnRlbnQubGVuZ3RoIDwgMykge1xuICAgICAgICAgICAgbGltaXQgPSBzY29wZS5jb250ZW50Lmxlbmd0aDtcbiAgICAgICAgICB9XG4gICAgICAgICAgZm9yKHZhciBjPTA7YzxsaW1pdDtjKyspIHtcbiAgICAgICAgICAgIHNjb3BlLmhlcm9Db250ZW50LnB1c2goc2NvcGUuY29udGVudFtjXSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHNjb3BlLnNob3dIZXJvID0gKHNjb3BlLmhlcm9Db250ZW50Lmxlbmd0aCA+IDApXG4gICAgICAgIH1cblxuICAgICAgICAkcm9vdFNjb3BlLiRvbihcIiRzdGF0ZUNoYW5nZVN0YXJ0XCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNjb3BlLnNob3dIZXJvID0gZmFsc2U7XG4gICAgICAgIH0pXG5cbiAgICAgICAgJHJvb3RTY29wZS4kb24oXCIkc3RhdGVDaGFuZ2VTdWNjZXNzXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3Nob3cgaGVybyEnKTtcbiAgICAgICAgICAgIHNjb3BlLnNob3dIZXJvID0gdHJ1ZTtcbiAgICAgICAgICB9LDIwMClcbiAgICAgICAgfSlcblxuICAgICAgICBzY29wZS5nb1RvID0gZnVuY3Rpb24oY29udGVudCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2NvbnRlbnQ6ICcsIGNvbnRlbnQpO1xuICAgICAgICAgIGlmKGNvbnRlbnQuY2xhc3MgPT0gJ2NyZWF0b3Itc2VyaWVzJykge1xuICAgICAgICAgICAgY29udGVudC5jbGFzcyA9ICd2aWV3LWNyZWF0b3Itc2VyaWVzJ1xuICAgICAgICAgIH1cbiAgICAgICAgICBDb250ZW50U2VydmljZS5zZXRTZWxlY3RlZChjb250ZW50KTtcbiAgICAgICAgICAkc3RhdGUuZ28oJ2NvbnRlbnQnLCB7Y29udGVudFR5cGU6IGNvbnRlbnQuY29udGVudFR5cGUsIGNvbnRlbnRVcmwgOiBjb250ZW50LnVybH0pXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgIH1cbiAgfSlcbiIsImFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdwYXJ0aWFscy9kYXNoYm9hcmQuYWRtaW4uaHRtbCcsXG4gICAgJzxkaXYgY2xhc3M9XCJjb250YWluZXItZmx1aWQgZGFzaGJvYXJkLWFkbWluXCI+PGRpdiBjbGFzcz1cInNpdGUtY2FyZCBhZG1pbi1jYXJkIGNvbC14cy01IGxpc3QtY2FyZFwiPjxoZWFkZXI+PGgxIGNsYXNzPVwic3ViaGVhZC0yXCI+VGVhbSBNZW1iZXJzPC9oMT48aSBjbGFzcz1cImZhIGZhLXBsdXMtY2lyY2xlXCIgbmctY2xpY2s9XCJzaG93TWVtYmVyQ2FyZChcXCduZXdcXCcpXCI+PC9pPjwvaGVhZGVyPjx1bCBjbGFzcz1cInRlYW0tbGlzdFwiPjxsaSBuZy1yZXBlYXQ9XCJtZW1iZXIgaW4gdGVhbU1lbWJlcnNcIiBuZy1jbGljaz1cImVkaXRNZW1iZXIobWVtYmVyKVwiPjxmaWd1cmUgY2xhc3M9XCJtZW1iZXItaW5pdGFsc1wiPjxoMSBjbGFzcz1cInN1YmhlYWQtMlwiPnt7bWVtYmVyLmZpcnN0TmFtZS5jaGFyQXQoMCl9fXt7bWVtYmVyLmxhc3ROYW1lLmNoYXJBdCgwKX19PC9oMT48L2ZpZ3VyZT48ZGl2IGNsYXNzPVwibWVtYmVyLWluZm9cIj48aDEgY2xhc3M9XCJzdWJoZWFkLTJcIj57e21lbWJlci5maXJzdE5hbWV9fSB7e21lbWJlci5sYXN0TmFtZX19PC9oMT48aDIgY2xhc3M9XCJib2R5LTFcIj57e21lbWJlci5lbWFpbH19PC9oMj48aDMgY2xhc3M9XCJjYXB0aW9uXCI+Um9sZTogPHNwYW4+e3ttZW1iZXIucm9sZX19PC9zcGFuPjwvaDM+PC9kaXY+PGRpdiBjbGFzcz1cIm1lbWJlci1lZGl0XCI+PGkgY2xhc3M9XCJmYSBmYS1wZW5jaWxcIj48L2k+PC9kaXY+PC9saT48L3VsPjxkaXYgY2xhc3M9XCJ0ZWFtLWxpc3QtY292ZXJcIiBuZy1pZj1cInRlYW1NZW1iZXJzLmxlbmd0aCA+IDhcIj48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPVwic2l0ZS1jYXJkIGFkbWluLWNhcmQgY29sLXhzLTYgY29sLXhzLW9mZnNldC0xXCIgbmctc2hvdz1cInNpZGVNZW1iZXJDYXJkXCI+PGhlYWRlcj48aDEgY2xhc3M9XCJzdWJoZWFkLTJcIj57e3NpZGVNZW1iZXJDYXJkID09IFxcJ25ld1xcJyA/IFxcJ05ld1xcJyA6IFxcJ0VkaXRcXCd9fSBNZW1iZXI8L2gxPjxpIGNsYXNzPVwiZmEgZmEtdGltZXMtY2lyY2xlLW9cIiBuZy1jbGljaz1cInNob3dNZW1iZXJDYXJkKG51bGwpXCI+PC9pPjwvaGVhZGVyPjxmb3JtIHJvbGU9XCJmb3JtXCIgbm92YWxpZGF0ZSBuYW1lPVwibWVtYmVyRm9ybVwiPjxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+PGxhYmVsIGZvcj1cImZpcnN0TmFtZVwiIGNsYXNzPVwibGFiZWxcIj5GaXJzdCBOYW1lPC9sYWJlbD48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIGlkPVwiZmlyc3ROYW1lXCIgcGxhY2Vob2xkZXI9XCJGaXJzdCBOYW1lXCIgbmctbW9kZWw9XCJtZW1iZXJGb3JtLmZpcnN0TmFtZVwiPjwvZGl2PjxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+PGxhYmVsIGZvcj1cImxhc3ROYW1lXCIgY2xhc3M9XCJsYWJlbFwiPkxhc3QgTmFtZTwvbGFiZWw+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBwbGFjZWhvbGRlcj1cIkxhc3QgTmFtZVwiIGlkPVwibGFzdE5hbWVcIiBuZy1tb2RlbD1cIm1lbWJlckZvcm0ubGFzdE5hbWVcIj48L2Rpdj48ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPjxsYWJlbCBmb3I9XCJlbWFpbFwiIGNsYXNzPVwibGFiZWxcIj5FbWFpbDwvbGFiZWw+PGlucHV0IHR5cGU9XCJlbWFpbFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgaWQ9XCJlbWFpbFwiIHBsYWNlaG9sZGVyPVwiRW1haWxcIiBuZy1tb2RlbD1cIm1lbWJlckZvcm0uZW1haWxcIj48L2Rpdj48ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPjxsYWJlbCBmb3I9XCJtZW1iZXJSb2xlc1wiIGNsYXNzPVwibGFiZWxcIj5Sb2xlPC9sYWJlbD48dWwgY2xhc3M9XCJhZG1pbi1yb2xlc1wiIGlkPVwibWVtYmVyUm9sZXNcIj48bGkgbmctY2xpY2s9XCJtZW1iZXJGb3JtLnJvbGUgPSBcXCdTdXBlckFkbWluXFwnXCIgbmctY2xhc3M9XCJ7XFwnc2VsZWN0ZWRcXCcgOiBtZW1iZXJGb3JtLnJvbGUgPT0gXFwnU3VwZXJBZG1pblxcJ31cIj48aDEgY2xhc3M9XCJib2R5LTJcIj5TdXBlcjwvaDE+PC9saT48bGkgbmctY2xpY2s9XCJtZW1iZXJGb3JtLnJvbGUgPSBcXCdBZG1pblxcJ1wiIG5nLWNsYXNzPVwie1xcJ3NlbGVjdGVkXFwnIDogbWVtYmVyRm9ybS5yb2xlID09IFxcJ0FkbWluXFwnfVwiPjxoMSBjbGFzcz1cImJvZHktMlwiPkFkbWluPC9oMT48L2xpPjxsaSBuZy1jbGljaz1cIm1lbWJlckZvcm0ucm9sZSA9IFxcJ0VkaXRvclxcJ1wiIG5nLWNsYXNzPVwie1xcJ3NlbGVjdGVkXFwnIDogbWVtYmVyRm9ybS5yb2xlID09IFxcJ0VkaXRvclxcJ31cIj48aDEgY2xhc3M9XCJib2R5LTJcIj5FZGl0b3I8L2gxPjwvbGk+PC91bD48L2Rpdj48L2Zvcm0+PGZvb3Rlcj48ZGl2IGNsYXNzPVwiYWRtaW4tZm9vdGVyLWV4dHJhc1wiPjxoMSBjbGFzcz1cInRpdGxlXCIgbmctaWY9XCJhZG1pbkVycm9yTWVzc2FnZVwiPnt7YWRtaW5FcnJvck1lc3NhZ2V9fTwvaDE+PGkgY2xhc3M9XCJmYSBmYS1zcGlubmVyIGZhLXNwaW5cIiBuZy1pZj1cIiFhZG1pbkVycm9yTWVzc2FnZSAmJiBzYXZpbmdcIj48L2k+PC9kaXY+PGRpdj48YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGFuZ2VyXCIgbmctaWY9XCJzaWRlTWVtYmVyQ2FyZCA9PSBcXCdlZGl0XFwnXCIgbmctY2xpY2s9XCJkZWxldGUobWVtYmVyRm9ybSlcIj5EZWxldGU8L2J1dHRvbj4gPGJ1dHRvbiB0eXBlPVwic3VibWl0XCIgY2xhc3M9XCJidG4gcHVycGxlLWJ1dHRvblwiIG5nLWNsaWNrPVwic2F2ZShtZW1iZXJGb3JtKVwiPjxoMSBjbGFzcz1cImJ1dHRvblwiPnt7c2lkZU1lbWJlckNhcmQgPT0gXFwnbmV3XFwnID8gXFwnQ3JlYXRlXFwnIDogXFwnU2F2ZVxcJ319PC9oMT48L2J1dHRvbj48L2Rpdj48L2Zvb3Rlcj48L2Rpdj48L2Rpdj4nKTtcbn1dKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBEYW5ueSBvbiAxMi8xNS8xNi5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJylcbiAgICAuY29uZmlnKGZ1bmN0aW9uICgkbG9jYXRpb25Qcm92aWRlciwgJHN0YXRlUHJvdmlkZXIsICAkdXJsUm91dGVyUHJvdmlkZXIsXG4gICAgICAgICAgICAgICAgICAgICAgJHVybE1hdGNoZXJGYWN0b3J5UHJvdmlkZXIpIHtcblxuICAgICAgICAkdXJsTWF0Y2hlckZhY3RvcnlQcm92aWRlci5jYXNlSW5zZW5zaXRpdmUodHJ1ZSk7XG4gICAgICAgICR1cmxNYXRjaGVyRmFjdG9yeVByb3ZpZGVyLnN0cmljdE1vZGUoZmFsc2UpO1xuICAgICAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvJyk7XG5cbiAgICAgICAgJHN0YXRlUHJvdmlkZXJcbiAgICAgICAgICAgIC5zdGF0ZSgnaG9tZScsIHtcbiAgICAgICAgICAgICAgICB1cmwgOiAnLycsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlciA6ICdIb21lQ3RybCcsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiAncGFydGlhbHMvaG9tZS5odG1sJ1xuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgLnN0YXRlKCdzb3VuZCcsIHtcbiAgICAgICAgICAgICAgICB1cmwgOiAnL3NvdW5kJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyIDogJ01haW5TZWN0aW9uQ3RybCcsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiAncGFydGlhbHMvbWFpbi1zZWN0aW9uLnBhcnRpYWwuaHRtbCcsXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSA6IHtcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvblRpdGxlIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ1NvdW5kJztcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvblN1YlRpdGxlIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ1NvdW5kIHNlY3Rpb24nXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3NvdW5kJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgLnN0YXRlKCdmaWxtJywge1xuICAgICAgICAgICAgICAgIHVybCA6ICcvZmlsbScsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlciA6ICdNYWluU2VjdGlvbkN0cmwnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsIDogJ3BhcnRpYWxzL21haW4tc2VjdGlvbi5wYXJ0aWFsLmh0bWwnLFxuICAgICAgICAgICAgICAgIHJlc29sdmUgOiB7XG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb25UaXRsZSA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdGaWxtJztcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvblN1YlRpdGxlIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ0ZpbG0gc2VjdGlvbidcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGUgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnZmlsbSdcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIC5zdGF0ZSgnZmFzaGlvbicsIHtcbiAgICAgICAgICAgICAgICB1cmwgOiAnL2Zhc2hpb24nLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIgOiAnTWFpblNlY3Rpb25DdHJsJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybCA6ICdwYXJ0aWFscy9tYWluLXNlY3Rpb24ucGFydGlhbC5odG1sJyxcbiAgICAgICAgICAgICAgICByZXNvbHZlIDoge1xuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uVGl0bGUgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnRmFzaGlvbic7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb25TdWJUaXRsZSA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdGYXNoaW9uIHNlY3Rpb24nXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2Zhc2hpb24nXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAuc3RhdGUoJ2N1bHR1cmUnLCB7XG4gICAgICAgICAgICAgICAgdXJsIDogJy9jdWx0dXJlJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyIDogJ01haW5TZWN0aW9uQ3RybCcsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiAncGFydGlhbHMvbWFpbi1zZWN0aW9uLnBhcnRpYWwuaHRtbCcsXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSA6IHtcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvblRpdGxlIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ0N1bHR1cmUnO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uU3ViVGl0bGUgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnQ3VsdHVyZSBzZWN0aW9uJ1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZSA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdjdWx0dXJlJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcblxuXG5cbiAgICAgICAgICAgIC5zdGF0ZSgnYWRtaW4nLCB7XG4gICAgICAgICAgICAgICAgdXJsIDogJy9hZG1pbicsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiAncGFydGlhbHMvdmlldy5hZG1pbi5odG1sJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyIDogJ0FkbWluQ3RybCdcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIC5zdGF0ZSgnZGFzaGJvYXJkJywge1xuICAgICAgICAgICAgICAgIHVybCA6ICcvZGFzaGJvYXJkJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybCA6ICdwYXJ0aWFscy92aWV3LmRhc2hib2FyZC5odG1sJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyIDogJ0Rhc2hib2FyZEN0cmwnLFxuICAgICAgICAgICAgICAgIGFic3RyYWN0IDogdHJ1ZVxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgLnN0YXRlKCdkYXNoYm9hcmQud2VsY29tZScsIHtcbiAgICAgICAgICAgICAgICB1cmwgOiAnJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybCA6ICdwYXJ0aWFscy9kYXNoYm9hcmQud2VsY29tZS5odG1sJyxcbiAgICAgICAgICAgICAgICBkYXRhIDoge1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZVRpdGxlIDogJ1dlbGNvbWUnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgLnN0YXRlKCdkYXNoYm9hcmQuYWRtaW4nLCB7XG4gICAgICAgICAgICAgICAgdXJsIDogJy9hZG1pbicsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiAncGFydGlhbHMvZGFzaGJvYXJkLmFkbWluLmh0bWwnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIgOiAnQWRtaW5DdHJsJyxcbiAgICAgICAgICAgICAgICBkYXRhIDoge1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZVRpdGxlIDogJ0FkbWluJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIC5zdGF0ZSgnZGFzaGJvYXJkLnByb2ZpbGUnLCB7XG4gICAgICAgICAgICAgICAgdXJsIDogJy9wcm9maWxlJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybCA6ICdwYXJ0aWFscy9kYXNoYm9hcmQucHJvZmlsZS5odG1sJyxcbiAgICAgICAgICAgICAgICBkYXRhIDoge1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZVRpdGxlIDogJ1Byb2ZpbGUnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgLnN0YXRlKCdkYXNoYm9hcmQuY29udGVudCcsIHtcbiAgICAgICAgICAgICAgICB1cmwgOiAnL2NvbnRlbnQnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsIDogJ3BhcnRpYWxzL2Rhc2hib2FyZC5jb250ZW50Lmh0bWwnLFxuICAgICAgICAgICAgICAgIGRhdGEgOiB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlVGl0bGUgOiAnQ29udGVudCdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAuc3RhdGUoJ2Fib3V0Jywge1xuICAgICAgICAgICAgICAgIHVybCA6ICcvYWJvdXQnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsIDogJ3BhcnRpYWxzL2Fib3V0Lmh0bWwnXG4gICAgICAgICAgICB9KVxuXG5cblxuICAgICAgICAgICAgLnN0YXRlKCdjb250ZW50Jywge1xuICAgICAgICAgICAgICAgIHVybCA6ICcvOmNvbnRlbnRUeXBlLzpjb250ZW50VXJsJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybCA6ICdwYXJ0aWFscy92aWV3LmNvbnRlbnQuaHRtbCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlciA6ICdWaWV3Q29udGVudEN0cmwnXG4gICAgICAgICAgICB9KVxuXG5cbiAgICAgICAgJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpLmhhc2hQcmVmaXgoJyEnKTtcblxuICAgIH0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3BhcnRpYWxzL2NvbnRlbnQtaGVhZGVyLmh0bWwnLFxuICAgICc8aGVhZGVyIGNsYXNzPVwiY29udGVudC1oZWFkZXJcIj48aDEgY2xhc3M9XCJkaXNwbGF5LTJcIj57e3NlbGVjdGVkQ29udGVudC50aXRsZX19PC9oMT48aDEgY2xhc3M9XCJzdWJoZWFkLTJcIiBuZy1pZj1cInNlbGVjdGVkQ29udGVudC5hdXRob3JcIj5CeSB7e3NlbGVjdGVkQ29udGVudC5hdXRob3J9fTwvaDE+PGRpdiBjbGFzcz1cImhlYWRlci1pbWFnZVwiIG5nLXN0eWxlPVwie1xcJ2JhY2tncm91bmQtaW1hZ2VcXCcgOiBcXCd1cmwoXFwnICsgc2VsZWN0ZWRDb250ZW50LmhlYWRlckltYWdlICsgXFwnKVxcJ31cIj48L2Rpdj48dWwgY2xhc3M9XCJoZWFkZXItaW5mb1wiPjxsaT48aDIgY2xhc3M9XCJ0ZXh0LWNhcGl0YWxpemUgc3ViaGVhZC0xXCI+e3tzZWxlY3RlZENvbnRlbnQuY29udGVudFR5cGV9fTwvaDI+PC9saT48bGk+PGgyIGNsYXNzPVwiY2FwdGlvblwiPnt7c2VsZWN0ZWRDb250ZW50LnB1Ymxpc2hlZERhdGUgfCBkYXRlIDogXFwnRUVFRSwgTU1NTSBkLCB5XFwnfX08L2gyPjwvbGk+PC91bD48L2hlYWRlcj4nKTtcbn1dKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBEYW5ueSBvbiAxMi8xNS8xNi5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJylcbiAgICAuY29uZmlnKGZ1bmN0aW9uKHBsYW5ndWxhckNvbmZpZ1Byb3ZpZGVyKSB7XG4gICAgICAgIHBsYW5ndWxhckNvbmZpZ1Byb3ZpZGVyLmNsaWVudElkID0gJ29lclhmNm5CY0R1NUNvTmRhT3JJR3V0VkNLWFBZdlNCJ1xuICAgIH0pO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IERhbm55IG9uIDEvMjkvMTcuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpXG4gICAgLnJ1bihmdW5jdGlvbigkcm9vdFNjb3BlLCAkc3RhdGUsIE1vZGFsU2VydmljZSwgU2lnbnVwU2VydmljZSkge1xuICAgICAgICAkcm9vdFNjb3BlLnNob3dTaXRlID0gZmFsc2U7XG4gICAgICAgICRyb290U2NvcGUuJHN0YXRlID0gJHN0YXRlO1xuICAgICAgICAkcm9vdFNjb3BlLnNob3dTaWdudXAgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIE1vZGFsU2VydmljZS5vcGVuTW9kYWwoJ3NpZ251cCcsICdLaW5ldGlrIE1hZyBFYXJseSBBY2Nlc3MnKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKG1vZGFsRGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncHJvbWlzZSB0byBjb250YWN0IScsIG1vZGFsRGF0YSlcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZvcm1EYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3ROYW1lIDogbW9kYWxEYXRhLmZpcnN0TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsIDogbW9kYWxEYXRhLmVtYWlsLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSA6ICdFYXJseUFjY2VzcydcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBTaWdudXBTZXJ2aWNlLm5ld1NpZ251cChmb3JtRGF0YSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Jlc3BvbnNlOiAnLCByZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnI6ICcsIGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnIG5vIHZhbHVlJyk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgfSlcbiIsImFuZ3VsYXIubW9kdWxlKCdmcmVxQ3VsdHVyZUFwcCcpLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdwYXJ0aWFscy9jb250ZW50LWNvbnRhaW5lci5odG1sJyxcbiAgICAnPHNlY3Rpb24gY2xhc3M9XCJjb250ZW50LWNvbnRhaW5lclwiPjxkaXYgY2xhc3M9XCJoZXJvLWNvbnRhaW5lclwiPjxzbGljayBpbmZpbml0ZT1cInRydWVcIiBzbGlkZXMtdG8tc2hvdz1cIjFcIiBzbGlkZXMtdG8tc2Nyb2xsPVwiMVwiIGFycm93cz1cImZhbHNlXCIgYXV0b3BsYXk9XCJ0cnVlXCIgY2xhc3M9XCJjb2wteHMtMTIgaGVyby1jb250ZW50XCIgcGF1c2Utb24taG92ZXI9XCJ0cnVlXCIgYXV0b3BsYXktc3BlZWQ9XCIzMDAwXCIgbmctY2xhc3M9XCJ7XFwnc2hvdy1oZXJvXFwnIDogc2hvd0hlcm99XCI+PGRpdiBjbGFzcz1cImhlcm8tc2xpZGVcIiBuZy1yZXBlYXQ9XCJoZXJvSXRlbSBpbiBoZXJvQ29udGVudCB0cmFjayBieSAkaW5kZXhcIiBuZy1zdHlsZT1cIntcXCdiYWNrZ3JvdW5kLWltYWdlXFwnIDogXFwndXJsKFxcJyArIGhlcm9JdGVtLmhlYWRlckltYWdlICsgXFwnKVxcJ31cIiBuZy1jbGljaz1cImdvVG8oaGVyb0l0ZW0pXCI+PGRpdiBjbGFzcz1cImhlcm8tZm9vdGVyXCI+PGRpdiBjbGFzcz1cImhlcm8taW5mb1wiPjxoMT57e2hlcm9JdGVtLnRpdGxlfX08L2gxPjxwIGNsYXNzPVwic2l0ZS1ib2R5LXRleHRcIj57e2hlcm9JdGVtLnN1YlRpdGxlfX08L3A+PC9kaXY+PHVsPjxsaT5SZWFkIE5vdzwvbGk+PGxpIGNsYXNzPVwie3toZXJvSXRlbS5jb250ZW50VHlwZX19LWNvbnRlbnRcIj57e2hlcm9JdGVtLmNvbnRlbnRUeXBlfX08L2xpPjwvdWw+PC9kaXY+PC9kaXY+PC9zbGljaz48L2Rpdj48ZGl2IG5nLXJlcGVhdD1cInN1YkNvbnRlbnQgaW4gY29udGVudCB0cmFjayBieSAkaW5kZXhcIiBjbGFzcz1cInN1Yi1jb250ZW50IGNvbC14cy0xMiBjb2wtbWQtNlwiIG5nLXN0eWxlPVwie1xcJ2JhY2tncm91bmQtaW1hZ2VcXCcgOiBcXCd1cmwoXFwnICtzdWJDb250ZW50LmhlYWRlckltYWdlICsgXFwnKVxcJ31cIiBuZy1pZj1cIiRpbmRleCA+IDJcIiBuZy1jbGljaz1cImdvVG8oc3ViQ29udGVudClcIj48ZGl2IGNsYXNzPVwiY29udGVudC1mb290ZXJcIj48ZGl2IGNsYXNzPVwiY29udGVudC1pbmZvXCI+PGgxPnt7c3ViQ29udGVudC50aXRsZX19PC9oMT48L2Rpdj48dWw+PGxpPlJlYWQgTm93PC9saT48bGkgY2xhc3M9XCJ7e3N1YkNvbnRlbnQuY29udGVudFR5cGV9fS1jb250ZW50XCI+e3tzdWJDb250ZW50LmNvbnRlbnRUeXBlfX08L2xpPjwvdWw+PC9kaXY+PC9kaXY+PC9zZWN0aW9uPicpO1xufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3BhcnRpYWxzL2Fib3V0Lmh0bWwnLFxuICAgICc8c2VjdGlvbiBjbGFzcz1cInNlY3Rpb24td2l0aC10b3AtbmF2IGNvbnRhaW5lclwiPjxoMiBjbGFzcz1cInNpdGUtYm9keS10aXRsZVwiPkFib3V0IENvbnRlbnQ8L2gyPjxwIGNsYXNzPVwic2l0ZS1ib2R5LXRleHRcIj5XZWxsLCB0aGUgd2F5IHRoZXkgbWFrZSBzaG93cyBpcywgdGhleSBtYWtlIG9uZSBzaG93LiBUaGF0IHNob3dcXCdzIGNhbGxlZCBhIHBpbG90LiBUaGVuIHRoZXkgc2hvdyB0aGF0IHNob3cgdG8gdGhlIHBlb3BsZSB3aG8gbWFrZSBzaG93cywgYW5kIG9uIHRoZSBzdHJlbmd0aCBvZiB0aGF0IG9uZSBzaG93IHRoZXkgZGVjaWRlIGlmIHRoZXlcXCdyZSBnb2luZyB0byBtYWtlIG1vcmUgc2hvd3MuIFNvbWUgcGlsb3RzIGdldCBwaWNrZWQgYW5kIGJlY29tZSB0ZWxldmlzaW9uIHByb2dyYW1zLiBTb21lIGRvblxcJ3QsIGJlY29tZSBub3RoaW5nLiBTaGUgc3RhcnJlZCBpbiBvbmUgb2YgdGhlIG9uZXMgdGhhdCBiZWNhbWUgbm90aGluZy48L3A+PC9zZWN0aW9uPicpO1xufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2ZyZXFDdWx0dXJlQXBwJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJzQwNC5odG1sJyxcbiAgICAnPCFkb2N0eXBlIGh0bWw+PGh0bWwgbGFuZz1cImVuXCI+PGhlYWQ+PG1ldGEgY2hhcnNldD1cInV0Zi04XCI+PHRpdGxlPlBhZ2UgTm90IEZvdW5kIDooPC90aXRsZT48c3R5bGU+OjotbW96LXNlbGVjdGlvbiB7XFxuJyArXG4gICAgJyAgICBiYWNrZ3JvdW5kOiAjYjNkNGZjO1xcbicgK1xuICAgICcgICAgdGV4dC1zaGFkb3c6IG5vbmU7XFxuJyArXG4gICAgJ31cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJzo6c2VsZWN0aW9uIHtcXG4nICtcbiAgICAnICAgIGJhY2tncm91bmQ6ICNiM2Q0ZmM7XFxuJyArXG4gICAgJyAgICB0ZXh0LXNoYWRvdzogbm9uZTtcXG4nICtcbiAgICAnfVxcbicgK1xuICAgICdcXG4nICtcbiAgICAnaHRtbCB7XFxuJyArXG4gICAgJyAgICBwYWRkaW5nOiAzMHB4IDEwcHg7XFxuJyArXG4gICAgJyAgICBmb250LXNpemU6IDIwcHg7XFxuJyArXG4gICAgJyAgICBsaW5lLWhlaWdodDogMS40O1xcbicgK1xuICAgICcgICAgY29sb3I6ICM3MzczNzM7XFxuJyArXG4gICAgJyAgICBiYWNrZ3JvdW5kOiAjZjBmMGYwO1xcbicgK1xuICAgICcgICAgLXdlYmtpdC10ZXh0LXNpemUtYWRqdXN0OiAxMDAlO1xcbicgK1xuICAgICcgICAgLW1zLXRleHQtc2l6ZS1hZGp1c3Q6IDEwMCU7XFxuJyArXG4gICAgJ31cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJ2h0bWwsXFxuJyArXG4gICAgJ2lucHV0IHtcXG4nICtcbiAgICAnICAgIGZvbnQtZmFtaWx5OiBcIkhlbHZldGljYSBOZXVlXCIsIEhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWY7XFxuJyArXG4gICAgJ31cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJ2JvZHkge1xcbicgK1xuICAgICcgICAgbWF4LXdpZHRoOiA1MDBweDtcXG4nICtcbiAgICAnICAgIHBhZGRpbmc6IDMwcHggMjBweCA1MHB4O1xcbicgK1xuICAgICcgICAgYm9yZGVyOiAxcHggc29saWQgI2IzYjNiMztcXG4nICtcbiAgICAnICAgIGJvcmRlci1yYWRpdXM6IDRweDtcXG4nICtcbiAgICAnICAgIG1hcmdpbjogMCBhdXRvO1xcbicgK1xuICAgICcgICAgYm94LXNoYWRvdzogMCAxcHggMTBweCAjYTdhN2E3LCBpbnNldCAwIDFweCAwICNmZmY7XFxuJyArXG4gICAgJyAgICBiYWNrZ3JvdW5kOiAjZmNmY2ZjO1xcbicgK1xuICAgICd9XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICdoMSB7XFxuJyArXG4gICAgJyAgICBtYXJnaW46IDAgMTBweDtcXG4nICtcbiAgICAnICAgIGZvbnQtc2l6ZTogNTBweDtcXG4nICtcbiAgICAnICAgIHRleHQtYWxpZ246IGNlbnRlcjtcXG4nICtcbiAgICAnfVxcbicgK1xuICAgICdcXG4nICtcbiAgICAnaDEgc3BhbiB7XFxuJyArXG4gICAgJyAgICBjb2xvcjogI2JiYjtcXG4nICtcbiAgICAnfVxcbicgK1xuICAgICdcXG4nICtcbiAgICAnaDMge1xcbicgK1xuICAgICcgICAgbWFyZ2luOiAxLjVlbSAwIDAuNWVtO1xcbicgK1xuICAgICd9XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICdwIHtcXG4nICtcbiAgICAnICAgIG1hcmdpbjogMWVtIDA7XFxuJyArXG4gICAgJ31cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJ3VsIHtcXG4nICtcbiAgICAnICAgIHBhZGRpbmc6IDAgMCAwIDQwcHg7XFxuJyArXG4gICAgJyAgICBtYXJnaW46IDFlbSAwO1xcbicgK1xuICAgICd9XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcuY29udGFpbmVyIHtcXG4nICtcbiAgICAnICAgIG1heC13aWR0aDogMzgwcHg7XFxuJyArXG4gICAgJyAgICBtYXJnaW46IDAgYXV0bztcXG4nICtcbiAgICAnfVxcbicgK1xuICAgICdcXG4nICtcbiAgICAnLyogZ29vZ2xlIHBvc3Nlc3Npb25zLXNlYXJjaCAqL1xcbicgK1xuICAgICdcXG4nICtcbiAgICAnI2dvb2ctZml4dXJsIHVsIHtcXG4nICtcbiAgICAnICAgIGxpc3Qtc3R5bGU6IG5vbmU7XFxuJyArXG4gICAgJyAgICBwYWRkaW5nOiAwO1xcbicgK1xuICAgICcgICAgbWFyZ2luOiAwO1xcbicgK1xuICAgICd9XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcjZ29vZy1maXh1cmwgZm9ybSB7XFxuJyArXG4gICAgJyAgICBtYXJnaW46IDA7XFxuJyArXG4gICAgJ31cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyNnb29nLXdtLXF0LFxcbicgK1xuICAgICcjZ29vZy13bS1zYiB7XFxuJyArXG4gICAgJyAgICBib3JkZXI6IDFweCBzb2xpZCAjYmJiO1xcbicgK1xuICAgICcgICAgZm9udC1zaXplOiAxNnB4O1xcbicgK1xuICAgICcgICAgbGluZS1oZWlnaHQ6IG5vcm1hbDtcXG4nICtcbiAgICAnICAgIHZlcnRpY2FsLWFsaWduOiB0b3A7XFxuJyArXG4gICAgJyAgICBjb2xvcjogIzQ0NDtcXG4nICtcbiAgICAnICAgIGJvcmRlci1yYWRpdXM6IDJweDtcXG4nICtcbiAgICAnfVxcbicgK1xuICAgICdcXG4nICtcbiAgICAnI2dvb2ctd20tcXQge1xcbicgK1xuICAgICcgICAgd2lkdGg6IDIyMHB4O1xcbicgK1xuICAgICcgICAgaGVpZ2h0OiAyMHB4O1xcbicgK1xuICAgICcgICAgcGFkZGluZzogNXB4O1xcbicgK1xuICAgICcgICAgbWFyZ2luOiA1cHggMTBweCAwIDA7XFxuJyArXG4gICAgJyAgICBib3gtc2hhZG93OiBpbnNldCAwIDFweCAxcHggI2NjYztcXG4nICtcbiAgICAnfVxcbicgK1xuICAgICdcXG4nICtcbiAgICAnI2dvb2ctd20tc2Ige1xcbicgK1xuICAgICcgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcbicgK1xuICAgICcgICAgaGVpZ2h0OiAzMnB4O1xcbicgK1xuICAgICcgICAgcGFkZGluZzogMCAxMHB4O1xcbicgK1xuICAgICcgICAgbWFyZ2luOiA1cHggMCAwO1xcbicgK1xuICAgICcgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcXG4nICtcbiAgICAnICAgIGN1cnNvcjogcG9pbnRlcjtcXG4nICtcbiAgICAnICAgIGJhY2tncm91bmQtY29sb3I6ICNmNWY1ZjU7XFxuJyArXG4gICAgJyAgICBiYWNrZ3JvdW5kLWltYWdlOiAtd2Via2l0LWxpbmVhci1ncmFkaWVudChyZ2JhKDI1NSwyNTUsMjU1LDApLCAjZjFmMWYxKTtcXG4nICtcbiAgICAnICAgIGJhY2tncm91bmQtaW1hZ2U6IC1tb3otbGluZWFyLWdyYWRpZW50KHJnYmEoMjU1LDI1NSwyNTUsMCksICNmMWYxZjEpO1xcbicgK1xuICAgICcgICAgYmFja2dyb3VuZC1pbWFnZTogLW1zLWxpbmVhci1ncmFkaWVudChyZ2JhKDI1NSwyNTUsMjU1LDApLCAjZjFmMWYxKTtcXG4nICtcbiAgICAnICAgIGJhY2tncm91bmQtaW1hZ2U6IC1vLWxpbmVhci1ncmFkaWVudChyZ2JhKDI1NSwyNTUsMjU1LDApLCAjZjFmMWYxKTtcXG4nICtcbiAgICAnICAgIC13ZWJraXQtYXBwZWFyYW5jZTogbm9uZTtcXG4nICtcbiAgICAnICAgIC1tb3otYXBwZWFyYW5jZTogbm9uZTtcXG4nICtcbiAgICAnICAgIGFwcGVhcmFuY2U6IG5vbmU7XFxuJyArXG4gICAgJ31cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyNnb29nLXdtLXNiOmhvdmVyLFxcbicgK1xuICAgICcjZ29vZy13bS1zYjpmb2N1cyB7XFxuJyArXG4gICAgJyAgICBib3JkZXItY29sb3I6ICNhYWE7XFxuJyArXG4gICAgJyAgICBib3gtc2hhZG93OiAwIDFweCAxcHggcmdiYSgwLCAwLCAwLCAwLjEpO1xcbicgK1xuICAgICcgICAgYmFja2dyb3VuZC1jb2xvcjogI2Y4ZjhmODtcXG4nICtcbiAgICAnfVxcbicgK1xuICAgICdcXG4nICtcbiAgICAnI2dvb2ctd20tcXQ6aG92ZXIsXFxuJyArXG4gICAgJyNnb29nLXdtLXF0OmZvY3VzIHtcXG4nICtcbiAgICAnICAgIGJvcmRlci1jb2xvcjogIzEwNWNiNjtcXG4nICtcbiAgICAnICAgIG91dGxpbmU6IDA7XFxuJyArXG4gICAgJyAgICBjb2xvcjogIzIyMjtcXG4nICtcbiAgICAnfVxcbicgK1xuICAgICdcXG4nICtcbiAgICAnaW5wdXQ6Oi1tb3otZm9jdXMtaW5uZXIge1xcbicgK1xuICAgICcgICAgcGFkZGluZzogMDtcXG4nICtcbiAgICAnICAgIGJvcmRlcjogMDtcXG4nICtcbiAgICAnfTwvc3R5bGU+PC9oZWFkPjxib2R5PjxkaXYgY2xhc3M9XCJjb250YWluZXJcIj48aDE+Tm90IGZvdW5kIDxzcGFuPjooPC9zcGFuPjwvaDE+PHA+U29ycnksIGJ1dCB0aGUgcGFnZSB5b3Ugd2VyZSB0cnlpbmcgdG8gdmlldyBkb2VzIG5vdCBleGlzdC48L3A+PHA+SXQgbG9va3MgbGlrZSB0aGlzIHdhcyB0aGUgcmVzdWx0IG9mIGVpdGhlcjo8L3A+PHVsPjxsaT5hIG1pc3R5cGVkIGFkZHJlc3M8L2xpPjxsaT5hbiBvdXQtb2YtZGF0ZSBsaW5rPC9saT48L3VsPjxzY3JpcHQ+dmFyIEdPT0dfRklYVVJMX0xBTkcgPSAobmF2aWdhdG9yLmxhbmd1YWdlIHx8IFxcJ1xcJykuc2xpY2UoMCwyKSxHT09HX0ZJWFVSTF9TSVRFID0gbG9jYXRpb24uaG9zdDs8L3NjcmlwdD48c2NyaXB0IHNyYz1cIi8vbGlua2hlbHAuY2xpZW50cy5nb29nbGUuY29tL3RicHJveHkvbGgvd20vZml4dXJsLmpzXCI+PC9zY3JpcHQ+PC9kaXY+PC9ib2R5PjwvaHRtbD4nKTtcbn1dKTtcbiJdfQ==
